(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Xf={exports:{}},Cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function yx(){if(n0)return Cl;n0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Cl.Fragment=e,Cl.jsx=n,Cl.jsxs=n,Cl}var r0;function vx(){return r0||(r0=1,Xf.exports=yx()),Xf.exports}var m=vx(),Wf={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function _x(){if(i0)return Re;i0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,ie={};function X(D,ne,le){this.props=D,this.context=ne,this.refs=ie,this.updater=le||U}X.prototype.isReactComponent={},X.prototype.setState=function(D,ne){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ne,"setState")},X.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function F(){}F.prototype=X.prototype;function re(D,ne,le){this.props=D,this.context=ne,this.refs=ie,this.updater=le||U}var te=re.prototype=new F;te.constructor=re,Y(te,X.prototype),te.isPureReactComponent=!0;var ce=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function j(D,ne,le,se,ve,Ce){return le=Ce.ref,{$$typeof:i,type:D,key:ne,ref:le!==void 0?le:null,props:Ce}}function R(D,ne){return j(D.type,ne,void 0,void 0,void 0,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function M(D){var ne={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(le){return ne[le]})}var k=/\/+/g;function P(D,ne){return typeof D=="object"&&D!==null&&D.key!=null?M(""+D.key):ne.toString(36)}function C(){}function Pt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(ne){D.status==="pending"&&(D.status="fulfilled",D.value=ne)},function(ne){D.status==="pending"&&(D.status="rejected",D.reason=ne)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ot(D,ne,le,se,ve){var Ce=typeof D;(Ce==="undefined"||Ce==="boolean")&&(D=null);var xe=!1;if(D===null)xe=!0;else switch(Ce){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(D.$$typeof){case i:case e:xe=!0;break;case T:return xe=D._init,ot(xe(D._payload),ne,le,se,ve)}}if(xe)return ve=ve(D),xe=se===""?"."+P(D,0):se,ce(ve)?(le="",xe!=null&&(le=xe.replace(k,"$&/")+"/"),ot(ve,ne,le,"",function(Jn){return Jn})):ve!=null&&(N(ve)&&(ve=R(ve,le+(ve.key==null||D&&D.key===ve.key?"":(""+ve.key).replace(k,"$&/")+"/")+xe)),ne.push(ve)),1;xe=0;var Nt=se===""?".":se+":";if(ce(D))for(var Je=0;Je<D.length;Je++)se=D[Je],Ce=Nt+P(se,Je),xe+=ot(se,ne,le,Ce,ve);else if(Je=S(D),typeof Je=="function")for(D=Je.call(D),Je=0;!(se=D.next()).done;)se=se.value,Ce=Nt+P(se,Je++),xe+=ot(se,ne,le,Ce,ve);else if(Ce==="object"){if(typeof D.then=="function")return ot(Pt(D),ne,le,se,ve);throw ne=String(D),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return xe}function K(D,ne,le){if(D==null)return D;var se=[],ve=0;return ot(D,se,"","",function(Ce){return ne.call(le,Ce,ve++)}),se}function oe(D){if(D._status===-1){var ne=D._result;ne=ne(),ne.then(function(le){(D._status===0||D._status===-1)&&(D._status=1,D._result=le)},function(le){(D._status===0||D._status===-1)&&(D._status=2,D._result=le)}),D._status===-1&&(D._status=0,D._result=ne)}if(D._status===1)return D._result.default;throw D._result}var pe=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Be(){}return Re.Children={map:K,forEach:function(D,ne,le){K(D,function(){ne.apply(this,arguments)},le)},count:function(D){var ne=0;return K(D,function(){ne++}),ne},toArray:function(D){return K(D,function(ne){return ne})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Re.Component=X,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=re,Re.StrictMode=s,Re.Suspense=y,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Re.__COMPILER_RUNTIME={__proto__:null,c:function(D){return G.H.useMemoCache(D)}},Re.cache=function(D){return function(){return D.apply(null,arguments)}},Re.cloneElement=function(D,ne,le){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var se=Y({},D.props),ve=D.key,Ce=void 0;if(ne!=null)for(xe in ne.ref!==void 0&&(Ce=void 0),ne.key!==void 0&&(ve=""+ne.key),ne)!fe.call(ne,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ne.ref===void 0||(se[xe]=ne[xe]);var xe=arguments.length-2;if(xe===1)se.children=le;else if(1<xe){for(var Nt=Array(xe),Je=0;Je<xe;Je++)Nt[Je]=arguments[Je+2];se.children=Nt}return j(D.type,ve,void 0,void 0,Ce,se)},Re.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Re.createElement=function(D,ne,le){var se,ve={},Ce=null;if(ne!=null)for(se in ne.key!==void 0&&(Ce=""+ne.key),ne)fe.call(ne,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ve[se]=ne[se]);var xe=arguments.length-2;if(xe===1)ve.children=le;else if(1<xe){for(var Nt=Array(xe),Je=0;Je<xe;Je++)Nt[Je]=arguments[Je+2];ve.children=Nt}if(D&&D.defaultProps)for(se in xe=D.defaultProps,xe)ve[se]===void 0&&(ve[se]=xe[se]);return j(D,Ce,void 0,void 0,null,ve)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(D){return{$$typeof:g,render:D}},Re.isValidElement=N,Re.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:oe}},Re.memo=function(D,ne){return{$$typeof:v,type:D,compare:ne===void 0?null:ne}},Re.startTransition=function(D){var ne=G.T,le={};G.T=le;try{var se=D(),ve=G.S;ve!==null&&ve(le,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Be,pe)}catch(Ce){pe(Ce)}finally{G.T=ne}},Re.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Re.use=function(D){return G.H.use(D)},Re.useActionState=function(D,ne,le){return G.H.useActionState(D,ne,le)},Re.useCallback=function(D,ne){return G.H.useCallback(D,ne)},Re.useContext=function(D){return G.H.useContext(D)},Re.useDebugValue=function(){},Re.useDeferredValue=function(D,ne){return G.H.useDeferredValue(D,ne)},Re.useEffect=function(D,ne,le){var se=G.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(D,ne)},Re.useId=function(){return G.H.useId()},Re.useImperativeHandle=function(D,ne,le){return G.H.useImperativeHandle(D,ne,le)},Re.useInsertionEffect=function(D,ne){return G.H.useInsertionEffect(D,ne)},Re.useLayoutEffect=function(D,ne){return G.H.useLayoutEffect(D,ne)},Re.useMemo=function(D,ne){return G.H.useMemo(D,ne)},Re.useOptimistic=function(D,ne){return G.H.useOptimistic(D,ne)},Re.useReducer=function(D,ne,le){return G.H.useReducer(D,ne,le)},Re.useRef=function(D){return G.H.useRef(D)},Re.useState=function(D){return G.H.useState(D)},Re.useSyncExternalStore=function(D,ne,le){return G.H.useSyncExternalStore(D,ne,le)},Re.useTransition=function(){return G.H.useTransition()},Re.version="19.1.1",Re}var s0;function Gm(){return s0||(s0=1,Wf.exports=_x()),Wf.exports}var de=Gm(),Zf={exports:{}},Nl={},Jf={exports:{}},em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function bx(){return a0||(a0=1,(function(i){function e(K,oe){var pe=K.length;K.push(oe);e:for(;0<pe;){var Be=pe-1>>>1,D=K[Be];if(0<o(D,oe))K[Be]=oe,K[pe]=D,pe=Be;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var oe=K[0],pe=K.pop();if(pe!==oe){K[0]=pe;e:for(var Be=0,D=K.length,ne=D>>>1;Be<ne;){var le=2*(Be+1)-1,se=K[le],ve=le+1,Ce=K[ve];if(0>o(se,pe))ve<D&&0>o(Ce,se)?(K[Be]=Ce,K[ve]=pe,Be=ve):(K[Be]=se,K[le]=pe,Be=le);else if(ve<D&&0>o(Ce,pe))K[Be]=Ce,K[ve]=pe,Be=ve;else break e}}return oe}function o(K,oe){var pe=K.sortIndex-oe.sortIndex;return pe!==0?pe:K.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();i.unstable_now=function(){return d.now()-g}}var y=[],v=[],T=1,A=null,S=3,U=!1,Y=!1,ie=!1,X=!1,F=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ce(K){for(var oe=n(v);oe!==null;){if(oe.callback===null)s(v);else if(oe.startTime<=K)s(v),oe.sortIndex=oe.expirationTime,e(y,oe);else break;oe=n(v)}}function G(K){if(ie=!1,ce(K),!Y)if(n(y)!==null)Y=!0,fe||(fe=!0,P());else{var oe=n(v);oe!==null&&ot(G,oe.startTime-K)}}var fe=!1,j=-1,R=5,N=-1;function M(){return X?!0:!(i.unstable_now()-N<R)}function k(){if(X=!1,fe){var K=i.unstable_now();N=K;var oe=!0;try{e:{Y=!1,ie&&(ie=!1,re(j),j=-1),U=!0;var pe=S;try{t:{for(ce(K),A=n(y);A!==null&&!(A.expirationTime>K&&M());){var Be=A.callback;if(typeof Be=="function"){A.callback=null,S=A.priorityLevel;var D=Be(A.expirationTime<=K);if(K=i.unstable_now(),typeof D=="function"){A.callback=D,ce(K),oe=!0;break t}A===n(y)&&s(y),ce(K)}else s(y);A=n(y)}if(A!==null)oe=!0;else{var ne=n(v);ne!==null&&ot(G,ne.startTime-K),oe=!1}}break e}finally{A=null,S=pe,U=!1}oe=void 0}}finally{oe?P():fe=!1}}}var P;if(typeof te=="function")P=function(){te(k)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Pt=C.port2;C.port1.onmessage=k,P=function(){Pt.postMessage(null)}}else P=function(){F(k,0)};function ot(K,oe){j=F(function(){K(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(K){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var pe=S;S=oe;try{return K()}finally{S=pe}},i.unstable_requestPaint=function(){X=!0},i.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var pe=S;S=K;try{return oe()}finally{S=pe}},i.unstable_scheduleCallback=function(K,oe,pe){var Be=i.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Be+pe:Be):pe=Be,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=pe+D,K={id:T++,callback:oe,priorityLevel:K,startTime:pe,expirationTime:D,sortIndex:-1},pe>Be?(K.sortIndex=pe,e(v,K),n(y)===null&&K===n(v)&&(ie?(re(j),j=-1):ie=!0,ot(G,pe-Be))):(K.sortIndex=D,e(y,K),Y||U||(Y=!0,fe||(fe=!0,P()))),K},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(K){var oe=S;return function(){var pe=S;S=oe;try{return K.apply(this,arguments)}finally{S=pe}}}})(em)),em}var o0;function Tx(){return o0||(o0=1,Jf.exports=bx()),Jf.exports}var tm={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function Ex(){if(l0)return Kt;l0=1;var i=Gm();function e(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(y,v,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:y,containerInfo:v,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Kt.createPortal=function(y,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return c(y,v,null,T)},Kt.flushSync=function(y){var v=d.T,T=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=v,s.p=T,s.d.f()}},Kt.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(y,v))},Kt.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Kt.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var T=v.as,A=g(T,v.crossOrigin),S=typeof v.integrity=="string"?v.integrity:void 0,U=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?s.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:U}):T==="script"&&s.d.X(y,{crossOrigin:A,integrity:S,fetchPriority:U,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Kt.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=g(v.as,v.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(y)},Kt.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,A=g(T,v.crossOrigin);s.d.L(y,T,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Kt.preloadModule=function(y,v){if(typeof y=="string")if(v){var T=g(v.as,v.crossOrigin);s.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(y)},Kt.requestFormReset=function(y){s.d.r(y)},Kt.unstable_batchedUpdates=function(y,v){return y(v)},Kt.useFormState=function(y,v,T){return d.H.useFormState(y,v,T)},Kt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Kt.version="19.1.1",Kt}var c0;function wx(){if(c0)return tm.exports;c0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),tm.exports=Ex(),tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function xx(){if(u0)return Nl;u0=1;var i=Tx(),e=Gm(),n=wx();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function y(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),t;if(f===l)return g(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var b=!1,E=h.child;E;){if(E===a){b=!0,a=h,l=f;break}if(E===l){b=!0,l=h,a=f;break}E=E.sibling}if(!b){for(E=f.child;E;){if(E===a){b=!0,a=f,l=h;break}if(E===l){b=!0,l=f,a=h;break}E=E.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function v(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=v(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Pt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case X:return"Profiler";case ie:return"StrictMode";case G:return"Suspense";case fe:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case te:return(t.displayName||"Context")+".Provider";case re:return(t._context.displayName||"Context")+".Consumer";case ce:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return r=t.displayName||null,r!==null?r:Pt(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return Pt(t(r))}catch{}}return null}var ot=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Be=[],D=-1;function ne(t){return{current:t}}function le(t){0>D||(t.current=Be[D],Be[D]=null,D--)}function se(t,r){D++,Be[D]=t.current,t.current=r}var ve=ne(null),Ce=ne(null),xe=ne(null),Nt=ne(null);function Je(t,r){switch(se(xe,r),se(Ce,t),se(ve,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Nv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Nv(r),t=Dv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}le(ve),se(ve,t)}function Jn(){le(ve),le(Ce),le(xe)}function si(t){t.memoizedState!==null&&se(Nt,t);var r=ve.current,a=Dv(r,t.type);r!==a&&(se(Ce,t),se(ve,a))}function Sr(t){Ce.current===t&&(le(ve),le(Ce)),Nt.current===t&&(le(Nt),xl._currentValue=pe)}var ts=Object.prototype.hasOwnProperty,ns=i.unstable_scheduleCallback,rs=i.unstable_cancelCallback,To=i.unstable_shouldYield,fc=i.unstable_requestPaint,wn=i.unstable_now,$h=i.unstable_getCurrentPriorityLevel,Eo=i.unstable_ImmediatePriority,ta=i.unstable_UserBlockingPriority,is=i.unstable_NormalPriority,Xh=i.unstable_LowPriority,na=i.unstable_IdlePriority,wo=i.log,mc=i.unstable_setDisableYieldValue,lt=null,Ge=null;function hn(t){if(typeof wo=="function"&&mc(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(lt,t)}catch{}}var Qt=Math.clz32?Math.clz32:ss,gc=Math.log,Wh=Math.LN2;function ss(t){return t>>>=0,t===0?32:31-(gc(t)/Wh|0)|0}var as=256,os=4194304;function zn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ra(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~f,l!==0?h=zn(l):(b&=E,b!==0?h=zn(b):a||(a=E&~t,a!==0&&(h=zn(a))))):(E=l&~f,E!==0?h=zn(E):b!==0?h=zn(b):a||(a=l&~t,a!==0&&(h=zn(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function ls(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function xo(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function So(){var t=as;return as<<=1,(as&4194048)===0&&(as=256),t}function Ao(){var t=os;return os<<=1,(os&62914560)===0&&(os=4194304),t}function Ar(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Rr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ro(t,r,a,l,h,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,I=t.expirationTimes,B=t.hiddenUpdates;for(a=b&~a;0<a;){var $=31-Qt(a),J=1<<$;E[$]=0,I[$]=-1;var q=B[$];if(q!==null)for(B[$]=null,$=0;$<q.length;$++){var H=q[$];H!==null&&(H.lane&=-536870913)}a&=~J}l!==0&&er(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~r))}function er(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Qt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Io(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Qt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function ai(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ia(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function oi(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:Xv(t.type))}function pc(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var rt=Math.random().toString(36).slice(2),xt="__reactFiber$"+rt,yt="__reactProps$"+rt,xn="__reactContainer$"+rt,Co="__reactEvents$"+rt,Zh="__reactListeners$"+rt,li="__reactHandles$"+rt,yc="__reactResources$"+rt,cs="__reactMarker$"+rt;function ci(t){delete t[xt],delete t[yt],delete t[Co],delete t[Zh],delete t[li]}function Ir(t){var r=t[xt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[xn]||a[xt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=kv(t);t!==null;){if(a=t[xt])return a;t=kv(t)}return r}t=a,a=t.parentNode}return null}function tr(t){if(t=t[xt]||t[xn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function nr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Jt(t){var r=t[yc];return r||(r=t[yc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ht(t){t[cs]=!0}var No=new Set,sa={};function Bn(t,r){Cr(t,r),Cr(t+"Capture",r)}function Cr(t,r){for(sa[t]=r,t=0;t<r.length;t++)No.add(r[t])}var vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_c={},us={};function bc(t){return ts.call(us,t)?!0:ts.call(_c,t)?!1:vc.test(t)?us[t]=!0:(_c[t]=!0,!1)}function ui(t,r,a){if(bc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function rr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Ut(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var hs,Tc;function Nr(t){if(hs===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);hs=r&&r[1]||"",Tc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+t+Tc}var aa=!1;function oa(t,r){if(!t||aa)return"";aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(H){var q=H}Reflect.construct(t,[],J)}else{try{J.call()}catch(H){q=H}t.call(J.prototype)}}else{try{throw Error()}catch(H){q=H}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],E=f[1];if(b&&E){var I=b.split(`
`),B=E.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===B.length)for(l=I.length-1,h=B.length-1;1<=l&&0<=h&&I[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==B[h]){var $=`
`+I[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=h);break}}}finally{aa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Nr(a):""}function Do(t){switch(t.tag){case 26:case 27:case 5:return Nr(t.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 15:return oa(t.type,!1);case 11:return oa(t.type.render,!1);case 1:return oa(t.type,!0);case 31:return Nr("Activity");default:return""}}function la(t){try{var r="";do r+=Do(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Jh(t){var r=jo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ca(t){t._valueTracker||(t._valueTracker=Jh(t))}function Oo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=jo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ds(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ed=/[\n"\\]/g;function vt(t){return t.replace(ed,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function dn(t,r,a,l,h,f,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+en(r)):t.value!==""+en(r)&&(t.value=""+en(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?hi(t,b,en(r)):a!=null?hi(t,b,en(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+en(E):t.removeAttribute("name")}function fs(t,r,a,l,h,f,b,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+en(a):"",r=r!=null?""+en(r):a,E||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function hi(t,r,a){r==="number"&&ds(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Dr(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+en(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Ke(t,r,a){if(r!=null&&(r=""+en(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+en(a):""}function ms(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(ot(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=en(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Sn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||gs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Mo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Ec(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Ec(t,f,r[f])}function ko(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var td=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(t){return nd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var jr=null;function An(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Or=null,Mr=null;function Vo(t){var r=tr(t);if(r&&(t=r.stateNode)){var a=t[yt]||null;e:switch(t=r.stateNode,r.type){case"input":if(dn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[yt]||null;if(!h)throw Error(s(90));dn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Oo(l)}break e;case"textarea":Ke(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Dr(t,!!a.multiple,r,!1)}}}var ir=!1;function wc(t,r,a){if(ir)return t(r,a);ir=!0;try{var l=t(r);return l}finally{if(ir=!1,(Or!==null||Mr!==null)&&(pu(),Or&&(r=Or,t=Mr,Mr=Or=null,Vo(r),t)))for(r=0;r<t.length;r++)Vo(t[r])}}function ps(t,r){var a=t.stateNode;if(a===null)return null;var l=a[yt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(qn)try{var ys={};Object.defineProperty(ys,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",ys,ys),window.removeEventListener("test",ys,ys)}catch{Rn=!1}var sr=null,di=null,kr=null;function Po(){if(kr)return kr;var t,r=di,a=r.length,l,h="value"in sr?sr.value:sr.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&r[a-l]===h[f-l];l++);return kr=h.slice(t,1<l?1-l:void 0)}function ar(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function or(){return!0}function Uo(){return!1}function Dt(t){function r(a,l,h,f,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?or:Uo,this.isPropagationStopped=Uo,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),r}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Dt(He),vs=T({},He,{view:0,detail:0}),xc=Dt(vs),da,fa,lr,_s=T({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lr&&(lr&&t.type==="mousemove"?(da=t.screenX-lr.screenX,fa=t.screenY-lr.screenY):fa=da=0,lr=t),da)},movementY:function(t){return"movementY"in t?t.movementY:fa}}),In=Dt(_s),Sc=T({},_s,{dataTransfer:0}),rd=Dt(Sc),bs=T({},vs,{relatedTarget:0}),ma=Dt(bs),Lo=T({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),ga=Dt(Lo),Ac=T({},He,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pa=Dt(Ac),id=T({},He,{data:0}),zo=Dt(id),Ts={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ic[t])?!!r[t]:!1}function Es(){return Bo}var Cc=T({},vs,{key:function(t){if(t.key){var r=Ts[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ar(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(t){return t.type==="keypress"?ar(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ar(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ya=Dt(Cc),Nc=T({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qo=Dt(Nc),Vr=T({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),Dc=Dt(Vr),jc=T({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oc=Dt(jc),Mc=T({},_s,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),va=Dt(Mc),tn=T({},He,{newState:0,oldState:0}),kc=Dt(tn),Vc=[9,13,27,32],cr=qn&&"CompositionEvent"in window,u=null;qn&&"documentMode"in document&&(u=document.documentMode);var p=qn&&"TextEvent"in window&&!u,_=qn&&(!cr||u&&8<u&&11>=u),w=" ",L=!1;function Q(t,r){switch(t){case"keyup":return Vc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ve=!1;function St(t,r){switch(t){case"compositionend":return ae(r);case"keypress":return r.which!==32?null:(L=!0,w);case"textInput":return t=r.data,t===w&&L?null:t;default:return null}}function Pe(t,r){if(Ve)return t==="compositionend"||!cr&&Q(t,r)?(t=Po(),kr=di=sr=null,Ve=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function At(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!jt[t.type]:r==="textarea"}function Pr(t,r,a,l){Or?Mr?Mr.push(l):Mr=[l]:Or=l,r=Eu(r,"onChange"),0<r.length&&(a=new ha("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Lt=null,ur=null;function Ho(t){Sv(t,0)}function Pc(t){var r=nr(t);if(Oo(r))return t}function Qg(t,r){if(t==="change")return r}var Yg=!1;if(qn){var sd;if(qn){var ad="oninput"in document;if(!ad){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),ad=typeof Kg.oninput=="function"}sd=ad}else sd=!1;Yg=sd&&(!document.documentMode||9<document.documentMode)}function $g(){Lt&&(Lt.detachEvent("onpropertychange",Xg),ur=Lt=null)}function Xg(t){if(t.propertyName==="value"&&Pc(ur)){var r=[];Pr(r,ur,t,An(t)),wc(Ho,r)}}function YE(t,r,a){t==="focusin"?($g(),Lt=r,ur=a,Lt.attachEvent("onpropertychange",Xg)):t==="focusout"&&$g()}function KE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pc(ur)}function $E(t,r){if(t==="click")return Pc(r)}function XE(t,r){if(t==="input"||t==="change")return Pc(r)}function WE(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var fn=typeof Object.is=="function"?Object.is:WE;function Fo(t,r){if(fn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ts.call(r,h)||!fn(t[h],r[h]))return!1}return!0}function Wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zg(t,r){var a=Wg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wg(a)}}function Jg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Jg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function ep(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ds(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ds(t.document)}return r}function od(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var ZE=qn&&"documentMode"in document&&11>=document.documentMode,_a=null,ld=null,Go=null,cd=!1;function tp(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cd||_a==null||_a!==ds(l)||(l=_a,"selectionStart"in l&&od(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Go&&Fo(Go,l)||(Go=l,l=Eu(ld,"onSelect"),0<l.length&&(r=new ha("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=_a)))}function ws(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var ba={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},ud={},np={};qn&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function xs(t){if(ud[t])return ud[t];if(!ba[t])return t;var r=ba[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in np)return ud[t]=r[a];return t}var rp=xs("animationend"),ip=xs("animationiteration"),sp=xs("animationstart"),JE=xs("transitionrun"),ew=xs("transitionstart"),tw=xs("transitioncancel"),ap=xs("transitionend"),op=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function Hn(t,r){op.set(t,r),Bn(r,[t])}var lp=new WeakMap;function Cn(t,r){if(typeof t=="object"&&t!==null){var a=lp.get(t);return a!==void 0?a:(r={value:t,source:r,stack:la(r)},lp.set(t,r),r)}return{value:t,source:r,stack:la(r)}}var Nn=[],Ta=0,dd=0;function Uc(){for(var t=Ta,r=dd=Ta=0;r<t;){var a=Nn[r];Nn[r++]=null;var l=Nn[r];Nn[r++]=null;var h=Nn[r];Nn[r++]=null;var f=Nn[r];if(Nn[r++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&cp(a,h,f)}}function Lc(t,r,a,l){Nn[Ta++]=t,Nn[Ta++]=r,Nn[Ta++]=a,Nn[Ta++]=l,dd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function fd(t,r,a,l){return Lc(t,r,a,l),zc(t)}function Ea(t,r){return Lc(t,null,null,r),zc(t)}function cp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-Qt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function zc(t){if(50<pl)throw pl=0,bf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var wa={};function nw(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,r,a,l){return new nw(t,r,a,l)}function md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ur(t,r){var a=t.alternate;return a===null?(a=mn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function up(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Bc(t,r,a,l,h,f){var b=0;if(l=t,typeof t=="function")md(t)&&(b=1);else if(typeof t=="string")b=ix(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=mn(31,a,r,h),t.elementType=N,t.lanes=f,t;case Y:return Ss(a.children,h,f,r);case ie:b=8,h|=24;break;case X:return t=mn(12,a,r,h|2),t.elementType=X,t.lanes=f,t;case G:return t=mn(13,a,r,h),t.elementType=G,t.lanes=f,t;case fe:return t=mn(19,a,r,h),t.elementType=fe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:case te:b=10;break e;case re:b=9;break e;case ce:b=11;break e;case j:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=mn(b,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Ss(t,r,a,l){return t=mn(7,t,l,r),t.lanes=a,t}function gd(t,r,a){return t=mn(6,t,null,r),t.lanes=a,t}function pd(t,r,a){return r=mn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var xa=[],Sa=0,qc=null,Hc=0,Dn=[],jn=0,As=null,Lr=1,zr="";function Rs(t,r){xa[Sa++]=Hc,xa[Sa++]=qc,qc=t,Hc=r}function hp(t,r,a){Dn[jn++]=Lr,Dn[jn++]=zr,Dn[jn++]=As,As=t;var l=Lr;t=zr;var h=32-Qt(l)-1;l&=~(1<<h),a+=1;var f=32-Qt(r)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Lr=1<<32-Qt(r)+h|a<<h|l,zr=f+t}else Lr=1<<f|a<<h|l,zr=t}function yd(t){t.return!==null&&(Rs(t,1),hp(t,1,0))}function vd(t){for(;t===qc;)qc=xa[--Sa],xa[Sa]=null,Hc=xa[--Sa],xa[Sa]=null;for(;t===As;)As=Dn[--jn],Dn[jn]=null,zr=Dn[--jn],Dn[jn]=null,Lr=Dn[--jn],Dn[jn]=null}var nn=null,ct=null,qe=!1,Is=null,hr=!1,_d=Error(s(519));function Cs(t){var r=Error(s(418,""));throw Ko(Cn(r,t)),_d}function dp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[xt]=t,r[yt]=l,a){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(a=0;a<vl.length;a++)je(vl[a],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":je("invalid",r),fs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ca(r);break;case"select":je("invalid",r);break;case"textarea":je("invalid",r),ms(r,l.value,l.defaultValue,l.children),ca(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Cv(r.textContent,a)?(l.popover!=null&&(je("beforetoggle",r),je("toggle",r)),l.onScroll!=null&&je("scroll",r),l.onScrollEnd!=null&&je("scrollend",r),l.onClick!=null&&(r.onclick=wu),r=!0):r=!1,r||Cs(t)}function fp(t){for(nn=t.return;nn;)switch(nn.tag){case 5:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:nn=nn.return}}function Qo(t){if(t!==nn)return!1;if(!qe)return fp(t),qe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Vf(t.type,t.memoizedProps)),a=!a),a&&ct&&Cs(t),fp(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){ct=Gn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}ct=null}}else r===27?(r=ct,Ii(t.type)?(t=zf,zf=null,ct=t):ct=r):ct=nn?Gn(t.stateNode.nextSibling):null;return!0}function Yo(){ct=nn=null,qe=!1}function mp(){var t=Is;return t!==null&&(an===null?an=t:an.push.apply(an,t),Is=null),t}function Ko(t){Is===null?Is=[t]:Is.push(t)}var bd=ne(null),Ns=null,Br=null;function fi(t,r,a){se(bd,r._currentValue),r._currentValue=a}function qr(t){t._currentValue=bd.current,le(bd)}function Td(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Ed(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var I=0;I<r.length;I++)if(E.context===r[I]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Td(f.return,a,t),l||(b=null);break e}f=E.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),Td(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function $o(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=h.type;fn(h.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(h===Nt.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(xl):t=[xl])}h=h.return}t!==null&&Ed(r,t,a,l),r.flags|=262144}function Fc(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ds(t){Ns=t,Br=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Yt(t){return gp(Ns,t)}function Gc(t,r){return Ns===null&&Ds(t),gp(t,r)}function gp(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Br===null){if(t===null)throw Error(s(308));Br=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Br=Br.next=r;return a}var rw=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},iw=i.unstable_scheduleCallback,sw=i.unstable_NormalPriority,Rt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wd(){return{controller:new rw,data:new Map,refCount:0}}function Xo(t){t.refCount--,t.refCount===0&&iw(sw,function(){t.controller.abort()})}var Wo=null,xd=0,Aa=0,Ra=null;function aw(t,r){if(Wo===null){var a=Wo=[];xd=0,Aa=Rf(),Ra={status:"pending",value:void 0,then:function(l){a.push(l)}}}return xd++,r.then(pp,pp),r}function pp(){if(--xd===0&&Wo!==null){Ra!==null&&(Ra.status="fulfilled");var t=Wo;Wo=null,Aa=0,Ra=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function ow(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var yp=K.S;K.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&aw(t,r),yp!==null&&yp(t,r)};var js=ne(null);function Sd(){var t=js.current;return t!==null?t:et.pooledCache}function Qc(t,r){r===null?se(js,js.current):se(js,r.pool)}function vp(){var t=Sd();return t===null?null:{parent:Rt._currentValue,pool:t}}var Zo=Error(s(460)),_p=Error(s(474)),Yc=Error(s(542)),Ad={then:function(){}};function bp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Kc(){}function Tp(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Kc,Kc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,wp(t),t;default:if(typeof r.status=="string")r.then(Kc,Kc);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,wp(t),t}throw Jo=r,Zo}}var Jo=null;function Ep(){if(Jo===null)throw Error(s(459));var t=Jo;return Jo=null,t}function wp(t){if(t===Zo||t===Yc)throw Error(s(483))}var mi=!1;function Rd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function gi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=zc(t),cp(t,null,a),r}return Lc(t,l,r,a),zc(t)}function el(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Io(t,a)}}function Cd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Nd=!1;function tl(){if(Nd){var t=Ra;if(t!==null)throw t}}function nl(t,r,a,l){Nd=!1;var h=t.updateQueue;mi=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var I=E,B=I.next;I.next=null,b===null?f=B:b.next=B,b=I;var $=t.alternate;$!==null&&($=$.updateQueue,E=$.lastBaseUpdate,E!==b&&(E===null?$.firstBaseUpdate=B:E.next=B,$.lastBaseUpdate=I))}if(f!==null){var J=h.baseState;b=0,$=B=I=null,E=f;do{var q=E.lane&-536870913,H=q!==E.lane;if(H?(Ue&q)===q:(l&q)===q){q!==0&&q===Aa&&(Nd=!0),$!==null&&($=$.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ee=t,_e=E;q=r;var We=a;switch(_e.tag){case 1:if(Ee=_e.payload,typeof Ee=="function"){J=Ee.call(We,J,q);break e}J=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=_e.payload,q=typeof Ee=="function"?Ee.call(We,J,q):Ee,q==null)break e;J=T({},J,q);break e;case 2:mi=!0}}q=E.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},$===null?(B=$=H,I=J):$=$.next=H,b|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;H=E,E=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);$===null&&(I=J),h.baseState=I,h.firstBaseUpdate=B,h.lastBaseUpdate=$,f===null&&(h.shared.lanes=0),xi|=b,t.lanes=b,t.memoizedState=J}}function xp(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Sp(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)xp(a[t],r)}var Ia=ne(null),$c=ne(0);function Ap(t,r){t=$r,se($c,t),se(Ia,r),$r=t|r.baseLanes}function Dd(){se($c,$r),se(Ia,Ia.current)}function jd(){$r=$c.current,le(Ia),le($c)}var yi=0,Ie=null,$e=null,_t=null,Xc=!1,Ca=!1,Os=!1,Wc=0,rl=0,Na=null,lw=0;function dt(){throw Error(s(321))}function Od(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!fn(t[a],r[a]))return!1;return!0}function Md(t,r,a,l,h,f){return yi=f,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,K.H=t===null||t.memoizedState===null?cy:uy,Os=!1,f=a(l,h),Os=!1,Ca&&(f=Ip(r,a,l,h)),Rp(t),f}function Rp(t){K.H=ru;var r=$e!==null&&$e.next!==null;if(yi=0,_t=$e=Ie=null,Xc=!1,rl=0,Na=null,r)throw Error(s(300));t===null||Ot||(t=t.dependencies,t!==null&&Fc(t)&&(Ot=!0))}function Ip(t,r,a,l){Ie=t;var h=0;do{if(Ca&&(Na=null),rl=0,Ca=!1,25<=h)throw Error(s(301));if(h+=1,_t=$e=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=gw,f=r(a,l)}while(Ca);return f}function cw(){var t=K.H,r=t.useState()[0];return r=typeof r.then=="function"?il(r):r,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(Ie.flags|=1024),r}function kd(){var t=Wc!==0;return Wc=0,t}function Vd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Pd(t){if(Xc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Xc=!1}yi=0,_t=$e=Ie=null,Ca=!1,rl=Wc=0,Na=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ie.memoizedState=_t=t:_t=_t.next=t,_t}function bt(){if($e===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var r=_t===null?Ie.memoizedState:_t.next;if(r!==null)_t=r,$e=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},_t===null?Ie.memoizedState=_t=t:_t=_t.next=t}return _t}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function il(t){var r=rl;return rl+=1,Na===null&&(Na=[]),t=Tp(Na,t,r),r=Ie,(_t===null?r.memoizedState:_t.next)===null&&(r=r.alternate,K.H=r===null||r.memoizedState===null?cy:uy),t}function Zc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return il(t);if(t.$$typeof===te)return Yt(t)}throw Error(s(438,String(t)))}function Ld(t){var r=null,a=Ie.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ud(),Ie.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=M;return r.index++,a}function Hr(t,r){return typeof r=="function"?r(t):r}function Jc(t){var r=bt();return zd(r,$e,t)}function zd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var E=b=null,I=null,B=r,$=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(Ue&J)===J:(yi&J)===J){var q=B.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===Aa&&($=!0);else if((yi&q)===q){B=B.next,q===Aa&&($=!0);continue}else J={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(E=I=J,b=f):I=I.next=J,Ie.lanes|=q,xi|=q;J=B.action,Os&&a(f,J),f=B.hasEagerState?B.eagerState:a(f,J)}else q={lane:J,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(E=I=q,b=f):I=I.next=q,Ie.lanes|=J,xi|=J;B=B.next}while(B!==null&&B!==r);if(I===null?b=f:I.next=E,!fn(f,t.memoizedState)&&(Ot=!0,$&&(a=Ra,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=I,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Bd(t){var r=bt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);fn(f,r.memoizedState)||(Ot=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Cp(t,r,a){var l=Ie,h=bt(),f=qe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!fn(($e||h).memoizedState,a);b&&(h.memoizedState=a,Ot=!0),h=h.queue;var E=jp.bind(null,l,h,t);if(sl(2048,8,E,[t]),h.getSnapshot!==r||b||_t!==null&&_t.memoizedState.tag&1){if(l.flags|=2048,Da(9,eu(),Dp.bind(null,l,h,a,r),null),et===null)throw Error(s(349));f||(yi&124)!==0||Np(l,r,a)}return a}function Np(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ie.updateQueue,r===null?(r=Ud(),Ie.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Dp(t,r,a,l){r.value=a,r.getSnapshot=l,Op(r)&&Mp(t)}function jp(t,r,a){return a(function(){Op(r)&&Mp(t)})}function Op(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!fn(t,a)}catch{return!0}}function Mp(t){var r=Ea(t,2);r!==null&&_n(r,t,2)}function qd(t){var r=rn();if(typeof t=="function"){var a=t;if(t=a(),Os){hn(!0);try{a()}finally{hn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:t},r}function kp(t,r,a,l){return t.baseState=a,zd(t,$e,typeof l=="function"?l:Hr)}function uw(t,r,a,l,h){if(nu(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};K.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,Vp(r,f)):(f.next=a.next,r.pending=a.next=f)}}function Vp(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=K.T,b={};K.T=b;try{var E=a(h,l),I=K.S;I!==null&&I(b,E),Pp(t,r,E)}catch(B){Hd(t,r,B)}finally{K.T=f}}else try{f=a(h,l),Pp(t,r,f)}catch(B){Hd(t,r,B)}}function Pp(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Up(t,r,l)},function(l){return Hd(t,r,l)}):Up(t,r,a)}function Up(t,r,a){r.status="fulfilled",r.value=a,Lp(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Vp(t,a)))}function Hd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Lp(r),r=r.next;while(r!==l)}t.action=null}function Lp(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function zp(t,r){return r}function Bp(t,r){if(qe){var a=et.formState;if(a!==null){e:{var l=Ie;if(qe){if(ct){t:{for(var h=ct,f=hr;h.nodeType!==8;){if(!f){h=null;break t}if(h=Gn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ct=Gn(h.nextSibling),l=h.data==="F!";break e}}Cs(l)}l=!1}l&&(r=a[0])}}return a=rn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:r},a.queue=l,a=ay.bind(null,Ie,l),l.dispatch=a,l=qd(!1),f=Kd.bind(null,Ie,!1,l.queue),l=rn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=uw.bind(null,Ie,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function qp(t){var r=bt();return Hp(r,$e,t)}function Hp(t,r,a){if(r=zd(t,r,zp)[0],t=Jc(Hr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=il(r)}catch(b){throw b===Zo?Yc:b}else l=r;r=bt();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(Ie.flags|=2048,Da(9,eu(),hw.bind(null,h,a),null)),[l,f,t]}function hw(t,r){t.action=r}function Fp(t){var r=bt(),a=$e;if(a!==null)return Hp(r,a,t);bt(),r=r.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Da(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=Ud(),Ie.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function eu(){return{destroy:void 0,resource:void 0}}function Gp(){return bt().memoizedState}function tu(t,r,a,l){var h=rn();l=l===void 0?null:l,Ie.flags|=t,h.memoizedState=Da(1|r,eu(),a,l)}function sl(t,r,a,l){var h=bt();l=l===void 0?null:l;var f=h.memoizedState.inst;$e!==null&&l!==null&&Od(l,$e.memoizedState.deps)?h.memoizedState=Da(r,f,a,l):(Ie.flags|=t,h.memoizedState=Da(1|r,f,a,l))}function Qp(t,r){tu(8390656,8,t,r)}function Yp(t,r){sl(2048,8,t,r)}function Kp(t,r){return sl(4,2,t,r)}function $p(t,r){return sl(4,4,t,r)}function Xp(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Wp(t,r,a){a=a!=null?a.concat([t]):null,sl(4,4,Xp.bind(null,r,t),a)}function Fd(){}function Zp(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Od(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Jp(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Od(r,l[1]))return l[0];if(l=t(),Os){hn(!0);try{t()}finally{hn(!1)}}return a.memoizedState=[l,r],l}function Gd(t,r,a){return a===void 0||(yi&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=nv(),Ie.lanes|=t,xi|=t,a)}function ey(t,r,a,l){return fn(a,r)?a:Ia.current!==null?(t=Gd(t,a,l),fn(t,r)||(Ot=!0),t):(yi&42)===0?(Ot=!0,t.memoizedState=a):(t=nv(),Ie.lanes|=t,xi|=t,r)}function ty(t,r,a,l,h){var f=oe.p;oe.p=f!==0&&8>f?f:8;var b=K.T,E={};K.T=E,Kd(t,!1,r,a);try{var I=h(),B=K.S;if(B!==null&&B(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var $=ow(I,l);al(t,r,$,vn(t))}else al(t,r,l,vn(t))}catch(J){al(t,r,{then:function(){},status:"rejected",reason:J},vn())}finally{oe.p=f,K.T=b}}function dw(){}function Qd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=ny(t).queue;ty(t,h,r,pe,a===null?dw:function(){return ry(t),a(l)})}function ny(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:pe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ry(t){var r=ny(t).next.queue;al(t,r,{},vn())}function Yd(){return Yt(xl)}function iy(){return bt().memoizedState}function sy(){return bt().memoizedState}function fw(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=vn();t=gi(a);var l=pi(r,t,a);l!==null&&(_n(l,r,a),el(l,r,a)),r={cache:wd()},t.payload=r;return}r=r.return}}function mw(t,r,a){var l=vn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},nu(t)?oy(r,a):(a=fd(t,r,a,l),a!==null&&(_n(a,t,l),ly(a,r,l)))}function ay(t,r,a){var l=vn();al(t,r,a,l)}function al(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(nu(t))oy(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var b=r.lastRenderedState,E=f(b,a);if(h.hasEagerState=!0,h.eagerState=E,fn(E,b))return Lc(t,r,h,0),et===null&&Uc(),!1}catch{}finally{}if(a=fd(t,r,h,l),a!==null)return _n(a,t,l),ly(a,r,l),!0}return!1}function Kd(t,r,a,l){if(l={lane:2,revertLane:Rf(),action:l,hasEagerState:!1,eagerState:null,next:null},nu(t)){if(r)throw Error(s(479))}else r=fd(t,a,l,2),r!==null&&_n(r,t,2)}function nu(t){var r=t.alternate;return t===Ie||r!==null&&r===Ie}function oy(t,r){Ca=Xc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function ly(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Io(t,a)}}var ru={readContext:Yt,use:Zc,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt},cy={readContext:Yt,use:Zc,useCallback:function(t,r){return rn().memoizedState=[t,r===void 0?null:r],t},useContext:Yt,useEffect:Qp,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,tu(4194308,4,Xp.bind(null,r,t),a)},useLayoutEffect:function(t,r){return tu(4194308,4,t,r)},useInsertionEffect:function(t,r){tu(4,2,t,r)},useMemo:function(t,r){var a=rn();r=r===void 0?null:r;var l=t();if(Os){hn(!0);try{t()}finally{hn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=rn();if(a!==void 0){var h=a(r);if(Os){hn(!0);try{a(r)}finally{hn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=mw.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var r=rn();return t={current:t},r.memoizedState=t},useState:function(t){t=qd(t);var r=t.queue,a=ay.bind(null,Ie,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Fd,useDeferredValue:function(t,r){var a=rn();return Gd(a,t,r)},useTransition:function(){var t=qd(!1);return t=ty.bind(null,Ie,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ie,h=rn();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),et===null)throw Error(s(349));(Ue&124)!==0||Np(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,Qp(jp.bind(null,l,f,t),[t]),l.flags|=2048,Da(9,eu(),Dp.bind(null,l,f,a,r),null),a},useId:function(){var t=rn(),r=et.identifierPrefix;if(qe){var a=zr,l=Lr;a=(l&~(1<<32-Qt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Wc++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=lw++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:Yd,useFormState:Bp,useActionState:Bp,useOptimistic:function(t){var r=rn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Kd.bind(null,Ie,!0,a),a.dispatch=r,[t,r]},useMemoCache:Ld,useCacheRefresh:function(){return rn().memoizedState=fw.bind(null,Ie)}},uy={readContext:Yt,use:Zc,useCallback:Zp,useContext:Yt,useEffect:Yp,useImperativeHandle:Wp,useInsertionEffect:Kp,useLayoutEffect:$p,useMemo:Jp,useReducer:Jc,useRef:Gp,useState:function(){return Jc(Hr)},useDebugValue:Fd,useDeferredValue:function(t,r){var a=bt();return ey(a,$e.memoizedState,t,r)},useTransition:function(){var t=Jc(Hr)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:il(t),r]},useSyncExternalStore:Cp,useId:iy,useHostTransitionStatus:Yd,useFormState:qp,useActionState:qp,useOptimistic:function(t,r){var a=bt();return kp(a,$e,t,r)},useMemoCache:Ld,useCacheRefresh:sy},gw={readContext:Yt,use:Zc,useCallback:Zp,useContext:Yt,useEffect:Yp,useImperativeHandle:Wp,useInsertionEffect:Kp,useLayoutEffect:$p,useMemo:Jp,useReducer:Bd,useRef:Gp,useState:function(){return Bd(Hr)},useDebugValue:Fd,useDeferredValue:function(t,r){var a=bt();return $e===null?Gd(a,t,r):ey(a,$e.memoizedState,t,r)},useTransition:function(){var t=Bd(Hr)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:il(t),r]},useSyncExternalStore:Cp,useId:iy,useHostTransitionStatus:Yd,useFormState:Fp,useActionState:Fp,useOptimistic:function(t,r){var a=bt();return $e!==null?kp(a,$e,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ld,useCacheRefresh:sy},ja=null,ol=0;function iu(t){var r=ol;return ol+=1,ja===null&&(ja=[]),Tp(ja,t,r)}function ll(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function su(t,r){throw r.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function hy(t){var r=t._init;return r(t._payload)}function dy(t){function r(V,O){if(t){var z=V.deletions;z===null?(V.deletions=[O],V.flags|=16):z.push(O)}}function a(V,O){if(!t)return null;for(;O!==null;)r(V,O),O=O.sibling;return null}function l(V){for(var O=new Map;V!==null;)V.key!==null?O.set(V.key,V):O.set(V.index,V),V=V.sibling;return O}function h(V,O){return V=Ur(V,O),V.index=0,V.sibling=null,V}function f(V,O,z){return V.index=z,t?(z=V.alternate,z!==null?(z=z.index,z<O?(V.flags|=67108866,O):z):(V.flags|=67108866,O)):(V.flags|=1048576,O)}function b(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function E(V,O,z,Z){return O===null||O.tag!==6?(O=gd(z,V.mode,Z),O.return=V,O):(O=h(O,z),O.return=V,O)}function I(V,O,z,Z){var me=z.type;return me===Y?$(V,O,z.props.children,Z,z.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&hy(me)===O.type)?(O=h(O,z.props),ll(O,z),O.return=V,O):(O=Bc(z.type,z.key,z.props,null,V.mode,Z),ll(O,z),O.return=V,O)}function B(V,O,z,Z){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=pd(z,V.mode,Z),O.return=V,O):(O=h(O,z.children||[]),O.return=V,O)}function $(V,O,z,Z,me){return O===null||O.tag!==7?(O=Ss(z,V.mode,Z,me),O.return=V,O):(O=h(O,z),O.return=V,O)}function J(V,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=gd(""+O,V.mode,z),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case S:return z=Bc(O.type,O.key,O.props,null,V.mode,z),ll(z,O),z.return=V,z;case U:return O=pd(O,V.mode,z),O.return=V,O;case R:var Z=O._init;return O=Z(O._payload),J(V,O,z)}if(ot(O)||P(O))return O=Ss(O,V.mode,z,null),O.return=V,O;if(typeof O.then=="function")return J(V,iu(O),z);if(O.$$typeof===te)return J(V,Gc(V,O),z);su(V,O)}return null}function q(V,O,z,Z){var me=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return me!==null?null:E(V,O,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===me?I(V,O,z,Z):null;case U:return z.key===me?B(V,O,z,Z):null;case R:return me=z._init,z=me(z._payload),q(V,O,z,Z)}if(ot(z)||P(z))return me!==null?null:$(V,O,z,Z,null);if(typeof z.then=="function")return q(V,O,iu(z),Z);if(z.$$typeof===te)return q(V,O,Gc(V,z),Z);su(V,z)}return null}function H(V,O,z,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return V=V.get(z)||null,E(O,V,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return V=V.get(Z.key===null?z:Z.key)||null,I(O,V,Z,me);case U:return V=V.get(Z.key===null?z:Z.key)||null,B(O,V,Z,me);case R:var Ne=Z._init;return Z=Ne(Z._payload),H(V,O,z,Z,me)}if(ot(Z)||P(Z))return V=V.get(z)||null,$(O,V,Z,me,null);if(typeof Z.then=="function")return H(V,O,z,iu(Z),me);if(Z.$$typeof===te)return H(V,O,z,Gc(O,Z),me);su(O,Z)}return null}function Ee(V,O,z,Z){for(var me=null,Ne=null,ge=O,be=O=0,kt=null;ge!==null&&be<z.length;be++){ge.index>be?(kt=ge,ge=null):kt=ge.sibling;var ze=q(V,ge,z[be],Z);if(ze===null){ge===null&&(ge=kt);break}t&&ge&&ze.alternate===null&&r(V,ge),O=f(ze,O,be),Ne===null?me=ze:Ne.sibling=ze,Ne=ze,ge=kt}if(be===z.length)return a(V,ge),qe&&Rs(V,be),me;if(ge===null){for(;be<z.length;be++)ge=J(V,z[be],Z),ge!==null&&(O=f(ge,O,be),Ne===null?me=ge:Ne.sibling=ge,Ne=ge);return qe&&Rs(V,be),me}for(ge=l(ge);be<z.length;be++)kt=H(ge,V,be,z[be],Z),kt!==null&&(t&&kt.alternate!==null&&ge.delete(kt.key===null?be:kt.key),O=f(kt,O,be),Ne===null?me=kt:Ne.sibling=kt,Ne=kt);return t&&ge.forEach(function(Oi){return r(V,Oi)}),qe&&Rs(V,be),me}function _e(V,O,z,Z){if(z==null)throw Error(s(151));for(var me=null,Ne=null,ge=O,be=O=0,kt=null,ze=z.next();ge!==null&&!ze.done;be++,ze=z.next()){ge.index>be?(kt=ge,ge=null):kt=ge.sibling;var Oi=q(V,ge,ze.value,Z);if(Oi===null){ge===null&&(ge=kt);break}t&&ge&&Oi.alternate===null&&r(V,ge),O=f(Oi,O,be),Ne===null?me=Oi:Ne.sibling=Oi,Ne=Oi,ge=kt}if(ze.done)return a(V,ge),qe&&Rs(V,be),me;if(ge===null){for(;!ze.done;be++,ze=z.next())ze=J(V,ze.value,Z),ze!==null&&(O=f(ze,O,be),Ne===null?me=ze:Ne.sibling=ze,Ne=ze);return qe&&Rs(V,be),me}for(ge=l(ge);!ze.done;be++,ze=z.next())ze=H(ge,V,be,ze.value,Z),ze!==null&&(t&&ze.alternate!==null&&ge.delete(ze.key===null?be:ze.key),O=f(ze,O,be),Ne===null?me=ze:Ne.sibling=ze,Ne=ze);return t&&ge.forEach(function(px){return r(V,px)}),qe&&Rs(V,be),me}function We(V,O,z,Z){if(typeof z=="object"&&z!==null&&z.type===Y&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var me=z.key;O!==null;){if(O.key===me){if(me=z.type,me===Y){if(O.tag===7){a(V,O.sibling),Z=h(O,z.props.children),Z.return=V,V=Z;break e}}else if(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&hy(me)===O.type){a(V,O.sibling),Z=h(O,z.props),ll(Z,z),Z.return=V,V=Z;break e}a(V,O);break}else r(V,O);O=O.sibling}z.type===Y?(Z=Ss(z.props.children,V.mode,Z,z.key),Z.return=V,V=Z):(Z=Bc(z.type,z.key,z.props,null,V.mode,Z),ll(Z,z),Z.return=V,V=Z)}return b(V);case U:e:{for(me=z.key;O!==null;){if(O.key===me)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(V,O.sibling),Z=h(O,z.children||[]),Z.return=V,V=Z;break e}else{a(V,O);break}else r(V,O);O=O.sibling}Z=pd(z,V.mode,Z),Z.return=V,V=Z}return b(V);case R:return me=z._init,z=me(z._payload),We(V,O,z,Z)}if(ot(z))return Ee(V,O,z,Z);if(P(z)){if(me=P(z),typeof me!="function")throw Error(s(150));return z=me.call(z),_e(V,O,z,Z)}if(typeof z.then=="function")return We(V,O,iu(z),Z);if(z.$$typeof===te)return We(V,O,Gc(V,z),Z);su(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(a(V,O.sibling),Z=h(O,z),Z.return=V,V=Z):(a(V,O),Z=gd(z,V.mode,Z),Z.return=V,V=Z),b(V)):a(V,O)}return function(V,O,z,Z){try{ol=0;var me=We(V,O,z,Z);return ja=null,me}catch(ge){if(ge===Zo||ge===Yc)throw ge;var Ne=mn(29,ge,null,V.mode);return Ne.lanes=Z,Ne.return=V,Ne}finally{}}}var Oa=dy(!0),fy=dy(!1),On=ne(null),dr=null;function vi(t){var r=t.alternate;se(It,It.current&1),se(On,t),dr===null&&(r===null||Ia.current!==null||r.memoizedState!==null)&&(dr=t)}function my(t){if(t.tag===22){if(se(It,It.current),se(On,t),dr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(dr=t)}}else _i()}function _i(){se(It,It.current),se(On,On.current)}function Fr(t){le(On),dr===t&&(dr=null),le(It)}var It=ne(0);function au(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Lf(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $d(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Xd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=vn(),h=gi(l);h.payload=r,a!=null&&(h.callback=a),r=pi(t,h,l),r!==null&&(_n(r,t,l),el(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=vn(),h=gi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=pi(t,h,l),r!==null&&(_n(r,t,l),el(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=vn(),l=gi(a);l.tag=2,r!=null&&(l.callback=r),r=pi(t,l,a),r!==null&&(_n(r,t,a),el(r,t,a))}};function gy(t,r,a,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):r.prototype&&r.prototype.isPureReactComponent?!Fo(a,l)||!Fo(h,f):!0}function py(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Xd.enqueueReplaceState(r,r.state,null)}function Ms(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var ou=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function yy(t){ou(t)}function vy(t){console.error(t)}function _y(t){ou(t)}function lu(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function by(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wd(t,r,a){return a=gi(a),a.tag=3,a.payload={element:null},a.callback=function(){lu(t,r)},a}function Ty(t){return t=gi(t),t.tag=3,t}function Ey(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){by(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){by(r,a,l),typeof h!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function pw(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&$o(r,a,h,!0),a=On.current,a!==null){switch(a.tag){case 13:return dr===null?Ef():a.alternate===null&&ut===0&&(ut=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Ad?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),xf(t,l,h)),!1;case 22:return a.flags|=65536,l===Ad?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),xf(t,l,h)),!1}throw Error(s(435,a.tag))}return xf(t,l,h),Ef(),!1}if(qe)return r=On.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==_d&&(t=Error(s(422),{cause:l}),Ko(Cn(t,a)))):(l!==_d&&(r=Error(s(423),{cause:l}),Ko(Cn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Cn(l,a),h=Wd(t.stateNode,l,h),Cd(t,h),ut!==4&&(ut=2)),!1;var f=Error(s(520),{cause:l});if(f=Cn(f,a),gl===null?gl=[f]:gl.push(f),ut!==4&&(ut=2),r===null)return!0;l=Cn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Wd(a.stateNode,l,t),Cd(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Si===null||!Si.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ty(h),Ey(h,t,a,l),Cd(a,h),!1}a=a.return}while(a!==null);return!1}var wy=Error(s(461)),Ot=!1;function zt(t,r,a,l){r.child=t===null?fy(r,null,a,l):Oa(r,t.child,a,l)}function xy(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var b={};for(var E in l)E!=="ref"&&(b[E]=l[E])}else b=l;return Ds(r),l=Md(t,r,a,b,f,h),E=kd(),t!==null&&!Ot?(Vd(t,r,h),Gr(t,r,h)):(qe&&E&&yd(r),r.flags|=1,zt(t,r,l,h),r.child)}function Sy(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!md(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Ay(t,r,f,l,h)):(t=Bc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!af(t,h)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(b,l)&&t.ref===r.ref)return Gr(t,r,h)}return r.flags|=1,t=Ur(f,l),t.ref=r.ref,t.return=r,r.child=t}function Ay(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(Fo(f,l)&&t.ref===r.ref)if(Ot=!1,r.pendingProps=l=f,af(t,h))(t.flags&131072)!==0&&(Ot=!0);else return r.lanes=t.lanes,Gr(t,r,h)}return Zd(t,r,a,l,h)}function Ry(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return Iy(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qc(r,f!==null?f.cachePool:null),f!==null?Ap(r,f):Dd(),my(r);else return r.lanes=r.childLanes=536870912,Iy(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(Qc(r,f.cachePool),Ap(r,f),_i(),r.memoizedState=null):(t!==null&&Qc(r,null),Dd(),_i());return zt(t,r,h,a),r.child}function Iy(t,r,a,l){var h=Sd();return h=h===null?null:{parent:Rt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&Qc(r,null),Dd(),my(r),t!==null&&$o(t,r,l,!0),null}function cu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Zd(t,r,a,l,h){return Ds(r),a=Md(t,r,a,l,void 0,h),l=kd(),t!==null&&!Ot?(Vd(t,r,h),Gr(t,r,h)):(qe&&l&&yd(r),r.flags|=1,zt(t,r,a,h),r.child)}function Cy(t,r,a,l,h,f){return Ds(r),r.updateQueue=null,a=Ip(r,l,a,h),Rp(t),l=kd(),t!==null&&!Ot?(Vd(t,r,f),Gr(t,r,f)):(qe&&l&&yd(r),r.flags|=1,zt(t,r,a,f),r.child)}function Ny(t,r,a,l,h){if(Ds(r),r.stateNode===null){var f=wa,b=a.contextType;typeof b=="object"&&b!==null&&(f=Yt(b)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Xd,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Rd(r),b=a.contextType,f.context=typeof b=="object"&&b!==null?Yt(b):wa,f.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&($d(r,a,b,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Xd.enqueueReplaceState(f,f.state,null),nl(r,l,f,h),tl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var E=r.memoizedProps,I=Ms(a,E);f.props=I;var B=f.context,$=a.contextType;b=wa,typeof $=="object"&&$!==null&&(b=Yt($));var J=a.getDerivedStateFromProps;$=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||B!==b)&&py(r,f,l,b),mi=!1;var q=r.memoizedState;f.state=q,nl(r,l,f,h),tl(),B=r.memoizedState,E||q!==B||mi?(typeof J=="function"&&($d(r,a,J,l),B=r.memoizedState),(I=mi||gy(r,a,I,l,q,B,b))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=B),f.props=l,f.state=B,f.context=b,l=I):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Id(t,r),b=r.memoizedProps,$=Ms(a,b),f.props=$,J=r.pendingProps,q=f.context,B=a.contextType,I=wa,typeof B=="object"&&B!==null&&(I=Yt(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==J||q!==I)&&py(r,f,l,I),mi=!1,q=r.memoizedState,f.state=q,nl(r,l,f,h),tl();var H=r.memoizedState;b!==J||q!==H||mi||t!==null&&t.dependencies!==null&&Fc(t.dependencies)?(typeof E=="function"&&($d(r,a,E,l),H=r.memoizedState),($=mi||gy(r,a,$,l,q,H,I)||t!==null&&t.dependencies!==null&&Fc(t.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,H,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,H,I)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=H),f.props=l,f.state=H,f.context=I,l=$):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,cu(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=Oa(r,t.child,null,h),r.child=Oa(r,null,a,h)):zt(t,r,a,h),r.memoizedState=f.state,t=r.child):t=Gr(t,r,h),t}function Dy(t,r,a,l){return Yo(),r.flags|=256,zt(t,r,a,l),r.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ef(t){return{baseLanes:t,cachePool:vp()}}function tf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Mn),t}function jy(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(It.current&2)!==0),b&&(h=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(qe){if(h?vi(r):_i(),qe){var E=ct,I;if(I=E){e:{for(I=E,E=hr;I.nodeType!==8;){if(!E){E=null;break e}if(I=Gn(I.nextSibling),I===null){E=null;break e}}E=I}E!==null?(r.memoizedState={dehydrated:E,treeContext:As!==null?{id:Lr,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},I=mn(18,null,null,0),I.stateNode=E,I.return=r,r.child=I,nn=r,ct=null,I=!0):I=!1}I||Cs(r)}if(E=r.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Lf(E)?r.lanes=32:r.lanes=536870912,null;Fr(r)}return E=l.children,l=l.fallback,h?(_i(),h=r.mode,E=uu({mode:"hidden",children:E},h),l=Ss(l,h,a,null),E.return=r,l.return=r,E.sibling=l,r.child=E,h=r.child,h.memoizedState=ef(a),h.childLanes=tf(t,b,a),r.memoizedState=Jd,l):(vi(r),nf(r,E))}if(I=t.memoizedState,I!==null&&(E=I.dehydrated,E!==null)){if(f)r.flags&256?(vi(r),r.flags&=-257,r=rf(t,r,a)):r.memoizedState!==null?(_i(),r.child=t.child,r.flags|=128,r=null):(_i(),h=l.fallback,E=r.mode,l=uu({mode:"visible",children:l.children},E),h=Ss(h,E,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Oa(r,t.child,null,a),l=r.child,l.memoizedState=ef(a),l.childLanes=tf(t,b,a),r.memoizedState=Jd,r=h);else if(vi(r),Lf(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var B=b.dgst;b=B,l=Error(s(419)),l.stack="",l.digest=b,Ko({value:l,source:null,stack:null}),r=rf(t,r,a)}else if(Ot||$o(t,r,a,!1),b=(a&t.childLanes)!==0,Ot||b){if(b=et,b!==null&&(l=a&-a,l=(l&42)!==0?1:ai(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,Ea(t,l),_n(b,t,l),wy;E.data==="$?"||Ef(),r=rf(t,r,a)}else E.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=I.treeContext,ct=Gn(E.nextSibling),nn=r,qe=!0,Is=null,hr=!1,t!==null&&(Dn[jn++]=Lr,Dn[jn++]=zr,Dn[jn++]=As,Lr=t.id,zr=t.overflow,As=r),r=nf(r,l.children),r.flags|=4096);return r}return h?(_i(),h=l.fallback,E=r.mode,I=t.child,B=I.sibling,l=Ur(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,B!==null?h=Ur(B,h):(h=Ss(h,E,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,E=t.child.memoizedState,E===null?E=ef(a):(I=E.cachePool,I!==null?(B=Rt._currentValue,I=I.parent!==B?{parent:B,pool:B}:I):I=vp(),E={baseLanes:E.baseLanes|a,cachePool:I}),h.memoizedState=E,h.childLanes=tf(t,b,a),r.memoizedState=Jd,l):(vi(r),a=t.child,t=a.sibling,a=Ur(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=a,r.memoizedState=null,a)}function nf(t,r){return r=uu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function uu(t,r){return t=mn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function rf(t,r,a){return Oa(r,t.child,null,a),t=nf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Oy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Td(t.return,r,a)}function sf(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function My(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(zt(t,r,l.children,a),l=It.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Oy(t,a,r);else if(t.tag===19)Oy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(It,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&au(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),sf(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&au(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}sf(r,!0,a,null,f);break;case"together":sf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Gr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),xi|=r.lanes,(a&r.childLanes)===0)if(t!==null){if($o(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Ur(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ur(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function af(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Fc(t)))}function yw(t,r,a){switch(r.tag){case 3:Je(r,r.stateNode.containerInfo),fi(r,Rt,t.memoizedState.cache),Yo();break;case 27:case 5:si(r);break;case 4:Je(r,r.stateNode.containerInfo);break;case 10:fi(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(vi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?jy(t,r,a):(vi(r),t=Gr(t,r,a),t!==null?t.sibling:null);vi(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||($o(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return My(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(It,It.current),l)break;return null;case 22:case 23:return r.lanes=0,Ry(t,r,a);case 24:fi(r,Rt,t.memoizedState.cache)}return Gr(t,r,a)}function ky(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ot=!0;else{if(!af(t,a)&&(r.flags&128)===0)return Ot=!1,yw(t,r,a);Ot=(t.flags&131072)!==0}else Ot=!1,qe&&(r.flags&1048576)!==0&&hp(r,Hc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")md(l)?(t=Ms(l,t),r.tag=1,r=Ny(null,r,l,t,a)):(r.tag=0,r=Zd(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ce){r.tag=11,r=xy(null,r,l,t,a);break e}else if(h===j){r.tag=14,r=Sy(null,r,l,t,a);break e}}throw r=Pt(l)||l,Error(s(306,r,""))}}return r;case 0:return Zd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Ms(l,r.pendingProps),Ny(t,r,l,h,a);case 3:e:{if(Je(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,Id(t,r),nl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,fi(r,Rt,l),l!==f.cache&&Ed(r,[Rt],a,!0),tl(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Dy(t,r,l,a);break e}else if(l!==h){h=Cn(Error(s(424)),r),Ko(h),r=Dy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ct=Gn(t.firstChild),nn=r,qe=!0,Is=null,hr=!0,a=fy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Yo(),l===h){r=Gr(t,r,a);break e}zt(t,r,l,a)}r=r.child}return r;case 26:return cu(t,r),t===null?(a=Lv(r.type,null,r.pendingProps,null))?r.memoizedState=a:qe||(a=r.type,t=r.pendingProps,l=xu(xe.current).createElement(a),l[xt]=r,l[yt]=t,qt(l,a,t),ht(l),r.stateNode=l):r.memoizedState=Lv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return si(r),t===null&&qe&&(l=r.stateNode=Vv(r.type,r.pendingProps,xe.current),nn=r,hr=!0,h=ct,Ii(r.type)?(zf=h,ct=Gn(l.firstChild)):ct=h),zt(t,r,r.pendingProps.children,a),cu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&qe&&((h=l=ct)&&(l=Gw(l,r.type,r.pendingProps,hr),l!==null?(r.stateNode=l,nn=r,ct=Gn(l.firstChild),hr=!1,h=!0):h=!1),h||Cs(r)),si(r),h=r.type,f=r.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,Vf(h,f)?l=null:b!==null&&Vf(h,b)&&(r.flags|=32),r.memoizedState!==null&&(h=Md(t,r,cw,null,null,a),xl._currentValue=h),cu(t,r),zt(t,r,l,a),r.child;case 6:return t===null&&qe&&((t=a=ct)&&(a=Qw(a,r.pendingProps,hr),a!==null?(r.stateNode=a,nn=r,ct=null,t=!0):t=!1),t||Cs(r)),null;case 13:return jy(t,r,a);case 4:return Je(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Oa(r,null,l,a):zt(t,r,l,a),r.child;case 11:return xy(t,r,r.type,r.pendingProps,a);case 7:return zt(t,r,r.pendingProps,a),r.child;case 8:return zt(t,r,r.pendingProps.children,a),r.child;case 12:return zt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,fi(r,r.type,l.value),zt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Ds(r),h=Yt(h),l=l(h),r.flags|=1,zt(t,r,l,a),r.child;case 14:return Sy(t,r,r.type,r.pendingProps,a);case 15:return Ay(t,r,r.type,r.pendingProps,a);case 19:return My(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=uu(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Ur(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Ry(t,r,a);case 24:return Ds(r),l=Yt(Rt),t===null?(h=Sd(),h===null&&(h=et,f=wd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},Rd(r),fi(r,Rt,h)):((t.lanes&a)!==0&&(Id(t,r),nl(r,null,null,a),tl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),fi(r,Rt,l)):(l=f.cache,fi(r,Rt,l),l!==h.cache&&Ed(r,[Rt],a,!0))),zt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Qr(t){t.flags|=4}function Vy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Fv(r)){if(r=On.current,r!==null&&((Ue&4194048)===Ue?dr!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||r!==dr))throw Jo=Ad,_p;t.flags|=8192}}function hu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ao():536870912,t.lanes|=r,Pa|=r)}function cl(t,r){if(!qe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function st(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function vw(t,r,a){var l=r.pendingProps;switch(vd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(r),null;case 1:return st(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),qr(Rt),Jn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Qo(r)?Qr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,mp())),st(r),null;case 26:return a=r.memoizedState,t===null?(Qr(r),a!==null?(st(r),Vy(r,a)):(st(r),r.flags&=-16777217)):a?a!==t.memoizedState?(Qr(r),st(r),Vy(r,a)):(st(r),r.flags&=-16777217):(t.memoizedProps!==l&&Qr(r),st(r),r.flags&=-16777217),null;case 27:Sr(r),a=xe.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Qr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return st(r),null}t=ve.current,Qo(r)?dp(r):(t=Vv(h,l,a),r.stateNode=t,Qr(r))}return st(r),null;case 5:if(Sr(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Qr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return st(r),null}if(t=ve.current,Qo(r))dp(r);else{switch(h=xu(xe.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[xt]=r,t[yt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(qt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Qr(r)}}return st(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Qr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=xe.current,Qo(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=nn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[xt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Cv(t.nodeValue,a)),t||Cs(r)}else t=xu(t).createTextNode(l),t[xt]=r,r.stateNode=t}return st(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Qo(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xt]=r}else Yo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;st(r),h=!1}else h=mp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(Fr(r),r):(Fr(r),null)}if(Fr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),hu(r,r.updateQueue),st(r),null;case 4:return Jn(),t===null&&Df(r.stateNode.containerInfo),st(r),null;case 10:return qr(r.type),st(r),null;case 19:if(le(It),h=r.memoizedState,h===null)return st(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)cl(h,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=au(t),f!==null){for(r.flags|=128,cl(h,!1),t=f.updateQueue,r.updateQueue=t,hu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)up(a,t),a=a.sibling;return se(It,It.current&1|2),r.child}t=t.sibling}h.tail!==null&&wn()>mu&&(r.flags|=128,l=!0,cl(h,!1),r.lanes=4194304)}else{if(!l)if(t=au(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,hu(r,t),cl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qe)return st(r),null}else 2*wn()-h.renderingStartTime>mu&&a!==536870912&&(r.flags|=128,l=!0,cl(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=wn(),r.sibling=null,t=It.current,se(It,l?t&1|2:t&1),r):(st(r),null);case 22:case 23:return Fr(r),jd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(st(r),r.subtreeFlags&6&&(r.flags|=8192)):st(r),a=r.updateQueue,a!==null&&hu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&le(js),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),qr(Rt),st(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function _w(t,r){switch(vd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return qr(Rt),Jn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Sr(r),null;case 13:if(Fr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Yo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return le(It),null;case 4:return Jn(),null;case 10:return qr(r.type),null;case 22:case 23:return Fr(r),jd(),t!==null&&le(js),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return qr(Rt),null;case 25:return null;default:return null}}function Py(t,r){switch(vd(r),r.tag){case 3:qr(Rt),Jn();break;case 26:case 27:case 5:Sr(r);break;case 4:Jn();break;case 13:Fr(r);break;case 19:le(It);break;case 10:qr(r.type);break;case 22:case 23:Fr(r),jd(),t!==null&&le(js);break;case 24:qr(Rt)}}function ul(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==h)}}catch(E){Ze(r,r.return,E)}}function bi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,h=r;var I=a,B=E;try{B()}catch($){Ze(h,I,$)}}}l=l.next}while(l!==f)}}catch($){Ze(r,r.return,$)}}function Uy(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Sp(r,a)}catch(l){Ze(t,t.return,l)}}}function Ly(t,r,a){a.props=Ms(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ze(t,r,l)}}function hl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Ze(t,r,h)}}function fr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Ze(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(t,r,h)}else a.current=null}function zy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Ze(t,t.return,h)}}function of(t,r,a){try{var l=t.stateNode;zw(l,t.type,a,r),l[yt]=r}catch(h){Ze(t,t.return,h)}}function By(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ii(t.type)||t.tag===4}function lf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||By(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ii(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=wu));else if(l!==4&&(l===27&&Ii(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(cf(t,r,a),t=t.sibling;t!==null;)cf(t,r,a),t=t.sibling}function du(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Ii(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(du(t,r,a),t=t.sibling;t!==null;)du(t,r,a),t=t.sibling}function qy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);qt(r,l,a),r[xt]=t,r[yt]=a}catch(f){Ze(t,t.return,f)}}var Yr=!1,ft=!1,uf=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function bw(t,r){if(t=t.containerInfo,Mf=Nu,t=ep(t),od(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,E=-1,I=-1,B=0,$=0,J=t,q=null;t:for(;;){for(var H;J!==a||h!==0&&J.nodeType!==3||(E=b+h),J!==f||l!==0&&J.nodeType!==3||(I=b+l),J.nodeType===3&&(b+=J.nodeValue.length),(H=J.firstChild)!==null;)q=J,J=H;for(;;){if(J===t)break t;if(q===a&&++B===h&&(E=b),q===f&&++$===l&&(I=b),(H=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=H}a=E===-1||I===-1?null:{start:E,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(kf={focusedElem:t,selectionRange:a},Nu=!1,Mt=r;Mt!==null;)if(r=Mt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Mt=t;else for(;Mt!==null;){switch(r=Mt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ee=Ms(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ee,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Ze(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Uf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Uf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Mt=t;break}Mt=r.return}}function Fy(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(t,a),l&4&&ul(5,a);break;case 1:if(Ti(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(b){Ze(a,a.return,b)}else{var h=Ms(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Ze(a,a.return,b)}}l&64&&Uy(a),l&512&&hl(a,a.return);break;case 3:if(Ti(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Sp(t,r)}catch(b){Ze(a,a.return,b)}}break;case 27:r===null&&l&4&&qy(a);case 26:case 5:Ti(t,a),r===null&&l&4&&zy(a),l&512&&hl(a,a.return);break;case 12:Ti(t,a);break;case 13:Ti(t,a),l&4&&Yy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Cw.bind(null,a),Yw(t,a))));break;case 22:if(l=a.memoizedState!==null||Yr,!l){r=r!==null&&r.memoizedState!==null||ft,h=Yr;var f=ft;Yr=l,(ft=r)&&!f?Ei(t,a,(a.subtreeFlags&8772)!==0):Ti(t,a),Yr=h,ft=f}break;case 30:break;default:Ti(t,a)}}function Gy(t){var r=t.alternate;r!==null&&(t.alternate=null,Gy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ci(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,sn=!1;function Kr(t,r,a){for(a=a.child;a!==null;)Qy(t,r,a),a=a.sibling}function Qy(t,r,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(lt,a)}catch{}switch(a.tag){case 26:ft||fr(a,r),Kr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ft||fr(a,r);var l=it,h=sn;Ii(a.type)&&(it=a.stateNode,sn=!1),Kr(t,r,a),bl(a.stateNode),it=l,sn=h;break;case 5:ft||fr(a,r);case 6:if(l=it,h=sn,it=null,Kr(t,r,a),it=l,sn=h,it!==null)if(sn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(f){Ze(a,r,f)}else try{it.removeChild(a.stateNode)}catch(f){Ze(a,r,f)}break;case 18:it!==null&&(sn?(t=it,Mv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Il(t)):Mv(it,a.stateNode));break;case 4:l=it,h=sn,it=a.stateNode.containerInfo,sn=!0,Kr(t,r,a),it=l,sn=h;break;case 0:case 11:case 14:case 15:ft||bi(2,a,r),ft||bi(4,a,r),Kr(t,r,a);break;case 1:ft||(fr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ly(a,r,l)),Kr(t,r,a);break;case 21:Kr(t,r,a);break;case 22:ft=(l=ft)||a.memoizedState!==null,Kr(t,r,a),ft=l;break;default:Kr(t,r,a)}}function Yy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Il(t)}catch(a){Ze(r,r.return,a)}}function Tw(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Hy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Hy),r;default:throw Error(s(435,t.tag))}}function hf(t,r){var a=Tw(t);r.forEach(function(l){var h=Nw.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function gn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,b=r,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Ii(E.type)){it=E.stateNode,sn=!1;break e}break;case 5:it=E.stateNode,sn=!1;break e;case 3:case 4:it=E.stateNode.containerInfo,sn=!0;break e}E=E.return}if(it===null)throw Error(s(160));Qy(f,b,h),it=null,sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ky(r,t),r=r.sibling}var Fn=null;function Ky(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gn(r,t),pn(t),l&4&&(bi(3,t,t.return),ul(3,t),bi(5,t,t.return));break;case 1:gn(r,t),pn(t),l&512&&(ft||a===null||fr(a,a.return)),l&64&&Yr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Fn;if(gn(r,t),pn(t),l&512&&(ft||a===null||fr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[cs]||f[xt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),qt(f,l,a),f[xt]=t,ht(f),l=f;break e;case"link":var b=qv("link","href",h).get(l+(a.href||""));if(b){for(var E=0;E<b.length;E++)if(f=b[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(E,1);break t}}f=h.createElement(l),qt(f,l,a),h.head.appendChild(f);break;case"meta":if(b=qv("meta","content",h).get(l+(a.content||""))){for(E=0;E<b.length;E++)if(f=b[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(E,1);break t}}f=h.createElement(l),qt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[xt]=t,ht(f),l=f}t.stateNode=l}else Hv(h,t.type,t.stateNode);else t.stateNode=Bv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Hv(h,t.type,t.stateNode):Bv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&of(t,t.memoizedProps,a.memoizedProps)}break;case 27:gn(r,t),pn(t),l&512&&(ft||a===null||fr(a,a.return)),a!==null&&l&4&&of(t,t.memoizedProps,a.memoizedProps);break;case 5:if(gn(r,t),pn(t),l&512&&(ft||a===null||fr(a,a.return)),t.flags&32){h=t.stateNode;try{Sn(h,"")}catch(H){Ze(t,t.return,H)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,of(t,h,a!==null?a.memoizedProps:h)),l&1024&&(uf=!0);break;case 6:if(gn(r,t),pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(H){Ze(t,t.return,H)}}break;case 3:if(Ru=null,h=Fn,Fn=Su(r.containerInfo),gn(r,t),Fn=h,pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Il(r.containerInfo)}catch(H){Ze(t,t.return,H)}uf&&(uf=!1,$y(t));break;case 4:l=Fn,Fn=Su(t.stateNode.containerInfo),gn(r,t),pn(t),Fn=l;break;case 12:gn(r,t),pn(t);break;case 13:gn(r,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yf=wn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,hf(t,l)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,B=Yr,$=ft;if(Yr=B||h,ft=$||I,gn(r,t),ft=$,Yr=B,pn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||I||Yr||ft||ks(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){I=a=r;try{if(f=I.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=I.stateNode;var J=I.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){Ze(I,I.return,H)}}}else if(r.tag===6){if(a===null){I=r;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(H){Ze(I,I.return,H)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,hf(t,a))));break;case 19:gn(r,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,hf(t,l)));break;case 30:break;case 21:break;default:gn(r,t),pn(t)}}function pn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(By(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=lf(t);du(t,f,h);break;case 5:var b=a.stateNode;a.flags&32&&(Sn(b,""),a.flags&=-33);var E=lf(t);du(t,E,b);break;case 3:case 4:var I=a.stateNode.containerInfo,B=lf(t);cf(t,B,I);break;default:throw Error(s(161))}}catch($){Ze(t,t.return,$)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function $y(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;$y(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ti(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Fy(t,r.alternate,r),r=r.sibling}function ks(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:bi(4,r,r.return),ks(r);break;case 1:fr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Ly(r,r.return,a),ks(r);break;case 27:bl(r.stateNode);case 26:case 5:fr(r,r.return),ks(r);break;case 22:r.memoizedState===null&&ks(r);break;case 30:ks(r);break;default:ks(r)}t=t.sibling}}function Ei(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,b=f.flags;switch(f.tag){case 0:case 11:case 15:Ei(h,f,a),ul(4,f);break;case 1:if(Ei(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Ze(l,l.return,B)}if(l=f,h=l.updateQueue,h!==null){var E=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)xp(I[h],E)}catch(B){Ze(l,l.return,B)}}a&&b&64&&Uy(f),hl(f,f.return);break;case 27:qy(f);case 26:case 5:Ei(h,f,a),a&&l===null&&b&4&&zy(f),hl(f,f.return);break;case 12:Ei(h,f,a);break;case 13:Ei(h,f,a),a&&b&4&&Yy(h,f);break;case 22:f.memoizedState===null&&Ei(h,f,a),hl(f,f.return);break;case 30:break;default:Ei(h,f,a)}r=r.sibling}}function df(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Xo(a))}function ff(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Xo(t))}function mr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Xy(t,r,a,l),r=r.sibling}function Xy(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:mr(t,r,a,l),h&2048&&ul(9,r);break;case 1:mr(t,r,a,l);break;case 3:mr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Xo(t)));break;case 12:if(h&2048){mr(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,b=f.id,E=f.onPostCommit;typeof E=="function"&&E(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){Ze(r,r.return,I)}}else mr(t,r,a,l);break;case 13:mr(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,b=r.alternate,r.memoizedState!==null?f._visibility&2?mr(t,r,a,l):dl(t,r):f._visibility&2?mr(t,r,a,l):(f._visibility|=2,Ma(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&df(b,r);break;case 24:mr(t,r,a,l),h&2048&&ff(r.alternate,r);break;default:mr(t,r,a,l)}}function Ma(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,b=r,E=a,I=l,B=b.flags;switch(b.tag){case 0:case 11:case 15:Ma(f,b,E,I,h),ul(8,b);break;case 23:break;case 22:var $=b.stateNode;b.memoizedState!==null?$._visibility&2?Ma(f,b,E,I,h):dl(f,b):($._visibility|=2,Ma(f,b,E,I,h)),h&&B&2048&&df(b.alternate,b);break;case 24:Ma(f,b,E,I,h),h&&B&2048&&ff(b.alternate,b);break;default:Ma(f,b,E,I,h)}r=r.sibling}}function dl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:dl(a,l),h&2048&&df(l.alternate,l);break;case 24:dl(a,l),h&2048&&ff(l.alternate,l);break;default:dl(a,l)}r=r.sibling}}var fl=8192;function ka(t){if(t.subtreeFlags&fl)for(t=t.child;t!==null;)Wy(t),t=t.sibling}function Wy(t){switch(t.tag){case 26:ka(t),t.flags&fl&&t.memoizedState!==null&&ax(Fn,t.memoizedState,t.memoizedProps);break;case 5:ka(t);break;case 3:case 4:var r=Fn;Fn=Su(t.stateNode.containerInfo),ka(t),Fn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=fl,fl=16777216,ka(t),fl=r):ka(t));break;default:ka(t)}}function Zy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function ml(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mt=l,ev(l,t)}Zy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jy(t),t=t.sibling}function Jy(t){switch(t.tag){case 0:case 11:case 15:ml(t),t.flags&2048&&bi(9,t,t.return);break;case 3:ml(t);break;case 12:ml(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,fu(t)):ml(t);break;default:ml(t)}}function fu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mt=l,ev(l,t)}Zy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:bi(8,r,r.return),fu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,fu(r));break;default:fu(r)}t=t.sibling}}function ev(t,r){for(;Mt!==null;){var a=Mt;switch(a.tag){case 0:case 11:case 15:bi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Mt=l;else e:for(a=t;Mt!==null;){l=Mt;var h=l.sibling,f=l.return;if(Gy(l),l===a){Mt=null;break e}if(h!==null){h.return=f,Mt=h;break e}Mt=f}}}var Ew={getCacheForType:function(t){var r=Yt(Rt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},ww=typeof WeakMap=="function"?WeakMap:Map,Qe=0,et=null,De=null,Ue=0,Ye=0,yn=null,wi=!1,Va=!1,mf=!1,$r=0,ut=0,xi=0,Vs=0,gf=0,Mn=0,Pa=0,gl=null,an=null,pf=!1,yf=0,mu=1/0,gu=null,Si=null,Bt=0,Ai=null,Ua=null,La=0,vf=0,_f=null,tv=null,pl=0,bf=null;function vn(){if((Qe&2)!==0&&Ue!==0)return Ue&-Ue;if(K.T!==null){var t=Aa;return t!==0?t:Rf()}return oi()}function nv(){Mn===0&&(Mn=(Ue&536870912)===0||qe?So():536870912);var t=On.current;return t!==null&&(t.flags|=32),Mn}function _n(t,r,a){(t===et&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(za(t,0),Ri(t,Ue,Mn,!1)),Rr(t,a),((Qe&2)===0||t!==et)&&(t===et&&((Qe&2)===0&&(Vs|=a),ut===4&&Ri(t,Ue,Mn,!1)),gr(t))}function rv(t,r,a){if((Qe&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||ls(t,r),h=l?Aw(t,r):wf(t,r,!0),f=l;do{if(h===0){Va&&!l&&Ri(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!xw(a)){h=wf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var E=t;h=gl;var I=E.current.memoizedState.isDehydrated;if(I&&(za(E,b).flags|=256),b=wf(E,b,!1),b!==2){if(mf&&!I){E.errorRecoveryDisabledLanes|=f,Vs|=f,h=4;break e}f=an,an=h,f!==null&&(an===null?an=f:an.push.apply(an,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){za(t,0),Ri(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ri(l,r,Mn,!wi);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=yf+300-wn(),10<h)){if(Ri(l,r,Mn,!wi),ra(l,0,!0)!==0)break e;l.timeoutHandle=jv(iv.bind(null,l,a,an,gu,pf,r,Mn,Vs,Pa,wi,f,2,-0,0),h);break e}iv(l,a,an,gu,pf,r,Mn,Vs,Pa,wi,f,0,-0,0)}}break}while(!0);gr(t)}function iv(t,r,a,l,h,f,b,E,I,B,$,J,q,H){if(t.timeoutHandle=-1,J=r.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(wl={stylesheets:null,count:0,unsuspend:sx},Wy(r),J=ox(),J!==null)){t.cancelPendingCommit=J(hv.bind(null,t,r,f,a,l,h,b,E,I,$,1,q,H)),Ri(t,f,b,!B);return}hv(t,r,f,a,l,h,b,E,I)}function xw(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!fn(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ri(t,r,a,l){r&=~gf,r&=~Vs,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-Qt(h),b=1<<f;l[f]=-1,h&=~b}a!==0&&er(t,a,r)}function pu(){return(Qe&6)===0?(yl(0),!1):!0}function Tf(){if(De!==null){if(Ye===0)var t=De.return;else t=De,Br=Ns=null,Pd(t),ja=null,ol=0,t=De;for(;t!==null;)Py(t.alternate,t),t=t.return;De=null}}function za(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,qw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Tf(),et=t,De=a=Ur(t.current,null),Ue=r,Ye=0,yn=null,wi=!1,Va=ls(t,r),mf=!1,Pa=Mn=gf=Vs=xi=ut=0,an=gl=null,pf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Qt(l),f=1<<h;r|=t[h],l&=~f}return $r=r,Uc(),a}function sv(t,r){Ie=null,K.H=ru,r===Zo||r===Yc?(r=Ep(),Ye=3):r===_p?(r=Ep(),Ye=4):Ye=r===wy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,yn=r,De===null&&(ut=1,lu(t,Cn(r,t.current)))}function av(){var t=K.H;return K.H=ru,t===null?ru:t}function ov(){var t=K.A;return K.A=Ew,t}function Ef(){ut=4,wi||(Ue&4194048)!==Ue&&On.current!==null||(Va=!0),(xi&134217727)===0&&(Vs&134217727)===0||et===null||Ri(et,Ue,Mn,!1)}function wf(t,r,a){var l=Qe;Qe|=2;var h=av(),f=ov();(et!==t||Ue!==r)&&(gu=null,za(t,r)),r=!1;var b=ut;e:do try{if(Ye!==0&&De!==null){var E=De,I=yn;switch(Ye){case 8:Tf(),b=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(r=!0);var B=Ye;if(Ye=0,yn=null,Ba(t,E,I,B),a&&Va){b=0;break e}break;default:B=Ye,Ye=0,yn=null,Ba(t,E,I,B)}}Sw(),b=ut;break}catch($){sv(t,$)}while(!0);return r&&t.shellSuspendCounter++,Br=Ns=null,Qe=l,K.H=h,K.A=f,De===null&&(et=null,Ue=0,Uc()),b}function Sw(){for(;De!==null;)lv(De)}function Aw(t,r){var a=Qe;Qe|=2;var l=av(),h=ov();et!==t||Ue!==r?(gu=null,mu=wn()+500,za(t,r)):Va=ls(t,r);e:do try{if(Ye!==0&&De!==null){r=De;var f=yn;t:switch(Ye){case 1:Ye=0,yn=null,Ba(t,r,f,1);break;case 2:case 9:if(bp(f)){Ye=0,yn=null,cv(r);break}r=function(){Ye!==2&&Ye!==9||et!==t||(Ye=7),gr(t)},f.then(r,r);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:bp(f)?(Ye=0,yn=null,cv(r)):(Ye=0,yn=null,Ba(t,r,f,7));break;case 5:var b=null;switch(De.tag){case 26:b=De.memoizedState;case 5:case 27:var E=De;if(!b||Fv(b)){Ye=0,yn=null;var I=E.sibling;if(I!==null)De=I;else{var B=E.return;B!==null?(De=B,yu(B)):De=null}break t}}Ye=0,yn=null,Ba(t,r,f,5);break;case 6:Ye=0,yn=null,Ba(t,r,f,6);break;case 8:Tf(),ut=6;break e;default:throw Error(s(462))}}Rw();break}catch($){sv(t,$)}while(!0);return Br=Ns=null,K.H=l,K.A=h,Qe=a,De!==null?0:(et=null,Ue=0,Uc(),ut)}function Rw(){for(;De!==null&&!To();)lv(De)}function lv(t){var r=ky(t.alternate,t,$r);t.memoizedProps=t.pendingProps,r===null?yu(t):De=r}function cv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Cy(a,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=Cy(a,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:Pd(r);default:Py(a,r),r=De=up(r,$r),r=ky(a,r,$r)}t.memoizedProps=t.pendingProps,r===null?yu(t):De=r}function Ba(t,r,a,l){Br=Ns=null,Pd(r),ja=null,ol=0;var h=r.return;try{if(pw(t,h,r,a,Ue)){ut=1,lu(t,Cn(a,t.current)),De=null;return}}catch(f){if(h!==null)throw De=h,f;ut=1,lu(t,Cn(a,t.current)),De=null;return}r.flags&32768?(qe||l===1?t=!0:Va||(Ue&536870912)!==0?t=!1:(wi=t=!0,(l===2||l===9||l===3||l===6)&&(l=On.current,l!==null&&l.tag===13&&(l.flags|=16384))),uv(r,t)):yu(r)}function yu(t){var r=t;do{if((r.flags&32768)!==0){uv(r,wi);return}t=r.return;var a=vw(r.alternate,r,$r);if(a!==null){De=a;return}if(r=r.sibling,r!==null){De=r;return}De=r=t}while(r!==null);ut===0&&(ut=5)}function uv(t,r){do{var a=_w(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);ut=6,De=null}function hv(t,r,a,l,h,f,b,E,I){t.cancelPendingCommit=null;do vu();while(Bt!==0);if((Qe&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=dd,Ro(t,a,f,b,E,I),t===et&&(De=et=null,Ue=0),Ua=r,Ai=t,La=a,vf=f,_f=h,tv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Dw(is,function(){return pv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=oe.p,oe.p=2,b=Qe,Qe|=4;try{bw(t,r,a)}finally{Qe=b,oe.p=h,K.T=l}}Bt=1,dv(),fv(),mv()}}function dv(){if(Bt===1){Bt=0;var t=Ai,r=Ua,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var h=Qe;Qe|=4;try{Ky(r,t);var f=kf,b=ep(t.containerInfo),E=f.focusedElem,I=f.selectionRange;if(b!==E&&E&&E.ownerDocument&&Jg(E.ownerDocument.documentElement,E)){if(I!==null&&od(E)){var B=I.start,$=I.end;if($===void 0&&($=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min($,E.value.length);else{var J=E.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var H=q.getSelection(),Ee=E.textContent.length,_e=Math.min(I.start,Ee),We=I.end===void 0?_e:Math.min(I.end,Ee);!H.extend&&_e>We&&(b=We,We=_e,_e=b);var V=Zg(E,_e),O=Zg(E,We);if(V&&O&&(H.rangeCount!==1||H.anchorNode!==V.node||H.anchorOffset!==V.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var z=J.createRange();z.setStart(V.node,V.offset),H.removeAllRanges(),_e>We?(H.addRange(z),H.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),H.addRange(z))}}}}for(J=[],H=E;H=H.parentNode;)H.nodeType===1&&J.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<J.length;E++){var Z=J[E];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Nu=!!Mf,kf=Mf=null}finally{Qe=h,oe.p=l,K.T=a}}t.current=r,Bt=2}}function fv(){if(Bt===2){Bt=0;var t=Ai,r=Ua,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var h=Qe;Qe|=4;try{Fy(t,r.alternate,r)}finally{Qe=h,oe.p=l,K.T=a}}Bt=3}}function mv(){if(Bt===4||Bt===3){Bt=0,fc();var t=Ai,r=Ua,a=La,l=tv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bt=5:(Bt=0,Ua=Ai=null,gv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Si=null),ia(a),r=r.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(lt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=K.T,h=oe.p,oe.p=2,K.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var E=l[b];f(E.value,{componentStack:E.stack})}}finally{K.T=r,oe.p=h}}(La&3)!==0&&vu(),gr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===bf?pl++:(pl=0,bf=t):pl=0,yl(0)}}function gv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Xo(r)))}function vu(t){return dv(),fv(),mv(),pv()}function pv(){if(Bt!==5)return!1;var t=Ai,r=vf;vf=0;var a=ia(La),l=K.T,h=oe.p;try{oe.p=32>a?32:a,K.T=null,a=_f,_f=null;var f=Ai,b=La;if(Bt=0,Ua=Ai=null,La=0,(Qe&6)!==0)throw Error(s(331));var E=Qe;if(Qe|=4,Jy(f.current),Xy(f,f.current,b,a),Qe=E,yl(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(lt,f)}catch{}return!0}finally{oe.p=h,K.T=l,gv(t,r)}}function yv(t,r,a){r=Cn(a,r),r=Wd(t.stateNode,r,2),t=pi(t,r,2),t!==null&&(Rr(t,2),gr(t))}function Ze(t,r,a){if(t.tag===3)yv(t,t,a);else for(;r!==null;){if(r.tag===3){yv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Si===null||!Si.has(l))){t=Cn(a,t),a=Ty(2),l=pi(r,a,2),l!==null&&(Ey(a,l,r,t),Rr(l,2),gr(l));break}}r=r.return}}function xf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new ww;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(mf=!0,h.add(a),t=Iw.bind(null,t,r,a),r.then(t,t))}function Iw(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(Ue&a)===a&&(ut===4||ut===3&&(Ue&62914560)===Ue&&300>wn()-yf?(Qe&2)===0&&za(t,0):gf|=a,Pa===Ue&&(Pa=0)),gr(t)}function vv(t,r){r===0&&(r=Ao()),t=Ea(t,r),t!==null&&(Rr(t,r),gr(t))}function Cw(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),vv(t,a)}function Nw(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),vv(t,a)}function Dw(t,r){return ns(t,r)}var _u=null,qa=null,Sf=!1,bu=!1,Af=!1,Ps=0;function gr(t){t!==qa&&t.next===null&&(qa===null?_u=qa=t:qa=qa.next=t),bu=!0,Sf||(Sf=!0,Ow())}function yl(t,r){if(!Af&&bu){Af=!0;do for(var a=!1,l=_u;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,E=l.pingedLanes;f=(1<<31-Qt(42|t)+1)-1,f&=h&~(b&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Ev(l,f))}else f=Ue,f=ra(l,l===et?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ls(l,f)||(a=!0,Ev(l,f));l=l.next}while(a);Af=!1}}function jw(){_v()}function _v(){bu=Sf=!1;var t=0;Ps!==0&&(Bw()&&(t=Ps),Ps=0);for(var r=wn(),a=null,l=_u;l!==null;){var h=l.next,f=bv(l,r);f===0?(l.next=null,a===null?_u=h:a.next=h,h===null&&(qa=a)):(a=l,(t!==0||(f&3)!==0)&&(bu=!0)),l=h}yl(t)}function bv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-Qt(f),E=1<<b,I=h[b];I===-1?((E&a)===0||(E&l)!==0)&&(h[b]=xo(E,r)):I<=r&&(t.expiredLanes|=E),f&=~E}if(r=et,a=Ue,a=ra(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&rs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ls(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&rs(l),ia(a)){case 2:case 8:a=ta;break;case 32:a=is;break;case 268435456:a=na;break;default:a=is}return l=Tv.bind(null,t),a=ns(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&rs(l),t.callbackPriority=2,t.callbackNode=null,2}function Tv(t,r){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(vu()&&t.callbackNode!==a)return null;var l=Ue;return l=ra(t,t===et?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(rv(t,l,r),bv(t,wn()),t.callbackNode!=null&&t.callbackNode===a?Tv.bind(null,t):null)}function Ev(t,r){if(vu())return null;rv(t,r,!0)}function Ow(){Hw(function(){(Qe&6)!==0?ns(Eo,jw):_v()})}function Rf(){return Ps===0&&(Ps=So()),Ps}function wv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ua(""+t)}function xv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function Mw(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=wv((h[yt]||null).action),b=l.submitter;b&&(r=(r=b[yt]||null)?wv(r.formAction):b.getAttribute("formAction"),r!==null&&(f=r,b=null));var E=new ha("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ps!==0){var I=b?xv(h,b):new FormData(h);Qd(a,{pending:!0,data:I,method:h.method,action:f},null,I)}}else typeof f=="function"&&(E.preventDefault(),I=b?xv(h,b):new FormData(h),Qd(a,{pending:!0,data:I,method:h.method,action:f},f,I))},currentTarget:h}]})}}for(var If=0;If<hd.length;If++){var Cf=hd[If],kw=Cf.toLowerCase(),Vw=Cf[0].toUpperCase()+Cf.slice(1);Hn(kw,"on"+Vw)}Hn(rp,"onAnimationEnd"),Hn(ip,"onAnimationIteration"),Hn(sp,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(JE,"onTransitionRun"),Hn(ew,"onTransitionStart"),Hn(tw,"onTransitionCancel"),Hn(ap,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function Sv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var b=l.length-1;0<=b;b--){var E=l[b],I=E.instance,B=E.currentTarget;if(E=E.listener,I!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=B;try{f(h)}catch($){ou($)}h.currentTarget=null,f=I}else for(b=0;b<l.length;b++){if(E=l[b],I=E.instance,B=E.currentTarget,E=E.listener,I!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=B;try{f(h)}catch($){ou($)}h.currentTarget=null,f=I}}}}function je(t,r){var a=r[Co];a===void 0&&(a=r[Co]=new Set);var l=t+"__bubble";a.has(l)||(Av(r,t,2,!1),a.add(l))}function Nf(t,r,a){var l=0;r&&(l|=4),Av(a,t,l,r)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[Tu]){t[Tu]=!0,No.forEach(function(a){a!=="selectionchange"&&(Pw.has(a)||Nf(a,!1,t),Nf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Tu]||(r[Tu]=!0,Nf("selectionchange",!1,r))}}function Av(t,r,a,l){switch(Xv(r)){case 2:var h=ux;break;case 8:h=hx;break;default:h=Gf}a=h.bind(null,r,a,t),h=void 0,!Rn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function jf(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var E=l.stateNode.containerInfo;if(E===h)break;if(b===4)for(b=l.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;E!==null;){if(b=Ir(E),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){l=f=b;continue e}E=E.parentNode}}l=l.return}wc(function(){var B=f,$=An(a),J=[];e:{var q=op.get(t);if(q!==void 0){var H=ha,Ee=t;switch(t){case"keypress":if(ar(a)===0)break e;case"keydown":case"keyup":H=ya;break;case"focusin":Ee="focus",H=ma;break;case"focusout":Ee="blur",H=ma;break;case"beforeblur":case"afterblur":H=ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=In;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Dc;break;case rp:case ip:case sp:H=ga;break;case ap:H=Oc;break;case"scroll":case"scrollend":H=xc;break;case"wheel":H=va;break;case"copy":case"cut":case"paste":H=pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=qo;break;case"toggle":case"beforetoggle":H=kc}var _e=(r&4)!==0,We=!_e&&(t==="scroll"||t==="scrollend"),V=_e?q!==null?q+"Capture":null:q;_e=[];for(var O=B,z;O!==null;){var Z=O;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||V===null||(Z=ps(O,V),Z!=null&&_e.push(_l(O,Z,z))),We)break;O=O.return}0<_e.length&&(q=new H(q,Ee,null,a,$),J.push({event:q,listeners:_e}))}}if((r&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==jr&&(Ee=a.relatedTarget||a.fromElement)&&(Ir(Ee)||Ee[xn]))break e;if((H||q)&&(q=$.window===$?$:(q=$.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Ee=a.relatedTarget||a.toElement,H=B,Ee=Ee?Ir(Ee):null,Ee!==null&&(We=c(Ee),_e=Ee.tag,Ee!==We||_e!==5&&_e!==27&&_e!==6)&&(Ee=null)):(H=null,Ee=B),H!==Ee)){if(_e=In,Z="onMouseLeave",V="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(_e=qo,Z="onPointerLeave",V="onPointerEnter",O="pointer"),We=H==null?q:nr(H),z=Ee==null?q:nr(Ee),q=new _e(Z,O+"leave",H,a,$),q.target=We,q.relatedTarget=z,Z=null,Ir($)===B&&(_e=new _e(V,O+"enter",Ee,a,$),_e.target=z,_e.relatedTarget=We,Z=_e),We=Z,H&&Ee)t:{for(_e=H,V=Ee,O=0,z=_e;z;z=Ha(z))O++;for(z=0,Z=V;Z;Z=Ha(Z))z++;for(;0<O-z;)_e=Ha(_e),O--;for(;0<z-O;)V=Ha(V),z--;for(;O--;){if(_e===V||V!==null&&_e===V.alternate)break t;_e=Ha(_e),V=Ha(V)}_e=null}else _e=null;H!==null&&Rv(J,q,H,_e,!1),Ee!==null&&We!==null&&Rv(J,We,Ee,_e,!0)}}e:{if(q=B?nr(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var me=Qg;else if(At(q))if(Yg)me=XE;else{me=KE;var Ne=YE}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ko(B.elementType)&&(me=Qg):me=$E;if(me&&(me=me(t,B))){Pr(J,me,a,$);break e}Ne&&Ne(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&hi(q,"number",q.value)}switch(Ne=B?nr(B):window,t){case"focusin":(At(Ne)||Ne.contentEditable==="true")&&(_a=Ne,ld=B,Go=null);break;case"focusout":Go=ld=_a=null;break;case"mousedown":cd=!0;break;case"contextmenu":case"mouseup":case"dragend":cd=!1,tp(J,a,$);break;case"selectionchange":if(ZE)break;case"keydown":case"keyup":tp(J,a,$)}var ge;if(cr)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Ve?Q(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(_&&a.locale!=="ko"&&(Ve||be!=="onCompositionStart"?be==="onCompositionEnd"&&Ve&&(ge=Po()):(sr=$,di="value"in sr?sr.value:sr.textContent,Ve=!0)),Ne=Eu(B,be),0<Ne.length&&(be=new zo(be,t,null,a,$),J.push({event:be,listeners:Ne}),ge?be.data=ge:(ge=ae(a),ge!==null&&(be.data=ge)))),(ge=p?St(t,a):Pe(t,a))&&(be=Eu(B,"onBeforeInput"),0<be.length&&(Ne=new zo("onBeforeInput","beforeinput",null,a,$),J.push({event:Ne,listeners:be}),Ne.data=ge)),Mw(J,t,B,a,$)}Sv(J,r)})}function _l(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Eu(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ps(t,a),h!=null&&l.unshift(_l(t,h,f)),h=ps(t,r),h!=null&&l.push(_l(t,h,f))),t.tag===3)return l;t=t.return}return[]}function Ha(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Rv(t,r,a,l,h){for(var f=r._reactName,b=[];a!==null&&a!==l;){var E=a,I=E.alternate,B=E.stateNode;if(E=E.tag,I!==null&&I===l)break;E!==5&&E!==26&&E!==27||B===null||(I=B,h?(B=ps(a,f),B!=null&&b.unshift(_l(a,B,I))):h||(B=ps(a,f),B!=null&&b.push(_l(a,B,I)))),a=a.return}b.length!==0&&t.push({event:r,listeners:b})}var Uw=/\r\n?/g,Lw=/\u0000|\uFFFD/g;function Iv(t){return(typeof t=="string"?t:""+t).replace(Uw,`
`).replace(Lw,"")}function Cv(t,r){return r=Iv(r),Iv(t)===r}function wu(){}function Xe(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Sn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Sn(t,""+l);break;case"className":rr(t,"class",l);break;case"tabIndex":rr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":rr(t,a,l);break;case"style":Mo(t,l,f);break;case"data":if(r!=="object"){rr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ua(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&Xe(t,r,"name",h.name,h,null),Xe(t,r,"formEncType",h.formEncType,h,null),Xe(t,r,"formMethod",h.formMethod,h,null),Xe(t,r,"formTarget",h.formTarget,h,null)):(Xe(t,r,"encType",h.encType,h,null),Xe(t,r,"method",h.method,h,null),Xe(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ua(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=wu);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ua(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),ui(t,"popover",l);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ui(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=td.get(a)||a,ui(t,a,l))}}function Of(t,r,a,l,h,f){switch(a){case"style":Mo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Sn(t,l):(typeof l=="number"||typeof l=="bigint")&&Sn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=wu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[yt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ui(t,a,l)}}}function qt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Xe(t,r,f,b,a,null)}}h&&Xe(t,r,"srcSet",a.srcSet,a,null),l&&Xe(t,r,"src",a.src,a,null);return;case"input":je("invalid",t);var E=f=b=h=null,I=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":b=$;break;case"checked":I=$;break;case"defaultChecked":B=$;break;case"value":f=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:Xe(t,r,l,$,a,null)}}fs(t,f,E,I,B,b,h,!1),ca(t);return;case"select":je("invalid",t),l=b=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":b=E;break;case"multiple":l=E;default:Xe(t,r,h,E,a,null)}r=f,a=b,t.multiple=!!l,r!=null?Dr(t,!!l,r,!1):a!=null&&Dr(t,!!l,a,!0);return;case"textarea":je("invalid",t),f=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(E=a[b],E!=null))switch(b){case"value":l=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xe(t,r,b,E,a,null)}ms(t,l,h,f),ca(t);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xe(t,r,I,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<vl.length;l++)je(vl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Xe(t,r,B,l,a,null)}return;default:if(ko(r)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&Of(t,r,$,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Xe(t,r,E,l,a,null))}function zw(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,E=null,I=null,B=null,$=null;for(H in a){var J=a[H];if(a.hasOwnProperty(H)&&J!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":I=J;default:l.hasOwnProperty(H)||Xe(t,r,H,null,l,J)}}for(var q in l){var H=l[q];if(J=a[q],l.hasOwnProperty(q)&&(H!=null||J!=null))switch(q){case"type":f=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":$=H;break;case"value":b=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,r));break;default:H!==J&&Xe(t,r,q,H,l,J)}}dn(t,b,E,I,B,$,f,h);return;case"select":H=b=E=q=null;for(f in a)if(I=a[f],a.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":H=I;default:l.hasOwnProperty(f)||Xe(t,r,f,null,l,I)}for(h in l)if(f=l[h],I=a[h],l.hasOwnProperty(h)&&(f!=null||I!=null))switch(h){case"value":q=f;break;case"defaultValue":E=f;break;case"multiple":b=f;default:f!==I&&Xe(t,r,h,f,l,I)}r=E,a=b,l=H,q!=null?Dr(t,!!a,q,!1):!!l!=!!a&&(r!=null?Dr(t,!!a,r,!0):Dr(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xe(t,r,E,null,l,h)}for(b in l)if(h=l[b],f=a[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Xe(t,r,b,h,l,f)}Ke(t,q,H);return;case"option":for(var Ee in a)if(q=a[Ee],a.hasOwnProperty(Ee)&&q!=null&&!l.hasOwnProperty(Ee))switch(Ee){case"selected":t.selected=!1;break;default:Xe(t,r,Ee,null,l,q)}for(I in l)if(q=l[I],H=a[I],l.hasOwnProperty(I)&&q!==H&&(q!=null||H!=null))switch(I){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Xe(t,r,I,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)q=a[_e],a.hasOwnProperty(_e)&&q!=null&&!l.hasOwnProperty(_e)&&Xe(t,r,_e,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,r));break;default:Xe(t,r,B,q,l,H)}return;default:if(ko(r)){for(var We in a)q=a[We],a.hasOwnProperty(We)&&q!==void 0&&!l.hasOwnProperty(We)&&Of(t,r,We,void 0,l,q);for($ in l)q=l[$],H=a[$],!l.hasOwnProperty($)||q===H||q===void 0&&H===void 0||Of(t,r,$,q,l,H);return}}for(var V in a)q=a[V],a.hasOwnProperty(V)&&q!=null&&!l.hasOwnProperty(V)&&Xe(t,r,V,null,l,q);for(J in l)q=l[J],H=a[J],!l.hasOwnProperty(J)||q===H||q==null&&H==null||Xe(t,r,J,q,l,H)}var Mf=null,kf=null;function xu(t){return t.nodeType===9?t:t.ownerDocument}function Nv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Vf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pf=null;function Bw(){var t=window.event;return t&&t.type==="popstate"?t===Pf?!1:(Pf=t,!0):(Pf=null,!1)}var jv=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,Hw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(t){return Ov.resolve(null).then(t).catch(Fw)}:jv;function Fw(t){setTimeout(function(){throw t})}function Ii(t){return t==="head"}function Mv(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&bl(b.documentElement),a&2&&bl(b.body),a&4)for(a=b.head,bl(a),b=a.firstChild;b;){var E=b.nextSibling,I=b.nodeName;b[cs]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=E}}if(h===0){t.removeChild(f),Il(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Il(r)}function Uf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uf(a),ci(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Gw(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[cs])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Gn(t.nextSibling),t===null)break}return null}function Qw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Gn(t.nextSibling),t===null))return null;return t}function Lf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Yw(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Gn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var zf=null;function kv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function Vv(t,r,a){switch(r=xu(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function bl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ci(t)}var kn=new Map,Pv=new Set;function Su(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xr=oe.d;oe.d={f:Kw,r:$w,D:Xw,C:Ww,L:Zw,m:Jw,X:tx,S:ex,M:nx};function Kw(){var t=Xr.f(),r=pu();return t||r}function $w(t){var r=tr(t);r!==null&&r.tag===5&&r.type==="form"?ry(r):Xr.r(t)}var Fa=typeof document>"u"?null:document;function Uv(t,r,a){var l=Fa;if(l&&typeof r=="string"&&r){var h=vt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Pv.has(h)||(Pv.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),qt(r,"link",t),ht(r),l.head.appendChild(r)))}}function Xw(t){Xr.D(t),Uv("dns-prefetch",t,null)}function Ww(t,r){Xr.C(t,r),Uv("preconnect",t,r)}function Zw(t,r,a){Xr.L(t,r,a);var l=Fa;if(l&&t&&r){var h='link[rel="preload"][as="'+vt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+vt(a.imageSizes)+'"]')):h+='[href="'+vt(t)+'"]';var f=h;switch(r){case"style":f=Ga(t);break;case"script":f=Qa(t)}kn.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),kn.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Tl(f))||r==="script"&&l.querySelector(El(f))||(r=l.createElement("link"),qt(r,"link",t),ht(r),l.head.appendChild(r)))}}function Jw(t,r){Xr.m(t,r);var a=Fa;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+vt(l)+'"][href="'+vt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Qa(t)}if(!kn.has(f)&&(t=T({rel:"modulepreload",href:t},r),kn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(El(f)))return}l=a.createElement("link"),qt(l,"link",t),ht(l),a.head.appendChild(l)}}}function ex(t,r,a){Xr.S(t,r,a);var l=Fa;if(l&&t){var h=Jt(l).hoistableStyles,f=Ga(t);r=r||"default";var b=h.get(f);if(!b){var E={loading:0,preload:null};if(b=l.querySelector(Tl(f)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=kn.get(f))&&Bf(t,a);var I=b=l.createElement("link");ht(I),qt(I,"link",t),I._p=new Promise(function(B,$){I.onload=B,I.onerror=$}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Au(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:E},h.set(f,b)}}}function tx(t,r){Xr.X(t,r);var a=Fa;if(a&&t){var l=Jt(a).hoistableScripts,h=Qa(t),f=l.get(h);f||(f=a.querySelector(El(h)),f||(t=T({src:t,async:!0},r),(r=kn.get(h))&&qf(t,r),f=a.createElement("script"),ht(f),qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function nx(t,r){Xr.M(t,r);var a=Fa;if(a&&t){var l=Jt(a).hoistableScripts,h=Qa(t),f=l.get(h);f||(f=a.querySelector(El(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=kn.get(h))&&qf(t,r),f=a.createElement("script"),ht(f),qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Lv(t,r,a,l){var h=(h=xe.current)?Su(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Ga(a.href),a=Jt(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ga(a.href);var f=Jt(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(Tl(t)))&&!f._p&&(b.instance=f,b.state.loading=5),kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kn.set(t,a),f||rx(h,t,a,b.state))),r&&l===null)throw Error(s(528,""));return b}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Qa(a),a=Jt(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ga(t){return'href="'+vt(t)+'"'}function Tl(t){return'link[rel="stylesheet"]['+t+"]"}function zv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function rx(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),qt(r,"link",a),ht(r),t.head.appendChild(r))}function Qa(t){return'[src="'+vt(t)+'"]'}function El(t){return"script[async]"+t}function Bv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+vt(a.href)+'"]');if(l)return r.instance=l,ht(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ht(l),qt(l,"style",h),Au(l,a.precedence,t),r.instance=l;case"stylesheet":h=Ga(a.href);var f=t.querySelector(Tl(h));if(f)return r.state.loading|=4,r.instance=f,ht(f),f;l=zv(a),(h=kn.get(h))&&Bf(l,h),f=(t.ownerDocument||t).createElement("link"),ht(f);var b=f;return b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),qt(f,"link",l),r.state.loading|=4,Au(f,a.precedence,t),r.instance=f;case"script":return f=Qa(a.src),(h=t.querySelector(El(f)))?(r.instance=h,ht(h),h):(l=a,(h=kn.get(f))&&(l=T({},a),qf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ht(h),qt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Au(l,a.precedence,t));return r.instance}function Au(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var E=l[b];if(E.dataset.precedence===r)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Bf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function qf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ru=null;function qv(t,r,a){if(Ru===null){var l=new Map,h=Ru=new Map;h.set(a,l)}else h=Ru,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[cs]||f[xt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(r)||"";b=t+b;var E=l.get(b);E?E.push(f):l.set(b,[f])}}return l}function Hv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function ix(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Fv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var wl=null;function sx(){}function ax(t,r,a){if(wl===null)throw Error(s(475));var l=wl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=Ga(a.href),f=t.querySelector(Tl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Iu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,ht(f);return}f=t.ownerDocument||t,a=zv(a),(h=kn.get(h))&&Bf(a,h),f=f.createElement("link"),ht(f);var b=f;b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),qt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Iu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function ox(){if(wl===null)throw Error(s(475));var t=wl;return t.stylesheets&&t.count===0&&Hf(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Hf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Iu(){if(this.count--,this.count===0){if(this.stylesheets)Hf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cu=null;function Hf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cu=new Map,r.forEach(lx,t),Cu=null,Iu.call(t))}function lx(t,r){if(!(r.state.loading&4)){var a=Cu.get(t);if(a)var l=a.get(null);else{a=new Map,Cu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=r.instance,b=h.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,h),a.set(b,h),this.count++,l=Iu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var xl={$$typeof:te,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function cx(t,r,a,l,h,f,b,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ar(0),this.hiddenUpdates=Ar(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Gv(t,r,a,l,h,f,b,E,I,B,$,J){return t=new cx(t,r,a,b,E,I,B,J),r=1,f===!0&&(r|=24),f=mn(3,null,null,r),t.current=f,f.stateNode=t,r=wd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Rd(f),t}function Qv(t){return t?(t=wa,t):wa}function Yv(t,r,a,l,h,f){h=Qv(h),l.context===null?l.context=h:l.pendingContext=h,l=gi(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=pi(t,l,r),a!==null&&(_n(a,t,r),el(a,t,r))}function Kv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Ff(t,r){Kv(t,r),(t=t.alternate)&&Kv(t,r)}function $v(t){if(t.tag===13){var r=Ea(t,67108864);r!==null&&_n(r,t,67108864),Ff(t,67108864)}}var Nu=!0;function ux(t,r,a,l){var h=K.T;K.T=null;var f=oe.p;try{oe.p=2,Gf(t,r,a,l)}finally{oe.p=f,K.T=h}}function hx(t,r,a,l){var h=K.T;K.T=null;var f=oe.p;try{oe.p=8,Gf(t,r,a,l)}finally{oe.p=f,K.T=h}}function Gf(t,r,a,l){if(Nu){var h=Qf(l);if(h===null)jf(t,r,l,Du,a),Wv(t,l);else if(fx(h,t,r,a,l))l.stopPropagation();else if(Wv(t,l),r&4&&-1<dx.indexOf(t)){for(;h!==null;){var f=tr(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=zn(f.pendingLanes);if(b!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var I=1<<31-Qt(b);E.entanglements[1]|=I,b&=~I}gr(f),(Qe&6)===0&&(mu=wn()+500,yl(0))}}break;case 13:E=Ea(f,2),E!==null&&_n(E,f,2),pu(),Ff(f,2)}if(f=Qf(l),f===null&&jf(t,r,l,Du,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else jf(t,r,l,null,a)}}function Qf(t){return t=An(t),Yf(t)}var Du=null;function Yf(t){if(Du=null,t=Ir(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Du=t,null}function Xv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($h()){case Eo:return 2;case ta:return 8;case is:case Xh:return 32;case na:return 268435456;default:return 32}default:return 32}}var Kf=!1,Ci=null,Ni=null,Di=null,Sl=new Map,Al=new Map,ji=[],dx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wv(t,r){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":Sl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(r.pointerId)}}function Rl(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=tr(r),r!==null&&$v(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function fx(t,r,a,l,h){switch(r){case"focusin":return Ci=Rl(Ci,t,r,a,l,h),!0;case"dragenter":return Ni=Rl(Ni,t,r,a,l,h),!0;case"mouseover":return Di=Rl(Di,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return Sl.set(f,Rl(Sl.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Al.set(f,Rl(Al.get(f)||null,t,r,a,l,h)),!0}return!1}function Zv(t){var r=Ir(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,pc(t.priority,function(){if(a.tag===13){var l=vn();l=ai(l);var h=Ea(a,l);h!==null&&_n(h,a,l),Ff(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Qf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);jr=l,a.target.dispatchEvent(l),jr=null}else return r=tr(a),r!==null&&$v(r),t.blockedOn=a,!1;r.shift()}return!0}function Jv(t,r,a){ju(t)&&a.delete(r)}function mx(){Kf=!1,Ci!==null&&ju(Ci)&&(Ci=null),Ni!==null&&ju(Ni)&&(Ni=null),Di!==null&&ju(Di)&&(Di=null),Sl.forEach(Jv),Al.forEach(Jv)}function Ou(t,r){t.blockedOn===r&&(t.blockedOn=null,Kf||(Kf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,mx)))}var Mu=null;function e0(t){Mu!==t&&(Mu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Mu===t&&(Mu=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Yf(l||a)===null)continue;break}var f=tr(a);f!==null&&(t.splice(r,3),r-=3,Qd(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Il(t){function r(I){return Ou(I,t)}Ci!==null&&Ou(Ci,t),Ni!==null&&Ou(Ni,t),Di!==null&&Ou(Di,t),Sl.forEach(r),Al.forEach(r);for(var a=0;a<ji.length;a++){var l=ji[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ji.length&&(a=ji[0],a.blockedOn===null);)Zv(a),a.blockedOn===null&&ji.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],b=h[yt]||null;if(typeof f=="function")b||e0(a);else if(b){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[yt]||null)E=b.formAction;else if(Yf(h)!==null)continue}else E=b.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),e0(a)}}}function $f(t){this._internalRoot=t}ku.prototype.render=$f.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=vn();Yv(a,l,t,r,null,null)},ku.prototype.unmount=$f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Yv(t.current,2,null,t,null,null),pu(),r[xn]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var r=oi();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ji.length&&r!==0&&r<ji[a].priority;a++);ji.splice(a,0,t),a===0&&Zv(t)}};var t0=e.version;if(t0!=="19.1.1")throw Error(s(527,t0,"19.1.1"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(r),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var gx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{lt=Vu.inject(gx),Ge=Vu}catch{}}return Nl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=yy,f=vy,b=_y,E=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(E=r.unstable_transitionCallbacks)),r=Gv(t,1,!1,null,null,a,l,h,f,b,E,null),t[xn]=r.current,Df(t),new $f(r)},Nl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=yy,b=vy,E=_y,I=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),r=Gv(t,1,!0,r,a??null,l,h,f,b,E,I,B),r.context=Qv(null),a=r.current,l=vn(),l=ai(l),h=gi(l),h.callback=null,pi(a,h,l),a=l,r.current.lanes=a,Rr(r,a),gr(r),t[xn]=r.current,Df(t),new ku(r)},Nl.version="19.1.1",Nl}var h0;function Sx(){if(h0)return Zf.exports;h0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Zf.exports=xx(),Zf.exports}var Ax=Sx();const Rx=()=>{};var d0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Ix=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],g=i[n++],y=((o&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,g=d?i[o+1]:0,y=o+2<i.length,v=y?i[o+2]:0,T=c>>2,A=(c&3)<<4|g>>4;let S=(g&15)<<2|v>>6,U=v&63;y||(U=64,d||(S=64)),s.push(n[T],n[A],n[S],n[U])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(W_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Ix(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const v=o<i.length?n[i.charAt(o)]:64;++o;const A=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||g==null||v==null||A==null)throw new Cx;const S=c<<2|g>>4;if(s.push(S),v!==64){const U=g<<4&240|v>>2;if(s.push(U),A!==64){const Y=v<<6&192|A;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Cx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nx=function(i){const e=W_(i);return Z_.encodeByteArray(e,!0)},Ju=function(i){return Nx(i).replace(/\./g,"")},J_=function(i){try{return Z_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=()=>Dx().__FIREBASE_DEFAULTS__,Ox=()=>{if(typeof process>"u"||typeof d0>"u")return;const i=d0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Mx=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&J_(i[1]);return e&&JSON.parse(e)},bh=()=>{try{return Rx()||jx()||Ox()||Mx()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},eb=i=>bh()?.emulatorHosts?.[i],tb=i=>{const e=eb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},nb=()=>bh()?.config,rb=i=>bh()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qm(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Ju(JSON.stringify(n)),Ju(JSON.stringify(d)),""].join(".")}const Vl={};function Px(){const i={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?i.emulator.push(e):i.prod.push(e);return i}function Ux(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let f0=!1;function Ym(i,e){if(typeof window>"u"||typeof document>"u"||!Xs(window.location.host)||Vl[i]===e||Vl[i]||f0)return;Vl[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",c=Px().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,U){S.setAttribute("width","24"),S.setAttribute("id",U),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{f0=!0,d()},S}function T(S,U){S.setAttribute("id",U),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=Ux(s),U=n("text"),Y=document.getElementById(U)||document.createElement("span"),ie=n("learnmore"),X=document.getElementById(ie)||document.createElement("a"),F=n("preprendIcon"),re=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;g(te),T(X,ie);const ce=v();y(re,F),te.append(re,Y,X,ce),document.body.appendChild(te)}c?(Y.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function zx(){const i=bh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ib(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function qx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hx(){const i=Zt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Fx(){return!zx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sb(){try{return typeof indexedDB=="object"}catch{return!1}}function ab(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}function Gx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="FirebaseError";class Zn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Qx,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ws.prototype.create)}}class Ws{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?Yx(c,s):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new Zn(o,g,s)}}function Yx(i,e){return i.replace(Kx,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Kx=/\{\$([^}]+)}/g;function $x(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Fi(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],d=e[o];if(m0(c)&&m0(d)){if(!Fi(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function m0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xx(i,e){const n=new Wx(i,e);return n.subscribe.bind(n)}class Wx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Zx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=nm),o.error===void 0&&(o.error=nm),o.complete===void 0&&(o.complete=nm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zx(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=1e3,e1=2,t1=14400*1e3,n1=.5;function g0(i,e=Jx,n=e1){const s=e*Math.pow(n,i),o=Math.round(n1*s*(Math.random()-.5)*2);return Math.min(t1,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(i){return i&&i._delegate?i._delegate:i}class Ln{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new kx;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s1(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:i1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i1(i){return i===Us?void 0:i}function s1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new r1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Oe||(Oe={}));const o1={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},l1=Oe.INFO,c1={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},u1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=c1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Th{constructor(e){this.name=e,this._logLevel=l1,this._logHandler=u1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const h1=(i,e)=>e.some(n=>i instanceof n);let p0,y0;function d1(){return p0||(p0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f1(){return y0||(y0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ob=new WeakMap,vm=new WeakMap,lb=new WeakMap,rm=new WeakMap,Km=new WeakMap;function m1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(zi(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&ob.set(n,i)}).catch(()=>{}),Km.set(e,i),e}function g1(i){if(vm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});vm.set(i,e)}let _m={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return vm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||lb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function p1(i){_m=i(_m)}function y1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(im(this),e,...n);return lb.set(s,e.sort?e.sort():[e]),zi(s)}:f1().includes(i)?function(...e){return i.apply(im(this),e),zi(ob.get(this))}:function(...e){return zi(i.apply(im(this),e))}}function v1(i){return typeof i=="function"?y1(i):(i instanceof IDBTransaction&&g1(i),h1(i,d1())?new Proxy(i,_m):i)}function zi(i){if(i instanceof IDBRequest)return m1(i);if(rm.has(i))return rm.get(i);const e=v1(i);return e!==i&&(rm.set(i,e),Km.set(e,i)),e}const im=i=>Km.get(i);function cb(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),g=zi(d);return s&&d.addEventListener("upgradeneeded",y=>{s(zi(d.result),y.oldVersion,y.newVersion,zi(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const _1=["get","getKey","getAll","getAllKeys","count"],b1=["put","add","delete","clear"],sm=new Map;function v0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=b1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||_1.includes(n)))return;const c=async function(d,...g){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),o&&y.done]))[0]};return sm.set(e,c),c}p1(i=>({...i,get:(e,n,s)=>v0(e,n)||i.get(e,n,s),has:(e,n)=>!!v0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(E1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function E1(i){return i.getComponent()?.type==="VERSION"}const bm="@firebase/app",_0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new Th("@firebase/app"),w1="@firebase/app-compat",x1="@firebase/analytics-compat",S1="@firebase/analytics",A1="@firebase/app-check-compat",R1="@firebase/app-check",I1="@firebase/auth",C1="@firebase/auth-compat",N1="@firebase/database",D1="@firebase/data-connect",j1="@firebase/database-compat",O1="@firebase/functions",M1="@firebase/functions-compat",k1="@firebase/installations",V1="@firebase/installations-compat",P1="@firebase/messaging",U1="@firebase/messaging-compat",L1="@firebase/performance",z1="@firebase/performance-compat",B1="@firebase/remote-config",q1="@firebase/remote-config-compat",H1="@firebase/storage",F1="@firebase/storage-compat",G1="@firebase/firestore",Q1="@firebase/ai",Y1="@firebase/firestore-compat",K1="firebase",$1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="[DEFAULT]",X1={[bm]:"fire-core",[w1]:"fire-core-compat",[S1]:"fire-analytics",[x1]:"fire-analytics-compat",[R1]:"fire-app-check",[A1]:"fire-app-check-compat",[I1]:"fire-auth",[C1]:"fire-auth-compat",[N1]:"fire-rtdb",[D1]:"fire-data-connect",[j1]:"fire-rtdb-compat",[O1]:"fire-fn",[M1]:"fire-fn-compat",[k1]:"fire-iid",[V1]:"fire-iid-compat",[P1]:"fire-fcm",[U1]:"fire-fcm-compat",[L1]:"fire-perf",[z1]:"fire-perf-compat",[B1]:"fire-rc",[q1]:"fire-rc-compat",[H1]:"fire-gcs",[F1]:"fire-gcs-compat",[G1]:"fire-fst",[Y1]:"fire-fst-compat",[Q1]:"fire-vertex","fire-js":"fire-js",[K1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map,W1=new Map,Em=new Map;function b0(i,e){try{i.container.addComponent(e)}catch(n){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function $n(i){const e=i.name;if(Em.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;Em.set(e,i);for(const n of eh.values())b0(n,i);for(const n of W1.values())b0(n,i);return!0}function Wi(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Vn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bi=new Ws("app","Firebase",Z1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=$1;function ub(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Tm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Bi.create("bad-app-name",{appName:String(o)});if(n||(n=nb()),!n)throw Bi.create("no-options");const c=eh.get(o);if(c){if(Fi(n,c.options)&&Fi(s,c.config))return c;throw Bi.create("duplicate-app",{appName:o})}const d=new a1(o);for(const y of Em.values())d.addComponent(y);const g=new J1(n,s,d);return eh.set(o,g),g}function Eh(i=Tm){const e=eh.get(i);if(!e&&i===Tm&&nb())return ub();if(!e)throw Bi.create("no-app",{appName:i});return e}function cn(i,e,n){let s=X1[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(d.join(" "));return}$n(new Ln(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firebase-heartbeat-database",tS=1,Ql="firebase-heartbeat-store";let am=null;function hb(){return am||(am=cb(eS,tS,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(i=>{throw Bi.create("idb-open",{originalErrorMessage:i.message})})),am}async function nS(i){try{const n=(await hb()).transaction(Ql),s=await n.objectStore(Ql).get(db(i));return await n.done,s}catch(e){if(e instanceof Zn)ti.warn(e.message);else{const n=Bi.create("idb-get",{originalErrorMessage:e?.message});ti.warn(n.message)}}}async function T0(i,e){try{const s=(await hb()).transaction(Ql,"readwrite");await s.objectStore(Ql).put(e,db(i)),await s.done}catch(n){if(n instanceof Zn)ti.warn(n.message);else{const s=Bi.create("idb-set",{originalErrorMessage:n?.message});ti.warn(s.message)}}}function db(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=1024,iS=30;class sS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=E0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>iS){const o=lS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ti.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=E0(),{heartbeatsToSend:n,unsentEntries:s}=aS(this._heartbeatsCache.heartbeats),o=Ju(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ti.warn(e),""}}}function E0(){return new Date().toISOString().substring(0,10)}function aS(i,e=rS){const n=[];let s=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),w0(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),w0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class oS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sb()?ab().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nS(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function w0(i){return Ju(JSON.stringify({version:2,heartbeats:i})).length}function lS(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(i){$n(new Ln("platform-logger",e=>new T1(e),"PRIVATE")),$n(new Ln("heartbeat",e=>new sS(e),"PRIVATE")),cn(bm,_0,i),cn(bm,_0,"esm2020"),cn("fire-js","")}cS("");function fb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uS=fb,mb=new Ws("auth","Firebase",fb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Th("@firebase/auth");function hS(i,...e){th.logLevel<=Oe.WARN&&th.warn(`Auth (${mo}): ${i}`,...e)}function Hu(i,...e){th.logLevel<=Oe.ERROR&&th.error(`Auth (${mo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(i,...e){throw Xm(i,...e)}function Kn(i,...e){return Xm(i,...e)}function $m(i,e,n){const s={...uS(),[e]:n};return new Ws("auth","Firebase",s).create(e,{appName:i.name})}function qs(i){return $m(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dS(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&wr(i,"argument-error"),$m(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return mb.create(i,...e)}function we(i,e,...n){if(!i)throw Xm(e,...n)}function Zr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Hu(e),new Error(e)}function ni(i,e){i||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){return typeof self<"u"&&self.location?.href||""}function fS(){return x0()==="http:"||x0()==="https:"}function x0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fS()||ib()||"connection"in navigator)?navigator.onLine:!0}function gS(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=Lx()||qx()}get(){return mS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(i,e){ni(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vS=new rc(3e4,6e4);function Zm(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function go(i,e,n,s,o={}){return pb(i,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const g=nc({key:i.config.apiKey,...d}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const v={method:e,headers:y,...c};return Bx()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&Xs(i.emulatorConfig.host)&&(v.credentials="include"),gb.fetch()(await yb(i,i.config.apiHost,n,g),v)})}async function pb(i,e,n){i._canInitEmulator=!1;const s={...pS,...e};try{const o=new bS(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Pu(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[y,v]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pu(i,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Pu(i,"email-already-in-use",d);if(y==="USER_DISABLED")throw Pu(i,"user-disabled",d);const T=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw $m(i,T,v);wr(i,T)}}catch(o){if(o instanceof Zn)throw o;wr(i,"network-request-failed",{message:String(o)})}}async function _S(i,e,n,s,o={}){const c=await go(i,e,n,s,o);return"mfaPendingCredential"in c&&wr(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function yb(i,e,n,s){const o=`${e}${n}?${s}`,c=i,d=c.config.emulator?Wm(i.config,o):`${i.config.apiScheme}://${o}`;return yS.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class bS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Kn(this.auth,"network-request-failed")),vS.get())})}}function Pu(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Kn(i,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(i,e){return go(i,"POST","/v1/accounts:delete",e)}async function nh(i,e){return go(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ES(i,e=!1){const n=pt(i),s=await n.getIdToken(e),o=Jm(s);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:Pl(om(o.auth_time)),issuedAtTime:Pl(om(o.iat)),expirationTime:Pl(om(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function om(i){return Number(i)*1e3}function Jm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const o=J_(n);return o?JSON.parse(o):(Hu("Failed to decode base64 JWT payload"),null)}catch(o){return Hu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function S0(i){const e=Jm(i);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Zn&&wS(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function wS({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(i){const e=i.auth,n=await i.getIdToken(),s=await Yl(i,nh(e,{idToken:n}));we(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?vb(o.providerUserInfo):[],d=AS(i.providerData,c),g=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!d?.length,v=g?y:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new xm(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(i,T)}async function SS(i){const e=pt(i);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AS(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function vb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(i,e){const n=await pb(i,{},async()=>{const s=nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await yb(i,o,"/v1/token",`key=${c}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return i.emulatorConfig&&Xs(i.emulatorConfig.host)&&(y.credentials="include"),gb.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IS(i,e){return go(i,"POST","/v2/accounts:revokeToken",Zm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=S0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await RS(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new Wa;return s&&(we(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(we(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(i,e){we(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new xS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Yl(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ES(this,e)}reload(){return SS(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(qs(this.auth));const e=await this.getIdToken();return await Yl(this,TS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,y=n._redirectEventId??void 0,v=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:A,emailVerified:S,isAnonymous:U,providerData:Y,stsTokenManager:ie}=n;we(A&&ie,e,"internal-error");const X=Wa.fromJSON(this.name,ie);we(typeof A=="string",e,"internal-error"),Mi(s,e.name),Mi(o,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof U=="boolean",e,"internal-error"),Mi(c,e.name),Mi(d,e.name),Mi(g,e.name),Mi(y,e.name),Mi(v,e.name),Mi(T,e.name);const F=new Qn({uid:A,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:U,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:X,createdAt:v,lastLoginAt:T});return Y&&Array.isArray(Y)&&(F.providerData=Y.map(re=>({...re}))),y&&(F._redirectEventId=y),F}static async _fromIdTokenResponse(e,n,s=!1){const o=new Wa;o.updateFromServerResponse(n);const c=new Qn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await rh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];we(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?vb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,g=new Wa;g.updateFromIdToken(s);const y=new Qn({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new xm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=new Map;function Jr(i){ni(i instanceof Function,"Expected a class definition");let e=A0.get(i);return e?(ni(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,A0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_b.type="NONE";const R0=_b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(i,e,n){return`firebase:${i}:${e}:${n}`}class Za{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Fu(this.userKey,o.apiKey,c),this.fullPersistenceKey=Fu("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nh(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Za(Jr(R0),e,s);const o=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=o[0]||Jr(R0);const d=Fu(s,e.config.apiKey,e.name);let g=null;for(const v of n)try{const T=await v._get(d);if(T){let A;if(typeof T=="string"){const S=await nh(e,{idToken:T}).catch(()=>{});if(!S)break;A=await Qn._fromGetAccountInfoResponse(e,S,T)}else A=Qn._fromJSON(e,T);v!==c&&(g=A),c=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Za(c,e,s):(c=y[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new Za(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sb(e))return"Blackberry";if(Ab(e))return"Webos";if(Tb(e))return"Safari";if((e.includes("chrome/")||Eb(e))&&!e.includes("edge/"))return"Chrome";if(xb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function bb(i=Zt()){return/firefox\//i.test(i)}function Tb(i=Zt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Eb(i=Zt()){return/crios\//i.test(i)}function wb(i=Zt()){return/iemobile/i.test(i)}function xb(i=Zt()){return/android/i.test(i)}function Sb(i=Zt()){return/blackberry/i.test(i)}function Ab(i=Zt()){return/webos/i.test(i)}function eg(i=Zt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function CS(i=Zt()){return eg(i)&&!!window.navigator?.standalone}function NS(){return Hx()&&document.documentMode===10}function Rb(i=Zt()){return eg(i)||xb(i)||Ab(i)||Sb(i)||/windows phone/i.test(i)||wb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(i,e=[]){let n;switch(i){case"Browser":n=I0(Zt());break;case"Worker":n=`${I0(Zt())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,g)=>{try{const y=e(c);d(y)}catch(y){g(y)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(i,e={}){return go(i,"GET","/v2/passwordPolicy",Zm(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=6;class MS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??OS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C0(this),this.idTokenSubscription=new C0(this),this.beforeStateQueue=new DS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nh(this,{idToken:e}),s=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===d)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(qs(this));const n=e?pt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jS(this),n=new MS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ws("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await IS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jr(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[Jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,s,o);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ib(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wh(i){return pt(i)}class C0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xx(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VS(i){tg=i}function PS(i){return tg.loadJS(i)}function US(){return tg.gapiScript}function LS(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(i,e){const n=Wi(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Fi(c,e??{}))return o;wr(o,"already-initialized")}return n.initialize({options:e})}function BS(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Jr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function qS(i,e,n){const s=wh(i);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=Cb(e),{host:d,port:g}=HS(e),y=g===null?"":`:${g}`,v={url:`${c}//${d}${y}/`},T=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Fi(v,s.config.emulator)&&Fi(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Xs(d)?(Qm(`${c}//${d}${y}`),Ym("Auth",!0)):FS()}function Cb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function HS(i){const e=Cb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:N0(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:N0(d)}}}function N0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function FS(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,n){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(i,e){return _S(i,"POST","/v1/accounts:signInWithIdp",Zm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="http://localhost";class Gs extends Nb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new Gs(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ja(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ja(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ja(e,n)}buildRequest(){const e={requestUri:GS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends ng{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends ic{constructor(){super("facebook.com")}static credential(e){return Gs._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gs._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Wr.credential(n,s)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends ic{constructor(){super("github.com")}static credential(e){return Gs._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends ic{constructor(){super("twitter.com")}static credential(e,n){return Gs._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Pi.credential(n,s)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Qn._fromIdTokenResponse(e,s,o),d=D0(s);return new ao({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=D0(s);return new ao({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function D0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends Zn{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ih.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new ih(e,n,s,o)}}function Db(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ih._fromErrorAndOperation(i,c,e,s):c})}async function QS(i,e,n=!1){const s=await Yl(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ao._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(i,e,n=!1){const{auth:s}=i;if(Vn(s.app))return Promise.reject(qs(s));const o="reauthenticate";try{const c=await Yl(i,Db(s,o,e,i),n);we(c.idToken,s,"internal-error");const d=Jm(c.idToken);we(d,s,"internal-error");const{sub:g}=d;return we(i.uid===g,s,"user-mismatch"),ao._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&wr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(i,e,n=!1){if(Vn(i.app))return Promise.reject(qs(i));const s="signIn",o=await Db(i,s,e),c=await ao._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}function $S(i,e,n,s){return pt(i).onIdTokenChanged(e,n,s)}function XS(i,e,n){return pt(i).beforeAuthStateChanged(e,n)}function WS(i,e,n,s){return pt(i).onAuthStateChanged(e,n,s)}function ZS(i){return pt(i).signOut()}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=1e3,eA=10;class Ob extends jb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);NS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,eA):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},JS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ob.type="LOCAL";const tA=Ob;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends jb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Mb.type="SESSION";const kb=Mb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new xh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(d).map(async v=>v(n.origin,c)),y=await nA(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((g,y)=>{const v=rg("",20);o.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const S=A;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(S.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function iA(i){vr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function sA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aA(){return navigator?.serviceWorker?.controller||null}function oA(){return Vb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="firebaseLocalStorageDb",lA=1,ah="firebaseLocalStorage",Ub="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sh(i,e){return i.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function cA(){const i=indexedDB.deleteDatabase(Pb);return new sc(i).toPromise()}function Sm(){const i=indexedDB.open(Pb,lA);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(ah,{keyPath:Ub})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(ah)?e(s):(s.close(),await cA(),e(await Sm()))})})}async function j0(i,e,n){const s=Sh(i,!0).put({[Ub]:e,value:n});return new sc(s).toPromise()}async function uA(i,e){const n=Sh(i,!1).get(e),s=await new sc(n).toPromise();return s===void 0?null:s.value}function O0(i,e){const n=Sh(i,!0).delete(e);return new sc(n).toPromise()}const hA=800,dA=3;class Lb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>dA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xh._getInstance(oA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sA(),!this.activeServiceWorker)return;this.sender=new rA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sm();return await j0(e,sh,"1"),await O0(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>j0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>uA(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>O0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Sh(o,!1).getAll();return new sc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lb.type="LOCAL";const fA=Lb;new rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(i,e){return e?Jr(e):(we(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends Nb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ja(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ja(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mA(i){return KS(i.auth,new ig(i),i.bypassAuthState)}function gA(i){const{auth:e,user:n}=i;return we(n,e,"internal-error"),YS(n,new ig(i),i.bypassAuthState)}async function pA(i){const{auth:e,user:n}=i;return we(n,e,"internal-error"),QS(n,new ig(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mA;case"linkViaPopup":case"linkViaRedirect":return pA;case"reauthViaPopup":case"reauthViaRedirect":return gA;default:wr(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new rc(2e3,1e4);async function vA(i,e,n){if(Vn(i.app))return Promise.reject(Kn(i,"operation-not-supported-in-this-environment"));const s=wh(i);dS(i,e,ng);const o=zb(s,n);return new Ls(s,"signInViaPopup",e,o).executeNotNull()}class Ls extends Bb{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Ls.currentPopupAction&&Ls.currentPopupAction.cancel(),Ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yA.get())};e()}}Ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="pendingRedirect",Gu=new Map;class bA extends Bb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Gu.get(this.auth._key());if(!e){try{const s=await TA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Gu.set(this.auth._key(),e)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TA(i,e){const n=xA(e),s=wA(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function EA(i,e){Gu.set(i._key(),e)}function wA(i){return Jr(i._redirectPersistence)}function xA(i){return Fu(_A,i.config.apiKey,i.name)}async function SA(i,e,n=!1){if(Vn(i.app))return Promise.reject(qs(i));const s=wh(i),o=zb(s,e),d=await new bA(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=600*1e3;class RA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!qb(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AA&&this.cachedEventUids.clear(),this.cachedEventUids.has(M0(e))}saveEventToCache(e){this.cachedEventUids.add(M0(e)),this.lastProcessedEventTime=Date.now()}}function M0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function qb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function IA(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(i,e={}){return go(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DA=/^https?/;async function jA(i){if(i.config.emulator)return;const{authorizedDomains:e}=await CA(i);for(const n of e)try{if(OA(n))return}catch{}wr(i,"unauthorized-domain")}function OA(i){const e=wm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!DA.test(n))return!1;if(NA.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new rc(3e4,6e4);function k0(){const i=vr().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function kA(i){return new Promise((e,n)=>{function s(){k0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k0(),n(Kn(i,"network-request-failed"))},timeout:MA.get()})}if(vr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vr().gapi?.load)s();else{const o=LS("iframefcb");return vr()[o]=()=>{gapi.load?s():n(Kn(i,"network-request-failed"))},PS(`${US()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Qu=null,e})}let Qu=null;function VA(i){return Qu=Qu||kA(i),Qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new rc(5e3,15e3),UA="__/auth/iframe",LA="emulator/auth/iframe",zA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qA(i){const e=i.config;we(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Wm(e,LA):`https://${i.config.authDomain}/${UA}`,s={apiKey:e.apiKey,appName:i.name,v:mo},o=BA.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${nc(s).slice(1)}`}async function HA(i){const e=await VA(i),n=vr().gapi;return we(n,i,"internal-error"),e.open({where:document.body,url:qA(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zA,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=Kn(i,"network-request-failed"),g=vr().setTimeout(()=>{c(d)},PA.get());function y(){vr().clearTimeout(g),o(s)}s.ping(y).then(y,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GA=500,QA=600,YA="_blank",KA="http://localhost";class V0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $A(i,e,n,s=GA,o=QA){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y={...FA,width:s.toString(),height:o.toString(),top:c,left:d},v=Zt().toLowerCase();n&&(g=Eb(v)?YA:n),bb(v)&&(e=e||KA,y.scrollbars="yes");const T=Object.entries(y).reduce((S,[U,Y])=>`${S}${U}=${Y},`,"");if(CS(v)&&g!=="_self")return XA(e||"",g),new V0(null);const A=window.open(e||"",g,T);we(A,i,"popup-blocked");try{A.focus()}catch{}return new V0(A)}function XA(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="__/auth/handler",ZA="emulator/auth/handler",JA=encodeURIComponent("fac");async function P0(i,e,n,s,o,c){we(i.config.authDomain,i,"auth-domain-config-required"),we(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:mo,eventId:o};if(e instanceof ng){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",$x(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))d[T]=A}if(e instanceof ic){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const g=d;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const y=await i._getAppCheckToken(),v=y?`#${JA}=${encodeURIComponent(y)}`:"";return`${eR(i)}?${nc(g).slice(1)}${v}`}function eR({config:i}){return i.emulator?Wm(i,ZA):`https://${i.authDomain}/${WA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="webStorageSupport";class tR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kb,this._completeRedirectFn=SA,this._overrideRedirectResult=EA}async _openPopup(e,n,s,o){ni(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await P0(e,n,s,wm(),o);return $A(e,c,rg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await P0(e,n,s,wm(),o);return iA(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(ni(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await HA(e),s=new RA(e);return n.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lm,{type:lm},o=>{const c=o?.[0]?.[lm];c!==void 0&&n(!!c),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Rb()||Tb()||eg()}}const nR=tR;var U0="@firebase/auth",L0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sR(i){$n(new Ln("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;we(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ib(i)},v=new kS(s,o,c,y);return BS(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),$n(new Ln("auth-internal",e=>{const n=wh(e.getProvider("auth").getImmediate());return(s=>new rR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(U0,L0,iR(i)),cn(U0,L0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=300,oR=rb("authIdTokenMaxAge")||aR;let z0=null;const lR=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>oR)return;const o=n?.token;z0!==o&&(z0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cR(i=Eh()){const e=Wi(i,"auth");if(e.isInitialized())return e.getImmediate();const n=zS(i,{popupRedirectResolver:nR,persistence:[fA,tA,kb]}),s=rb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=lR(c.toString());XS(n,d,()=>d(n.currentUser)),$S(n,g=>d(g))}}const o=eb("auth");return o&&qS(n,`http://${o}`),n}function uR(){return document.getElementsByTagName("head")?.[0]??document}VS({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=Kn("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",uR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sR("Browser");var hR="firebase",dR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn(hR,dR,"app");var B0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qi,Hb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,R){function N(){}N.prototype=R.prototype,j.D=R.prototype,j.prototype=new N,j.prototype.constructor=j,j.C=function(M,k,P){for(var C=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)C[Pt-2]=arguments[Pt];return R.prototype[k].apply(M,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,R,N){N||(N=0);var M=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)M[k]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(k=0;16>k;++k)M[k]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=j.g[0],N=j.g[1],k=j.g[2];var P=j.g[3],C=R+(P^N&(k^P))+M[0]+3614090360&4294967295;R=N+(C<<7&4294967295|C>>>25),C=P+(k^R&(N^k))+M[1]+3905402710&4294967295,P=R+(C<<12&4294967295|C>>>20),C=k+(N^P&(R^N))+M[2]+606105819&4294967295,k=P+(C<<17&4294967295|C>>>15),C=N+(R^k&(P^R))+M[3]+3250441966&4294967295,N=k+(C<<22&4294967295|C>>>10),C=R+(P^N&(k^P))+M[4]+4118548399&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(k^R&(N^k))+M[5]+1200080426&4294967295,P=R+(C<<12&4294967295|C>>>20),C=k+(N^P&(R^N))+M[6]+2821735955&4294967295,k=P+(C<<17&4294967295|C>>>15),C=N+(R^k&(P^R))+M[7]+4249261313&4294967295,N=k+(C<<22&4294967295|C>>>10),C=R+(P^N&(k^P))+M[8]+1770035416&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(k^R&(N^k))+M[9]+2336552879&4294967295,P=R+(C<<12&4294967295|C>>>20),C=k+(N^P&(R^N))+M[10]+4294925233&4294967295,k=P+(C<<17&4294967295|C>>>15),C=N+(R^k&(P^R))+M[11]+2304563134&4294967295,N=k+(C<<22&4294967295|C>>>10),C=R+(P^N&(k^P))+M[12]+1804603682&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(k^R&(N^k))+M[13]+4254626195&4294967295,P=R+(C<<12&4294967295|C>>>20),C=k+(N^P&(R^N))+M[14]+2792965006&4294967295,k=P+(C<<17&4294967295|C>>>15),C=N+(R^k&(P^R))+M[15]+1236535329&4294967295,N=k+(C<<22&4294967295|C>>>10),C=R+(k^P&(N^k))+M[1]+4129170786&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^k&(R^N))+M[6]+3225465664&4294967295,P=R+(C<<9&4294967295|C>>>23),C=k+(R^N&(P^R))+M[11]+643717713&4294967295,k=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(k^P))+M[0]+3921069994&4294967295,N=k+(C<<20&4294967295|C>>>12),C=R+(k^P&(N^k))+M[5]+3593408605&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^k&(R^N))+M[10]+38016083&4294967295,P=R+(C<<9&4294967295|C>>>23),C=k+(R^N&(P^R))+M[15]+3634488961&4294967295,k=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(k^P))+M[4]+3889429448&4294967295,N=k+(C<<20&4294967295|C>>>12),C=R+(k^P&(N^k))+M[9]+568446438&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^k&(R^N))+M[14]+3275163606&4294967295,P=R+(C<<9&4294967295|C>>>23),C=k+(R^N&(P^R))+M[3]+4107603335&4294967295,k=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(k^P))+M[8]+1163531501&4294967295,N=k+(C<<20&4294967295|C>>>12),C=R+(k^P&(N^k))+M[13]+2850285829&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^k&(R^N))+M[2]+4243563512&4294967295,P=R+(C<<9&4294967295|C>>>23),C=k+(R^N&(P^R))+M[7]+1735328473&4294967295,k=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(k^P))+M[12]+2368359562&4294967295,N=k+(C<<20&4294967295|C>>>12),C=R+(N^k^P)+M[5]+4294588738&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^k)+M[8]+2272392833&4294967295,P=R+(C<<11&4294967295|C>>>21),C=k+(P^R^N)+M[11]+1839030562&4294967295,k=P+(C<<16&4294967295|C>>>16),C=N+(k^P^R)+M[14]+4259657740&4294967295,N=k+(C<<23&4294967295|C>>>9),C=R+(N^k^P)+M[1]+2763975236&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^k)+M[4]+1272893353&4294967295,P=R+(C<<11&4294967295|C>>>21),C=k+(P^R^N)+M[7]+4139469664&4294967295,k=P+(C<<16&4294967295|C>>>16),C=N+(k^P^R)+M[10]+3200236656&4294967295,N=k+(C<<23&4294967295|C>>>9),C=R+(N^k^P)+M[13]+681279174&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^k)+M[0]+3936430074&4294967295,P=R+(C<<11&4294967295|C>>>21),C=k+(P^R^N)+M[3]+3572445317&4294967295,k=P+(C<<16&4294967295|C>>>16),C=N+(k^P^R)+M[6]+76029189&4294967295,N=k+(C<<23&4294967295|C>>>9),C=R+(N^k^P)+M[9]+3654602809&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^k)+M[12]+3873151461&4294967295,P=R+(C<<11&4294967295|C>>>21),C=k+(P^R^N)+M[15]+530742520&4294967295,k=P+(C<<16&4294967295|C>>>16),C=N+(k^P^R)+M[2]+3299628645&4294967295,N=k+(C<<23&4294967295|C>>>9),C=R+(k^(N|~P))+M[0]+4096336452&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~k))+M[7]+1126891415&4294967295,P=R+(C<<10&4294967295|C>>>22),C=k+(R^(P|~N))+M[14]+2878612391&4294967295,k=P+(C<<15&4294967295|C>>>17),C=N+(P^(k|~R))+M[5]+4237533241&4294967295,N=k+(C<<21&4294967295|C>>>11),C=R+(k^(N|~P))+M[12]+1700485571&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~k))+M[3]+2399980690&4294967295,P=R+(C<<10&4294967295|C>>>22),C=k+(R^(P|~N))+M[10]+4293915773&4294967295,k=P+(C<<15&4294967295|C>>>17),C=N+(P^(k|~R))+M[1]+2240044497&4294967295,N=k+(C<<21&4294967295|C>>>11),C=R+(k^(N|~P))+M[8]+1873313359&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~k))+M[15]+4264355552&4294967295,P=R+(C<<10&4294967295|C>>>22),C=k+(R^(P|~N))+M[6]+2734768916&4294967295,k=P+(C<<15&4294967295|C>>>17),C=N+(P^(k|~R))+M[13]+1309151649&4294967295,N=k+(C<<21&4294967295|C>>>11),C=R+(k^(N|~P))+M[4]+4149444226&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~k))+M[11]+3174756917&4294967295,P=R+(C<<10&4294967295|C>>>22),C=k+(R^(P|~N))+M[2]+718787259&4294967295,k=P+(C<<15&4294967295|C>>>17),C=N+(P^(k|~R))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+R&4294967295,j.g[1]=j.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,j.g[2]=j.g[2]+k&4294967295,j.g[3]=j.g[3]+P&4294967295}s.prototype.u=function(j,R){R===void 0&&(R=j.length);for(var N=R-this.blockSize,M=this.B,k=this.h,P=0;P<R;){if(k==0)for(;P<=N;)o(this,j,P),P+=this.blockSize;if(typeof j=="string"){for(;P<R;)if(M[k++]=j.charCodeAt(P++),k==this.blockSize){o(this,M),k=0;break}}else for(;P<R;)if(M[k++]=j[P++],k==this.blockSize){o(this,M),k=0;break}}this.h=k,this.o+=R},s.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var R=1;R<j.length-8;++R)j[R]=0;var N=8*this.o;for(R=j.length-8;R<j.length;++R)j[R]=N&255,N/=256;for(this.u(j),j=Array(16),R=N=0;4>R;++R)for(var M=0;32>M;M+=8)j[N++]=this.g[R]>>>M&255;return j};function c(j,R){var N=g;return Object.prototype.hasOwnProperty.call(N,j)?N[j]:N[j]=R(j)}function d(j,R){this.h=R;for(var N=[],M=!0,k=j.length-1;0<=k;k--){var P=j[k]|0;M&&P==R||(N[k]=P,M=!1)}this.g=N}var g={};function y(j){return-128<=j&&128>j?c(j,function(R){return new d([R|0],0>R?-1:0)}):new d([j|0],0>j?-1:0)}function v(j){if(isNaN(j)||!isFinite(j))return A;if(0>j)return X(v(-j));for(var R=[],N=1,M=0;j>=N;M++)R[M]=j/N|0,N*=4294967296;return new d(R,0)}function T(j,R){if(j.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(j.charAt(0)=="-")return X(T(j.substring(1),R));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=v(Math.pow(R,8)),M=A,k=0;k<j.length;k+=8){var P=Math.min(8,j.length-k),C=parseInt(j.substring(k,k+P),R);8>P?(P=v(Math.pow(R,P)),M=M.j(P).add(v(C))):(M=M.j(N),M=M.add(v(C)))}return M}var A=y(0),S=y(1),U=y(16777216);i=d.prototype,i.m=function(){if(ie(this))return-X(this).m();for(var j=0,R=1,N=0;N<this.g.length;N++){var M=this.i(N);j+=(0<=M?M:4294967296+M)*R,R*=4294967296}return j},i.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(Y(this))return"0";if(ie(this))return"-"+X(this).toString(j);for(var R=v(Math.pow(j,6)),N=this,M="";;){var k=ce(N,R).g;N=F(N,k.j(R));var P=((0<N.g.length?N.g[0]:N.h)>>>0).toString(j);if(N=k,Y(N))return P+M;for(;6>P.length;)P="0"+P;M=P+M}},i.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function Y(j){if(j.h!=0)return!1;for(var R=0;R<j.g.length;R++)if(j.g[R]!=0)return!1;return!0}function ie(j){return j.h==-1}i.l=function(j){return j=F(this,j),ie(j)?-1:Y(j)?0:1};function X(j){for(var R=j.g.length,N=[],M=0;M<R;M++)N[M]=~j.g[M];return new d(N,~j.h).add(S)}i.abs=function(){return ie(this)?X(this):this},i.add=function(j){for(var R=Math.max(this.g.length,j.g.length),N=[],M=0,k=0;k<=R;k++){var P=M+(this.i(k)&65535)+(j.i(k)&65535),C=(P>>>16)+(this.i(k)>>>16)+(j.i(k)>>>16);M=C>>>16,P&=65535,C&=65535,N[k]=C<<16|P}return new d(N,N[N.length-1]&-2147483648?-1:0)};function F(j,R){return j.add(X(R))}i.j=function(j){if(Y(this)||Y(j))return A;if(ie(this))return ie(j)?X(this).j(X(j)):X(X(this).j(j));if(ie(j))return X(this.j(X(j)));if(0>this.l(U)&&0>j.l(U))return v(this.m()*j.m());for(var R=this.g.length+j.g.length,N=[],M=0;M<2*R;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var k=0;k<j.g.length;k++){var P=this.i(M)>>>16,C=this.i(M)&65535,Pt=j.i(k)>>>16,ot=j.i(k)&65535;N[2*M+2*k]+=C*ot,re(N,2*M+2*k),N[2*M+2*k+1]+=P*ot,re(N,2*M+2*k+1),N[2*M+2*k+1]+=C*Pt,re(N,2*M+2*k+1),N[2*M+2*k+2]+=P*Pt,re(N,2*M+2*k+2)}for(M=0;M<R;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=R;M<2*R;M++)N[M]=0;return new d(N,0)};function re(j,R){for(;(j[R]&65535)!=j[R];)j[R+1]+=j[R]>>>16,j[R]&=65535,R++}function te(j,R){this.g=j,this.h=R}function ce(j,R){if(Y(R))throw Error("division by zero");if(Y(j))return new te(A,A);if(ie(j))return R=ce(X(j),R),new te(X(R.g),X(R.h));if(ie(R))return R=ce(j,X(R)),new te(X(R.g),R.h);if(30<j.g.length){if(ie(j)||ie(R))throw Error("slowDivide_ only works with positive integers.");for(var N=S,M=R;0>=M.l(j);)N=G(N),M=G(M);var k=fe(N,1),P=fe(M,1);for(M=fe(M,2),N=fe(N,2);!Y(M);){var C=P.add(M);0>=C.l(j)&&(k=k.add(N),P=C),M=fe(M,1),N=fe(N,1)}return R=F(j,k.j(R)),new te(k,R)}for(k=A;0<=j.l(R);){for(N=Math.max(1,Math.floor(j.m()/R.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),P=v(N),C=P.j(R);ie(C)||0<C.l(j);)N-=M,P=v(N),C=P.j(R);Y(P)&&(P=S),k=k.add(P),j=F(j,C)}return new te(k,j)}i.A=function(j){return ce(this,j).h},i.and=function(j){for(var R=Math.max(this.g.length,j.g.length),N=[],M=0;M<R;M++)N[M]=this.i(M)&j.i(M);return new d(N,this.h&j.h)},i.or=function(j){for(var R=Math.max(this.g.length,j.g.length),N=[],M=0;M<R;M++)N[M]=this.i(M)|j.i(M);return new d(N,this.h|j.h)},i.xor=function(j){for(var R=Math.max(this.g.length,j.g.length),N=[],M=0;M<R;M++)N[M]=this.i(M)^j.i(M);return new d(N,this.h^j.h)};function G(j){for(var R=j.g.length+1,N=[],M=0;M<R;M++)N[M]=j.i(M)<<1|j.i(M-1)>>>31;return new d(N,j.h)}function fe(j,R){var N=R>>5;R%=32;for(var M=j.g.length-N,k=[],P=0;P<M;P++)k[P]=0<R?j.i(P+N)>>>R|j.i(P+N+1)<<32-R:j.i(P+N);return new d(k,j.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Hb=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=T,qi=d}).apply(typeof B0<"u"?B0:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fb,Dl,Gb,Yu,Am,Qb,Yb,Kb;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(u,p){if(p)e:{var _=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var L=u[w];if(!(L in _))break e;_=_[L]}u=u[u.length-1],w=_[u],p=p(w),p!=w&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function c(u,p){u instanceof String&&(u+="");var _=0,w=!1,L={next:function(){if(!w&&_<u.length){var Q=_++;return{value:p(Q,u[Q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(u){return u||function(){return c(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function y(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function T(u,p,_){return u.call.apply(u.bind,arguments)}function A(u,p,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function S(u,p,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,S.apply(null,arguments)}function U(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function Y(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,L,Q){for(var ae=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ae[Ve-2]=arguments[Ve];return p.prototype[L].apply(w,ae)}}function ie(u){const p=u.length;if(0<p){const _=Array(p);for(let w=0;w<p;w++)_[w]=u[w];return _}return[]}function X(u,p){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(y(w)){const L=u.length||0,Q=w.length||0;u.length=L+Q;for(let ae=0;ae<Q;ae++)u[L+ae]=w[ae]}else u.push(w)}}class F{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function re(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function ce(u){return ce[" "](u),u}ce[" "]=function(){};var G=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function fe(u,p,_){for(const w in u)p.call(_,u[w],w,u)}function j(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function R(u){const p={};for(const _ in u)p[_]=u[_];return p}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,p){let _,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(_ in w)u[_]=w[_];for(let Q=0;Q<N.length;Q++)_=N[Q],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function k(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function P(u){g.setTimeout(()=>{throw u},0)}function C(){var u=Be;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Pt{constructor(){this.h=this.g=null}add(p,_){const w=ot.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var ot=new F(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,pe=!1,Be=new Pt,D=()=>{const u=g.Promise.resolve(void 0);oe=()=>{u.then(ne)}};var ne=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){P(_)}var p=ot;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}pe=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};g.addEventListener("test",_,p),g.removeEventListener("test",_,p)}catch{}return u})();function Ce(u,p){if(se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(G){e:{try{ce(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:xe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}Y(Ce,se);var xe={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Jn(u,p,_,w,L){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=L,this.key=++Je,this.da=this.fa=!1}function si(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Sr(u){this.src=u,this.g={},this.h=0}Sr.prototype.add=function(u,p,_,w,L){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var ae=ns(u,p,w,L);return-1<ae?(p=u[ae],_||(p.fa=!1)):(p=new Jn(p,this.src,Q,!!w,L),p.fa=_,u.push(p)),p};function ts(u,p){var _=p.type;if(_ in u.g){var w=u.g[_],L=Array.prototype.indexOf.call(w,p,void 0),Q;(Q=0<=L)&&Array.prototype.splice.call(w,L,1),Q&&(si(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ns(u,p,_,w){for(var L=0;L<u.length;++L){var Q=u[L];if(!Q.da&&Q.listener==p&&Q.capture==!!_&&Q.ha==w)return L}return-1}var rs="closure_lm_"+(1e6*Math.random()|0),To={};function fc(u,p,_,w,L){if(Array.isArray(p)){for(var Q=0;Q<p.length;Q++)fc(u,p[Q],_,w,L);return null}return _=mc(_),u&&u[Nt]?u.K(p,_,v(w)?!!w.capture:!1,L):wn(u,p,_,!1,w,L)}function wn(u,p,_,w,L,Q){if(!p)throw Error("Invalid event type");var ae=v(L)?!!L.capture:!!L,Ve=na(u);if(Ve||(u[rs]=Ve=new Sr(u)),_=Ve.add(p,_,w,ae,Q),_.proxy)return _;if(w=$h(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)ve||(L=ae),L===void 0&&(L=!1),u.addEventListener(p.toString(),w,L);else if(u.attachEvent)u.attachEvent(is(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function $h(){function u(_){return p.call(u.src,u.listener,_)}const p=Xh;return u}function Eo(u,p,_,w,L){if(Array.isArray(p))for(var Q=0;Q<p.length;Q++)Eo(u,p[Q],_,w,L);else w=v(w)?!!w.capture:!!w,_=mc(_),u&&u[Nt]?(u=u.i,p=String(p).toString(),p in u.g&&(Q=u.g[p],_=ns(Q,_,w,L),-1<_&&(si(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete u.g[p],u.h--)))):u&&(u=na(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ns(p,_,w,L)),(_=-1<u?p[u]:null)&&ta(_))}function ta(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Nt])ts(p.i,u);else{var _=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(_,w,u.capture):p.detachEvent?p.detachEvent(is(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=na(p))?(ts(_,u),_.h==0&&(_.src=null,p[rs]=null)):si(u)}}}function is(u){return u in To?To[u]:To[u]="on"+u}function Xh(u,p){if(u.da)u=!0;else{p=new Ce(p,this);var _=u.listener,w=u.ha||u.src;u.fa&&ta(u),u=_.call(w,p)}return u}function na(u){return u=u[rs],u instanceof Sr?u:null}var wo="__closure_events_fn_"+(1e9*Math.random()>>>0);function mc(u){return typeof u=="function"?u:(u[wo]||(u[wo]=function(p){return u.handleEvent(p)}),u[wo])}function lt(){le.call(this),this.i=new Sr(this),this.M=this,this.F=null}Y(lt,le),lt.prototype[Nt]=!0,lt.prototype.removeEventListener=function(u,p,_,w){Eo(this,u,p,_,w)};function Ge(u,p){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new se(p,u);else if(p instanceof se)p.target=p.target||u;else{var L=p;p=new se(w,u),M(p,L)}if(L=!0,_)for(var Q=_.length-1;0<=Q;Q--){var ae=p.g=_[Q];L=hn(ae,w,!0,p)&&L}if(ae=p.g=u,L=hn(ae,w,!0,p)&&L,L=hn(ae,w,!1,p)&&L,_)for(Q=0;Q<_.length;Q++)ae=p.g=_[Q],L=hn(ae,w,!1,p)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],w=0;w<_.length;w++)si(_[w]);delete u.g[p],u.h--}}this.F=null},lt.prototype.K=function(u,p,_,w){return this.i.add(String(u),p,!1,_,w)},lt.prototype.L=function(u,p,_,w){return this.i.add(String(u),p,!0,_,w)};function hn(u,p,_,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,Q=0;Q<p.length;++Q){var ae=p[Q];if(ae&&!ae.da&&ae.capture==_){var Ve=ae.listener,St=ae.ha||ae.src;ae.fa&&ts(u.i,ae),L=Ve.call(St,w)!==!1&&L}}return L&&!w.defaultPrevented}function Qt(u,p,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:g.setTimeout(u,p||0)}function gc(u){u.g=Qt(()=>{u.g=null,u.i&&(u.i=!1,gc(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Wh extends le{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:gc(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(u){le.call(this),this.h=u,this.g={}}Y(ss,le);var as=[];function os(u){fe(u.g,function(p,_){this.g.hasOwnProperty(_)&&ta(p)},u),u.g={}}ss.prototype.N=function(){ss.aa.N.call(this),os(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=g.JSON.stringify,ra=g.JSON.parse,ls=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function xo(){}xo.prototype.h=null;function So(u){return u.h||(u.h=u.i())}function Ao(){}var Ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){se.call(this,"d")}Y(Rr,se);function Ro(){se.call(this,"c")}Y(Ro,se);var er={},Io=null;function ai(){return Io=Io||new lt}er.La="serverreachability";function ia(u){se.call(this,er.La,u)}Y(ia,se);function oi(u){const p=ai();Ge(p,new ia(p))}er.STAT_EVENT="statevent";function pc(u,p){se.call(this,er.STAT_EVENT,u),this.stat=p}Y(pc,se);function rt(u){const p=ai();Ge(p,new pc(p,u))}er.Ma="timingevent";function xt(u,p){se.call(this,er.Ma,u),this.size=p}Y(xt,se);function yt(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},p)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function Co(u,p,_,w,L,Q){u.info(function(){if(u.g)if(Q)for(var ae="",Ve=Q.split("&"),St=0;St<Ve.length;St++){var Pe=Ve[St].split("=");if(1<Pe.length){var jt=Pe[0];Pe=Pe[1];var At=jt.split("_");ae=2<=At.length&&At[1]=="type"?ae+(jt+"="+Pe+"&"):ae+(jt+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+p+`
`+_+`
`+ae})}function Zh(u,p,_,w,L,Q,ae){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+p+`
`+_+`
`+Q+" "+ae})}function li(u,p,_,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+cs(u,_)+(w?" "+w:"")})}function yc(u,p){u.info(function(){return"TIMEOUT: "+p})}xn.prototype.info=function(){};function cs(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var Q=L[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<L.length;ae++)L[ae]=""}}}}return zn(_)}catch{return p}}var ci={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tr;function nr(){}Y(nr,xo),nr.prototype.g=function(){return new XMLHttpRequest},nr.prototype.i=function(){return{}},tr=new nr;function Jt(u,p,_,w){this.j=u,this.i=p,this.l=_,this.R=w||1,this.U=new ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var No={},sa={};function Bn(u,p,_){u.L=1,u.v=ms(dn(p)),u.m=_,u.P=!0,Cr(u,null)}function Cr(u,p){u.F=Date.now(),us(u),u.A=dn(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Vo(_.i,"t",w),u.C=0,_=u.j.J,u.h=new ht,u.g=Oc(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Wh(S(u.Y,u,u.g),u.O)),p=u.U,_=u.g,w=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(as[0]=L.toString()),L=as);for(var Q=0;Q<L.length;Q++){var ae=fc(_,L[Q],w||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),oi(),Co(u.i,u.u,u.A,u.l,u.R,u.m)}Jt.prototype.ca=function(u){u=u.target;const p=this.M;p&&In(u)==3?p.j():this.Y(u)},Jt.prototype.Y=function(u){try{if(u==this.g)e:{const At=In(this.g);var p=this.g.Ba();const Pr=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||Sc(this.g)))){this.J||At!=4||p==7||(p==8||0>=Pr?oi(3):oi(2)),ui(this);var _=this.g.Z();this.X=_;t:if(vc(this)){var w=Sc(this.g);u="";var L=w.length,Q=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ut(this),rr(this);var ae="";break t}this.h.i=new g.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(w[p],{stream:!(Q&&p==L-1)});w.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Zh(this.i,this.u,this.A,this.l,this.R,At,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,St=this.g;if((Ve=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Ve)){var Pe=Ve;break t}}Pe=null}if(_=Pe)li(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,_);else{this.o=!1,this.s=3,rt(12),Ut(this),rr(this);break e}}if(this.P){_=!0;let Lt;for(;!this.J&&this.C<ae.length;)if(Lt=_c(this,ae),Lt==sa){At==4&&(this.s=4,rt(14),_=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==No){this.s=4,rt(15),li(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else li(this.i,this.l,Lt,null),hs(this,Lt);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||ae.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)li(this.i,this.l,ae,"[Invalid Chunked Response]"),Ut(this),rr(this);else if(0<ae.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Es(jt),jt.M=!0,rt(11))}}else li(this.i,this.l,ae,null),hs(this,ae);At==4&&Ut(this),this.o&&!this.J&&(At==4?Nc(this.j,this):(this.o=!1,us(this)))}else rd(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),Ut(this),rr(this)}}}catch{}finally{}};function vc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _c(u,p){var _=u.C,w=p.indexOf(`
`,_);return w==-1?sa:(_=Number(p.substring(_,w)),isNaN(_)?No:(w+=1,w+_>p.length?sa:(p=p.slice(w,w+_),u.C=w+_,p)))}Jt.prototype.cancel=function(){this.J=!0,Ut(this)};function us(u){u.S=Date.now()+u.I,bc(u,u.I)}function bc(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=yt(S(u.ba,u),p)}function ui(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Jt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(yc(this.i,this.A),this.L!=2&&(oi(),rt(17)),Ut(this),this.s=2,rr(this)):bc(this,this.S-u)};function rr(u){u.j.G==0||u.J||Nc(u.j,u)}function Ut(u){ui(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,os(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function hs(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Do(_.h,u))){if(!u.K&&Do(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ya(_),ga(_);else break e;Bo(_),rt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=yt(S(_.Za,_),6e3));if(1>=oa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Vr(_,11)}else if((u.K||_.g==u)&&ya(_),!re(p))for(L=_.Da.g.parse(p),p=0;p<L.length;p++){let Pe=L[p];if(_.T=Pe[0],Pe=Pe[1],_.G==2)if(Pe[0]=="c"){_.K=Pe[1],_.ia=Pe[2];const jt=Pe[3];jt!=null&&(_.la=jt,_.j.info("VER="+_.la));const At=Pe[4];At!=null&&(_.Aa=At,_.j.info("SVER="+_.Aa));const Pr=Pe[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(w=1.5*Pr,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const Lt=u.g;if(Lt){const ur=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ur){var Q=w.h;Q.g||ur.indexOf("spdy")==-1&&ur.indexOf("quic")==-1&&ur.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(la(Q,Q.h),Q.h=null))}if(w.D){const Ho=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(w.ya=Ho,Ke(w.I,w.D,Ho))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ae=u;if(w.qa=jc(w,w.J?w.ia:null,w.W),ae.K){en(w.h,ae);var Ve=ae,St=w.L;St&&(Ve.I=St),Ve.B&&(ui(Ve),us(Ve)),w.g=ae}else Ic(w);0<_.i.length&&pa(_)}else Pe[0]!="stop"&&Pe[0]!="close"||Vr(_,7);else _.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Vr(_,7):Lo(_):Pe[0]!="noop"&&_.l&&_.l.ta(Pe),_.v=0)}}oi(4)}catch{}}var Tc=class{constructor(u,p){this.g=u,this.map=p}};function Nr(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function oa(u){return u.h?1:u.g?u.g.size:0}function Do(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function la(u,p){u.g?u.g.add(p):u.h=p}function en(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Nr.prototype.cancel=function(){if(this.i=jo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function jo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return ie(u.i)}function Jh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var p=[],_=u.length,w=0;w<_;w++)p.push(u[w]);return p}p=[],_=0;for(w in u)p[_++]=u[w];return p}function ca(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const w in u)p[_++]=w;return p}}}function Oo(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=ca(u),w=Jh(u),L=w.length,Q=0;Q<L;Q++)p.call(void 0,w[Q],_&&_[Q],u)}var ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),L=null;if(0<=w){var Q=u[_].substring(0,w);L=u[_].substring(w+1)}else Q=u[_];p(Q,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function vt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof vt){this.h=u.h,fs(this,u.j),this.o=u.o,this.g=u.g,hi(this,u.s),this.l=u.l;var p=u.i,_=new jr;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Dr(this,_),this.m=u.m}else u&&(p=String(u).match(ds))?(this.h=!1,fs(this,p[1]||"",!0),this.o=Sn(p[2]||""),this.g=Sn(p[3]||"",!0),hi(this,p[4]),this.l=Sn(p[5]||"",!0),Dr(this,p[6]||"",!0),this.m=Sn(p[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}vt.prototype.toString=function(){var u=[],p=this.j;p&&u.push(gs(p,Mo,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(gs(p,Mo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(gs(_,_.charAt(0)=="/"?td:ko,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",gs(_,ua)),u.join("")};function dn(u){return new vt(u)}function fs(u,p,_){u.j=_?Sn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function hi(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Dr(u,p,_){p instanceof jr?(u.i=p,wc(u.i,u.h)):(_||(p=gs(p,nd)),u.i=new jr(p,u.h))}function Ke(u,p,_){u.i.set(p,_)}function ms(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Sn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function gs(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Ec),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ec(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Mo=/[#\/\?@]/g,ko=/[#\?:]/g,td=/[#\?]/g,nd=/[#\?@]/g,ua=/#/g;function jr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&ed(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}i=jr.prototype,i.add=function(u,p){An(this),this.i=null,u=ir(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Or(u,p){An(u),p=ir(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Mr(u,p){return An(u),p=ir(u,p),u.g.has(p)}i.forEach=function(u,p){An(this),this.g.forEach(function(_,w){_.forEach(function(L){u.call(p,L,w,this)},this)},this)},i.na=function(){An(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let w=0;w<p.length;w++){const L=u[w];for(let Q=0;Q<L.length;Q++)_.push(p[w])}return _},i.V=function(u){An(this);let p=[];if(typeof u=="string")Mr(this,u)&&(p=p.concat(this.g.get(ir(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},i.set=function(u,p){return An(this),this.i=null,u=ir(this,u),Mr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},i.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Vo(u,p,_){Or(u,p),0<_.length&&(u.i=null,u.g.set(ir(u,p),ie(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var w=p[_];const Q=encodeURIComponent(String(w)),ae=this.V(w);for(w=0;w<ae.length;w++){var L=Q;ae[w]!==""&&(L+="="+encodeURIComponent(String(ae[w]))),u.push(L)}}return this.i=u.join("&")};function ir(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function wc(u,p){p&&!u.j&&(An(u),u.i=null,u.g.forEach(function(_,w){var L=w.toLowerCase();w!=L&&(Or(this,w),Vo(this,L,_))},u)),u.j=p}function ps(u,p){const _=new xn;if(g.Image){const w=new Image;w.onload=U(Rn,_,"TestLoadImage: loaded",!0,p,w),w.onerror=U(Rn,_,"TestLoadImage: error",!1,p,w),w.onabort=U(Rn,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=U(Rn,_,"TestLoadImage: timeout",!1,p,w),g.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function qn(u,p){const _=new xn,w=new AbortController,L=setTimeout(()=>{w.abort(),Rn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(Q=>{clearTimeout(L),Q.ok?Rn(_,"TestPingServer: ok",!0,p):Rn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Rn(_,"TestPingServer: error",!1,p)})}function Rn(u,p,_,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(_)}catch{}}function ys(){this.g=new ls}function sr(u,p,_){const w=_||"";try{Oo(u,function(L,Q){let ae=L;v(L)&&(ae=zn(L)),p.push(w+Q+"="+encodeURIComponent(ae))})}catch(L){throw p.push(w+"type="+encodeURIComponent("_badmap")),L}}function di(u){this.l=u.Ub||null,this.j=u.eb||!1}Y(di,xo),di.prototype.g=function(){return new kr(this.l,this.j)},di.prototype.i=(function(u){return function(){return u}})({});function kr(u,p){lt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(kr,lt),i=kr.prototype,i.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,or(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||g).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ar(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Po(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Po(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ar(this):or(this),this.readyState==3&&Po(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,ar(this))},i.Qa=function(u){this.g&&(this.response=u,ar(this))},i.ga=function(){this.g&&ar(this)};function ar(u){u.readyState=4,u.l=null,u.j=null,u.v=null,or(u)}i.setRequestHeader=function(u,p){this.u.append(u,p)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function or(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Uo(u){let p="";return fe(u,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function Dt(u,p,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Uo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ke(u,p,_))}function He(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(He,lt);var ha=/^https?$/i,vs=["POST","PUT"];i=He.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tr.g(),this.v=this.o?So(this.o):So(tr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(Q){xc(this,Q);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)_.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())_.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),L=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(vs,p,void 0))||w||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of _)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_s(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){xc(this,Q)}};function xc(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,da(u),lr(u)}function da(u){u.A||(u.A=!0,Ge(u,"complete"),Ge(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ge(this,"complete"),Ge(this,"abort"),lr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lr(this,!0)),He.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?fa(this):this.bb())},i.bb=function(){fa(this)};function fa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||In(u)!=4||u.Z()!=2)){if(u.u&&In(u)==4)Qt(u.Ea,0,u);else if(Ge(u,"readystatechange"),In(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var w;if(w=ae===0){var L=String(u.D).match(ds)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),w=!ha.test(L?L.toLowerCase():"")}_=w}if(_)Ge(u,"complete"),Ge(u,"success");else{u.m=6;try{var Q=2<In(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",da(u)}}finally{lr(u)}}}}function lr(u,p){if(u.g){_s(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Ge(u,"ready");try{_.onreadystatechange=w}catch{}}}function _s(u){u.I&&(g.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function In(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),ra(p)}};function Sc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function rd(u){const p={};u=(u.g&&2<=In(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(re(u[w]))continue;var _=k(u[w]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=p[L]||[];p[L]=Q,Q.push(_)}j(p,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function ma(u){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,u),this.cb=bs("retryDelaySeedMs",1e4,u),this.Wa=bs("forwardChannelMaxRetries",2,u),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Nr(u&&u.concurrentRequestLimit),this.Da=new ys,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ma.prototype,i.la=8,i.G=1,i.connect=function(u,p,_,w){rt(0),this.W=u,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=jc(this,null,this.W),pa(this)};function Lo(u){if(Ac(u),u.G==3){var p=u.U++,_=dn(u.I);if(Ke(_,"SID",u.K),Ke(_,"RID",p),Ke(_,"TYPE","terminate"),Ts(u,_),p=new Jt(u,u.j,p),p.L=2,p.v=ms(dn(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=p.v,_=!0),_||(p.g=Oc(p.j,null),p.g.ea(p.v)),p.F=Date.now(),us(p)}Dc(u)}function ga(u){u.g&&(Es(u),u.g.cancel(),u.g=null)}function Ac(u){ga(u),u.u&&(g.clearTimeout(u.u),u.u=null),ya(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function pa(u){if(!aa(u.h)&&!u.s){u.s=!0;var p=u.Ga;oe||D(),pe||(oe(),pe=!0),Be.add(p,u),u.B=0}}function id(u,p){return oa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=yt(S(u.Ga,u,p),qo(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Jt(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=R(Q),M(Q,this.S)):Q=this.S),this.m!==null||this.O||(L.H=Q,Q=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Rc(this,L,p),_=dn(this.I),Ke(_,"RID",u),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),Ts(this,_),Q&&(this.O?p="headers="+encodeURIComponent(String(Uo(Q)))+"&"+p:this.m&&Dt(_,this.m,Q)),la(this.h,L),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",p),Ke(_,"SID","null"),L.T=!0,Bn(L,_,null)):Bn(L,_,p),this.G=2}}else this.G==3&&(u?zo(this,u):this.i.length==0||aa(this.h)||zo(this))};function zo(u,p){var _;p?_=p.l:_=u.U++;const w=dn(u.I);Ke(w,"SID",u.K),Ke(w,"RID",_),Ke(w,"AID",u.T),Ts(u,w),u.m&&u.o&&Dt(w,u.m,u.o),_=new Jt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Rc(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),la(u.h,_),Bn(_,w,p)}function Ts(u,p){u.H&&fe(u.H,function(_,w){Ke(p,w,_)}),u.l&&Oo({},function(_,w){Ke(p,w,_)})}function Rc(u,p,_){_=Math.min(u.i.length,_);var w=u.l?S(u.l.Na,u.l,u):null;e:{var L=u.i;let Q=-1;for(;;){const ae=["count="+_];Q==-1?0<_?(Q=L[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let Ve=!0;for(let St=0;St<_;St++){let Pe=L[St].g;const jt=L[St].map;if(Pe-=Q,0>Pe)Q=Math.max(0,L[St].g-100),Ve=!1;else try{sr(jt,ae,"req"+Pe+"_")}catch{w&&w(jt)}}if(Ve){w=ae.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,w}function Ic(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;oe||D(),pe||(oe(),pe=!0),Be.add(p,u),u.v=0}}function Bo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=yt(S(u.Fa,u),qo(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,Cc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=yt(S(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),ga(this),Cc(this))};function Es(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Cc(u){u.g=new Jt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=dn(u.qa);Ke(p,"RID","rpc"),Ke(p,"SID",u.K),Ke(p,"AID",u.T),Ke(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(p,"TO",u.ja),Ke(p,"TYPE","xmlhttp"),Ts(u,p),u.m&&u.o&&Dt(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ms(dn(p)),_.m=null,_.P=!0,Cr(_,u)}i.Za=function(){this.C!=null&&(this.C=null,ga(this),Bo(this),rt(19))};function ya(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Nc(u,p){var _=null;if(u.g==p){ya(u),Es(u),u.g=null;var w=2}else if(Do(u.h,p))_=p.D,en(u.h,p),w=1;else return;if(u.G!=0){if(p.o)if(w==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;w=ai(),Ge(w,new xt(w,_)),pa(u)}else Ic(u);else if(L=p.s,L==3||L==0&&0<p.X||!(w==1&&id(u,p)||w==2&&Bo(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),L){case 1:Vr(u,5);break;case 4:Vr(u,10);break;case 3:Vr(u,6);break;default:Vr(u,2)}}}function qo(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Vr(u,p){if(u.j.info("Error code "+p),p==2){var _=S(u.fb,u),w=u.Xa;const L=!w;w=new vt(w||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||fs(w,"https"),ms(w),L?ps(w.toString(),_):qn(w.toString(),_)}else rt(2);u.G=0,u.l&&u.l.sa(p),Dc(u),Ac(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Dc(u){if(u.G=0,u.ka=[],u.l){const p=jo(u.h);(p.length!=0||u.i.length!=0)&&(X(u.ka,p),X(u.ka,u.i),u.h.i.length=0,ie(u.i),u.i.length=0),u.l.ra()}}function jc(u,p,_){var w=_ instanceof vt?dn(_):new vt(_);if(w.g!="")p&&(w.g=p+"."+w.g),hi(w,w.s);else{var L=g.location;w=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var Q=new vt(null);w&&fs(Q,w),p&&(Q.g=p),L&&hi(Q,L),_&&(Q.l=_),w=Q}return _=u.D,p=u.ya,_&&p&&Ke(w,_,p),Ke(w,"VER",u.la),Ts(u,w),w}function Oc(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new He(new di({eb:_})):new He(u.pa),p.Ha(u.J),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mc(){}i=Mc.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function va(){}va.prototype.g=function(u,p){return new tn(u,p)};function tn(u,p){lt.call(this),this.g=new ma(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!re(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!re(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new cr(this)}Y(tn,lt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Lo(this.g)},tn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=zn(u),u=_);p.i.push(new Tc(p.Ya++,u)),p.G==3&&pa(p)},tn.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,tn.aa.N.call(this)};function kc(u){Rr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}Y(kc,Rr);function Vc(){Ro.call(this),this.status=1}Y(Vc,Ro);function cr(u){this.g=u}Y(cr,Mc),cr.prototype.ua=function(){Ge(this.g,"a")},cr.prototype.ta=function(u){Ge(this.g,new kc(u))},cr.prototype.sa=function(u){Ge(this.g,new Vc)},cr.prototype.ra=function(){Ge(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,Kb=function(){return new va},Yb=function(){return ai()},Qb=er,Am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,Yu=ci,Ir.COMPLETE="complete",Gb=Ir,Ao.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Dl=Ao,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,Fb=He}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const q0="@firebase/firestore",H0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Th("@firebase/firestore");function Ya(){return Qs.logLevel}function he(i,...e){if(Qs.logLevel<=Oe.DEBUG){const n=e.map(sg);Qs.debug(`Firestore (${po}): ${i}`,...n)}}function ri(i,...e){if(Qs.logLevel<=Oe.ERROR){const n=e.map(sg);Qs.error(`Firestore (${po}): ${i}`,...n)}}function oo(i,...e){if(Qs.logLevel<=Oe.WARN){const n=e.map(sg);Qs.warn(`Firestore (${po}): ${i}`,...n)}}function sg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,$b(i,s,n)}function $b(i,e,n){let s=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ri(s),new Error(s)}function Fe(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||$b(e,o,s)}function Ae(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class mR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class gR{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ei,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ei)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string",31837,{l:s}),new Xb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class pR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new pR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class F0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const s=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new F0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new F0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=_R(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Me(i,e){return i<e?-1:i>e?1:0}function Rm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return cm(o)===cm(c)?Me(o,c):cm(o)?1:-1}return Me(i.length,e.length)}const bR=55296,TR=57343;function cm(i){const e=i.charCodeAt(0);return e>=bR&&e<=TR}function lo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="__name__";class pr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return pr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=pr.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Me(e.length,n.length)}static compareSegments(e,n){const s=pr.isNumericId(e),o=pr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?pr.extractNumericId(e).compare(pr.extractNumericId(n)):Rm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qi.fromString(e.substring(4,e.length-2))}}class tt extends pr{construct(e,n,s){return new tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new tt(n)}static emptyPath(){return new tt([])}}const ER=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends pr{construct(e,n,s){return new Ft(e,n,s)}static isValidIdentifier(e){return ER.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G0}static keyField(){return new Ft([G0])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new ue(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ue(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ue(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(s+=g,o++):(c(),o++)}if(c(),d)throw new ue(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(tt.fromString(e))}static fromName(e){return new ye(tt.fromString(e).popFirst(5))}static empty(){return new ye(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(i,e,n){if(!n)throw new ue(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function wR(i,e,n,s){if(e===!0&&s===!0)throw new ue(W.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Q0(i){if(!ye.isDocumentKey(i))throw new ue(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Y0(i){if(ye.isDocumentKey(i))throw new ue(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Zb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ah(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Te(12329,{type:typeof i})}function Xn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ue(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ah(i);throw new ue(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function xR(i,e){if(e<=0)throw new ue(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(i,e){const n={typeString:i};return e&&(n.value=e),n}function ac(i,e){if(!Zb(i))throw new ue(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ue(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=-62135596800,$0=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*$0);return new nt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<K0)throw new ue(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$0}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ac(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-K0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:wt("string",nt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new nt(0,0))}static max(){return new Se(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=-1;function SR(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new nt(n+1,0):new nt(n,s));return new Gi(o,ye.empty(),e)}function AR(i){return new Gi(i.readTime,i.key,Kl)}class Gi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Gi(Se.min(),ye.empty(),Kl)}static max(){return new Gi(Se.max(),ye.empty(),Kl)}}function RR(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(i.documentKey,e.documentKey),n!==0?n:Me(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==IR)throw i;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.reject(n)}static resolve(e){return new ee(((n,s)=>{n(e)}))}static reject(e){return new ee(((n,s)=>{s(e)}))}static waitFor(e){return new ee(((n,s)=>{let o=0,c=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++c,d&&c===o&&n()}),(y=>s(y)))})),d=!0,c===o&&n()}))}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next((o=>o?ee.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new ee(((s,o)=>{const c=e.length,d=new Array(c);let g=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next((T=>{d[v]=T,++g,g===c&&s(d)}),(T=>o(T)))}}))}static doWhile(e,n){return new ee(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function NR(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=-1;function Ih(i){return i==null}function oh(i){return i===0&&1/i==-1/0}function DR(i){return typeof i=="number"&&Number.isInteger(i)&&!oh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="";function jR(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=X0(e)),e=OR(i.get(n),e);return X0(e)}function OR(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case Jb:n+="";break;default:n+=c}}return n}function X0(i){return i+Jb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Zi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function eT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lu(this.root,e,this.comparator,!0)}}class Lu{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??Ht.RED,this.left=o??Ht.EMPTY,this.right=c??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new Ht(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Tn([])}unionWith(e){let n=new Ct(Ft.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new tT("Invalid base64 string: "+c):c}})(e);return new Gt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const MR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(i){if(Fe(!!i,39018),typeof i=="string"){let e=0;const n=MR.exec(i);if(Fe(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mt(i.seconds),nanos:mt(i.nanos)}}function mt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Yi(i){return typeof i=="string"?Gt.fromBase64String(i):Gt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="server_timestamp",rT="__type__",iT="__previous_value__",sT="__local_write_time__";function lg(i){return(i?.mapValue?.fields||{})[rT]?.stringValue===nT}function Ch(i){const e=i.mapValue.fields[iT];return lg(e)?Ch(e):e}function $l(i){const e=Qi(i.mapValue.fields[sT].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,s,o,c,d,g,y,v,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=T}}const lh="(default)";class Xl{constructor(e,n){this.projectId=e,this.database=n||lh}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="__type__",VR="__max__",zu={mapValue:{}},oT="__vector__",ch="value";function Ki(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?lg(i)?4:UR(i)?9007199254740991:PR(i)?10:11:Te(28295,{value:i})}function xr(i,e){if(i===e)return!0;const n=Ki(i);if(n!==Ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return $l(i).isEqual($l(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Qi(o.timestampValue),g=Qi(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Yi(o.bytesValue).isEqual(Yi(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return mt(o.geoPointValue.latitude)===mt(c.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return mt(o.integerValue)===mt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=mt(o.doubleValue),g=mt(c.doubleValue);return d===g?oh(d)===oh(g):isNaN(d)&&isNaN(g)}return!1})(i,e);case 9:return lo(i.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},g=c.mapValue.fields||{};if(W0(d)!==W0(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!xr(d[y],g[y])))return!1;return!0})(i,e);default:return Te(52216,{left:i})}}function Wl(i,e){return(i.values||[]).find((n=>xr(n,e)))!==void 0}function co(i,e){if(i===e)return 0;const n=Ki(i),s=Ki(e);if(n!==s)return Me(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(i.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=mt(c.integerValue||c.doubleValue),y=mt(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(i,e);case 3:return J0(i.timestampValue,e.timestampValue);case 4:return J0($l(i),$l(e));case 5:return Rm(i.stringValue,e.stringValue);case 6:return(function(c,d){const g=Yi(c),y=Yi(d);return g.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),y=d.split("/");for(let v=0;v<g.length&&v<y.length;v++){const T=Me(g[v],y[v]);if(T!==0)return T}return Me(g.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Me(mt(c.latitude),mt(d.latitude));return g!==0?g:Me(mt(c.longitude),mt(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return e_(i.arrayValue,e.arrayValue);case 10:return(function(c,d){const g=c.fields||{},y=d.fields||{},v=g[ch]?.arrayValue,T=y[ch]?.arrayValue,A=Me(v?.values?.length||0,T?.values?.length||0);return A!==0?A:e_(v,T)})(i.mapValue,e.mapValue);case 11:return(function(c,d){if(c===zu.mapValue&&d===zu.mapValue)return 0;if(c===zu.mapValue)return 1;if(d===zu.mapValue)return-1;const g=c.fields||{},y=Object.keys(g),v=d.fields||{},T=Object.keys(v);y.sort(),T.sort();for(let A=0;A<y.length&&A<T.length;++A){const S=Rm(y[A],T[A]);if(S!==0)return S;const U=co(g[y[A]],v[T[A]]);if(U!==0)return U}return Me(y.length,T.length)})(i.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function J0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Me(i,e);const n=Qi(i),s=Qi(e),o=Me(n.seconds,s.seconds);return o!==0?o:Me(n.nanos,s.nanos)}function e_(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=co(n[o],s[o]);if(c)return c}return Me(n.length,s.length)}function uo(i){return Im(i)}function Im(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Qi(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Yi(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ye.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=Im(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${Im(n.fields[d])}`;return o+"}"})(i.mapValue):Te(61005,{value:i})}function Ku(i){switch(Ki(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ch(i);return e?16+Ku(e):16;case 5:return 2*i.stringValue.length;case 6:return Yi(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+Ku(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Zi(s.fields,((c,d)=>{o+=c.length+Ku(d)})),o})(i.mapValue);default:throw Te(13486,{value:i})}}function t_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Cm(i){return!!i&&"integerValue"in i}function cg(i){return!!i&&"arrayValue"in i}function n_(i){return!!i&&"nullValue"in i}function r_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function $u(i){return!!i&&"mapValue"in i}function PR(i){return(i?.mapValue?.fields||{})[aT]?.stringValue===oT}function Ul(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Zi(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ul(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ul(i.arrayValue.values[n]);return e}return{...i}}function UR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===VR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!$u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ul(n)}setAll(e){let n=Ft.emptyPath(),s={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,s,o),s={},o=[],n=g.popLast()}d?s[g.lastSegment()]=Ul(d):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];$u(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Zi(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new ln(Ul(this.value))}}function lT(i){const e=[];return Zi(i.fields,((n,s)=>{const o=new Ft([n]);if($u(s)){const c=lT(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,s,o,c,d,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Wt(e,0,Se.min(),Se.min(),Se.min(),ln.empty(),0)}static newFoundDocument(e,n,s,o){return new Wt(e,1,n,Se.min(),s,o,0)}static newNoDocument(e,n){return new Wt(e,2,n,Se.min(),Se.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Se.min(),Se.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.position=e,this.inclusive=n}}function i_(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?s=ye.comparator(ye.fromName(d.referenceValue),n.key):s=co(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function s_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!xr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function LR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class Et extends cT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new BR(e,n,s):n==="array-contains"?new FR(e,s):n==="in"?new GR(e,s):n==="not-in"?new QR(e,s):n==="array-contains-any"?new YR(e,s):new Et(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new qR(e,s):new HR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&Ki(this.value)===Ki(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends cT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Wn(e,n)}matches(e){return uT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uT(i){return i.op==="and"}function hT(i){return zR(i)&&uT(i)}function zR(i){for(const e of i.filters)if(e instanceof Wn)return!1;return!0}function Nm(i){if(i instanceof Et)return i.field.canonicalString()+i.op.toString()+uo(i.value);if(hT(i))return i.filters.map((e=>Nm(e))).join(",");{const e=i.filters.map((n=>Nm(n))).join(",");return`${i.op}(${e})`}}function dT(i,e){return i instanceof Et?(function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&xr(s.value,o.value)})(i,e):i instanceof Wn?(function(s,o){return o instanceof Wn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,g)=>c&&dT(d,o.filters[g])),!0):!1})(i,e):void Te(19439)}function fT(i){return i instanceof Et?(function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`})(i):i instanceof Wn?(function(n){return n.op.toString()+" {"+n.getFilters().map(fT).join(" ,")+"}"})(i):"Filter"}class BR extends Et{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class qR extends Et{constructor(e,n){super(e,"in",n),this.keys=mT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class HR extends Et{constructor(e,n){super(e,"not-in",n),this.keys=mT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function mT(i,e){return(e.arrayValue?.values||[]).map((n=>ye.fromName(n.referenceValue)))}class FR extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cg(n)&&Wl(n.arrayValue,this.value)}}class GR extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}}class QR extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wl(this.value.arrayValue,n)}}class YR extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Wl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n=null,s=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function a_(i,e=null,n=[],s=[],o=null,c=null,d=null){return new KR(i,e,n,s,o,c,d)}function ug(i){const e=Ae(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Nm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>uo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>uo(s))).join(",")),e.Te=n}return e.Te}function hg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!LR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!dT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!s_(i.startAt,e.startAt)&&s_(i.endAt,e.endAt)}function Dm(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n=null,s=[],o=[],c=null,d="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $R(i,e,n,s,o,c,d,g){return new _o(i,e,n,s,o,c,d,g)}function dg(i){return new _o(i)}function o_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function gT(i){return i.collectionGroup!==null}function Ll(i){const e=Ae(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ct(Ft.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(g=g.add(v.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Zl(c,s))})),n.has(Ft.keyField().canonicalString())||e.Ie.push(new Zl(Ft.keyField(),s))}return e.Ie}function _r(i){const e=Ae(i);return e.Ee||(e.Ee=XR(e,Ll(i))),e.Ee}function XR(i,e){if(i.limitType==="F")return a_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Zl(o.field,c)}));const n=i.endAt?new uh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new uh(i.startAt.position,i.startAt.inclusive):null;return a_(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function jm(i,e){const n=i.filters.concat([e]);return new _o(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function hh(i,e,n){return new _o(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Nh(i,e){return hg(_r(i),_r(e))&&i.limitType===e.limitType}function pT(i){return`${ug(_r(i))}|lt:${i.limitType}`}function Ka(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>fT(o))).join(", ")}]`),Ih(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>uo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>uo(o))).join(",")),`Target(${s})`})(_r(i))}; limitType=${i.limitType})`}function Dh(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ye.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of Ll(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,g,y){const v=i_(d,g,y);return d.inclusive?v<=0:v<0})(s.startAt,Ll(s),o)||s.endAt&&!(function(d,g,y){const v=i_(d,g,y);return d.inclusive?v>=0:v>0})(s.endAt,Ll(s),o))})(i,e)}function WR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function yT(i){return(e,n)=>{let s=!1;for(const o of Ll(i)){const c=ZR(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function ZR(i,e,n){const s=i.field.isKeyField()?ye.comparator(e.key,n.key):(function(c,d,g){const y=d.data.field(c),v=g.data.field(c);return y!==null&&v!==null?co(y,v):Te(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return eT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new at(ye.comparator);function ii(){return JR}const vT=new at(ye.comparator);function jl(...i){let e=vT;for(const n of i)e=e.insert(n.key,n);return e}function _T(i){let e=vT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function zs(){return zl()}function bT(){return zl()}function zl(){return new Zs((i=>i.toString()),((i,e)=>i.isEqual(e)))}const e2=new at(ye.comparator),t2=new Ct(ye.comparator);function ke(...i){let e=t2;for(const n of i)e=e.add(n);return e}const n2=new Ct(Me);function r2(){return n2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function TT(i){return{integerValue:""+i}}function i2(i,e){return DR(e)?TT(e):fg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this._=void 0}}function s2(i,e,n){return i instanceof Jl?(function(o,c){const d={fields:{[rT]:{stringValue:nT},[sT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&lg(c)&&(c=Ch(c)),c&&(d.fields[iT]=c),{mapValue:d}})(n,e):i instanceof ec?wT(i,e):i instanceof tc?xT(i,e):(function(o,c){const d=ET(o,c),g=l_(d)+l_(o.Ae);return Cm(d)&&Cm(o.Ae)?TT(g):fg(o.serializer,g)})(i,e)}function a2(i,e,n){return i instanceof ec?wT(i,e):i instanceof tc?xT(i,e):n}function ET(i,e){return i instanceof dh?(function(s){return Cm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Jl extends jh{}class ec extends jh{constructor(e){super(),this.elements=e}}function wT(i,e){const n=ST(e);for(const s of i.elements)n.some((o=>xr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class tc extends jh{constructor(e){super(),this.elements=e}}function xT(i,e){let n=ST(e);for(const s of i.elements)n=n.filter((o=>!xr(o,s)));return{arrayValue:{values:n}}}class dh extends jh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function l_(i){return mt(i.integerValue||i.doubleValue)}function ST(i){return cg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.field=e,this.transform=n}}function l2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof ec&&o instanceof ec||s instanceof tc&&o instanceof tc?lo(s.elements,o.elements,xr):s instanceof dh&&o instanceof dh?xr(s.Ae,o.Ae):s instanceof Jl&&o instanceof Jl})(i.transform,e.transform)}class c2{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Oh{}function AT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new mg(i.key,Un.none()):new oc(i.key,i.data,Un.none());{const n=i.data,s=ln.empty();let o=new Ct(Ft.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new Ji(i.key,s,new Tn(o.toArray()),Un.none())}}function u2(i,e,n){i instanceof oc?(function(o,c,d){const g=o.value.clone(),y=u_(o.fieldTransforms,c,d.transformResults);g.setAll(y),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):i instanceof Ji?(function(o,c,d){if(!Xu(o.precondition,c))return void c.convertToUnknownDocument(d.version);const g=u_(o.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(RT(o)),y.setAll(g),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(i,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Bl(i,e,n,s){return i instanceof oc?(function(c,d,g,y){if(!Xu(c.precondition,d))return g;const v=c.value.clone(),T=h_(c.fieldTransforms,y,d);return v.setAll(T),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(i,e,n,s):i instanceof Ji?(function(c,d,g,y){if(!Xu(c.precondition,d))return g;const v=h_(c.fieldTransforms,y,d),T=d.data;return T.setAll(RT(c)),T.setAll(v),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(i,e,n,s):(function(c,d,g){return Xu(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(i,e,n)}function h2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=ET(s.transform,o||null);c!=null&&(n===null&&(n=ln.empty()),n.set(s.field,c))}return n||null}function c_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&lo(s,o,((c,d)=>l2(c,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class oc extends Oh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ji extends Oh{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function RT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function u_(i,e,n){const s=new Map;Fe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],d=c.transform,g=e.data.field(c.field);s.set(c.field,a2(d,g,n[o]))}return s}function h_(i,e,n){const s=new Map;for(const o of i){const c=o.transform,d=n.data.field(o.field);s.set(o.field,s2(c,d,e))}return s}class mg extends Oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d2 extends Oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&u2(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Bl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Bl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=bT();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(o.key)?null:g;const y=AT(d,g);y!==null&&s.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ke())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,((n,s)=>c_(n,s)))&&lo(this.baseMutations,e.baseMutations,((n,s)=>c_(n,s)))}}class gg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Fe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return e2})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new gg(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Le;function p2(i){switch(i){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:i})}}function IT(i){if(i===void 0)return ri("GRPC error has no .code"),W.UNKNOWN;switch(i){case Tt.OK:return W.OK;case Tt.CANCELLED:return W.CANCELLED;case Tt.UNKNOWN:return W.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return W.INTERNAL;case Tt.UNAVAILABLE:return W.UNAVAILABLE;case Tt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Tt.NOT_FOUND:return W.NOT_FOUND;case Tt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Tt.ABORTED:return W.ABORTED;case Tt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Tt.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:i})}}(Le=Tt||(Tt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new qi([4294967295,4294967295],0);function d_(i){const e=y2().encode(i),n=new Hb;return n.update(e),new Uint8Array(n.digest())}function f_(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new qi([n,s],0),new qi([o,c],0)]}class pg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ol(`Invalid padding: ${n}`);if(s<0)throw new Ol(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qi.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(qi.fromNumber(s)));return o.compare(v2)===1&&(o=new qi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=d_(e),[s,o]=f_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new pg(c,o,n);return s.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=d_(e),[s,o]=f_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Mh(Se.min(),o,new at(Me),ii(),ke())}}class lc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new lc(s,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class CT{constructor(e,n){this.targetId=e,this.Ce=n}}class NT{constructor(e,n,s=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class m_{constructor(){this.ve=0,this.Fe=g_(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),s=ke();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:c})}})),new lc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=g_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _2{constructor(e){this.Ge=e,this.ze=new Map,this.je=ii(),this.Je=Bu(),this.He=Bu(),this.Ye=new at(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Dm(c))if(s===0){const d=new ye(c.path);this.et(n,d,Wt.newNoDocument(d,Se.min()))}else Fe(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const g=this.ut(e),y=g?this.ct(g,e,d):1;if(y!==0){this.it(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,g;try{d=Yi(s).toUint8Array()}catch(y){if(y instanceof tT)return oo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new pg(d,o,c)}catch(y){return oo(y instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&Dm(g.target)){const y=new ye(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,Wt.newNoDocument(y,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=ke();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new Mh(e,n,this.Ye,this.je,s);return this.je=ii(),this.Je=Bu(),this.He=Bu(),this.Ye=new at(Me),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new m_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new m_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bu(){return new at(ye.comparator)}function g_(){return new at(ye.comparator)}const b2={asc:"ASCENDING",desc:"DESCENDING"},T2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E2={and:"AND",or:"OR"};class w2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Om(i,e){return i.useProto3Json||Ih(e)?e:{value:e}}function fh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function x2(i,e){return fh(i,e.toTimestamp())}function br(i){return Fe(!!i,49232),Se.fromTimestamp((function(n){const s=Qi(n);return new nt(s.seconds,s.nanos)})(i))}function yg(i,e){return Mm(i,e).canonicalString()}function Mm(i,e){const n=(function(o){return new tt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function jT(i){const e=tt.fromString(i);return Fe(PT(e),10190,{key:e.toString()}),e}function km(i,e){return yg(i.databaseId,e.path)}function um(i,e){const n=jT(e);if(n.get(1)!==i.databaseId.projectId)throw new ue(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ue(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ye(MT(n))}function OT(i,e){return yg(i.databaseId,e)}function S2(i){const e=jT(i);return e.length===4?tt.emptyPath():MT(e)}function Vm(i){return new tt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function MT(i){return Fe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function p_(i,e,n){return{name:km(i,e),fields:n.value.mapValue.fields}}function A2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(v,T){return v.useProto3Json?(Fe(T===void 0||typeof T=="string",58123),Gt.fromBase64String(T||"")):(Fe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Gt.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(v){const T=v.code===void 0?W.UNKNOWN:IT(v.code);return new ue(T,v.message||"")})(d);n=new NT(s,o,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=um(i,s.document.name),c=br(s.document.updateTime),d=s.document.createTime?br(s.document.createTime):Se.min(),g=new ln({mapValue:{fields:s.document.fields}}),y=Wt.newFoundDocument(o,c,d,g),v=s.targetIds||[],T=s.removedTargetIds||[];n=new Wu(v,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=um(i,s.document),c=s.readTime?br(s.readTime):Se.min(),d=Wt.newNoDocument(o,c),g=s.removedTargetIds||[];n=new Wu([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=um(i,s.document),c=s.removedTargetIds||[];n=new Wu([],c,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new g2(o,c),g=s.targetId;n=new CT(g,d)}}return n}function R2(i,e){let n;if(e instanceof oc)n={update:p_(i,e.key,e.value)};else if(e instanceof mg)n={delete:km(i,e.key)};else if(e instanceof Ji)n={update:p_(i,e.key,e.data),updateMask:V2(e.fieldMask)};else{if(!(e instanceof d2))return Te(16599,{Vt:e.type});n={verify:km(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const g=d.transform;if(g instanceof Jl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ec)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof tc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof dh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Te(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:x2(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Te(27497)})(i,e.precondition)),n}function I2(i,e){return i&&i.length>0?(Fe(e!==void 0,14353),i.map((n=>(function(o,c){let d=o.updateTime?br(o.updateTime):br(c);return d.isEqual(Se.min())&&(d=br(c)),new c2(d,o.transformResults||[])})(n,e)))):[]}function C2(i,e){return{documents:[OT(i,e.path)]}}function N2(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=OT(i,o);const c=(function(v){if(v.length!==0)return VT(Wn.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(v){if(v.length!==0)return v.map((T=>(function(S){return{field:$a(S.field),direction:O2(S.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=Om(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:o}}function D2(i){let e=S2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Fe(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(A){const S=kT(A);return S instanceof Wn&&hT(S)?S.getFilters():[S]})(n.where));let d=[];n.orderBy&&(d=(function(A){return A.map((S=>(function(Y){return new Zl(Xa(Y.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(S)))})(n.orderBy));let g=null;n.limit&&(g=(function(A){let S;return S=typeof A=="object"?A.value:A,Ih(S)?null:S})(n.limit));let y=null;n.startAt&&(y=(function(A){const S=!!A.before,U=A.values||[];return new uh(U,S)})(n.startAt));let v=null;return n.endAt&&(v=(function(A){const S=!A.before,U=A.values||[];return new uh(U,S)})(n.endAt)),$R(e,o,d,c,g,"F",y,v)}function j2(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Xa(n.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Xa(n.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Xa(n.unaryFilter.field);return Et.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Xa(n.unaryFilter.field);return Et.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Et.create(Xa(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Wn.create(n.compositeFilter.filters.map((s=>kT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(n.compositeFilter.op))})(i):Te(30097,{filter:i})}function O2(i){return b2[i]}function M2(i){return T2[i]}function k2(i){return E2[i]}function $a(i){return{fieldPath:i.canonicalString()}}function Xa(i){return Ft.fromServerFormat(i.fieldPath)}function VT(i){return i instanceof Et?(function(n){if(n.op==="=="){if(r_(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(n_(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(r_(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(n_(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:M2(n.op),value:n.value}}})(i):i instanceof Wn?(function(n){const s=n.getFilters().map((o=>VT(o)));return s.length===1?s[0]:{compositeFilter:{op:k2(n.op),filters:s}}})(i):Te(54877,{filter:i})}function V2(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function PT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n,s,o,c=Se.min(),d=Se.min(),g=Gt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new Li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.yt=e}}function U2(i){const e=D2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.Cn=new z2}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Gi.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class z2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ct(tt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ct(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(UT,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ho(0)}static cr(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="LruGarbageCollector",B2=1048576;function __([i,e],[n,s]){const o=Me(i,n);return o===0?Me(e,s):o}class q2{constructor(e){this.Ir=e,this.buffer=new Ct(__),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();__(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(v_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vo(n)?he(v_,"Ignoring IndexedDB error during garbage collection: ",n):await yo(n)}await this.Vr(3e5)}))}}class F2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Rh.ce);const s=new q2(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(y_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,d,g,y,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,g=Date.now(),this.removeTargets(e,s,n)))).next((A=>(c=A,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(v=Date.now(),Ya()<=Oe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${c} targets in `+(y-g)+`ms
	Removed ${A} documents in `+(v-y)+`ms
Total Duration: ${v-T}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A}))))}}function G2(i,e){return new F2(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.changes=new Zs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Bl(s.mutation,o,Tn.empty(),nt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ke()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ke()){const o=zs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=jl();return c.forEach(((g,y)=>{d=d.insert(g,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=zs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ke())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,s,o){let c=ii();const d=zl(),g=(function(){return zl()})();return n.forEach(((y,v)=>{const T=s.get(v.key);o.has(v.key)&&(T===void 0||T.mutation instanceof Ji)?c=c.insert(v.key,v):T!==void 0?(d.set(v.key,T.mutation.getFieldMask()),Bl(T.mutation,v,T.mutation.getFieldMask(),nt.now())):d.set(v.key,Tn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((v,T)=>d.set(v,T))),n.forEach(((v,T)=>g.set(v,new Y2(T,d.get(v)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=zl();let o=new at(((d,g)=>d-g)),c=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((y=>{const v=n.get(y);if(v===null)return;let T=s.get(y)||Tn.empty();T=g.applyToLocalView(v,T),s.set(y,T);const A=(o.get(g.batchId)||ke()).add(y);o=o.insert(g.batchId,A)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,T=y.value,A=bT();T.forEach((S=>{if(!c.has(S)){const U=AT(n.get(S),s.get(S));U!==null&&A.set(S,U),c=c.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,A))}return ee.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):ee.resolve(zs());let g=Kl,y=c;return d.next((v=>ee.forEach(v,((T,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),c.get(T)?ee.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{y=y.insert(T,S)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,y,v,ke()))).next((T=>({batchId:g,changes:_T(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((s=>{let o=jl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=jl();return this.indexManager.getCollectionParents(e,c).next((g=>ee.forEach(g,(y=>{const v=(function(A,S){return new _o(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((T=>{T.forEach(((A,S)=>{d=d.insert(A,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((y,v)=>{const T=v.getKey();d.get(T)===null&&(d=d.insert(T,Wt.newInvalidDocument(T)))}));let g=jl();return d.forEach(((y,v)=>{const T=c.get(y);T!==void 0&&Bl(T.mutation,v,Tn.empty(),nt.now()),Dh(n,v)&&(g=g.insert(y,v))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ee.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:br(o.createTime)}})(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:U2(o.bundledQuery),readTime:br(o.readTime)}})(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.overlays=new at(ye.comparator),this.qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=zs();return ee.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=zs(),c=n.length+1,d=new ye(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>s&&o.set(y.getKey(),y)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new at(((v,T)=>v-T));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let T=c.get(v.largestBatchId);T===null&&(T=zs(),c=c.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const g=zs(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,T)=>g.set(v,T))),!(g.size()>=o)););return ee.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new m2(n,s));let c=this.qr.get(n);c===void 0&&(c=ke(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(){this.Qr=new Ct(Vt.$r),this.Ur=new Ct(Vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Vt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Vt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ye(new tt([])),s=new Vt(n,e),o=new Vt(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new tt([])),s=new Vt(n,e),o=new Vt(n,e+1);let c=ke();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Vt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Vt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(Vt.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new f2(c,n,s,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Vt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,n){return ee.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return ee.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?og:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Vt(n,0),o=new Vt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const g=this.Xr(d.Yr);c.push(g)})),ee.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ct(Me);return n.forEach((o=>{const c=new Vt(o,0),d=new Vt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{s=s.add(g.Yr)}))})),ee.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;ye.isDocumentKey(c)||(c=c.child(""));const d=new Vt(new ye(c),0);let g=new Ct(Me);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(g=g.add(y.Yr)),!0)}),d),ee.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ee.forEach(n.mutations,(o=>{const c=new Vt(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Vt(n,0),o=this.Zr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.ri=e,this.docs=(function(){return new at(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let s=ii();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():Wt.newInvalidDocument(o))})),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=ii();const d=n.path,g=new ye(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:T}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||RR(AR(T),s)<=0||(o.has(T.key)||Dh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return ee.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Te(9500)}ii(e,n){return ee.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new eI(this)}getSize(e){return ee.resolve(this.size)}}class eI extends Q2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ee.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.persistence=e,this.si=new Zs((n=>ug(n)),hg),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new vg,this.targetCount=0,this.ai=ho.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ee.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Pr(n),ee.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ee.waitFor(c).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ee.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rh(0),this.li=!1,this.li=!0,this.hi=new W2,this.referenceDelegate=e(this),this.Pi=new tI(this),this.indexManager=new L2,this.remoteDocumentCache=(function(o){return new J2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new P2(n),this.Ii=new $2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new Z2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new nI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ee.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class nI extends CR{constructor(e){super(),this.currentSequenceNumber=e}}class _g{constructor(e){this.persistence=e,this.Ri=new vg,this.Vi=null}static mi(e){return new _g(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ee.or([()=>ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class mh{constructor(e,n){this.persistence=e,this.pi=new Zs((s=>jR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=G2(this,n)}static mi(e,n){return new mh(e,n)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ee.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ee.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(s++,c.removeEntry(d,Se.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ku(e.data.value)),n}br(e,n,s){return ee.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=ke(),o=ke();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new bg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Fx()?8:NR(Zt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new rI;return this.Ss(e,n,d).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Ya()<=Oe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(Ya()<=Oe.DEBUG&&he("QueryEngine","Query:",Ka(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Ya()<=Oe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):ee.resolve())}ys(e,n){if(o_(n))return ee.resolve(null);let s=_r(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=hh(n,null,"F"),s=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=ke(...c);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,s).next((y=>{const v=this.Ds(n,g);return this.Cs(n,v,d,y.readTime)?this.ys(e,hh(n,null,"F")):this.vs(e,v,n,y)}))))})))))}ws(e,n,s,o){return o_(n)||o.isEqual(Se.min())?ee.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,o)?ee.resolve(null):(Ya()<=Oe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ka(n)),this.vs(e,d,n,SR(o,Kl)).next((g=>g)))}))}Ds(e,n){let s=new Ct(yT(e));return n.forEach(((o,c)=>{Dh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return Ya()<=Oe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ka(n)),this.ps.getDocumentsMatchingQuery(e,n,Gi.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="LocalStore",sI=3e8;class aI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new at(Me),this.xs=new Zs((c=>ug(c)),hg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function oI(i,e,n,s){return new aI(i,e,n,s)}async function zT(i,e){const n=Ae(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],g=[];let y=ke();for(const v of o){d.push(v.batchId);for(const T of v.mutations)y=y.add(T.key)}for(const v of c){g.push(v.batchId);for(const T of v.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(s,y).next((v=>({Ls:v,removedBatchIds:d,addedBatchIds:g})))}))}))}function lI(i,e){const n=Ae(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,v,T){const A=v.batch,S=A.keys();let U=ee.resolve();return S.forEach((Y=>{U=U.next((()=>T.getEntry(y,Y))).next((ie=>{const X=v.docVersions.get(Y);Fe(X!==null,48541),ie.version.compareTo(X)<0&&(A.applyToRemoteDocument(ie,v),ie.isValidDocument()&&(ie.setReadTime(v.commitVersion),T.addEntry(ie)))}))})),U.next((()=>g.mutationQueue.removeMutationBatch(y,A)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let y=ke();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(y=y.add(g.batch.mutations[v].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function BT(i){const e=Ae(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function cI(i,e){const n=Ae(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((T,A)=>{const S=o.get(A);if(!S)return;g.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,A))));let U=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?U=U.withResumeToken(Gt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,s)),o=o.insert(A,U),(function(ie,X,F){return ie.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=sI?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(S,U,T)&&g.push(n.Pi.updateTargetData(c,U))}));let y=ii(),v=ke();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),g.push(uI(c,d,e.documentUpdates).next((T=>{y=T.ks,v=T.qs}))),!s.isEqual(Se.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(T)}return ee.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,v))).next((()=>y))})).then((c=>(n.Ms=o,c)))}function uI(i,e,n){let s=ke(),o=ke();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let d=ii();return n.forEach(((g,y)=>{const v=c.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(g,y.readTime),d=d.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(g,y)):he(Tg,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)})),{ks:d,qs:o}}))}function hI(i,e){const n=Ae(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=og),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function dI(i,e){const n=Ae(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,ee.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new Li(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Pm(i,e,n){const s=Ae(i),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!vo(d))throw d;he(Tg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function b_(i,e,n){const s=Ae(i);let o=Se.min(),c=ke();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,T){const A=Ae(y),S=A.xs.get(T);return S!==void 0?ee.resolve(A.Ms.get(S)):A.Pi.getTargetData(v,T)})(s,d,_r(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next((y=>{c=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Se.min(),n?c:ke()))).next((g=>(fI(s,WR(e),g),{documents:g,Qs:c})))))}function fI(i,e,n){let s=i.Os.get(e)||Se.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class T_{constructor(){this.activeTargetIds=r2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mI{constructor(){this.Mo=new T_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new T_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="ConnectivityMonitor";class w_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(E_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(E_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function Um(){return qu===null?qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="RestConnection",pI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===lh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const d=Um(),g=this.zo(e,n.toUriEncodedString());he(hm,`Sending RPC '${e}' ${d}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,c);const{host:v}=new URL(g),T=Xs(v);return this.Jo(e,g,y,s,T).then((A=>(he(hm,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw oo(hm,`RPC '${e}' ${d} failed with error: `,A,"url: ",g,"request:",s),A}))}Ho(e,n,s,o,c,d){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=pI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class _I extends yI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const d=Um();return new Promise(((g,y)=>{const v=new Fb;v.setWithCredentials(!0),v.listenOnce(Gb.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Yu.NO_ERROR:const A=v.getResponseJson();he($t,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),g(A);break;case Yu.TIMEOUT:he($t,`RPC '${e}' ${d} timed out`),y(new ue(W.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const S=v.getStatus();if(he($t,`RPC '${e}' ${d} failed with status:`,S,"response text:",v.getResponseText()),S>0){let U=v.getResponseJson();Array.isArray(U)&&(U=U[0]);const Y=U?.error;if(Y&&Y.status&&Y.message){const ie=(function(F){const re=F.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(re)>=0?re:W.UNKNOWN})(Y.status);y(new ue(ie,Y.message))}else y(new ue(W.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new ue(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:d,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{he($t,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);he($t,`RPC '${e}' ${d} sending request:`,o),v.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=Um(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Kb(),g=Yb(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const T=c.join("");he($t,`Creating RPC '${e}' stream ${o}: ${T}`,y);const A=d.createWebChannel(T,y);this.I_(A);let S=!1,U=!1;const Y=new vI({Yo:X=>{U?he($t,`Not sending because RPC '${e}' stream ${o} is closed:`,X):(S||(he($t,`Opening RPC '${e}' stream ${o} transport.`),A.open(),S=!0),he($t,`RPC '${e}' stream ${o} sending:`,X),A.send(X))},Zo:()=>A.close()}),ie=(X,F,re)=>{X.listen(F,(te=>{try{re(te)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return ie(A,Dl.EventType.OPEN,(()=>{U||(he($t,`RPC '${e}' stream ${o} transport opened.`),Y.o_())})),ie(A,Dl.EventType.CLOSE,(()=>{U||(U=!0,he($t,`RPC '${e}' stream ${o} transport closed`),Y.a_(),this.E_(A))})),ie(A,Dl.EventType.ERROR,(X=>{U||(U=!0,oo($t,`RPC '${e}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),Y.a_(new ue(W.UNAVAILABLE,"The operation could not be completed")))})),ie(A,Dl.EventType.MESSAGE,(X=>{if(!U){const F=X.data[0];Fe(!!F,16349);const re=F,te=re?.error||re[0]?.error;if(te){he($t,`RPC '${e}' stream ${o} received error:`,te);const ce=te.status;let G=(function(R){const N=Tt[R];if(N!==void 0)return IT(N)})(ce),fe=te.message;G===void 0&&(G=W.INTERNAL,fe="Unknown error status: "+ce+" with message "+te.message),U=!0,Y.a_(new ue(G,fe)),A.close()}else he($t,`RPC '${e}' stream ${o} received:`,F),Y.u_(F)}})),ie(g,Qb.STAT_EVENT,(X=>{X.stat===Am.PROXY?he($t,`RPC '${e}' stream ${o} detected buffering proxy`):X.stat===Am.NOPROXY&&he($t,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function dm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(i){return new w2(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="PersistentStream";class HT{constructor(e,n,s,o,c,d,g,y){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(ri(n.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ue(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(x_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(x_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bI extends HT{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=A2(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Se.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Se.min():d.readTime?br(d.readTime):Se.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Vm(this.serializer),n.addTarget=(function(c,d){let g;const y=d.target;if(g=Dm(y)?{documents:C2(c,y)}:{query:N2(c,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=DT(c,d.resumeToken);const v=Om(c,d.expectedCount);v!==null&&(g.expectedCount=v)}else if(d.snapshotVersion.compareTo(Se.min())>0){g.readTime=fh(c,d.snapshotVersion.toTimestamp());const v=Om(c,d.expectedCount);v!==null&&(g.expectedCount=v)}return g})(this.serializer,e);const s=j2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Vm(this.serializer),n.removeTarget=e,this.q_(n)}}class TI extends HT{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=I2(e.writeResults,e.commitTime),s=br(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Vm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>R2(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{}class wI extends EI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Mm(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(W.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,Mm(n,s),o,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue(W.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class xI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ri(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="RemoteStore";class SI{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Js(this)&&(he(Ys,"Restarting streams for network reachability change."),await(async function(y){const v=Ae(y);v.Ea.add(4),await cc(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Vh(v)})(this))}))})),this.Ra=new xI(s,o)}}async function Vh(i){if(Js(i))for(const e of i.da)await e(!0)}async function cc(i){for(const e of i.da)await e(!1)}function FT(i,e){const n=Ae(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sg(n)?xg(n):bo(n).O_()&&wg(n,e))}function Eg(i,e){const n=Ae(i),s=bo(n);n.Ia.delete(e),s.O_()&&GT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Js(n)&&n.Ra.set("Unknown"))}function wg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(i).Y_(e)}function GT(i,e){i.Va.Ue(e),bo(i).Z_(e)}function xg(i){i.Va=new _2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),bo(i).start(),i.Ra.ua()}function Sg(i){return Js(i)&&!bo(i).x_()&&i.Ia.size>0}function Js(i){return Ae(i).Ea.size===0}function QT(i){i.Va=void 0}async function AI(i){i.Ra.set("Online")}async function RI(i){i.Ia.forEach(((e,n)=>{wg(i,e)}))}async function II(i,e){QT(i),Sg(i)?(i.Ra.ha(e),xg(i)):i.Ra.set("Unknown")}async function CI(i,e,n){if(i.Ra.set("Online"),e instanceof NT&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(s){he(Ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await gh(i,s)}else if(e instanceof Wu?i.Va.Ze(e):e instanceof CT?i.Va.st(e):i.Va.tt(e),!n.isEqual(Se.min()))try{const s=await BT(i.localStore);n.compareTo(s)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(v);T&&c.Ia.set(v,T.withResumeToken(y.resumeToken,d))}})),g.targetMismatches.forEach(((y,v)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Gt.EMPTY_BYTE_STRING,T.snapshotVersion)),GT(c,y);const A=new Li(T.target,y,v,T.sequenceNumber);wg(c,A)})),c.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(s){he(Ys,"Failed to raise snapshot:",s),await gh(i,s)}}async function gh(i,e,n){if(!vo(e))throw e;i.Ea.add(1),await cc(i),i.Ra.set("Offline"),n||(n=()=>BT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{he(Ys,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Vh(i)}))}function YT(i,e){return e().catch((n=>gh(i,n,e)))}async function Ph(i){const e=Ae(i),n=$i(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:og;for(;NI(e);)try{const o=await hI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,DI(e,o)}catch(o){await gh(e,o)}KT(e)&&$T(e)}function NI(i){return Js(i)&&i.Ta.length<10}function DI(i,e){i.Ta.push(e);const n=$i(i);n.O_()&&n.X_&&n.ea(e.mutations)}function KT(i){return Js(i)&&!$i(i).x_()&&i.Ta.length>0}function $T(i){$i(i).start()}async function jI(i){$i(i).ra()}async function OI(i){const e=$i(i);for(const n of i.Ta)e.ea(n.mutations)}async function MI(i,e,n){const s=i.Ta.shift(),o=gg.from(s,e,n);await YT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Ph(i)}async function kI(i,e){e&&$i(i).X_&&await(async function(s,o){if((function(d){return p2(d)&&d!==W.ABORTED})(o.code)){const c=s.Ta.shift();$i(s).B_(),await YT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Ph(s)}})(i,e),KT(i)&&$T(i)}async function S_(i,e){const n=Ae(i);n.asyncQueue.verifyOperationInProgress(),he(Ys,"RemoteStore received new credentials");const s=Js(n);n.Ea.add(3),await cc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vh(n)}async function VI(i,e){const n=Ae(i);e?(n.Ea.delete(2),await Vh(n)):e||(n.Ea.add(2),await cc(n),n.Ra.set("Unknown"))}function bo(i){return i.ma||(i.ma=(function(n,s,o){const c=Ae(n);return c.sa(),new bI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:AI.bind(null,i),t_:RI.bind(null,i),r_:II.bind(null,i),H_:CI.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Sg(i)?xg(i):i.Ra.set("Unknown")):(await i.ma.stop(),QT(i))}))),i.ma}function $i(i){return i.fa||(i.fa=(function(n,s,o){const c=Ae(n);return c.sa(),new TI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:jI.bind(null,i),r_:kI.bind(null,i),ta:OI.bind(null,i),na:MI.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Ph(i)):(await i.fa.stop(),i.Ta.length>0&&(he(Ys,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,g=new Ag(e,n,d,o,c);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(i,e){if(ri("AsyncQueue",`${e}: ${i}`),vo(i))return new ue(W.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static emptySet(e){return new eo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=jl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new eo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.ga=new at(ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class fo{constructor(e,n,s,o,c,d,g,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new fo(e,n,eo.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UI{constructor(){this.queries=R_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ae(n),c=o.queries;o.queries=R_(),c.forEach(((d,g)=>{for(const y of g.Sa)y.onError(s)}))})(this,new ue(W.ABORTED,"Firestore shutting down"))}}function R_(){return new Zs((i=>pT(i)),Nh)}async function XT(i,e){const n=Ae(i);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new PI,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=Rg(d,`Initialization of query '${Ka(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Ig(n)}async function WT(i,e){const n=Ae(i),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function LI(i,e){const n=Ae(i);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Fa(o)&&(s=!0);d.wa=o}}s&&Ig(n)}function zI(i,e,n){const s=Ae(i),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function Ig(i){i.Ca.forEach((e=>{e.next()}))}var Lm,I_;(I_=Lm||(Lm={})).Ma="default",I_.Cache="cache";class ZT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new fo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.key=e}}class eE{constructor(e){this.key=e}}class BI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=yT(e),this.tu=new eo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new A_,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const S=o.get(T),U=Dh(this.query,A)?A:null,Y=!!S&&this.mutatedKeys.has(S.key),ie=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let X=!1;S&&U?S.data.isEqual(U.data)?Y!==ie&&(s.track({type:3,doc:U}),X=!0):this.su(S,U)||(s.track({type:2,doc:U}),X=!0,(y&&this.eu(U,y)>0||v&&this.eu(U,v)<0)&&(g=!0)):!S&&U?(s.track({type:0,doc:U}),X=!0):S&&!U&&(s.track({type:1,doc:S}),X=!0,(y||v)&&(g=!0)),X&&(U?(d=d.add(U),c=ie?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,A)=>(function(U,Y){const ie=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:X})}};return ie(U)-ie(Y)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,v=y!==this.Za;return this.Za=y,d.length!==0||v?{snapshot:new fo(this.query,e.tu,c,d,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new A_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new eE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new JT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cg="SyncEngine";class qI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class HI{constructor(e){this.key=e,this.hu=!1}}class FI{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Zs((g=>pT(g)),Nh),this.Iu=new Map,this.Eu=new Set,this.du=new at(ye.comparator),this.Au=new Map,this.Ru=new vg,this.Vu={},this.mu=new Map,this.fu=ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GI(i,e,n=!0){const s=aE(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await tE(s,e,n,!0),o}async function QI(i,e){const n=aE(i);await tE(n,e,!0,!1)}async function tE(i,e,n,s){const o=await dI(i.localStore,_r(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await YI(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&FT(i.remoteStore,o),g}async function YI(i,e,n,s,o){i.pu=(A,S,U)=>(async function(ie,X,F,re){let te=X.view.ru(F);te.Cs&&(te=await b_(ie.localStore,X.query,!1).then((({documents:j})=>X.view.ru(j,te))));const ce=re&&re.targetChanges.get(X.targetId),G=re&&re.targetMismatches.get(X.targetId)!=null,fe=X.view.applyChanges(te,ie.isPrimaryClient,ce,G);return N_(ie,X.targetId,fe.au),fe.snapshot})(i,A,S,U);const c=await b_(i.localStore,e,!0),d=new BI(e,c.Qs),g=d.ru(c.documents),y=lc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),v=d.applyChanges(g,i.isPrimaryClient,y);N_(i,n,v.au);const T=new qI(e,n,d);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),v.snapshot}async function KI(i,e,n){const s=Ae(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!Nh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Pm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Eg(s.remoteStore,o.targetId),zm(s,o.targetId)})).catch(yo)):(zm(s,o.targetId),await Pm(s.localStore,o.targetId,!0))}async function $I(i,e){const n=Ae(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Eg(n.remoteStore,s.targetId))}async function XI(i,e,n){const s=rC(i);try{const o=await(function(d,g){const y=Ae(d),v=nt.now(),T=g.reduce(((U,Y)=>U.add(Y.key)),ke());let A,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let Y=ii(),ie=ke();return y.Ns.getEntries(U,T).next((X=>{Y=X,Y.forEach(((F,re)=>{re.isValidDocument()||(ie=ie.add(F))}))})).next((()=>y.localDocuments.getOverlayedDocuments(U,Y))).next((X=>{A=X;const F=[];for(const re of g){const te=h2(re,A.get(re.key).overlayedDocument);te!=null&&F.push(new Ji(re.key,te,lT(te.value.mapValue),Un.exists(!0)))}return y.mutationQueue.addMutationBatch(U,v,F,g)})).next((X=>{S=X;const F=X.applyToLocalDocumentSet(A,ie);return y.documentOverlayCache.saveOverlays(U,X.batchId,F)}))})).then((()=>({batchId:S.batchId,changes:_T(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,g,y){let v=d.Vu[d.currentUser.toKey()];v||(v=new at(Me)),v=v.insert(g,y),d.Vu[d.currentUser.toKey()]=v})(s,o.batchId,n),await uc(s,o.changes),await Ph(s.remoteStore)}catch(o){const c=Rg(o,"Failed to persist write");n.reject(c)}}async function nE(i,e){const n=Ae(i);try{const s=await cI(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Fe(d.hu,14607):o.removedDocuments.size>0&&(Fe(d.hu,42227),d.hu=!1))})),await uc(n,s,e)}catch(s){await yo(s)}}function C_(i,e,n){const s=Ae(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const y=Ae(d);y.onlineState=g;let v=!1;y.queries.forEach(((T,A)=>{for(const S of A.Sa)S.va(g)&&(v=!0)})),v&&Ig(y)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WI(i,e,n){const s=Ae(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new at(ye.comparator);d=d.insert(c,Wt.newNoDocument(c,Se.min()));const g=ke().add(c),y=new Mh(Se.min(),new Map,new at(Me),d,g);await nE(s,y),s.du=s.du.remove(c),s.Au.delete(e),Ng(s)}else await Pm(s.localStore,e,!1).then((()=>zm(s,e,n))).catch(yo)}async function ZI(i,e){const n=Ae(i),s=e.batch.batchId;try{const o=await lI(n.localStore,e);iE(n,s,null),rE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await uc(n,o)}catch(o){await yo(o)}}async function JI(i,e,n){const s=Ae(i);try{const o=await(function(d,g){const y=Ae(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let T;return y.mutationQueue.lookupMutationBatch(v,g).next((A=>(Fe(A!==null,37113),T=A.keys(),y.mutationQueue.removeMutationBatch(v,A)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,T,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T))).next((()=>y.localDocuments.getDocuments(v,T)))}))})(s.localStore,e);iE(s,e,n),rE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await uc(s,o)}catch(o){await yo(o)}}function rE(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function iE(i,e,n){const s=Ae(i);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function zm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||sE(i,s)}))}function sE(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Eg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Ng(i))}function N_(i,e,n){for(const s of n)s instanceof JT?(i.Ru.addReference(s.key,e),eC(i,s)):s instanceof eE?(he(Cg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||sE(i,s.key)):Te(19791,{wu:s})}function eC(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(he(Cg,"New document in limbo: "+n),i.Eu.add(s),Ng(i))}function Ng(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ye(tt.fromString(e)),s=i.fu.next();i.Au.set(s,new HI(n)),i.du=i.du.insert(n,s),FT(i.remoteStore,new Li(_r(dg(n.path)),s,"TargetPurposeLimboResolution",Rh.ce))}}async function uc(i,e,n){const s=Ae(i),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,y)=>{d.push(s.pu(y,e,n).then((v=>{if((v||n)&&s.isPrimaryClient){const T=v?!v.fromCache:n?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(v){o.push(v);const T=bg.As(y.targetId,v);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(y,v){const T=Ae(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ee.forEach(v,(S=>ee.forEach(S.Es,(U=>T.persistence.referenceDelegate.addReference(A,S.targetId,U))).next((()=>ee.forEach(S.ds,(U=>T.persistence.referenceDelegate.removeReference(A,S.targetId,U)))))))))}catch(A){if(!vo(A))throw A;he(Tg,"Failed to update sequence numbers: "+A)}for(const A of v){const S=A.targetId;if(!A.fromCache){const U=T.Ms.get(S),Y=U.snapshotVersion,ie=U.withLastLimboFreeSnapshotVersion(Y);T.Ms=T.Ms.insert(S,ie)}}})(s.localStore,c))}async function tC(i,e){const n=Ae(i);if(!n.currentUser.isEqual(e)){he(Cg,"User change. New user:",e.toKey());const s=await zT(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((g=>{g.forEach((y=>{y.reject(new ue(W.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await uc(n,s.Ls)}}function nC(i,e){const n=Ae(i),s=n.Au.get(e);if(s&&s.hu)return ke().add(s.key);{let o=ke();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function aE(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=nE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WI.bind(null,e),e.Pu.H_=LI.bind(null,e.eventManager),e.Pu.yu=zI.bind(null,e.eventManager),e}function rC(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JI.bind(null,e),e}class ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return oI(this.persistence,new iI,e.initialUser,this.serializer)}Cu(e){return new LT(_g.mi,this.serializer)}Du(e){return new mI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ph.provider={build:()=>new ph};class iC extends ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof mh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new H2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new LT((s=>mh.mi(s,n)),this.serializer)}}class Bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>C_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tC.bind(null,this.syncEngine),await VI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UI})()}createDatastore(e){const n=kh(e.databaseInfo.databaseId),s=(function(c){return new _I(c)})(e.databaseInfo);return(function(c,d,g,y){return new wI(c,d,g,y)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,g){return new SI(s,o,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>C_(this.syncEngine,n,0)),(function(){return w_.v()?new w_:new gI})())}createSyncEngine(e,n){return(function(o,c,d,g,y,v,T){const A=new FI(o,c,d,g,y,v);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ae(n);he(Ys,"RemoteStore shutting down."),s.Ea.add(5),await cc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bm.provider={build:()=>new Bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="FirestoreClient";class sC{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{he(Xi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(he(Xi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Rg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function fm(i,e){i.asyncQueue.verifyOperationInProgress(),he(Xi,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await zT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function D_(i,e){i.asyncQueue.verifyOperationInProgress();const n=await aC(i);he(Xi,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>S_(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>S_(e.remoteStore,o))),i._onlineComponents=e}async function aC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){he(Xi,"Using user provided OfflineComponentProvider");try{await fm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await fm(i,new ph)}}else he(Xi,"Using default OfflineComponentProvider"),await fm(i,new iC(void 0));return i._offlineComponents}async function lE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(he(Xi,"Using user provided OnlineComponentProvider"),await D_(i,i._uninitializedComponentsProvider._online)):(he(Xi,"Using default OnlineComponentProvider"),await D_(i,new Bm))),i._onlineComponents}function oC(i){return lE(i).then((e=>e.syncEngine))}async function cE(i){const e=await lE(i),n=e.eventManager;return n.onListen=GI.bind(null,e.syncEngine),n.onUnlisten=KI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$I.bind(null,e.syncEngine),n}function lC(i,e,n={}){const s=new ei;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,y,v){const T=new oE({next:S=>{T.Nu(),d.enqueueAndForget((()=>WT(c,A)));const U=S.docs.has(g);!U&&S.fromCache?v.reject(new ue(W.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&S.fromCache&&y&&y.source==="server"?v.reject(new ue(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),A=new ZT(dg(g.path),T,{includeMetadataChanges:!0,qa:!0});return XT(c,A)})(await cE(i),i.asyncQueue,e,n,s))),s.promise}function cC(i,e,n={}){const s=new ei;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,y,v){const T=new oE({next:S=>{T.Nu(),d.enqueueAndForget((()=>WT(c,A))),S.fromCache&&y.source==="server"?v.reject(new ue(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),A=new ZT(g,T,{includeMetadataChanges:!0,qa:!0});return XT(c,A)})(await cE(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firestore.googleapis.com",O_=!0;class M_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hE,this.ssl=O_}else this.host=e.host,this.ssl=e.ssl??O_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B2)throw new ue(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new fR;switch(s.type){case"firstParty":return new yR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=j_.get(n);s&&(he("ComponentProvider","Removing Datastore"),j_.delete(n),s.terminate())})(this),Promise.resolve()}}function uC(i,e,n,s={}){i=Xn(i,Uh);const o=Xs(e),c=i._getSettings(),d={...c,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&(Qm(`https://${g}`),Ym("Firestore",!0)),c.host!==hE&&c.host!==g&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:g,ssl:o,emulatorOptions:s};if(!Fi(y,d)&&(i._setSettings(y),s.mockUserToken)){let v,T;if(typeof s.mockUserToken=="string")v=s.mockUserToken,T=Xt.MOCK_USER;else{v=Vx(s.mockUserToken,i._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ue(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xt(A)}i._authCredentials=new mR(new Xb(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class gt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ac(n,gt._jsonSchema))return new gt(e,s||null,new ye(tt.fromString(n.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:wt("string",gt._jsonSchemaVersion),referencePath:wt("string")};class Hi extends es{constructor(e,n,s){super(e,n,dg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ye(e))}withConverter(e){return new Hi(this.firestore,e,this._path)}}function Ui(i,e,...n){if(i=pt(i),Wb("collection","path",e),i instanceof Uh){const s=tt.fromString(e,...n);return Y0(s),new Hi(i,null,s)}{if(!(i instanceof gt||i instanceof Hi))throw new ue(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(tt.fromString(e,...n));return Y0(s),new Hi(i.firestore,null,s)}}function to(i,e,...n){if(i=pt(i),arguments.length===1&&(e=ag.newId()),Wb("doc","path",e),i instanceof Uh){const s=tt.fromString(e,...n);return Q0(s),new gt(i,null,new ye(s))}{if(!(i instanceof gt||i instanceof Hi))throw new ue(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(tt.fromString(e,...n));return Q0(s),new gt(i.firestore,i instanceof Hi?i.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="AsyncQueue";class V_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qT(this,"async_queue_retry"),this._c=()=>{const s=dm();s&&he(k_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=dm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ei;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vo(e))throw e;he(k_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ri("INTERNAL UNHANDLED ERROR: ",P_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Ag.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:P_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function P_(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ea extends Uh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new V_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V_(e),this._firestoreClient=void 0,await e}}}function hC(i,e){const n=typeof i=="object"?i:Eh(),s=typeof i=="string"?i:lh,o=Wi(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=tb("firestore");c&&uC(o,...c)}return o}function Dg(i){if(i._terminated)throw new ue(W.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||dC(i),i._firestoreClient}function dC(i){const e=i._freezeSettings(),n=(function(o,c,d,g){return new kR(o,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,uE(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new sC(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Gt.fromBase64String(e))}catch(n){throw new ue(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ac(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:wt("string",Pn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(ac(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:wt("string",Tr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ac(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Er(e.vectorValues);throw new ue(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:wt("string",Er._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=/^__.*__$/;class mC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new oc(e,this.data,n,this.fieldTransforms)}}class dE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:i})}}class jg{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fE(this.Ac)&&fC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||kh(e)}Cc(e,n,s,o=!1){return new jg({Ac:e,methodName:n,Dc:s,path:Ft.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bh(i){const e=i._freezeSettings(),n=kh(i._databaseId);return new gC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function mE(i,e,n,s,o,c={}){const d=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Mg("Data must be an object, but it was:",d,s);const g=gE(s,d);let y,v;if(c.merge)y=new Tn(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const A of c.mergeFields){const S=qm(e,A,n);if(!d.contains(S))throw new ue(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);yE(T,S)||T.push(S)}y=new Tn(T),v=d.fieldTransforms.filter((A=>y.covers(A.field)))}else y=null,v=d.fieldTransforms;return new mC(new ln(g),y,v)}class qh extends zh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qh}}class Og extends zh{_toFieldTransform(e){return new o2(e.path,new Jl)}isEqual(e){return e instanceof Og}}function pC(i,e,n,s){const o=i.Cc(1,e,n);Mg("Data must be an object, but it was:",o,s);const c=[],d=ln.empty();Zi(s,((y,v)=>{const T=kg(e,y,n);v=pt(v);const A=o.yc(T);if(v instanceof qh)c.push(T);else{const S=hc(v,A);S!=null&&(c.push(T),d.set(T,S))}}));const g=new Tn(c);return new dE(d,g,o.fieldTransforms)}function yC(i,e,n,s,o,c){const d=i.Cc(1,e,n),g=[qm(e,s,n)],y=[o];if(c.length%2!=0)throw new ue(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)g.push(qm(e,c[S])),y.push(c[S+1]);const v=[],T=ln.empty();for(let S=g.length-1;S>=0;--S)if(!yE(v,g[S])){const U=g[S];let Y=y[S];Y=pt(Y);const ie=d.yc(U);if(Y instanceof qh)v.push(U);else{const X=hc(Y,ie);X!=null&&(v.push(U),T.set(U,X))}}const A=new Tn(v);return new dE(T,A,d.fieldTransforms)}function vC(i,e,n,s=!1){return hc(n,i.Cc(s?4:3,e))}function hc(i,e){if(pE(i=pt(i)))return Mg("Unsupported field value:",e,i),gE(i,e);if(i instanceof zh)return(function(s,o){if(!fE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const g of s){let y=hc(g,o.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=pt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return i2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=nt.fromDate(s);return{timestampValue:fh(o.serializer,c)}}if(s instanceof nt){const c=new nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fh(o.serializer,c)}}if(s instanceof Tr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:DT(o.serializer,s._byteString)};if(s instanceof gt){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:yg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Er)return(function(d,g){return{mapValue:{fields:{[aT]:{stringValue:oT},[ch]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw g.Sc("VectorValues must only contain numeric values.");return fg(g.serializer,v)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Ah(s)}`)})(i,e)}function gE(i,e){const n={};return eT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(i,((s,o)=>{const c=hc(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function pE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof nt||i instanceof Tr||i instanceof Pn||i instanceof gt||i instanceof zh||i instanceof Er)}function Mg(i,e,n){if(!pE(n)||!Zb(n)){const s=Ah(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function qm(i,e,n){if((e=pt(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return kg(i,e);throw yh("Field path arguments must be of type string or ",i,!1,void 0,n)}const _C=new RegExp("[~\\*/\\[\\]]");function kg(i,e,n){if(e.search(_C)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Lh(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function yh(i,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${s}`),d&&(y+=` in document ${o}`),y+=")"),new ue(W.INVALID_ARGUMENT,g+i+y)}function yE(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bC extends vE{data(){return super.data()}}function Hh(i,e){return typeof e=="string"?kg(i,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ue(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vg{}class Pg extends Vg{}function no(i,e,...n){let s=[];e instanceof Vg&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((y=>y instanceof Ug)).length,g=c.filter((y=>y instanceof Fh)).length;if(d>1||d>0&&g>0)throw new ue(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Fh extends Pg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Fh(e,n,s)}_apply(e){const n=this._parse(e);return _E(e._query,n),new es(e.firestore,e.converter,jm(e._query,n))}_parse(e){const n=Bh(e.firestore);return(function(c,d,g,y,v,T,A){let S;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ue(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){L_(A,T);const Y=[];for(const ie of A)Y.push(U_(y,c,ie));S={arrayValue:{values:Y}}}else S=U_(y,c,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||L_(A,T),S=vC(g,d,A,T==="in"||T==="not-in");return Et.create(v,T,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ql(i,e,n){const s=e,o=Hh("where",i);return Fh._create(o,s,n)}class Ug extends Vg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ug(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const g=c.getFlattenedFilters();for(const y of g)_E(d,y),d=jm(d,y)})(e._query,n),new es(e.firestore,e.converter,jm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lg extends Pg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ue(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zl(c,d)})(e._query,this._field,this._direction);return new es(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new _o(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Hl(i,e="asc"){const n=e,s=Hh("orderBy",i);return Lg._create(s,n)}class zg extends Pg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new zg(e,n,s)}_apply(e){return new es(e.firestore,e.converter,hh(e._query,this._limit,this._limitType))}}function Fl(i){return xR("limit",i),zg._create("limit",i,"F")}function U_(i,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new ue(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gT(e)&&n.indexOf("/")!==-1)throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(tt.fromString(n));if(!ye.isDocumentKey(s))throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return t_(i,new ye(s))}if(n instanceof gt)return t_(i,n._key);throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(n)}.`)}function L_(i,e){if(!Array.isArray(i)||i.length===0)throw new ue(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _E(i,e){const n=(function(o,c){for(const d of o)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EC{convertValue(e,n="none"){switch(Ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zi(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[ch].arrayValue?.values?.map((s=>mt(s.doubleValue)));return new Er(n)}convertGeoPoint(e){return new Tr(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ch(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const n=Qi(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=tt.fromString(e);Fe(PT(s),9688,{name:e});const o=new Xl(s.get(1),s.get(3)),c=new ye(s.popFirst(5));return o.isEqual(n)||ri(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hs extends vE{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Hh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:wt("string",Hs._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class Zu extends Hs{data(e={}){return super.data(e)}}class ro{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ml(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Zu(this._firestore,this._userDataWriter,s.key,s,new Ml(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const y=new Zu(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ml(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const y=new Zu(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ml(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,T=-1;return g.type!==0&&(v=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),T=d.indexOf(g.doc.key)),{type:wC(g.type),doc:y,oldIndex:v,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(i){i=Xn(i,gt);const e=Xn(i.firestore,ea);return lC(Dg(e),i._key).then((n=>RC(e,i,n)))}ro._jsonSchemaVersion="firestore/querySnapshot/1.0",ro._jsonSchema={type:wt("string",ro._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class TE extends EC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function io(i){i=Xn(i,es);const e=Xn(i.firestore,ea),n=Dg(e),s=new TE(e);return TC(i._query),cC(n,i._query).then((o=>new ro(e,s,i,o)))}function SC(i,e,n){i=Xn(i,gt);const s=Xn(i.firestore,ea),o=bE(i.converter,e);return Gh(s,[mE(Bh(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Un.none())])}function EE(i,e,n,...s){i=Xn(i,gt);const o=Xn(i.firestore,ea),c=Bh(o);let d;return d=typeof(e=pt(e))=="string"||e instanceof Lh?yC(c,"updateDoc",i._key,e,n,s):pC(c,"updateDoc",i._key,e),Gh(o,[d.toMutation(i._key,Un.exists(!0))])}function AC(i){return Gh(Xn(i.firestore,ea),[new mg(i._key,Un.none())])}function z_(i,e){const n=Xn(i.firestore,ea),s=to(i),o=bE(i.converter,e);return Gh(n,[mE(Bh(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Un.exists(!1))]).then((()=>s))}function Gh(i,e){return(function(s,o){const c=new ei;return s.asyncQueue.enqueueAndForget((async()=>XI(await oC(s),o,c))),c.promise})(Dg(i),e)}function RC(i,e,n){const s=n.docs.get(e._key),o=new TE(i);return new Hs(i,o,e._key,s,new Ml(n.hasPendingWrites,n.fromCache),e.converter)}function so(){return new Og("serverTimestamp")}(function(e,n=!0){(function(o){po=o})(mo),$n(new Ln("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new ea(new gR(s.getProvider("auth-internal")),new vR(d,s.getProvider("app-check-internal")),(function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ue(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(v.options.projectId,T)})(d,o),d);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),cn(q0,H0,e),cn(q0,H0,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||s.get().then(c=>this.messaging=c,()=>{}),this.appCheck||o?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="us-central1";class CC{constructor(e,n,s,o,c=Hm,d=(...g)=>fetch(...g)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new IC(e,n,s,o),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(c);this.customDomain=g.origin+(g.pathname==="/"?"":g.pathname),this.region=Hm}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function NC(i,e,n){const s=Xs(e);i.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(Qm(i.emulatorOrigin+"/backends"),Ym("Functions",!0))}const B_="@firebase/functions",q_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="auth-internal",jC="app-check-internal",OC="messaging-internal";function MC(i){const e=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),c=n.getProvider(DC),d=n.getProvider(OC),g=n.getProvider(jC);return new CC(o,c,d,g,s)};$n(new Ln(wE,e,"PUBLIC").setMultipleInstances(!0)),cn(B_,q_,i),cn(B_,q_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(i=Eh(),e=Hm){const s=Wi(pt(i),wE).getImmediate({identifier:e}),o=tb("functions");return o&&VC(s,...o),s}function VC(i,e,n){NC(pt(i),e,n)}MC();const xE="@firebase/installations",Bg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=1e4,AE=`w:${Bg}`,RE="FIS_v2",PC="https://firebaseinstallations.googleapis.com/v1",UC=3600*1e3,LC="installations",zC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ks=new Ws(LC,zC,BC);function IE(i){return i instanceof Zn&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE({projectId:i}){return`${PC}/projects/${i}/installations`}function NE(i){return{token:i.token,requestStatus:2,expiresIn:HC(i.expiresIn),creationTime:Date.now()}}async function DE(i,e){const s=(await e.json()).error;return Ks.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function jE({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function qC(i,{refreshToken:e}){const n=jE(i);return n.append("Authorization",FC(e)),n}async function OE(i){const e=await i();return e.status>=500&&e.status<600?i():e}function HC(i){return Number(i.replace("s","000"))}function FC(i){return`${RE} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=CE(i),o=jE(i),c=e.getImmediate({optional:!0});if(c){const v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const d={fid:n,authVersion:RE,appId:i.appId,sdkVersion:AE},g={method:"POST",headers:o,body:JSON.stringify(d)},y=await OE(()=>fetch(s,g));if(y.ok){const v=await y.json();return{fid:v.fid||n,registrationStatus:2,refreshToken:v.refreshToken,authToken:NE(v.authToken)}}else throw await DE("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^[cdef][\w-]{21}$/,Fm="";function KC(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=$C(i);return YC.test(n)?n:Fm}catch{return Fm}}function $C(i){return QC(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=new Map;function VE(i,e){const n=Qh(i);PE(n,e),XC(n,e)}function PE(i,e){const n=kE.get(i);if(n)for(const s of n)s(e)}function XC(i,e){const n=WC();n&&n.postMessage({key:i,fid:e}),ZC()}let Bs=null;function WC(){return!Bs&&"BroadcastChannel"in self&&(Bs=new BroadcastChannel("[Firebase] FID Change"),Bs.onmessage=i=>{PE(i.data.key,i.data.fid)}),Bs}function ZC(){kE.size===0&&Bs&&(Bs.close(),Bs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="firebase-installations-database",eN=1,$s="firebase-installations-store";let mm=null;function qg(){return mm||(mm=cb(JC,eN,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore($s)}}})),mm}async function vh(i,e){const n=Qh(i),o=(await qg()).transaction($s,"readwrite"),c=o.objectStore($s),d=await c.get(n);return await c.put(e,n),await o.done,(!d||d.fid!==e.fid)&&VE(i,e.fid),e}async function UE(i){const e=Qh(i),s=(await qg()).transaction($s,"readwrite");await s.objectStore($s).delete(e),await s.done}async function Yh(i,e){const n=Qh(i),o=(await qg()).transaction($s,"readwrite"),c=o.objectStore($s),d=await c.get(n),g=e(d);return g===void 0?await c.delete(n):await c.put(g,n),await o.done,g&&(!d||d.fid!==g.fid)&&VE(i,g.fid),g}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hg(i){let e;const n=await Yh(i.appConfig,s=>{const o=tN(s),c=nN(i,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Fm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function tN(i){const e=i||{fid:KC(),registrationStatus:0};return LE(e)}function nN(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ks.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=rN(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:iN(i)}:{installationEntry:e}}async function rN(i,e){try{const n=await GC(i,e);return vh(i.appConfig,n)}catch(n){throw IE(n)&&n.customData.serverCode===409?await UE(i.appConfig):await vh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function iN(i){let e=await H_(i.appConfig);for(;e.registrationStatus===1;)await ME(100),e=await H_(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Hg(i);return s||n}return e}function H_(i){return Yh(i,e=>{if(!e)throw Ks.create("installation-not-found");return LE(e)})}function LE(i){return sN(i)?{fid:i.fid,registrationStatus:0}:i}function sN(i){return i.registrationStatus===1&&i.registrationTime+SE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN({appConfig:i,heartbeatServiceProvider:e},n){const s=oN(i,n),o=qC(i,n),c=e.getImmediate({optional:!0});if(c){const v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const d={installation:{sdkVersion:AE,appId:i.appId}},g={method:"POST",headers:o,body:JSON.stringify(d)},y=await OE(()=>fetch(s,g));if(y.ok){const v=await y.json();return NE(v)}else throw await DE("Generate Auth Token",y)}function oN(i,{fid:e}){return`${CE(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fg(i,e=!1){let n;const s=await Yh(i.appConfig,c=>{if(!zE(c))throw Ks.create("not-registered");const d=c.authToken;if(!e&&uN(d))return c;if(d.requestStatus===1)return n=lN(i,e),c;{if(!navigator.onLine)throw Ks.create("app-offline");const g=dN(c);return n=cN(i,g),g}});return n?await n:s.authToken}async function lN(i,e){let n=await F_(i.appConfig);for(;n.authToken.requestStatus===1;)await ME(100),n=await F_(i.appConfig);const s=n.authToken;return s.requestStatus===0?Fg(i,e):s}function F_(i){return Yh(i,e=>{if(!zE(e))throw Ks.create("not-registered");const n=e.authToken;return fN(n)?{...e,authToken:{requestStatus:0}}:e})}async function cN(i,e){try{const n=await aN(i,e),s={...e,authToken:n};return await vh(i.appConfig,s),n}catch(n){if(IE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await UE(i.appConfig);else{const s={...e,authToken:{requestStatus:0}};await vh(i.appConfig,s)}throw n}}function zE(i){return i!==void 0&&i.registrationStatus===2}function uN(i){return i.requestStatus===2&&!hN(i)}function hN(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+UC}function dN(i){const e={requestStatus:1,requestTime:Date.now()};return{...i,authToken:e}}function fN(i){return i.requestStatus===1&&i.requestTime+SE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(i){const e=i,{installationEntry:n,registrationPromise:s}=await Hg(e);return s?s.catch(console.error):Fg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(i,e=!1){const n=i;return await pN(n),(await Fg(n,e)).token}async function pN(i){const{registrationPromise:e}=await Hg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(i){if(!i||!i.options)throw gm("App Configuration");if(!i.name)throw gm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw gm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function gm(i){return Ks.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="installations",vN="installations-internal",_N=i=>{const e=i.getProvider("app").getImmediate(),n=yN(e),s=Wi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},bN=i=>{const e=i.getProvider("app").getImmediate(),n=Wi(e,BE).getImmediate();return{getId:()=>mN(n),getToken:o=>gN(n,o)}};function TN(){$n(new Ln(BE,_N,"PUBLIC")),$n(new Ln(vN,bN,"PRIVATE"))}TN();cn(xE,Bg);cn(xE,Bg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="analytics",EN="firebase_id",wN="origin",xN=60*1e3,SN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un=new Th("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new Ws("analytics","Analytics",AN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(i){if(!i.startsWith(Gg)){const e=En.create("invalid-gtag-resource",{gtagURL:i});return un.warn(e.message),""}return i}function qE(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function IN(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function CN(i,e){const n=IN("firebase-js-sdk-policy",{createScriptURL:RN}),s=document.createElement("script"),o=`${Gg}?l=${i}&id=${e}`;s.src=n?n?.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function NN(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function DN(i,e,n,s,o,c){const d=s[o];try{if(d)await e[d];else{const y=(await qE(n)).find(v=>v.measurementId===o);y&&await e[y.appId]}}catch(g){un.error(g)}i("config",o,c)}async function jN(i,e,n,s,o){try{let c=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const g=await qE(n);for(const y of d){const v=g.find(A=>A.measurementId===y),T=v&&e[v.appId];if(T)c.push(T);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",s,o||{})}catch(c){un.error(c)}}function ON(i,e,n,s){async function o(c,...d){try{if(c==="event"){const[g,y]=d;await jN(i,e,n,g,y)}else if(c==="config"){const[g,y]=d;await DN(i,e,n,s,g,y)}else if(c==="consent"){const[g,y]=d;i("consent",g,y)}else if(c==="get"){const[g,y,v]=d;i("get",g,y,v)}else if(c==="set"){const[g]=d;i("set",g)}else i(c,...d)}catch(g){un.error(g)}}return o}function MN(i,e,n,s,o){let c=function(...d){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=ON(c,i,e,n),{gtagCore:c,wrappedGtag:window[o]}}function kN(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Gg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=30,PN=1e3;class UN{constructor(e={},n=PN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const HE=new UN;function LN(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function zN(i){const{appId:e,apiKey:n}=i,s={method:"GET",headers:LN(n)},o=SN.replace("{app-id}",e),c=await fetch(o,s);if(c.status!==200&&c.status!==304){let d="";try{const g=await c.json();g.error?.message&&(d=g.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function BN(i,e=HE,n){const{appId:s,apiKey:o,measurementId:c}=i.options;if(!s)throw En.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:s};throw En.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new FN;return setTimeout(async()=>{g.abort()},xN),FE({appId:s,apiKey:o,measurementId:c},d,g,e)}async function FE(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=HE){const{appId:c,measurementId:d}=i;try{await qN(s,e)}catch(g){if(d)return un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:c,measurementId:d};throw g}try{const g=await zN(i);return o.deleteThrottleMetadata(c),g}catch(g){const y=g;if(!HN(y)){if(o.deleteThrottleMetadata(c),d)return un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:c,measurementId:d};throw g}const v=Number(y?.customData?.httpStatus)===503?g0(n,o.intervalMillis,VN):g0(n,o.intervalMillis),T={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return o.setThrottleMetadata(c,T),un.debug(`Calling attemptFetch again in ${v} millis`),FE(i,T,s,o)}}function qN(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(c),s(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function HN(i){if(!(i instanceof Zn)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class FN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function GN(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const c=await e,d={...s,send_to:c};i("event",n,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(){if(sb())try{await ab()}catch(i){return un.warn(En.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return un.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function YN(i,e,n,s,o,c,d){const g=BN(i);g.then(S=>{n[S.measurementId]=S.appId,i.options.measurementId&&S.measurementId!==i.options.measurementId&&un.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>un.error(S)),e.push(g);const y=QN().then(S=>{if(S)return s.getId()}),[v,T]=await Promise.all([g,y]);kN(c)||CN(c,v.measurementId),o("js",new Date);const A=d?.config??{};return A[wN]="firebase",A.update=!0,T!=null&&(A[EN]=T),o("config",v.measurementId,A),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.app=e}_delete(){return delete Gl[this.app.options.appId],Promise.resolve()}}let Gl={},G_=[];const Q_={};let pm="dataLayer",$N="gtag",Y_,GE,K_=!1;function XN(){const i=[];if(ib()&&i.push("This is a browser extension environment."),Gx()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});un.warn(n.message)}}function WN(i,e,n){XN();const s=i.options.appId;if(!s)throw En.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Gl[s]!=null)throw En.create("already-exists",{id:s});if(!K_){NN(pm);const{wrappedGtag:c,gtagCore:d}=MN(Gl,G_,Q_,pm,$N);GE=c,Y_=d,K_=!0}return Gl[s]=YN(i,G_,Q_,e,Y_,pm,n),new KN(i)}function ZN(i=Eh()){i=pt(i);const e=Wi(i,_h);return e.isInitialized()?e.getImmediate():JN(i)}function JN(i,e={}){const n=Wi(i,_h);if(n.isInitialized()){const o=n.getImmediate();if(Fi(e,n.getOptions()))return o;throw En.create("already-initialized")}return n.initialize({options:e})}function eD(i,e,n,s){i=pt(i),GN(GE,Gl[i.app.options.appId],e,n,s).catch(o=>un.error(o))}const $_="@firebase/analytics",X_="0.10.18";function tD(){$n(new Ln(_h,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return WN(s,o,n)},"PUBLIC")),$n(new Ln("analytics-internal",i,"PRIVATE")),cn($_,X_),cn($_,X_,"esm2020");function i(e){try{const n=e.getProvider(_h).getImmediate();return{logEvent:(s,o,c)=>eD(n,s,o,c)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}tD();const nD={apiKey:"AIzaSyDQnrbvsx52ikiWELf6hc4YiXQTC1G5tpY",authDomain:"three-sided-flashcard-app.firebaseapp.com",projectId:"three-sided-flashcard-app",storageBucket:"three-sided-flashcard-app.firebasestorage.app",messagingSenderId:"47503676879",appId:"1:47503676879:web:27fb875159cc4459a12eba",measurementId:"G-PBP1G21Q29"},Kh=ub(nD),yr=cR(Kh),bn=hC(Kh);kC(Kh);ZN(Kh);const QE=de.createContext({}),dc=()=>de.useContext(QE),rD=({children:i})=>{const[e,n]=de.useState(null),[s,o]=de.useState(!0);de.useEffect(()=>WS(yr,v=>{n(v),o(!1)}),[]);const g={user:e,signInWithGoogle:async()=>{try{const y=new Wr;return(await vA(yr,y)).user}catch(y){throw console.error("Error signing in with Google:",y),y}},logout:async()=>{try{await ZS(yr)}catch(y){throw console.error("Error signing out:",y),y}},loading:s};return m.jsx(QE.Provider,{value:g,children:!s&&i})};class Fs{static async getUserProfile(e){try{const n=to(bn,"users",e),s=await xC(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){throw console.error("Error fetching user profile:",n),n}}static async createUserProfile(e,n){try{const s=to(bn,"users",e);return await SC(s,{...n,createdAt:so(),updatedAt:so(),isPremium:!1,flashcardCount:0,upvotes:0,streak:0}),e}catch(s){throw console.error("Error creating user profile:",s),s}}static async updateUserProfile(e,n){try{const s=to(bn,"users",e);await EE(s,{...n,updatedAt:so()})}catch(s){throw console.error("Error updating user profile:",s),s}}static async getUserStats(e){try{const n=await this.getUserProfile(e);if(!n)return null;const s=no(Ui(bn,"flashcards"),ql("authorId","==",e)),c=(await io(s)).size,d=[];return c>0&&d.push("first_card"),c>=10&&d.push("ten_cards"),c>=100&&d.push("hundred_cards"),n.upvotes>50&&d.push("popular_creator"),{...n,flashcardCount:c,achievements:d,studySessions:Math.floor(Math.random()*20)+1,followers:Math.floor(Math.random()*100),rating:(Math.random()*2+3).toFixed(1)}}catch(n){throw console.error("Error fetching user stats:",n),n}}static async checkOnboardingStatus(e){try{const n=await this.getUserProfile(e);if(!n)return{hasProfile:!1,hasCards:!1};const s=no(Ui(bn,"flashcards"),ql("authorId","==",e),Fl(1));return{hasProfile:!0,hasCards:!(await io(s)).empty,profile:n}}catch(n){throw console.error("Error checking onboarding status:",n),n}}static async getTopUsers(e=20,n="allTime"){try{const s=no(Ui(bn,"users"),Hl("flashcardCount","desc"),Hl("upvotes","desc"),Fl(e));return(await io(s)).docs.map(c=>({uid:c.id,...c.data()}))}catch(s){return console.error("Error fetching top users:",s),[]}}static async getStudyHistory(e){try{return[{date:"2024-01-15",duration:45,cardsStudied:12,accuracy:85},{date:"2024-01-14",duration:30,cardsStudied:8,accuracy:92},{date:"2024-01-13",duration:60,cardsStudied:20,accuracy:78},{date:"2024-01-12",duration:25,cardsStudied:6,accuracy:95},{date:"2024-01-11",duration:40,cardsStudied:15,accuracy:88}]}catch(n){return console.error("Error fetching study history:",n),[]}}}class Yn{static async getUserFlashcards(e,n=50){try{const s=no(Ui(bn,"cards"),ql("userId","==",e),Hl("createdAt","desc"),Fl(n));return(await io(s)).docs.map(c=>({id:c.id,...c.data()}))}catch(s){throw console.error("Error fetching user flashcards:",s),s}}static async getPublicFlashcards(e=50){try{const n=no(Ui(bn,"publicCards"),Hl("createdAt","desc"),Fl(e));return(await io(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){throw console.error("Error fetching public flashcards:",n),n}}static async createFlashcard(e,n){try{const s=await z_(Ui(bn,"cards"),{statement:e.question||e.statement,hints:e.hints||e.answer,proof:e.proof||e.answer,tags:e.tags||[],userId:n,createdAt:so(),isPublic:!1});if(e.isPublic){const o=(e.question||e.statement).toLowerCase().replace(/[^a-z0-9]+/g,"-").slice(0,50)+"-"+Date.now();await z_(Ui(bn,"publicCards"),{statement:e.question||e.statement,hints:e.hints||e.answer,proof:e.proof||e.answer,tags:e.tags||[],userId:n,authorSlug:n,slug:o,createdAt:so(),likeCount:0,viewCount:0,importCount:0})}return s.id}catch(s){throw console.error("Error creating flashcard:",s),s}}static async updateFlashcard(e,n){try{const s=to(bn,"cards",e);await EE(s,{...n,updatedAt:so()})}catch(s){throw console.error("Error updating flashcard:",s),s}}static async deleteFlashcard(e){try{const n=to(bn,"cards",e);await AC(n)}catch(n){throw console.error("Error deleting flashcard:",n),n}}static async searchFlashcards(e,n={},s=20){try{const o=[ql("isPublic","==",!0)];n.subject&&o.push(ql("subject","==",n.subject));let c="createdAt",d="desc";n.sortBy==="oldest"?(c="createdAt",d="asc"):n.sortBy==="popular"&&(c="upvotes",d="desc");const g=no(Ui(bn,"flashcards"),...o,Hl(c,d),Fl(s*3));let v=(await io(g)).docs.map(T=>({id:T.id,...T.data()}));if(e&&e.trim()){const T=e.toLowerCase();v=v.filter(A=>A.question?.toLowerCase().includes(T)||A.answer?.toLowerCase().includes(T)||Array.isArray(A.hints)&&A.hints.some(S=>S.toLowerCase().includes(T))||Array.isArray(A.tags)&&A.tags.some(S=>S.toLowerCase().includes(T)))}return v.slice(0,s)}catch(o){return console.error("Error searching flashcards:",o),await this.getPublicFlashcards(s)}}static async getSubjects(){try{const e=await this.getPublicFlashcards(1e3),n=new Set;return e.forEach(s=>{s.subject&&n.add(s.subject)}),Array.from(n).sort()}catch(e){return console.error("Error fetching subjects:",e),["Mathematics","Physics","Chemistry","Biology","Computer Science"]}}static async getPopularTags(e=20){try{const n=await this.getPublicFlashcards(1e3),s={};return n.forEach(o=>{o.tags&&o.tags.forEach(c=>{s[c]=(s[c]||0)+1})}),Object.entries(s).sort(([,o],[,c])=>c-o).slice(0,e).map(([o])=>o)}catch(n){return console.error("Error fetching popular tags:",n),["calculus","algebra","geometry","trigonometry","statistics"]}}static async getUserFavorites(e){try{return(await this.getPublicFlashcards(20)).slice(0,10)}catch(n){return console.error("Error fetching user favorites:",n),[]}}static async removeFromFavorites(e,n){try{return!0}catch(s){throw console.error("Error removing from favorites:",s),s}}}class kl{static async generateHint(e,n){try{const s=await yr.currentUser?.getIdToken(),o=await fetch("https://us-central1-three-sided-flashcard-app.cloudfunctions.net/deepseekAutofill",{method:"POST",headers:{"Content-Type":"application/json",Authorization:s?`Bearer ${s}`:""},body:JSON.stringify({statement:`Question: ${e}
Answer: ${n}

Generate a helpful hint that guides the student toward the answer without giving it away completely.`})});if(!o.ok){const d=await o.json();throw new Error(d.error||"API request failed")}return(await o.json()).hints||"Try breaking down the problem into smaller steps."}catch(s){return console.error("Error generating hint:",s),"Try breaking down the problem into smaller steps."}}static async generateProof(e,n){try{const s=await yr.currentUser?.getIdToken(),o=await fetch("https://us-central1-three-sided-flashcard-app.cloudfunctions.net/deepseekAutofill",{method:"POST",headers:{"Content-Type":"application/json",Authorization:s?`Bearer ${s}`:""},body:JSON.stringify({statement:`Question: ${e}
Answer: ${n}

Provide a clear, step-by-step proof or solution.`})});if(!o.ok){const d=await o.json();throw new Error(d.error||"API request failed")}return(await o.json()).proof||`1. Start with the given information
2. Apply relevant mathematical principles
3. Work through the steps systematically
4. Verify your answer`}catch(s){return console.error("Error generating proof:",s),`1. Start with the given information
2. Apply relevant mathematical principles
3. Work through the steps systematically
4. Verify your answer`}}static async generateSuggestions(e,n){try{const s=await yr.currentUser?.getIdToken(),o=await fetch("https://us-central1-three-sided-flashcard-app.cloudfunctions.net/autoTagOnly",{method:"POST",headers:{"Content-Type":"application/json",Authorization:s?`Bearer ${s}`:""},body:JSON.stringify({statement:`Question: ${e}
Answer: ${n}`})});if(!o.ok){const g=await o.json();throw new Error(g.error||"API request failed")}return`Consider focusing on these topics: ${((await o.json()).tags||[]).join(", ")}. Also think about adding more context, breaking down complex steps, or including visual aids if applicable.`}catch(s){return console.error("Error generating suggestions:",s),"Consider adding more context, breaking down complex steps, or including visual aids if applicable."}}static async generateRelatedQuestions(e,n){try{const s=await yr.currentUser?.getIdToken(),o=await fetch("https://us-central1-three-sided-flashcard-app.cloudfunctions.net/deepseekAutofill",{method:"POST",headers:{"Content-Type":"application/json",Authorization:s?`Bearer ${s}`:""},body:JSON.stringify({statement:`Based on this flashcard - Question: ${e}
Answer: ${n}

Generate 2-3 related questions that would help reinforce these concepts.`})});if(!o.ok){const d=await o.json();throw new Error(d.error||"API request failed")}return(await o.json()).hints||`1. What if we change the parameters?
2. How would you solve a similar problem?
3. What are the key concepts here?`}catch(s){return console.error("Error generating related questions:",s),`1. What if we change the parameters?
2. How would you solve a similar problem?
3. What are the key concepts here?`}}static async convertToLaTeX(e){try{const n=await yr.currentUser?.getIdToken(),s=await fetch("https://us-central1-three-sided-flashcard-app.cloudfunctions.net/convertToLatex",{method:"POST",headers:{"Content-Type":"application/json",Authorization:n?`Bearer ${n}`:""},body:JSON.stringify({input:e})});if(!s.ok){const c=await s.json();throw new Error(c.error||"API request failed")}return(await s.json()).latex||e}catch(n){console.error("Error converting to LaTeX:",n);const s={"direct sum":"\\oplus",integral:"\\int",infinity:"\\infty",squared:"^2",cubed:"^3","square root":"\\sqrt{}",derivative:"\\frac{d}{dx}",limit:"\\lim_{x \\to }",sum:"\\sum_{n=1}^{\\infty}",product:"\\prod_{i=1}^{n}",matrix:"\\begin{pmatrix} \\end{pmatrix}",fraction:"\\frac{}{}","absolute value":"| |","greater than":">","less than":"<","greater than or equal":"\\geq","less than or equal":"\\leq"};let o=e;return Object.entries(s).forEach(([c,d])=>{o=o.replace(new RegExp(c,"gi"),d)}),o||"\\text{LaTeX conversion failed}"}}}const iD=({question:i,answer:e,subject:n,onEnhancementComplete:s})=>{const[o,c]=de.useState("hints"),[d,g]=de.useState(!1),[y,v]=de.useState({hints:"",proof:"",suggestions:"",relatedQuestions:""}),T=async S=>{if(!(!i||!e)){g(!0);try{let U="";switch(S){case"hints":U=await kl.generateHint(i,e);break;case"proof":U=await kl.generateProof(i,e);break;case"suggestions":U=await kl.generateSuggestions(i,e);break;case"relatedQuestions":U=await kl.generateRelatedQuestions(i,e);break;default:break}v(Y=>({...Y,[S]:U})),s&&s(S,U)}catch(U){console.error(`Error generating ${S}:`,U),v(Y=>({...Y,[S]:`Error generating ${S}. Please try again.`}))}finally{g(!1)}}},A=[{id:"hints",label:"Hints",icon:"💡"},{id:"proof",label:"Proof",icon:"📝"},{id:"suggestions",label:"Suggestions",icon:"💡"},{id:"relatedQuestions",label:"Related Questions",icon:"❓"}];return m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"text-xl font-bold text-neutral-800 mb-4",children:"🤖 AI Enhancement"}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:A.map(S=>m.jsxs("button",{onClick:()=>c(S.id),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${o===S.id?"bg-primary-100 text-primary-800 border-2 border-primary-300":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 border-2 border-transparent"}`,children:[S.icon," ",S.label]},S.id))}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("button",{onClick:()=>T(o),disabled:d||!i||!e,className:"btn btn-primary w-full",children:d?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Generating ",o,"..."]}):`Generate ${o.charAt(0).toUpperCase()+o.slice(1)}`}),y[o]&&m.jsxs("div",{className:"bg-neutral-50 p-4 rounded-lg border border-neutral-200",children:[m.jsx("h4",{className:"font-semibold text-neutral-800 mb-2",children:A.find(S=>S.id===o)?.label}),m.jsx("div",{className:"text-neutral-700 whitespace-pre-wrap",children:y[o]})]}),m.jsxs("div",{className:"text-sm text-neutral-600 bg-blue-50 p-3 rounded-lg",children:[m.jsx("strong",{children:"💡 Tip:"})," Use AI enhancement to improve your flashcards with better hints, proofs, and suggestions."]})]})]})},sD=({onCardCreated:i,onClose:e})=>{const{user:n}=dc(),[s,o]=de.useState({question:"",answer:"",hints:[""],tags:"",difficulty:"medium",subject:"",isPublic:!0}),[c,d]=de.useState(!1),[g,y]=de.useState(""),[v,T]=de.useState(!1),A=(F,re)=>{o(te=>({...te,[F]:re}))},S=(F,re)=>{const te=[...s.hints];te[F]=re,o(ce=>({...ce,hints:te}))},U=()=>{o(F=>({...F,hints:[...F.hints,""]}))},Y=F=>{if(s.hints.length>1){const re=s.hints.filter((te,ce)=>ce!==F);o(te=>({...te,hints:re}))}},ie=(F,re)=>{switch(F){case"hint":re&&!s.hints.includes(re)&&o(te=>({...te,hints:[...te.hints.filter(ce=>ce.trim()),re]}));break}},X=async F=>{if(F.preventDefault(),!n){y("Please sign in to create flashcards");return}if(!s.question.trim()||!s.answer.trim()){y("Question and answer are required");return}d(!0),y("");try{const re={question:s.question.trim(),answer:s.answer.trim(),hints:s.hints.filter(ce=>ce.trim()),tags:s.tags.split(",").map(ce=>ce.trim()).filter(ce=>ce),difficulty:s.difficulty,subject:s.subject.trim(),isPublic:s.isPublic},te=await Yn.createFlashcard(re,n.uid);o({question:"",answer:"",hints:[""],tags:"",difficulty:"medium",subject:"",isPublic:!0}),i&&i(te)}catch(re){y("Failed to create flashcard. Please try again."),console.error("Error creating flashcard:",re)}finally{d(!1)}};return n?m.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",maxWidth:"800px",margin:"0 auto"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[m.jsx("h2",{style:{color:"#333",margin:0},children:"✏️ Create New Flashcard"}),e&&m.jsx("button",{onClick:e,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"×"})]}),m.jsxs("form",{onSubmit:X,children:[g&&m.jsx("div",{style:{background:"#f8d7da",color:"#721c24",padding:"1rem",borderRadius:"6px",marginBottom:"1rem"},children:g}),m.jsxs("div",{style:{marginBottom:"1.5rem"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Question *"}),m.jsx("textarea",{value:s.question,onChange:F=>A("question",F.target.value),placeholder:"Enter your question here...",style:{width:"100%",minHeight:"100px",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",fontFamily:"inherit"},required:!0})]}),m.jsxs("div",{style:{marginBottom:"1.5rem"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Answer *"}),m.jsx("textarea",{value:s.answer,onChange:F=>A("answer",F.target.value),placeholder:"Enter the answer here...",style:{width:"100%",minHeight:"100px",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",fontFamily:"inherit"},required:!0})]}),s.question.trim()&&s.answer.trim()&&m.jsx("div",{style:{marginBottom:"1.5rem"},children:m.jsx("button",{type:"button",onClick:()=>T(!v),style:{background:"#6f42c1",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:v?"🤖 Hide AI Enhancer":"🤖 Show AI Enhancer"})}),v&&s.question.trim()&&s.answer.trim()&&m.jsx("div",{style:{marginBottom:"2rem"},children:m.jsx(iD,{question:s.question,answer:s.answer,subject:s.subject,onEnhancementComplete:ie})}),m.jsxs("div",{style:{marginBottom:"1.5rem"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Hints"}),s.hints.map((F,re)=>m.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[m.jsx("input",{type:"text",value:F,onChange:te=>S(re,te.target.value),placeholder:`Hint ${re+1}...`,style:{flex:1,padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}}),s.hints.length>1&&m.jsx("button",{type:"button",onClick:()=>Y(re),style:{background:"#dc3545",color:"white",border:"none",padding:"0.75rem",borderRadius:"6px",cursor:"pointer",minWidth:"40px"},children:"×"})]},re)),m.jsx("button",{type:"button",onClick:U,style:{background:"#28a745",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Add Hint"})]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[m.jsxs("div",{children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Subject"}),m.jsx("input",{type:"text",value:s.subject,onChange:F=>A("subject",F.target.value),placeholder:"e.g., Mathematics, Physics...",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]}),m.jsxs("div",{children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Difficulty"}),m.jsxs("select",{value:s.difficulty,onChange:F=>A("difficulty",F.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"},children:[m.jsx("option",{value:"easy",children:"Easy"}),m.jsx("option",{value:"medium",children:"Medium"}),m.jsx("option",{value:"hard",children:"Hard"})]})]})]}),m.jsxs("div",{style:{marginBottom:"1.5rem"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Tags"}),m.jsx("input",{type:"text",value:s.tags,onChange:F=>A("tags",F.target.value),placeholder:"Enter tags separated by commas (e.g., calculus, limits, analysis)",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]}),m.jsx("div",{style:{marginBottom:"2rem"},children:m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[m.jsx("input",{type:"checkbox",checked:s.isPublic,onChange:F=>A("isPublic",F.target.checked),style:{transform:"scale(1.2)"}}),m.jsx("span",{style:{color:"#333"},children:"Make this flashcard public"})]})}),m.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e&&m.jsx("button",{type:"button",onClick:e,style:{background:"#6c757d",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Cancel"}),m.jsx("button",{type:"submit",disabled:c,style:{background:c?"#6c757d":"#007bff",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"6px",cursor:c?"not-allowed":"pointer",fontSize:"1rem"},children:c?"Creating...":"Create Flashcard"})]})]})]}):m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"🔐 Sign in to Create Flashcards"}),m.jsx("p",{style:{color:"#666"},children:"You need to be signed in to create and share flashcards with the community."})]})},aD=()=>{const{user:i}=dc(),[e,n]=de.useState([]),[s,o]=de.useState(0),[c,d]=de.useState(!1),[g,y]=de.useState(!0),[v,T]=de.useState(""),A=de.useRef(null);de.useEffect(()=>{i&&S()},[i]);const S=async()=>{try{y(!0);let ce=[];try{ce=await Yn.getUserFlashcards(i.uid,50)}catch{}ce.length||(ce=await Yn.getPublicFlashcards(50)),n(ce)}catch(ce){T("Failed to load flashcards"),console.error("Error loading flashcards:",ce)}finally{y(!1)}},U=()=>{s<e.length-1&&(o(s+1),d(!1))},Y=()=>{s>0&&(o(s-1),d(!1))},ie=()=>{o(0),d(!1)},X=()=>{d(!c)};de.useEffect(()=>{const ce=G=>{G.key==="ArrowRight"&&U(),G.key==="ArrowLeft"&&Y(),G.key===" "&&(G.preventDefault(),X())};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[s,e.length,c]);const F=ce=>{A.current=ce.changedTouches[0].clientX},re=ce=>{if(A.current===null)return;const G=ce.changedTouches[0].clientX-A.current;G>40?Y():G<-40&&U(),A.current=null};if(!i)return m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"🔐 Sign in to Study"}),m.jsx("p",{style:{color:"#666"},children:"You need to be signed in to access the study mode."})]});if(g)return m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"📚 Loading Flashcards..."}),m.jsx("p",{style:{color:"#666"},children:"Please wait while we load the community flashcards."})]});if(v)return m.jsxs("div",{style:{background:"#f8d7da",color:"#721c24",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[m.jsx("h3",{style:{marginBottom:"1rem"},children:"❌ Error Loading Flashcards"}),m.jsx("p",{children:v}),m.jsx("button",{onClick:S,style:{background:"#007bff",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"6px",cursor:"pointer",marginTop:"1rem"},children:"Try Again"})]});if(e.length===0)return m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"📚 No Flashcards Available"}),m.jsx("p",{style:{color:"#666"},children:"There are no public flashcards available yet. Be the first to create one!"})]});const te=e[s];return m.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",maxWidth:"800px",margin:"0 auto"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[m.jsx("h2",{style:{color:"#333",margin:0},children:"📚 Study Mode"}),m.jsxs("div",{style:{background:"#f8f9fa",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",color:"#666"},children:[s+1," of ",e.length]})]}),m.jsx("div",{onClick:X,onTouchStart:F,onTouchEnd:re,style:{background:"white",border:"2px solid #e9ecef",borderRadius:"12px",padding:"3rem 2rem",margin:"2rem 0",minHeight:"300px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"transform 0.35s ease, box-shadow 0.35s ease",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",transform:c?"rotateY(180deg)":"rotateY(0deg)"},children:c?m.jsxs("div",{style:{textAlign:"center"},children:[m.jsx("h3",{style:{fontSize:"1.5rem",color:"#333",marginBottom:"1rem"},children:"Answer"}),m.jsx("p",{style:{fontSize:"1.2rem",color:"#666",lineHeight:"1.6"},children:te.answer}),te.hints&&te.hints.length>0&&m.jsxs("div",{style:{marginTop:"2rem"},children:[m.jsx("h4",{style:{fontSize:"1.1rem",color:"#333",marginBottom:"1rem"},children:"💡 Hints"}),te.hints.map((ce,G)=>m.jsx("p",{style:{fontSize:"1rem",color:"#666",marginBottom:"0.5rem",fontStyle:"italic"},children:ce},G))]}),te.tags&&te.tags.length>0&&m.jsx("div",{style:{marginTop:"1rem"},children:m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",justifyContent:"center"},children:te.tags.map((ce,G)=>m.jsx("span",{style:{background:"#e9ecef",color:"#666",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem"},children:ce},G))})}),m.jsx("p",{style:{fontSize:"0.9rem",color:"#999",marginTop:"2rem"},children:"Click to see question again"})]}):m.jsxs("div",{style:{textAlign:"center"},children:[m.jsx("h3",{style:{fontSize:"1.5rem",color:"#333",marginBottom:"1rem"},children:"Question"}),m.jsx("p",{style:{fontSize:"1.2rem",color:"#666",lineHeight:"1.6"},children:te.question}),m.jsx("p",{style:{fontSize:"0.9rem",color:"#999",marginTop:"2rem"},children:"Click to reveal answer"})]})}),m.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",fontSize:"0.9rem",color:"#666"},children:m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("span",{children:["Subject: ",te.subject||"Not specified"]}),m.jsxs("span",{children:["By: ",te.authorId||"Unknown"]})]})}),m.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[m.jsx("button",{onClick:Y,disabled:s===0,style:{background:s===0?"#e9ecef":"#007bff",color:s===0?"#999":"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:s===0?"not-allowed":"pointer",fontSize:"1rem"},children:"← Previous"}),m.jsx("button",{onClick:X,style:{background:"#28a745",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:c?"Show Question":"Show Answer"}),m.jsx("button",{onClick:U,disabled:s===e.length-1,style:{background:s===e.length-1?"#e9ecef":"#007bff",color:s===e.length-1?"#999":"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:s===e.length-1?"not-allowed":"pointer",fontSize:"1rem"},children:"Next →"}),m.jsx("button",{onClick:ie,style:{background:"#6c757d",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"🔄 Restart"})]})]})},oD=()=>{const[i,e]=de.useState(""),[n,s]=de.useState([]),[o,c]=de.useState(!1),[d,g]=de.useState({subject:"",sortBy:"newest"}),[y,v]=de.useState([]);de.useEffect(()=>{(async()=>{const S=await Yn.getSubjects();v(S||[])})()},[]);const T=async()=>{if(i.trim()){c(!0);try{const S=await Yn.searchFlashcards(i,d);s(S)}catch(S){console.error("Search error",S),s([])}finally{c(!1)}}},A=()=>{e(""),g({subject:"",difficulty:"",sortBy:"newest"}),s([])};return m.jsxs("div",{className:"container section",children:[m.jsxs("div",{className:"card p-6 mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🔍 Search Flashcards"}),m.jsx("p",{className:"subtle mb-4",children:"Find flashcards by topic, question text, or tags."}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[m.jsx("input",{type:"text",value:i,onChange:S=>e(S.target.value),className:"input flex-1",placeholder:"e.g. linear algebra, chain rule, eigenvalues",onKeyDown:S=>S.key==="Enter"&&T()}),m.jsx("button",{onClick:T,disabled:o||!i.trim(),className:"btn btn-primary whitespace-nowrap",children:o?"Searching…":"Search"}),m.jsx("button",{onClick:A,className:"btn btn-secondary whitespace-nowrap",children:"Clear"})]}),m.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.5rem"},children:[m.jsxs("select",{value:d.subject,onChange:S=>g({...d,subject:S.target.value}),className:"select",children:[m.jsx("option",{value:"",children:"All subjects"}),y.map(S=>m.jsx("option",{value:S,children:S},S))]}),m.jsxs("select",{value:d.sortBy,onChange:S=>g({...d,sortBy:S.target.value}),className:"select",children:[m.jsx("option",{value:"newest",children:"Newest"}),m.jsx("option",{value:"oldest",children:"Oldest"}),m.jsx("option",{value:"popular",children:"Most popular"})]})]})]}),m.jsxs("div",{className:"card p-6",children:[m.jsx("div",{className:"flex items-center justify-between mb-4",children:m.jsxs("h3",{className:"text-xl font-bold",children:["Results ",n.length?`(${n.length})`:""]})}),o?m.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"1rem"},children:Array.from({length:6}).map((S,U)=>m.jsxs("div",{className:"card",style:{padding:"1rem",background:"rgba(255,255,255,0.04)"},children:[m.jsx("div",{style:{height:"16px",background:"rgba(255,255,255,0.08)",borderRadius:"6px",marginBottom:"8px"}}),m.jsx("div",{style:{height:"12px",background:"rgba(255,255,255,0.06)",borderRadius:"6px",marginBottom:"8px"}}),m.jsx("div",{style:{height:"12px",width:"60%",background:"rgba(255,255,255,0.06)",borderRadius:"6px"}})]},U))}):n.length===0?m.jsx("div",{className:"subtle",style:{textAlign:"center",padding:"2rem"},children:"Type a query and press Search to see results."}):m.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"1rem"},children:n.map(S=>m.jsxs("div",{className:"card p-4 hover-lift",children:[m.jsx("h4",{className:"font-semibold mb-2",style:{color:"#e5e7eb"},children:S.question?.length>110?S.question.slice(0,110)+"…":S.question}),m.jsx("p",{className:"subtle mb-3",style:{fontSize:"0.95rem"},children:S.answer?.length>140?S.answer.slice(0,140)+"…":S.answer}),m.jsx("div",{className:"subtle",style:{display:"flex",justifyContent:"flex-end",fontSize:"0.85rem"},children:m.jsx("span",{children:S.subject||"—"})})]},S.id))})]})]})},lD=()=>{const{user:i}=dc(),[e,n]=de.useState([]),[s,o]=de.useState(null),[c,d]=de.useState(!0),[g,y]=de.useState("leaderboard"),[v,T]=de.useState("allTime");de.useEffect(()=>{A(),i&&S()},[i,v]);const A=async()=>{try{d(!0);const F=await Fs.getTopUsers(20,v);n(F)}catch(F){console.error("Error loading leaderboard:",F),n([])}finally{d(!1)}},S=async()=>{if(i)try{const F=await Fs.getUserStats(i.uid);o(F)}catch(F){console.error("Error loading user stats:",F)}},U=F=>{switch(F){case"week":return"This Week";case"month":return"This Month";case"year":return"This Year";default:return"All Time"}},Y=F=>{switch(F){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return`#${F}`}},ie=F=>{switch(F){case"first_card":return"🎯";case"ten_cards":return"📚";case"hundred_cards":return"🏆";case"popular_creator":return"⭐";case"study_master":return"🧠";case"community_contributor":return"👥";default:return"🏅"}},X=F=>{switch(F){case"first_card":return"First Steps";case"ten_cards":return"Dedicated Learner";case"hundred_cards":return"Knowledge Master";case"popular_creator":return"Popular Creator";case"study_master":return"Study Master";case"community_contributor":return"Community Hero";default:return"Achievement Unlocked"}};return i?m.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",maxWidth:"1200px",margin:"0 auto"},children:[m.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[m.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"🏆 Leaderboard & Statistics"}),m.jsx("p",{style:{color:"#666"},children:"See how you rank among the Three-Sided community and track your progress"})]}),m.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"2rem",flexWrap:"wrap"},children:["allTime","year","month","week"].map(F=>m.jsx("button",{onClick:()=>T(F),style:{background:v===F?"#007bff":"#e9ecef",color:v===F?"white":"#333",border:"none",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s"},children:U(F)},F))}),m.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #e9ecef",marginBottom:"2rem"},children:[m.jsx("button",{onClick:()=>y("leaderboard"),style:{background:"none",border:"none",padding:"1rem 2rem",cursor:"pointer",borderBottom:g==="leaderboard"?"2px solid #007bff":"none",color:g==="leaderboard"?"#007bff":"#666",fontWeight:g==="leaderboard"?"600":"400"},children:"🏆 Leaderboard"}),m.jsx("button",{onClick:()=>y("stats"),style:{background:"none",border:"none",padding:"1rem 2rem",cursor:"pointer",borderBottom:g==="stats"?"2px solid #007bff":"none",color:g==="stats"?"#007bff":"#666",fontWeight:g==="stats"?"600":"400"},children:"📊 My Statistics"})]}),m.jsxs("div",{style:{minHeight:"400px"},children:[g==="leaderboard"&&m.jsxs("div",{children:[m.jsxs("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:["🏆 Top Contributors - ",U(v)]}),c?m.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"⏳"}),m.jsx("p",{children:"Loading leaderboard..."})]}):e.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"📊"}),m.jsx("p",{children:"No data available for this timeframe."})]}):m.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.map((F,re)=>m.jsxs("div",{style:{background:re<3?"#fff3cd":"#f8f9fa",border:re<3?"2px solid #ffc107":"1px solid #e9ecef",padding:"1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"1rem"},children:[m.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"50px",textAlign:"center"},children:Y(re+1)}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1},children:[m.jsx("img",{src:F.photoURL||"https://via.placeholder.com/40x40",alt:F.displayName||"User",style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}),m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:"600",color:"#333",fontSize:"1.1rem"},children:F.displayName||"Anonymous User"}),m.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:F.email})]})]}),m.jsxs("div",{style:{textAlign:"right",minWidth:"120px"},children:[m.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#007bff"},children:F.flashcardCount||0}),m.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:"flashcards"})]}),m.jsxs("div",{style:{textAlign:"right",minWidth:"100px"},children:[m.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#28a745"},children:F.studySessions||0}),m.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:"sessions"})]})]},F.uid))})]}),g==="stats"&&m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"📊 Your Statistics"}),s?m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📚"}),m.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff",marginBottom:"0.5rem"},children:s.flashcardCount||0}),m.jsx("div",{style:{color:"#666"},children:"Flashcards Created"})]}),m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"🧠"}),m.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#28a745",marginBottom:"0.5rem"},children:s.studySessions||0}),m.jsx("div",{style:{color:"#666"},children:"Study Sessions"})]}),m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"👥"}),m.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107",marginBottom:"0.5rem"},children:s.followers||0}),m.jsx("div",{style:{color:"#666"},children:"Followers"})]}),m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"⭐"}),m.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#6f42c1",marginBottom:"0.5rem"},children:s.rating||"N/A"}),m.jsx("div",{style:{color:"#666"},children:"Average Rating"})]})]}):m.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"📊"}),m.jsx("p",{children:"Loading your statistics..."})]}),s&&s.achievements&&s.achievements.length>0&&m.jsxs("div",{style:{marginTop:"2rem"},children:[m.jsx("h4",{style:{color:"#333",marginBottom:"1rem"},children:"🏅 Your Achievements"}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:s.achievements.map((F,re)=>m.jsxs("div",{style:{background:"#fff3cd",border:"1px solid #ffc107",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:ie(F)}),m.jsx("div",{style:{fontWeight:"600",color:"#333",marginBottom:"0.5rem"},children:X(F)}),m.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:"Achievement unlocked!"})]},re))})]}),s&&m.jsxs("div",{style:{marginTop:"2rem"},children:[m.jsx("h4",{style:{color:"#333",marginBottom:"1rem"},children:"📈 Progress Towards Next Goals"}),m.jsxs("div",{style:{marginBottom:"1rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[m.jsx("span",{style:{color:"#333"},children:"Next Milestone: 10 Flashcards"}),m.jsxs("span",{style:{color:"#666"},children:[s.flashcardCount||0,"/10"]})]}),m.jsx("div",{style:{background:"#e9ecef",height:"8px",borderRadius:"4px",overflow:"hidden"},children:m.jsx("div",{style:{background:"#007bff",height:"100%",width:`${Math.min((s.flashcardCount||0)/10*100,100)}%`,transition:"width 0.3s ease"}})})]}),m.jsxs("div",{style:{marginBottom:"1rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[m.jsx("span",{style:{color:"#333"},children:"Study Goal: 5 Sessions"}),m.jsxs("span",{style:{color:"#666"},children:[s.studySessions||0,"/5"]})]}),m.jsx("div",{style:{background:"#e9ecef",height:"8px",borderRadius:"4px",overflow:"hidden"},children:m.jsx("div",{style:{background:"#28a745",height:"100%",width:`${Math.min((s.studySessions||0)/5*100,100)}%`,transition:"width 0.3s ease"}})})]})]})]})]})]}):m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"🔐 Sign in to View Leaderboard"}),m.jsx("p",{style:{color:"#666"},children:"You need to be signed in to see the leaderboard and your statistics."})]})},cD=()=>{const{user:i}=dc(),[e,n]=de.useState(null),[s,o]=de.useState([]),[c,d]=de.useState([]),[g,y]=de.useState([]),[v,T]=de.useState(!0),[A,S]=de.useState("overview"),[U,Y]=de.useState(!1),[ie,X]=de.useState({displayName:"",bio:"",subjects:"",studyGoals:""});de.useEffect(()=>{i&&F()},[i]);const F=async()=>{try{T(!0);const[G,fe,j,R]=await Promise.all([Fs.getUserProfile(i.uid),Yn.getUserFlashcards(i.uid),Yn.getUserFavorites(i.uid),Fs.getStudyHistory(i.uid)]);n(G),o(fe),d(j),y(R),G&&X({displayName:G.displayName||"",bio:G.bio||"",subjects:G.subjects?G.subjects.join(", "):"",studyGoals:G.studyGoals||""})}catch(G){console.error("Error loading user data:",G)}finally{T(!1)}},re=async()=>{try{const G={...e,displayName:ie.displayName,bio:ie.bio,subjects:ie.subjects.split(",").map(fe=>fe.trim()).filter(fe=>fe),studyGoals:ie.studyGoals};await Fs.updateUserProfile(i.uid,G),n(G),Y(!1)}catch(G){console.error("Error updating profile:",G)}},te=async G=>{if(window.confirm("Are you sure you want to delete this flashcard?"))try{await Yn.deleteFlashcard(G),o(fe=>fe.filter(j=>j.id!==G))}catch(fe){console.error("Error deleting flashcard:",fe)}},ce=async G=>{try{await Yn.removeFromFavorites(i.uid,G),d(fe=>fe.filter(j=>j.id!==G))}catch(fe){console.error("Error removing favorite:",fe)}};return i?v?m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"⏳ Loading Dashboard..."}),m.jsx("p",{style:{color:"#666"},children:"Please wait while we load your data."})]}):m.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",maxWidth:"1200px",margin:"0 auto"},children:[m.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[m.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"🎯 Your Dashboard"}),m.jsx("p",{style:{color:"#666"},children:"Manage your flashcards, track your progress, and customize your profile"})]}),m.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[m.jsx("img",{src:i.photoURL||"https://via.placeholder.com/80x80",alt:i.displayName||"User",style:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:"3px solid rgba(255,255,255,0.3)"}}),m.jsxs("div",{style:{flex:1},children:[m.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.5rem"},children:e?.displayName||i.displayName||"Anonymous User"}),m.jsx("p",{style:{margin:"0 0 1rem 0",opacity:.9},children:e?.bio||"No bio yet. Click edit to add one!"}),m.jsx("button",{onClick:()=>Y(!U),style:{background:"rgba(255,255,255,0.2)",color:"white",border:"2px solid rgba(255,255,255,0.3)",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"},children:U?"Cancel Edit":"✏️ Edit Profile"})]})]}),U&&m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",marginBottom:"2rem"},children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"Edit Profile"}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[m.jsxs("div",{children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Display Name"}),m.jsx("input",{type:"text",value:ie.displayName,onChange:G=>X(fe=>({...fe,displayName:G.target.value})),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]}),m.jsxs("div",{children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Subjects (comma-separated)"}),m.jsx("input",{type:"text",value:ie.subjects,onChange:G=>X(fe=>({...fe,subjects:G.target.value})),placeholder:"e.g., Mathematics, Physics, Chemistry",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]})]}),m.jsxs("div",{style:{marginBottom:"1.5rem"},children:[m.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Bio"}),m.jsx("textarea",{value:ie.bio,onChange:G=>X(fe=>({...fe,bio:G.target.value})),placeholder:"Tell us about yourself and your study goals...",style:{width:"100%",minHeight:"100px",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",fontFamily:"inherit"}})]}),m.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[m.jsx("button",{onClick:()=>Y(!1),style:{background:"#6c757d",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Cancel"}),m.jsx("button",{onClick:re,style:{background:"#007bff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Save Changes"})]})]}),m.jsx("div",{style:{display:"flex",borderBottom:"1px solid #e9ecef",marginBottom:"2rem",flexWrap:"wrap"},children:["overview","my-cards","favorites","study-history"].map(G=>m.jsxs("button",{onClick:()=>S(G),style:{background:"none",border:"none",padding:"1rem 1.5rem",cursor:"pointer",borderBottom:A===G?"2px solid #007bff":"none",color:A===G?"#007bff":"#666",fontWeight:A===G?"600":"400",fontSize:"0.9rem"},children:[G==="overview"&&"📊 Overview",G==="my-cards"&&"📚 My Cards",G==="favorites"&&"⭐ Favorites",G==="study-history"&&"📈 Study History"]},G))}),m.jsxs("div",{style:{minHeight:"400px"},children:[A==="overview"&&m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"📊 Dashboard Overview"}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📚"}),m.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff",marginBottom:"0.5rem"},children:s.length}),m.jsx("div",{style:{color:"#666"},children:"My Flashcards"})]}),m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"⭐"}),m.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107",marginBottom:"0.5rem"},children:c.length}),m.jsx("div",{style:{color:"#666"},children:"Favorites"})]}),m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📈"}),m.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#28a745",marginBottom:"0.5rem"},children:g.length}),m.jsx("div",{style:{color:"#666"},children:"Study Sessions"})]}),m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"🎯"}),m.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#6f42c1",marginBottom:"0.5rem"},children:e?.subjects?.length||0}),m.jsx("div",{style:{color:"#666"},children:"Subjects"})]})]}),m.jsxs("div",{children:[m.jsx("h4",{style:{color:"#333",marginBottom:"1rem"},children:"🆕 Recent Activity"}),g.length>0?m.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[m.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:["Last studied: ",g[0]?.date||"Never"]}),m.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:["Total study time: ",g.reduce((G,fe)=>G+(fe.duration||0),0)," minutes"]})]}):m.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center",color:"#666"},children:"No study sessions yet. Start studying to see your progress!"})]})]}),A==="my-cards"&&m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"📚 My Flashcards"}),s.length===0?m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",textAlign:"center",color:"#666"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"📚"}),m.jsx("p",{children:"You haven't created any flashcards yet."}),m.jsx("p",{children:"Start creating to build your knowledge collection!"})]}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:s.map((G,fe)=>m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef",position:"relative"},children:[m.jsx("h4",{style:{color:"#333",marginBottom:"0.5rem",fontSize:"1.1rem"},children:G.question.length>100?G.question.substring(0,100)+"...":G.question}),m.jsx("p",{style:{color:"#666",marginBottom:"1rem",fontSize:"0.9rem"},children:G.answer.length>150?G.answer.substring(0,150)+"...":G.answer}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.8rem",color:"#666"},children:[m.jsxs("span",{children:["Subject: ",G.subject||"Not specified"]}),m.jsxs("span",{children:["Difficulty: ",G.difficulty||"Not specified"]})]}),G.tags&&G.tags.length>0&&m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",marginTop:"0.5rem"},children:G.tags.slice(0,3).map((j,R)=>m.jsxs("span",{style:{background:"#e9ecef",color:"#495057",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem"},children:["#",j]},R))}),m.jsx("button",{onClick:()=>te(G.id),style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#dc3545",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"🗑️"})]},G.id))})]}),A==="favorites"&&m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"⭐ My Favorites"}),c.length===0?m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",textAlign:"center",color:"#666"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"⭐"}),m.jsx("p",{children:"You haven't favorited any flashcards yet."}),m.jsx("p",{children:"Browse the community collection and save your favorites!"})]}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:c.map((G,fe)=>m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef",position:"relative"},children:[m.jsx("h4",{style:{color:"#333",marginBottom:"0.5rem",fontSize:"1.1rem"},children:G.question.length>100?G.question.substring(0,100)+"...":G.question}),m.jsx("p",{style:{color:"#666",marginBottom:"1rem",fontSize:"0.9rem"},children:G.answer.length>150?G.answer.substring(0,150)+"...":G.answer}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.8rem",color:"#666"},children:[m.jsxs("span",{children:["Subject: ",G.subject||"Not specified"]}),m.jsxs("span",{children:["Difficulty: ",G.difficulty||"Not specified"]})]}),m.jsx("button",{onClick:()=>ce(G.id),style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#ffc107",color:"#333",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"❌"})]},G.id))})]}),A==="study-history"&&m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"📈 Study History"}),g.length===0?m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",textAlign:"center",color:"#666"},children:[m.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"📈"}),m.jsx("p",{children:"No study sessions recorded yet."}),m.jsx("p",{children:"Start studying to track your progress!"})]}):m.jsx("div",{style:{display:"grid",gap:"1rem"},children:g.map((G,fe)=>m.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[m.jsxs("div",{style:{fontWeight:"600",color:"#333"},children:["Study Session #",g.length-fe]}),m.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:G.date||"Unknown date"})]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",fontSize:"0.9rem",color:"#666"},children:[m.jsxs("div",{children:["Duration: ",G.duration||0," minutes"]}),m.jsxs("div",{children:["Cards Studied: ",G.cardsStudied||0]}),m.jsxs("div",{children:["Accuracy: ",G.accuracy||"N/A","%"]})]})]},fe))})]})]})]}):m.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[m.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"🔐 Sign in to Access Dashboard"}),m.jsx("p",{style:{color:"#666"},children:"You need to be signed in to view your personal dashboard."})]})},uD=({selectedTags:i=[],onTagsChange:e,onClose:n,isVisible:s=!1})=>{const[o,c]=de.useState([]),[d,g]=de.useState(""),[y,v]=de.useState(!0),[T,A]=de.useState("");de.useEffect(()=>{s&&S()},[s]);const S=async()=>{try{v(!0);const F=await Yn.getPopularTags(100);c(F)}catch(F){console.error("Error loading tags:",F),c(["calculus","algebra","geometry","trigonometry","statistics","physics","chemistry","biology","computer-science","mathematics","linear-algebra","differential-equations","real-analysis","abstract-algebra","topology","number-theory","combinatorics","probability","optimization"])}finally{v(!1)}},U=F=>{const re=i.includes(F)?i.filter(te=>te!==F):[...i,F];e(re)},Y=()=>{if(d.trim()&&!o.includes(d.trim().toLowerCase())){const F=d.trim().toLowerCase();c(re=>[...re,F]),i.includes(F)||e([...i,F]),g("")}},ie=F=>{const re=i.filter(te=>te!==F);e(re)},X=o.filter(F=>F.toLowerCase().includes(T.toLowerCase()));return s?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[m.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 px-6 py-4 text-white",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"🏷️ Tag Management"}),m.jsx("button",{onClick:n,className:"text-white/80 hover:text-white text-2xl transition-colors",children:"✕"})]}),m.jsx("p",{className:"text-white/90 mt-1",children:"Organize your flashcards with tags"})]}),m.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:[i.length>0&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-3",children:"Selected Tags"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(F=>m.jsxs("span",{className:"inline-flex items-center gap-2 bg-primary-100 text-primary-800 px-3 py-2 rounded-full text-sm font-medium",children:["#",F,m.jsx("button",{onClick:()=>ie(F),className:"text-primary-600 hover:text-primary-800 transition-colors",children:"✕"})]},F))})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-3",children:"Add Custom Tag"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:d,onChange:F=>g(F.target.value),placeholder:"Enter new tag...",className:"input flex-1",onKeyPress:F=>F.key==="Enter"&&Y()}),m.jsx("button",{onClick:Y,className:"btn btn-primary whitespace-nowrap",disabled:!d.trim(),children:"Add Tag"})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-3",children:"Browse Tags"}),m.jsx("input",{type:"text",value:T,onChange:F=>A(F.target.value),placeholder:"Search tags...",className:"input"})]}),m.jsxs("div",{children:[m.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-3",children:["Available Tags (",X.length,")"]}),y?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),m.jsx("p",{className:"text-neutral-600",children:"Loading tags..."})]}):X.length===0?m.jsxs("div",{className:"text-center py-8 text-neutral-600",children:['No tags found matching "',T,'"']}):m.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-4",children:X.map(F=>m.jsxs("button",{onClick:()=>U(F),className:`p-3 rounded-lg text-sm font-medium transition-all duration-200 text-left ${i.includes(F)?"bg-primary-100 text-primary-800 border-2 border-primary-300":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 border-2 border-transparent"}`,children:["#",F]},F))})]})]}),m.jsx("div",{className:"bg-neutral-50 px-6 py-4 border-t border-neutral-200",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("span",{className:"text-sm text-neutral-600",children:[i.length," tag",i.length!==1?"s":""," selected"]}),m.jsx("button",{onClick:n,className:"btn btn-primary",children:"Done"})]})})]})}):null},hD=({onClose:i,isVisible:e=!1})=>{const[n,s]=de.useState([]),[o,c]=de.useState(0),[d,g]=de.useState(!1),[y,v]=de.useState(!0),[T,A]=de.useState({total:0,due:0,new:0,learning:0,reviewing:0});de.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{v(!0);const ce=(await Yn.getPublicFlashcards(50)).map((G,fe)=>({...G,id:G.id||`card-${fe}`,interval:Math.floor(Math.random()*7)+1,easeFactor:2.5+Math.random()*.5,reviewCount:Math.floor(Math.random()*10),nextReview:new Date(Date.now()+Math.random()*7*24*60*60*1e3),difficulty:Math.floor(Math.random()*5)+1,lastReviewed:new Date(Date.now()-Math.random()*7*24*60*60*1e3)})).sort((G,fe)=>G.nextReview-fe.nextReview);s(ce),U(ce)}catch(re){console.error("Error loading cards:",re),s([])}finally{v(!1)}},U=re=>{const te=new Date,ce={total:re.length,due:re.filter(G=>G.nextReview<=te).length,new:re.filter(G=>G.reviewCount===0).length,learning:re.filter(G=>G.reviewCount>0&&G.reviewCount<5).length,reviewing:re.filter(G=>G.reviewCount>=5).length};A(ce)},Y=re=>{if(o>=n.length)return;const te=n[o],ce=[...n];re>=3?(te.interval=Math.floor(te.interval*te.easeFactor),te.easeFactor=Math.max(1.3,te.easeFactor+.1)):re===2?te.interval=Math.max(1,Math.floor(te.interval*1.1)):(te.interval=1,te.easeFactor=Math.max(1.3,te.easeFactor-.2)),te.reviewCount++,te.lastReviewed=new Date,te.nextReview=new Date(Date.now()+te.interval*24*60*60*1e3),ce.sort((G,fe)=>G.nextReview-fe.nextReview),s(ce),U(ce),o<ce.length-1?(c(o+1),g(!1)):(c(0),g(!1))},ie=()=>{c(0),g(!1)},X=()=>n[o]||null,F=()=>[{value:1,label:"Again",color:"bg-danger-500 hover:bg-danger-600"},{value:2,label:"Hard",color:"bg-warning-500 hover:bg-warning-600"},{value:3,label:"Good",color:"bg-success-500 hover:bg-success-600"},{value:4,label:"Easy",color:"bg-primary-500 hover:bg-primary-600"},{value:5,label:"Perfect",color:"bg-accent-500 hover:bg-accent-600"}];return e?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[m.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 px-6 py-4 text-white",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"🎯 Spaced Repetition"}),m.jsx("button",{onClick:i,className:"text-white/80 hover:text-white text-2xl transition-colors",children:"✕"})]}),m.jsx("p",{className:"text-white/90 mt-1",children:"Intelligent study scheduling for optimal learning"})]}),m.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:y?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),m.jsx("p",{className:"text-neutral-600 text-lg",children:"Loading your study session..."})]}):n.length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-6xl mb-4",children:"📚"}),m.jsx("h3",{className:"text-2xl font-bold text-neutral-800 mb-2",children:"No cards available"}),m.jsx("p",{className:"text-neutral-600",children:"Create some flashcards to start studying!"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[m.jsxs("div",{className:"card p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-primary-600",children:T.total}),m.jsx("div",{className:"text-sm text-neutral-600",children:"Total"})]}),m.jsxs("div",{className:"card p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-danger-600",children:T.due}),m.jsx("div",{className:"text-sm text-neutral-600",children:"Due"})]}),m.jsxs("div",{className:"card p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-accent-600",children:T.new}),m.jsx("div",{className:"text-sm text-neutral-600",children:"New"})]}),m.jsxs("div",{className:"card p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-warning-600",children:T.learning}),m.jsx("div",{className:"text-sm text-neutral-600",children:"Learning"})]}),m.jsxs("div",{className:"card p-4 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-success-600",children:T.reviewing}),m.jsx("div",{className:"text-sm text-neutral-600",children:"Reviewing"})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsxs("span",{className:"text-sm font-medium text-neutral-700",children:["Card ",o+1," of ",n.length]}),m.jsxs("span",{className:"text-sm text-neutral-500",children:[Math.round((o+1)/n.length*100),"% complete"]})]}),m.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:m.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 h-2 rounded-full transition-all duration-300",style:{width:`${(o+1)/n.length*100}%`}})})]}),m.jsx("div",{className:"card p-8 mb-8",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"flex justify-center gap-4 mb-6 text-sm text-neutral-600",children:[m.jsxs("span",{children:["Interval: ",X()?.interval||0," days"]}),m.jsxs("span",{children:["Reviews: ",X()?.reviewCount||0]}),m.jsxs("span",{children:["Ease: ",X()?.easeFactor?.toFixed(1)||"2.5"]})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Question"}),m.jsx("div",{className:"bg-neutral-50 p-6 rounded-xl text-lg text-neutral-700 min-h-[100px] flex items-center justify-center",children:X()?.question||"Loading..."})]}),d&&m.jsxs("div",{className:"mb-8 animate-fade-in",children:[m.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Answer"}),m.jsx("div",{className:"bg-neutral-50 p-6 rounded-xl text-lg text-neutral-700 min-h-[100px] flex items-center justify-center",children:X()?.answer||"No answer available"}),X()?.hints&&X().hints.length>0&&m.jsxs("div",{className:"mt-4",children:[m.jsx("h4",{className:"text-lg font-medium text-neutral-700 mb-2",children:"Hints"}),m.jsx("div",{className:"space-y-2",children:X().hints.map((re,te)=>m.jsxs("div",{className:"bg-accent-50 p-3 rounded-lg text-neutral-700",children:["💡 ",re]},te))})]})]}),d?m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-lg font-semibold text-neutral-800",children:"How well did you know this?"}),m.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:F().map(({value:re,label:te,color:ce})=>m.jsx("button",{onClick:()=>Y(re),className:`btn text-white px-6 py-3 ${ce}`,children:te},re))})]}):m.jsx("button",{onClick:()=>g(!0),className:"btn btn-primary text-lg px-8 py-4",children:"Show Answer"})]})}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsx("button",{onClick:ie,className:"btn btn-secondary",children:"🔄 Reset Session"}),m.jsx("button",{onClick:i,className:"btn btn-primary",children:"Finish Session"})]})]})})]})}):null},dD=({onClose:i,isVisible:e=!1})=>{const[n,s]=de.useState(""),[o,c]=de.useState(""),[d,g]=de.useState(!1),[y]=de.useState(["A direct sum B","The integral from 0 to infinity of x squared dx","The limit as x approaches 0 of sin x over x","The matrix with rows [1,2] and [3,4]","The set of all real numbers x such that x is greater than 0","The derivative of f with respect to x","The sum from n equals 1 to infinity of 1 over n squared","The product from i equals 1 to n of i","The square root of a squared plus b squared","The absolute value of x minus 3"]),v=async()=>{if(n.trim())try{g(!0);const U=await kl.convertToLaTeX(n);c(U)}catch(U){console.error("Error converting to LaTeX:",U),c("Error: Could not convert to LaTeX. Please try again.")}finally{g(!1)}},T=U=>{s(U)},A=async()=>{if(o)try{await navigator.clipboard.writeText(o);const U=o;c("Copied to clipboard! ✓"),setTimeout(()=>c(U),2e3)}catch(U){console.error("Failed to copy:",U)}},S=()=>{s(""),c("")};return e?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[m.jsxs("div",{className:"bg-gradient-to-r from-accent-600 to-primary-600 px-6 py-4 text-white",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"🔄 LaTeX Converter"}),m.jsx("button",{onClick:i,className:"text-white/80 hover:text-white text-2xl transition-colors",children:"✕"})]}),m.jsx("p",{className:"text-white/90 mt-1",children:"Convert natural language to beautiful mathematical notation"})]}),m.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Input"}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Natural Language Description"}),m.jsx("textarea",{value:n,onChange:U=>s(U.target.value),placeholder:"e.g., A direct sum B, The integral from 0 to infinity of x squared dx...",className:"textarea h-32",onKeyPress:U=>U.key==="Enter"&&U.ctrlKey&&v()}),m.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Press Ctrl+Enter to convert"})]}),m.jsx("button",{onClick:v,disabled:!n.trim()||d,className:"btn btn-primary w-full mb-4",children:d?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Converting..."]}):"🔄 Convert to LaTeX"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-lg font-medium text-neutral-700 mb-3",children:"Quick Examples"}),m.jsx("div",{className:"space-y-2",children:y.map((U,Y)=>m.jsx("button",{onClick:()=>T(U),className:"block w-full text-left p-3 bg-neutral-50 hover:bg-neutral-100 rounded-lg text-sm text-neutral-700 transition-colors",children:U},Y))})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Output"}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"LaTeX Code"}),m.jsxs("div",{className:"relative",children:[m.jsx("textarea",{value:o,readOnly:!0,placeholder:"LaTeX will appear here...",className:"textarea h-32 font-mono bg-neutral-50"}),o&&m.jsx("button",{onClick:A,className:"absolute top-2 right-2 p-2 bg-white border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",title:"Copy to clipboard",children:"📋"})]})]}),o&&m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Preview"}),m.jsx("div",{className:"bg-neutral-50 p-4 rounded-lg border-2 border-dashed border-neutral-300 min-h-[100px] flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-4xl mb-2",children:"📐"}),m.jsx("p",{className:"text-neutral-600 text-sm",children:"LaTeX preview would render here"}),m.jsx("p",{className:"text-neutral-500 text-xs mt-1",children:"(MathJax integration needed)"})]})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:S,disabled:!n&&!o,className:"btn btn-secondary w-full",children:"🗑️ Clear All"}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-sm text-neutral-600",children:"💡 Tip: Use this tool to quickly convert mathematical expressions"}),m.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Perfect for creating flashcards with LaTeX support"})]})]})]})]}),m.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-r from-neutral-50 to-primary-50 rounded-xl",children:[m.jsx("h4",{className:"font-semibold text-neutral-800 mb-2",children:"How to use LaTeX in Three-Sided:"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-neutral-600",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Inline math:"})," Wrap with ",m.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"$ $"}),m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Example: $x^2 + y^2 = z^2$"})]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Block math:"})," Wrap with ",m.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"$$ $$"}),m.jsx("br",{}),m.jsxs("span",{className:"text-xs",children:["Example: $$\\int_0^\\infty e^",-x," dx = 1$$"]})]})]})]})]})]})}):null};class ym{static async createCheckoutSession(){try{const e=await yr.currentUser?.getIdToken();if(!e)throw new Error("User must be authenticated");const n=await fetch("https://us-central1-three-sided-flashcard-app.cloudfunctions.net/createCheckoutSession",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok){const o=await n.json();throw new Error(o.error||"Failed to create checkout session")}return(await n.json()).id}catch(e){throw console.error("Error creating checkout session:",e),e}}static async createPortalLink(){try{const e=await yr.currentUser?.getIdToken();if(!e)throw new Error("User must be authenticated");const n=await fetch("https://us-central1-three-sided-flashcard-app.cloudfunctions.net/createPortalLink",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok){const o=await n.json();throw new Error(o.error||"Failed to create portal link")}return(await n.json()).url}catch(e){throw console.error("Error creating portal link:",e),e}}static async redirectToCheckout(e){const n=window.Stripe?window.Stripe("pk_live_51RUu9KE3qmOAkttRGqw7Cr2wJ6qRHtCz9qXpHJHO0Bv4Q7gGHg5QXI9GFdXGh4IhQD5Xf9XUvLFCr9G2PHK0003w0Q"):null;if(!n)throw new Error("Stripe.js not loaded. Please include the Stripe script in your HTML.");const{error:s}=await n.redirectToCheckout({sessionId:e});if(s)throw new Error(s.message)}}const fD=({onClose:i,isVisible:e=!1})=>{const[n,s]=de.useState("monthly"),[o,c]=de.useState(!1),d=async T=>{try{c(!0);const A=await ym.createCheckoutSession();await ym.redirectToCheckout(A)}catch(A){console.error("Error creating subscription:",A),alert("Failed to start subscription process. Please try again.")}finally{c(!1)}},g=async()=>{try{c(!0);const T=await ym.createPortalLink();window.open(T,"_blank")}catch(T){console.error("Error accessing subscription management:",T),alert("Failed to access subscription management. Please try again.")}finally{c(!1)}},y={monthly:{price:"£5",period:"month",savings:null,popular:!1},yearly:{price:"£50",period:"year",savings:"£10",popular:!0}},v=[{name:"Spaced Repetition Mode",description:"Advanced algorithm for optimal learning",free:"✅",premium:"✅",icon:"🎯"},{name:"AI Autofill (Hint, Proof, Tags)",description:"Generate content with AI assistance",free:"⚠️ Limited (1/day)",premium:"✅ Unlimited",icon:"🤖"},{name:"AI Auto-Tagging",description:"Automatic tag suggestions",free:"⚠️ Limited (1/day)",premium:"✅ Unlimited",icon:"🏷️"},{name:"AI LaTeX Conversion",description:"Convert text to mathematical notation",free:"✅ Unlimited",premium:"✅ Unlimited",icon:"📐"},{name:"Public Profile & Sharing",description:"Share your flashcards with the community",free:"✅",premium:"✅ + Custom Themes",icon:"👤"},{name:"Advanced Analytics",description:"Detailed learning progress tracking",free:"❌",premium:"✅",icon:"📊"},{name:"Priority Support",description:"Get help when you need it most",free:"❌",premium:"✅",icon:"🎧"},{name:"Export & Backup",description:"Download your data anytime",free:"❌",premium:"✅",icon:"💾"}];return e?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[m.jsxs("div",{className:"bg-gradient-to-r from-accent-600 via-primary-600 to-secondary-600 px-6 py-4 text-white",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"✨ Premium Features"}),m.jsx("button",{onClick:i,className:"text-white/80 hover:text-white text-2xl transition-colors",children:"✕"})]}),m.jsx("p",{className:"text-white/90 mt-1",children:"Unlock the full potential of Three-Sided"})]}),m.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"text-2xl font-bold text-center text-neutral-800 mb-6",children:"Choose Your Plan"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[m.jsx("div",{className:`card p-6 cursor-pointer transition-all duration-200 ${n==="monthly"?"ring-2 ring-primary-500 shadow-glow":"hover:shadow-medium"}`,onClick:()=>s("monthly"),children:m.jsxs("div",{className:"text-center",children:[m.jsx("h4",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Monthly"}),m.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-1",children:"£5"}),m.jsx("div",{className:"text-neutral-600 mb-4",children:"per month"}),m.jsx("div",{className:`w-4 h-4 rounded-full border-2 mx-auto ${n==="monthly"?"bg-primary-500 border-primary-500":"border-neutral-300"}`})]})}),m.jsxs("div",{className:`card p-6 cursor-pointer transition-all duration-200 relative ${n==="yearly"?"ring-2 ring-primary-500 shadow-glow":"hover:shadow-medium"}`,onClick:()=>s("yearly"),children:[m.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:m.jsx("span",{className:"bg-accent-500 text-white px-3 py-1 rounded-full text-xs font-bold",children:"MOST POPULAR"})}),m.jsxs("div",{className:"text-center",children:[m.jsx("h4",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Yearly"}),m.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-1",children:"£50"}),m.jsx("div",{className:"text-neutral-600 mb-2",children:"per year"}),m.jsxs("div",{className:"text-success-600 font-bold mb-4",children:["Save £",y.yearly.savings,"!"]}),m.jsx("div",{className:`w-4 h-4 rounded-full border-2 mx-auto ${n==="yearly"?"bg-primary-500 border-primary-500":"border-neutral-300"}`})]})]})]})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"text-2xl font-bold text-center text-neutral-800 mb-6",children:"Feature Comparison"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b-2 border-neutral-200",children:[m.jsx("th",{className:"text-left p-4 font-semibold text-neutral-800",children:"Feature"}),m.jsx("th",{className:"text-center p-4 font-semibold text-neutral-800",children:"Free"}),m.jsx("th",{className:"text-center p-4 font-semibold text-neutral-800 bg-gradient-to-r from-primary-50 to-accent-50",children:"Premium"})]})}),m.jsx("tbody",{children:v.map((T,A)=>m.jsxs("tr",{className:"border-b border-neutral-100 hover:bg-neutral-50",children:[m.jsx("td",{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-2xl",children:T.icon}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-neutral-800",children:T.name}),m.jsx("div",{className:"text-sm text-neutral-600",children:T.description})]})]})}),m.jsx("td",{className:"p-4 text-center",children:m.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T.free==="✅"?"bg-success-100 text-success-800":T.free==="⚠️ Limited (1/day)"?"bg-warning-100 text-warning-800":"bg-neutral-100 text-neutral-600"}`,children:T.free})}),m.jsx("td",{className:"p-4 text-center bg-gradient-to-r from-primary-50 to-accent-50",children:m.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800",children:T.premium})})]},A))})]})})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"text-2xl font-bold text-center text-neutral-800 mb-6",children:"Why Go Premium?"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"card p-6 text-center",children:[m.jsx("div",{className:"text-4xl mb-4",children:"🚀"}),m.jsx("h4",{className:"text-lg font-bold text-neutral-800 mb-2",children:"Accelerate Learning"}),m.jsx("p",{className:"text-neutral-600",children:"Unlimited AI assistance helps you create better flashcards faster"})]}),m.jsxs("div",{className:"card p-6 text-center",children:[m.jsx("div",{className:"text-4xl mb-4",children:"📈"}),m.jsx("h4",{className:"text-lg font-bold text-neutral-800 mb-2",children:"Track Progress"}),m.jsx("p",{className:"text-neutral-600",children:"Advanced analytics show your learning journey and improvement"})]}),m.jsxs("div",{className:"card p-6 text-center",children:[m.jsx("div",{className:"text-4xl mb-4",children:"🎯"}),m.jsx("h4",{className:"text-lg font-bold text-neutral-800 mb-2",children:"Study Smarter"}),m.jsx("p",{className:"text-neutral-600",children:"Spaced repetition algorithm optimizes your study schedule"})]})]})]}),m.jsxs("div",{className:"text-center space-y-4",children:[m.jsx("button",{onClick:()=>d(),disabled:o,className:"btn btn-primary text-lg px-12 py-4 shadow-glow hover:shadow-glow/80",children:o?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):`Go Premium - ${y[n].price}/${y[n].period}`}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsx("button",{onClick:g,className:"btn btn-secondary",children:"Manage Subscription"}),m.jsx("button",{onClick:i,className:"btn btn-secondary",children:"Maybe Later"})]})]}),m.jsx("div",{className:"mt-8 p-4 bg-neutral-50 rounded-xl text-center",children:m.jsx("p",{className:"text-sm text-neutral-600",children:"💳 Secure payment powered by Stripe • Cancel anytime • 30-day money-back guarantee"})})]})]})}):null};function mD(){const[i,e]=de.useState("home"),[n,s]=de.useState({hasProfile:!1,hasCards:!1}),[o,c]=de.useState(!1),[d,g]=de.useState(!1),[y,v]=de.useState(!1),[T,A]=de.useState(!1),{user:S,signInWithGoogle:U,logout:Y}=dc();de.useEffect(()=>{S&&ie()},[S]);const ie=async()=>{try{const j=await Fs.checkOnboardingStatus(S.uid);s(j)}catch(j){console.error("Error checking onboarding status:",j)}},X=async()=>{try{await U()}catch(j){console.error("Error signing in:",j)}},F=async()=>{try{await Y()}catch(j){console.error("Error signing out:",j)}},re=async j=>{if(!S){await X();return}if(j==="profile"&&!n.hasProfile)try{await Fs.createUserProfile(S.uid,{email:S.email,displayName:S.displayName,photoURL:S.photoURL}),await ie()}catch(R){console.error("Error creating profile:",R)}},te=async()=>{await ie(),e("home")},ce=()=>{switch(i){case"create":return m.jsx(sD,{onCardCreated:te,onClose:()=>e("home")});case"study":return m.jsx(aD,{});case"search":return m.jsx(oD,{});case"leaderboard":return m.jsx(lD,{});case"dashboard":return m.jsx(cD,{});default:return fe()}},G=()=>m.jsx("div",{className:"navbar backdrop-blur-md bg-black/20 border-b border-white/10",children:m.jsxs("div",{className:"container py-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3 group cursor-pointer",onClick:()=>e("home"),children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:"/files/three-sided_logo.png",alt:"Three-Sided",width:"40",height:"40",className:"rounded-xl shadow-glow/80 group-hover:shadow-glow transition-all duration-300 group-hover:scale-105"}),m.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-primary-500 to-accent-500 opacity-0 group-hover:opacity-20 transition-opacity duration-300"})]}),m.jsx("span",{className:"text-gradient text-2xl font-extrabold tracking-tight group-hover:text-white transition-all duration-300",children:"Three‑Sided"})]}),m.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[m.jsx("button",{className:"btn bg-white/5 hover:bg-white/10 text-white/80 hover:text-white border border-white/10 hover:border-white/20 transition-all duration-200",onClick:()=>e("search"),children:"🔍 Search"}),m.jsx("button",{className:"btn bg-white/5 hover:bg-white/10 text-white/80 hover:text-white border border-white/10 hover:border-white/20 transition-all duration-200",onClick:()=>e("leaderboard"),children:"🏆 Leaderboard"}),m.jsx("button",{className:"btn bg-white/5 hover:bg-white/10 text-white/80 hover:text-white border border-white/10 hover:border-white/20 transition-all duration-200",onClick:()=>e("dashboard"),children:"🎯 Dashboard"}),S?m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-success-50 text-success-800 rounded-xl border border-success-200",children:[m.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm font-medium",children:S.displayName?.split(" ")[0]||"User"})]}),m.jsx("button",{className:"btn bg-gradient-to-r from-danger-500 to-danger-600 hover:from-danger-600 hover:to-danger-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",onClick:F,children:"Sign Out"})]}):m.jsx("button",{className:"btn bg-gradient-to-r from-primary-500 to-accent-500 hover:from-primary-600 hover:to-accent-600 text-white shadow-lg hover:shadow-glow/80 transform hover:scale-105 transition-all duration-200",onClick:X,children:"✨ Sign In"})]})]})}),fe=()=>m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-900 via-accent-900 to-secondary-900",children:[m.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='m36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),m.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary-500/20 rounded-full blur-3xl animate-pulse"}),m.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent-500/20 rounded-full blur-3xl animate-pulse animation-delay-1000"}),m.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-secondary-500/20 rounded-full blur-2xl animate-pulse animation-delay-2000"})]}),m.jsxs("div",{className:"container relative z-10 text-center py-24",children:[m.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-success-50 text-success-800 rounded-full border border-success-200 mb-8 animate-fade-in",children:[m.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm font-semibold",children:"✨ New React Version - Live Now"})]}),m.jsxs("h1",{className:"text-6xl md:text-7xl lg:text-8xl font-extrabold tracking-tight mb-8 animate-fade-in",children:[m.jsx("span",{className:"bg-gradient-to-r from-white via-primary-200 to-accent-200 bg-clip-text text-transparent",children:"Master Any Subject"}),m.jsx("br",{}),m.jsx("span",{className:"bg-gradient-to-r from-primary-400 via-accent-400 to-secondary-400 bg-clip-text text-transparent",children:"with Three‑Sided"})]}),m.jsxs("p",{className:"text-xl md:text-2xl text-white/80 max-w-4xl mx-auto mb-12 leading-relaxed animate-fade-in animation-delay-500",children:["Create, study, and share flashcards with ",m.jsx("span",{className:"text-accent-300 font-semibold",children:"AI assistance"}),". Learn faster with ",m.jsx("span",{className:"text-primary-300 font-semibold",children:"spaced repetition"})," and a",m.jsx("span",{className:"text-secondary-300 font-semibold",children:" community library"}),"."]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in animation-delay-1000",children:[m.jsxs("button",{onClick:()=>e("search"),className:"group relative px-8 py-4 bg-gradient-to-r from-primary-500 to-accent-500 hover:from-primary-600 hover:to-accent-600 text-white font-semibold rounded-2xl shadow-2xl hover:shadow-glow/80 transform hover:scale-105 transition-all duration-300 min-w-[200px]",children:[m.jsxs("span",{className:"relative z-10 flex items-center gap-3",children:["🔍 ",m.jsx("span",{children:"Search Flashcards"})]}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-white/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),m.jsx("button",{onClick:()=>e("leaderboard"),className:"group px-8 py-4 bg-white/10 hover:bg-white/20 text-white font-semibold rounded-2xl border-2 border-white/20 hover:border-white/40 backdrop-blur-sm transform hover:scale-105 transition-all duration-300 min-w-[200px]",children:m.jsxs("span",{className:"flex items-center gap-3",children:["🏆 ",m.jsx("span",{children:"View Leaderboard"})]})})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-8 justify-center items-center mt-16 animate-fade-in animation-delay-1500",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-3xl font-bold text-white",children:"10K+"}),m.jsx("div",{className:"text-white/60",children:"Flashcards"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-3xl font-bold text-white",children:"500+"}),m.jsx("div",{className:"text-white/60",children:"Students"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-3xl font-bold text-white",children:"50+"}),m.jsx("div",{className:"text-white/60",children:"Subjects"})]})]})]}),m.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:m.jsx("div",{className:"w-6 h-10 border-2 border-white/30 rounded-full flex justify-center",children:m.jsx("div",{className:"w-1 h-3 bg-white/50 rounded-full mt-2 animate-pulse"})})})]}),m.jsxs("div",{className:"container section",children:[S&&m.jsxs("div",{className:"relative p-8 mb-16 rounded-3xl bg-gradient-to-br from-primary-500/10 via-accent-500/10 to-secondary-500/10 border border-white/20 backdrop-blur-sm shadow-2xl",children:[m.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-primary-500/5 to-accent-500/5"}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-4xl font-extrabold mb-3",children:m.jsx("span",{className:"bg-gradient-to-r from-primary-400 to-accent-400 bg-clip-text text-transparent",children:"🚀 Quick Actions"})}),m.jsx("p",{className:"text-white/70 text-lg",children:"Jump into your learning journey"})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsxs("button",{onClick:()=>e("create"),className:"group relative overflow-hidden bg-gradient-to-br from-success-500 to-success-600 hover:from-success-600 hover:to-success-700 text-white p-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),m.jsxs("div",{className:"relative z-10 text-center",children:[m.jsx("div",{className:"text-4xl mb-3",children:"✏️"}),m.jsx("div",{className:"font-bold text-lg mb-1",children:"Create"}),m.jsx("div",{className:"text-white/80 text-sm",children:"New Flashcard"})]})]}),m.jsxs("button",{onClick:()=>e("study"),className:"group relative overflow-hidden bg-gradient-to-br from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white p-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),m.jsxs("div",{className:"relative z-10 text-center",children:[m.jsx("div",{className:"text-4xl mb-3",children:"📚"}),m.jsx("div",{className:"font-bold text-lg mb-1",children:"Study"}),m.jsx("div",{className:"text-white/80 text-sm",children:"Practice Mode"})]})]}),m.jsxs("button",{onClick:()=>e("search"),className:"group relative overflow-hidden bg-gradient-to-br from-accent-500 to-accent-600 hover:from-accent-600 hover:to-accent-700 text-white p-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),m.jsxs("div",{className:"relative z-10 text-center",children:[m.jsx("div",{className:"text-4xl mb-3",children:"🔍"}),m.jsx("div",{className:"font-bold text-lg mb-1",children:"Search"}),m.jsx("div",{className:"text-white/80 text-sm",children:"& Discover"})]})]}),m.jsxs("button",{onClick:()=>e("dashboard"),className:"group relative overflow-hidden bg-gradient-to-br from-warning-500 to-warning-600 hover:from-warning-600 hover:to-warning-700 text-white p-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),m.jsxs("div",{className:"relative z-10 text-center",children:[m.jsx("div",{className:"text-4xl mb-3",children:"🎯"}),m.jsx("div",{className:"font-bold text-lg mb-1",children:"Dashboard"}),m.jsx("div",{className:"text-white/80 text-sm",children:"My Progress"})]})]})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-8 mb-16 lg:grid-cols-3",children:[m.jsxs("div",{className:"group relative overflow-hidden bg-gradient-to-br from-primary-500/10 to-primary-600/20 p-8 rounded-3xl border border-primary-300/20 hover:border-primary-300/40 transition-all duration-500 hover:scale-105",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),m.jsxs("div",{className:"relative z-10 text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary-400 to-primary-600 rounded-2xl mb-6 text-4xl shadow-lg group-hover:shadow-xl transition-all duration-300",children:"👥"}),m.jsx("h3",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-primary-300 to-accent-300 bg-clip-text text-transparent",children:"Community‑Driven"}),m.jsx("p",{className:"text-white/70 leading-relaxed",children:"Discover and share flashcards with students worldwide. Learn from the community's collective knowledge and contribute your own."})]})]}),m.jsxs("div",{className:"group relative overflow-hidden bg-gradient-to-br from-accent-500/10 to-accent-600/20 p-8 rounded-3xl border border-accent-300/20 hover:border-accent-300/40 transition-all duration-500 hover:scale-105",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),m.jsxs("div",{className:"relative z-10 text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-accent-400 to-accent-600 rounded-2xl mb-6 text-4xl shadow-lg group-hover:shadow-xl transition-all duration-300",children:"🧠"}),m.jsx("h3",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-accent-300 to-secondary-300 bg-clip-text text-transparent",children:"AI‑Powered Assistance"}),m.jsx("p",{className:"text-white/70 leading-relaxed",children:"Get AI‑generated hints, proofs, and suggestions to help you create better flashcards faster and study more effectively."})]})]}),m.jsxs("div",{className:"group relative overflow-hidden bg-gradient-to-br from-secondary-500/10 to-secondary-600/20 p-8 rounded-3xl border border-secondary-300/20 hover:border-secondary-300/40 transition-all duration-500 hover:scale-105",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),m.jsxs("div",{className:"relative z-10 text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-secondary-400 to-secondary-600 rounded-2xl mb-6 text-4xl shadow-lg group-hover:shadow-xl transition-all duration-300",children:"📐"}),m.jsx("h3",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-secondary-300 to-primary-300 bg-clip-text text-transparent",children:"LaTeX Support"}),m.jsx("p",{className:"text-white/70 leading-relaxed",children:"Beautiful mathematical notation with full LaTeX rendering. Use $...$ for inline math and $$...$$ for display blocks."})]})]})]}),m.jsxs("div",{className:"relative p-8 mb-16 rounded-3xl bg-gradient-to-br from-success-500/10 via-primary-500/10 to-accent-500/10 border border-white/20 backdrop-blur-sm shadow-2xl",children:[m.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-success-500/5 to-accent-500/5"}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-4xl font-extrabold mb-3",children:m.jsx("span",{className:"bg-gradient-to-r from-success-400 to-primary-400 bg-clip-text text-transparent",children:"🚀 Get Started"})}),m.jsx("p",{className:"text-white/70 text-lg",children:"Complete these quick steps to join our community"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsx("div",{className:`group relative overflow-hidden p-6 rounded-2xl border-2 transition-all duration-300 cursor-pointer ${S?"bg-gradient-to-br from-success-500/20 to-success-600/30 border-success-400/40 shadow-lg":"bg-white/5 border-white/20 hover:border-white/40 hover:bg-white/10"}`,onClick:()=>re("login"),children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg ${S?"bg-success-500 text-white":"bg-primary-500 text-white"}`,children:S?"✓":"1"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-bold text-lg text-white mb-1",children:S?"Signed In":"Sign In"}),m.jsx("div",{className:"text-white/70 text-sm",children:S?`Welcome, ${S.displayName?.split(" ")[0]||"User"}!`:"Use Google to get started"})]})]})}),m.jsx("div",{className:`group relative overflow-hidden p-6 rounded-2xl border-2 transition-all duration-300 ${n.hasProfile?"bg-gradient-to-br from-success-500/20 to-success-600/30 border-success-400/40 shadow-lg":S?"bg-white/5 border-white/20 hover:border-white/40 hover:bg-white/10 cursor-pointer":"bg-white/5 border-white/10 opacity-50"}`,onClick:S&&!n.hasProfile?()=>re("profile"):void 0,children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg ${n.hasProfile?"bg-success-500 text-white":"bg-primary-500 text-white"}`,children:n.hasProfile?"✓":"2"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-bold text-lg text-white mb-1",children:n.hasProfile?"Profile Created":"Create Profile"}),m.jsx("div",{className:"text-white/70 text-sm",children:n.hasProfile?"Profile is ready!":"Set display name & avatar"})]})]})}),m.jsx("div",{className:`group relative overflow-hidden p-6 rounded-2xl border-2 transition-all duration-300 ${n.hasCards?"bg-gradient-to-br from-success-500/20 to-success-600/30 border-success-400/40 shadow-lg":S?"bg-white/5 border-white/20":"bg-white/5 border-white/10 opacity-50"}`,children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg ${n.hasCards?"bg-success-500 text-white":"bg-primary-500 text-white"}`,children:n.hasCards?"✓":"3"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-bold text-lg text-white mb-1",children:n.hasCards?"First Card Published":"Publish First Card"}),m.jsx("div",{className:"text-white/70 text-sm",children:n.hasCards?"Nice work!":"Share with the community"})]})]})})]}),S&&!n.hasCards&&m.jsx("div",{className:"text-center mt-8",children:m.jsx("button",{onClick:()=>e("create"),className:"bg-gradient-to-r from-success-500 to-primary-500 hover:from-success-600 hover:to-primary-600 text-white px-8 py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"✏️ Create Your First Card"})})]})]}),m.jsxs("div",{className:"relative overflow-hidden p-16 mb-16 rounded-3xl bg-gradient-to-br from-accent-500/20 via-primary-500/20 to-secondary-500/20 border border-white/20 text-center group hover:scale-105 transition-all duration-500",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent-500/10 to-primary-500/10"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-accent-400 to-primary-500 rounded-3xl mb-8 text-5xl shadow-2xl group-hover:shadow-glow/80 transition-all duration-300",children:"🔍"}),m.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-6",children:m.jsx("span",{className:"bg-gradient-to-r from-accent-300 to-primary-300 bg-clip-text text-transparent",children:"Looking for something specific?"})}),m.jsxs("p",{className:"text-xl text-white/80 max-w-3xl mx-auto mb-8 leading-relaxed",children:["Search our community database of ",m.jsx("span",{className:"text-accent-300 font-semibold",children:"10,000+ flashcards"})," from",m.jsx("span",{className:"text-primary-300 font-semibold",children:" students worldwide"}),". Find exactly what you need to ace your studies."]}),m.jsxs("button",{onClick:()=>e("search"),className:"group/btn relative overflow-hidden bg-gradient-to-r from-accent-500 to-primary-500 hover:from-accent-600 hover:to-primary-600 text-white px-12 py-6 rounded-2xl font-semibold text-lg shadow-2xl hover:shadow-glow/80 transform hover:scale-105 transition-all duration-300",children:[m.jsxs("span",{className:"relative z-10 flex items-center gap-3",children:["🔎 ",m.jsx("span",{children:"Search Community Flashcards"})]}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-white/10 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"})]})]})]}),m.jsx("footer",{className:"relative overflow-hidden mt-24 py-16 bg-gradient-to-t from-primary-900/20 to-transparent border-t border-white/10",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[m.jsx("img",{src:"/files/three-sided_logo.png",alt:"Three-Sided",width:"48",height:"48",className:"rounded-xl shadow-lg"}),m.jsx("span",{className:"text-3xl font-extrabold bg-gradient-to-r from-primary-400 to-accent-400 bg-clip-text text-transparent",children:"Three‑Sided"})]}),m.jsx("p",{className:"text-white/60 text-lg max-w-2xl mx-auto",children:"Empowering students worldwide with AI-enhanced flashcards and collaborative learning."})]}),m.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8 pt-8 border-t border-white/10",children:[m.jsxs("div",{className:"text-white/60",children:["© ",new Date().getFullYear()," Three‑Sided. Made with ❤️ for students."]}),m.jsxs("div",{className:"flex items-center gap-8",children:[m.jsx("a",{href:"mailto:amirbattye@gmail.com",className:"text-white/60 hover:text-accent-300 transition-colors duration-200 font-medium",children:"Contact"}),m.jsx("a",{href:"/latex_guide.html",target:"_blank",rel:"noreferrer",className:"text-white/60 hover:text-primary-300 transition-colors duration-200 font-medium",children:"LaTeX Guide"}),m.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-success-50 text-success-800 rounded-full text-sm",children:[m.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full animate-pulse"}),m.jsx("span",{className:"font-medium",children:"Beta"})]})]})]})]})})]})]});return m.jsxs("div",{className:"min-h-screen",children:[i==="home"?m.jsx(G,{}):m.jsx("div",{className:"navbar",children:m.jsxs("div",{className:"container py-3 flex items-center justify-between",children:[m.jsx("button",{onClick:()=>e("home"),className:"btn btn-secondary",children:"← Back to Home"}),m.jsxs("h1",{className:"text-gradient text-xl font-bold",children:[i==="create"&&"✏️ Create Flashcard",i==="study"&&"📚 Study Mode",i==="search"&&"🔍 Search & Discovery",i==="leaderboard"&&"🏆 Leaderboard & Stats",i==="dashboard"&&"🎯 My Dashboard"]}),m.jsx("div",{style:{width:"90px"}})]})}),ce(),m.jsx(uD,{isVisible:o,onClose:()=>c(!1),selectedTags:[],onTagsChange:()=>{}}),m.jsx(hD,{isVisible:d,onClose:()=>g(!1)}),m.jsx(dD,{isVisible:y,onClose:()=>v(!1)}),m.jsx(fD,{isVisible:T,onClose:()=>A(!1)})]})}Ax.createRoot(document.getElementById("root")).render(m.jsx(de.StrictMode,{children:m.jsx(rD,{children:m.jsx(mD,{})})}));
