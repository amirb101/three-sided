(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Xf={exports:{}},Cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function gw(){if(n_)return Cl;n_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Cl.Fragment=e,Cl.jsx=n,Cl.jsxs=n,Cl}var i_;function yw(){return i_||(i_=1,Xf.exports=gw()),Xf.exports}var p=yw(),Wf={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function vw(){if(r_)return Re;r_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,re={};function X(D,ne,le){this.props=D,this.context=ne,this.refs=re,this.updater=le||U}X.prototype.isReactComponent={},X.prototype.setState=function(D,ne){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ne,"setState")},X.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function F(){}F.prototype=X.prototype;function ie(D,ne,le){this.props=D,this.context=ne,this.refs=re,this.updater=le||U}var te=ie.prototype=new F;te.constructor=ie,Y(te,X.prototype),te.isPureReactComponent=!0;var ce=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function O(D,ne,le,se,ve,Ce){return le=Ce.ref,{$$typeof:r,type:D,key:ne,ref:le!==void 0?le:null,props:Ce}}function R(D,ne){return O(D.type,ne,void 0,void 0,void 0,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function k(D){var ne={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(le){return ne[le]})}var j=/\/+/g;function P(D,ne){return typeof D=="object"&&D!==null&&D.key!=null?k(""+D.key):ne.toString(36)}function C(){}function Pt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(ne){D.status==="pending"&&(D.status="fulfilled",D.value=ne)},function(ne){D.status==="pending"&&(D.status="rejected",D.reason=ne)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ot(D,ne,le,se,ve){var Ce=typeof D;(Ce==="undefined"||Ce==="boolean")&&(D=null);var we=!1;if(D===null)we=!0;else switch(Ce){case"bigint":case"string":case"number":we=!0;break;case"object":switch(D.$$typeof){case r:case e:we=!0;break;case T:return we=D._init,ot(we(D._payload),ne,le,se,ve)}}if(we)return ve=ve(D),we=se===""?"."+P(D,0):se,ce(ve)?(le="",we!=null&&(le=we.replace(j,"$&/")+"/"),ot(ve,ne,le,"",function(Jn){return Jn})):ve!=null&&(N(ve)&&(ve=R(ve,le+(ve.key==null||D&&D.key===ve.key?"":(""+ve.key).replace(j,"$&/")+"/")+we)),ne.push(ve)),1;we=0;var Nt=se===""?".":se+":";if(ce(D))for(var Je=0;Je<D.length;Je++)se=D[Je],Ce=Nt+P(se,Je),we+=ot(se,ne,le,Ce,ve);else if(Je=w(D),typeof Je=="function")for(D=Je.call(D),Je=0;!(se=D.next()).done;)se=se.value,Ce=Nt+P(se,Je++),we+=ot(se,ne,le,Ce,ve);else if(Ce==="object"){if(typeof D.then=="function")return ot(Pt(D),ne,le,se,ve);throw ne=String(D),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return we}function K(D,ne,le){if(D==null)return D;var se=[],ve=0;return ot(D,se,"","",function(Ce){return ne.call(le,Ce,ve++)}),se}function oe(D){if(D._status===-1){var ne=D._result;ne=ne(),ne.then(function(le){(D._status===0||D._status===-1)&&(D._status=1,D._result=le)},function(le){(D._status===0||D._status===-1)&&(D._status=2,D._result=le)}),D._status===-1&&(D._status=0,D._result=ne)}if(D._status===1)return D._result.default;throw D._result}var ge=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Be(){}return Re.Children={map:K,forEach:function(D,ne,le){K(D,function(){ne.apply(this,arguments)},le)},count:function(D){var ne=0;return K(D,function(){ne++}),ne},toArray:function(D){return K(D,function(ne){return ne})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Re.Component=X,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=ie,Re.StrictMode=s,Re.Suspense=v,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Re.__COMPILER_RUNTIME={__proto__:null,c:function(D){return G.H.useMemoCache(D)}},Re.cache=function(D){return function(){return D.apply(null,arguments)}},Re.cloneElement=function(D,ne,le){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var se=Y({},D.props),ve=D.key,Ce=void 0;if(ne!=null)for(we in ne.ref!==void 0&&(Ce=void 0),ne.key!==void 0&&(ve=""+ne.key),ne)!fe.call(ne,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ne.ref===void 0||(se[we]=ne[we]);var we=arguments.length-2;if(we===1)se.children=le;else if(1<we){for(var Nt=Array(we),Je=0;Je<we;Je++)Nt[Je]=arguments[Je+2];se.children=Nt}return O(D.type,ve,void 0,void 0,Ce,se)},Re.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Re.createElement=function(D,ne,le){var se,ve={},Ce=null;if(ne!=null)for(se in ne.key!==void 0&&(Ce=""+ne.key),ne)fe.call(ne,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ve[se]=ne[se]);var we=arguments.length-2;if(we===1)ve.children=le;else if(1<we){for(var Nt=Array(we),Je=0;Je<we;Je++)Nt[Je]=arguments[Je+2];ve.children=Nt}if(D&&D.defaultProps)for(se in we=D.defaultProps,we)ve[se]===void 0&&(ve[se]=we[se]);return O(D,Ce,void 0,void 0,null,ve)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(D){return{$$typeof:m,render:D}},Re.isValidElement=N,Re.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:oe}},Re.memo=function(D,ne){return{$$typeof:y,type:D,compare:ne===void 0?null:ne}},Re.startTransition=function(D){var ne=G.T,le={};G.T=le;try{var se=D(),ve=G.S;ve!==null&&ve(le,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Be,ge)}catch(Ce){ge(Ce)}finally{G.T=ne}},Re.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Re.use=function(D){return G.H.use(D)},Re.useActionState=function(D,ne,le){return G.H.useActionState(D,ne,le)},Re.useCallback=function(D,ne){return G.H.useCallback(D,ne)},Re.useContext=function(D){return G.H.useContext(D)},Re.useDebugValue=function(){},Re.useDeferredValue=function(D,ne){return G.H.useDeferredValue(D,ne)},Re.useEffect=function(D,ne,le){var se=G.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(D,ne)},Re.useId=function(){return G.H.useId()},Re.useImperativeHandle=function(D,ne,le){return G.H.useImperativeHandle(D,ne,le)},Re.useInsertionEffect=function(D,ne){return G.H.useInsertionEffect(D,ne)},Re.useLayoutEffect=function(D,ne){return G.H.useLayoutEffect(D,ne)},Re.useMemo=function(D,ne){return G.H.useMemo(D,ne)},Re.useOptimistic=function(D,ne){return G.H.useOptimistic(D,ne)},Re.useReducer=function(D,ne,le){return G.H.useReducer(D,ne,le)},Re.useRef=function(D){return G.H.useRef(D)},Re.useState=function(D){return G.H.useState(D)},Re.useSyncExternalStore=function(D,ne,le){return G.H.useSyncExternalStore(D,ne,le)},Re.useTransition=function(){return G.H.useTransition()},Re.version="19.1.1",Re}var s_;function Gm(){return s_||(s_=1,Wf.exports=vw()),Wf.exports}var de=Gm(),Zf={exports:{}},Nl={},Jf={exports:{}},em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function _w(){return a_||(a_=1,(function(r){function e(K,oe){var ge=K.length;K.push(oe);e:for(;0<ge;){var Be=ge-1>>>1,D=K[Be];if(0<o(D,oe))K[Be]=oe,K[ge]=D,ge=Be;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var oe=K[0],ge=K.pop();if(ge!==oe){K[0]=ge;e:for(var Be=0,D=K.length,ne=D>>>1;Be<ne;){var le=2*(Be+1)-1,se=K[le],ve=le+1,Ce=K[ve];if(0>o(se,ge))ve<D&&0>o(Ce,se)?(K[Be]=Ce,K[ve]=ge,Be=ve):(K[Be]=se,K[le]=ge,Be=le);else if(ve<D&&0>o(Ce,ge))K[Be]=Ce,K[ve]=ge,Be=ve;else break e}}return oe}function o(K,oe){var ge=K.sortIndex-oe.sortIndex;return ge!==0?ge:K.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var v=[],y=[],T=1,A=null,w=3,U=!1,Y=!1,re=!1,X=!1,F=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ce(K){for(var oe=n(y);oe!==null;){if(oe.callback===null)s(y);else if(oe.startTime<=K)s(y),oe.sortIndex=oe.expirationTime,e(v,oe);else break;oe=n(y)}}function G(K){if(re=!1,ce(K),!Y)if(n(v)!==null)Y=!0,fe||(fe=!0,P());else{var oe=n(y);oe!==null&&ot(G,oe.startTime-K)}}var fe=!1,O=-1,R=5,N=-1;function k(){return X?!0:!(r.unstable_now()-N<R)}function j(){if(X=!1,fe){var K=r.unstable_now();N=K;var oe=!0;try{e:{Y=!1,re&&(re=!1,ie(O),O=-1),U=!0;var ge=w;try{t:{for(ce(K),A=n(v);A!==null&&!(A.expirationTime>K&&k());){var Be=A.callback;if(typeof Be=="function"){A.callback=null,w=A.priorityLevel;var D=Be(A.expirationTime<=K);if(K=r.unstable_now(),typeof D=="function"){A.callback=D,ce(K),oe=!0;break t}A===n(v)&&s(v),ce(K)}else s(v);A=n(v)}if(A!==null)oe=!0;else{var ne=n(y);ne!==null&&ot(G,ne.startTime-K),oe=!1}}break e}finally{A=null,w=ge,U=!1}oe=void 0}}finally{oe?P():fe=!1}}}var P;if(typeof te=="function")P=function(){te(j)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Pt=C.port2;C.port1.onmessage=j,P=function(){Pt.postMessage(null)}}else P=function(){F(j,0)};function ot(K,oe){O=F(function(){K(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(K){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var ge=w;w=oe;try{return K()}finally{w=ge}},r.unstable_requestPaint=function(){X=!0},r.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ge=w;w=K;try{return oe()}finally{w=ge}},r.unstable_scheduleCallback=function(K,oe,ge){var Be=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Be+ge:Be):ge=Be,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ge+D,K={id:T++,callback:oe,priorityLevel:K,startTime:ge,expirationTime:D,sortIndex:-1},ge>Be?(K.sortIndex=ge,e(y,K),n(v)===null&&K===n(y)&&(re?(ie(O),O=-1):re=!0,ot(G,ge-Be))):(K.sortIndex=D,e(v,K),Y||U||(Y=!0,fe||(fe=!0,P()))),K},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(K){var oe=w;return function(){var ge=w;w=oe;try{return K.apply(this,arguments)}finally{w=ge}}}})(em)),em}var o_;function bw(){return o_||(o_=1,Jf.exports=_w()),Jf.exports}var tm={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function Tw(){if(l_)return Kt;l_=1;var r=Gm();function e(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(v,y,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:v,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Kt.createPortal=function(v,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(v,y,null,T)},Kt.flushSync=function(v){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,v)return v()}finally{d.T=y,s.p=T,s.d.f()}},Kt.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(v,y))},Kt.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},Kt.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,U=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:w,fetchPriority:U}):T==="script"&&s.d.X(v,{crossOrigin:A,integrity:w,fetchPriority:U,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Kt.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);s.d.M(v,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(v)},Kt.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin);s.d.L(v,T,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Kt.preloadModule=function(v,y){if(typeof v=="string")if(y){var T=m(y.as,y.crossOrigin);s.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(v)},Kt.requestFormReset=function(v){s.d.r(v)},Kt.unstable_batchedUpdates=function(v,y){return v(y)},Kt.useFormState=function(v,y,T){return d.H.useFormState(v,y,T)},Kt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Kt.version="19.1.1",Kt}var c_;function Ew(){if(c_)return tm.exports;c_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),tm.exports=Tw(),tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function Sw(){if(u_)return Nl;u_=1;var r=bw(),e=Gm(),n=Ew();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(s(188))}function v(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var b=!1,E=h.child;E;){if(E===a){b=!0,a=h,l=f;break}if(E===l){b=!0,l=h,a=f;break}E=E.sibling}if(!b){for(E=f.child;E;){if(E===a){b=!0,a=f,l=h;break}if(E===l){b=!0,l=f,a=h;break}E=E.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Pt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case X:return"Profiler";case re:return"StrictMode";case G:return"Suspense";case fe:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case te:return(t.displayName||"Context")+".Provider";case ie:return(t._context.displayName||"Context")+".Consumer";case ce:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return i=t.displayName||null,i!==null?i:Pt(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return Pt(t(i))}catch{}}return null}var ot=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Be=[],D=-1;function ne(t){return{current:t}}function le(t){0>D||(t.current=Be[D],Be[D]=null,D--)}function se(t,i){D++,Be[D]=t.current,t.current=i}var ve=ne(null),Ce=ne(null),we=ne(null),Nt=ne(null);function Je(t,i){switch(se(we,i),se(Ce,t),se(ve,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Nv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Nv(i),t=Dv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}le(ve),se(ve,t)}function Jn(){le(ve),le(Ce),le(we)}function rr(t){t.memoizedState!==null&&se(Nt,t);var i=ve.current,a=Dv(i,t.type);i!==a&&(se(Ce,t),se(ve,a))}function wi(t){Ce.current===t&&(le(ve),le(Ce)),Nt.current===t&&(le(Nt),wl._currentValue=ge)}var Jr=Object.prototype.hasOwnProperty,es=r.unstable_scheduleCallback,ts=r.unstable_cancelCallback,To=r.unstable_shouldYield,fc=r.unstable_requestPaint,En=r.unstable_now,$h=r.unstable_getCurrentPriorityLevel,Eo=r.unstable_ImmediatePriority,ea=r.unstable_UserBlockingPriority,ns=r.unstable_NormalPriority,Xh=r.unstable_LowPriority,ta=r.unstable_IdlePriority,So=r.log,mc=r.unstable_setDisableYieldValue,lt=null,Ge=null;function hn(t){if(typeof So=="function"&&mc(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(lt,t)}catch{}}var Qt=Math.clz32?Math.clz32:is,pc=Math.log,Wh=Math.LN2;function is(t){return t>>>=0,t===0?32:31-(pc(t)/Wh|0)|0}var rs=256,ss=4194304;function zn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function na(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~f,l!==0?h=zn(l):(b&=E,b!==0?h=zn(b):a||(a=E&~t,a!==0&&(h=zn(a))))):(E=l&~f,E!==0?h=zn(E):b!==0?h=zn(b):a||(a=l&~t,a!==0&&(h=zn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function as(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function wo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ao(){var t=rs;return rs<<=1,(rs&4194048)===0&&(rs=256),t}function xo(){var t=ss;return ss<<=1,(ss&62914560)===0&&(ss=4194304),t}function Ai(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function xi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ro(t,i,a,l,h,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,I=t.expirationTimes,B=t.hiddenUpdates;for(a=b&~a;0<a;){var $=31-Qt(a),J=1<<$;E[$]=0,I[$]=-1;var q=B[$];if(q!==null)for(B[$]=null,$=0;$<q.length;$++){var H=q[$];H!==null&&(H.lane&=-536870913)}a&=~J}l!==0&&ei(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~i))}function ei(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Qt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Io(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Qt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function sr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ia(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ar(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:Xv(t.type))}function gc(t,i){var a=oe.p;try{return oe.p=t,i()}finally{oe.p=a}}var it=Math.random().toString(36).slice(2),wt="__reactFiber$"+it,yt="__reactProps$"+it,Sn="__reactContainer$"+it,Co="__reactEvents$"+it,Zh="__reactListeners$"+it,or="__reactHandles$"+it,yc="__reactResources$"+it,os="__reactMarker$"+it;function lr(t){delete t[wt],delete t[yt],delete t[Co],delete t[Zh],delete t[or]}function Ri(t){var i=t[wt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Sn]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=jv(t);t!==null;){if(a=t[wt])return a;t=jv(t)}return i}t=a,a=t.parentNode}return null}function ti(t){if(t=t[wt]||t[Sn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ni(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Jt(t){var i=t[yc];return i||(i=t[yc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ht(t){t[os]=!0}var No=new Set,ra={};function Bn(t,i){Ii(t,i),Ii(t+"Capture",i)}function Ii(t,i){for(ra[t]=i,t=0;t<i.length;t++)No.add(i[t])}var vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_c={},ls={};function bc(t){return Jr.call(ls,t)?!0:Jr.call(_c,t)?!1:vc.test(t)?ls[t]=!0:(_c[t]=!0,!1)}function cr(t,i,a){if(bc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ii(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Ut(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var cs,Tc;function Ci(t){if(cs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);cs=i&&i[1]||"",Tc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+t+Tc}var sa=!1;function aa(t,i){if(!t||sa)return"";sa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(H){var q=H}Reflect.construct(t,[],J)}else{try{J.call()}catch(H){q=H}t.call(J.prototype)}}else{try{throw Error()}catch(H){q=H}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],E=f[1];if(b&&E){var I=b.split(`
`),B=E.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===B.length)for(l=I.length-1,h=B.length-1;1<=l&&0<=h&&I[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==B[h]){var $=`
`+I[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=h);break}}}finally{sa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ci(a):""}function Do(t){switch(t.tag){case 26:case 27:case 5:return Ci(t.type);case 16:return Ci("Lazy");case 13:return Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return aa(t.type,!1);case 11:return aa(t.type.render,!1);case 1:return aa(t.type,!0);case 31:return Ci("Activity");default:return""}}function oa(t){try{var i="";do i+=Do(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Oo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Jh(t){var i=Oo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function la(t){t._valueTracker||(t._valueTracker=Jh(t))}function Mo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Oo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ed=/[\n"\\]/g;function vt(t){return t.replace(ed,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function dn(t,i,a,l,h,f,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),i!=null?b==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+en(i)):t.value!==""+en(i)&&(t.value=""+en(i)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),i!=null?ur(t,b,en(i)):a!=null?ur(t,b,en(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+en(E):t.removeAttribute("name")}function hs(t,i,a,l,h,f,b,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+en(a):"",i=i!=null?""+en(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function ur(t,i,a){i==="number"&&us(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ni(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+en(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ke(t,i,a){if(i!=null&&(i=""+en(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+en(a):""}function ds(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ot(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=en(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function wn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var fs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||fs.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function ko(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Ec(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&Ec(t,f,i[f])}function jo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var td=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(t){return nd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Di=null;function An(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oi=null,Mi=null;function Vo(t){var i=ti(t);if(i&&(t=i.stateNode)){var a=t[yt]||null;e:switch(t=i.stateNode,i.type){case"input":if(dn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[yt]||null;if(!h)throw Error(s(90));dn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Mo(l)}break e;case"textarea":Ke(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ni(t,!!a.multiple,i,!1)}}}var ri=!1;function Sc(t,i,a){if(ri)return t(i,a);ri=!0;try{var l=t(i);return l}finally{if(ri=!1,(Oi!==null||Mi!==null)&&(gu(),Oi&&(i=Oi,t=Mi,Mi=Oi=null,Vo(i),t)))for(i=0;i<t.length;i++)Vo(t[i])}}function ms(t,i){var a=t.stateNode;if(a===null)return null;var l=a[yt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xn=!1;if(qn)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){xn=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{xn=!1}var si=null,hr=null,ki=null;function Po(){if(ki)return ki;var t,i=hr,a=i.length,l,h="value"in si?si.value:si.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&i[a-l]===h[f-l];l++);return ki=h.slice(t,1<l?1-l:void 0)}function ai(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function oi(){return!0}function Uo(){return!1}function Dt(t){function i(a,l,h,f,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?oi:Uo,this.isPropagationStopped=Uo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),i}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Dt(He),gs=T({},He,{view:0,detail:0}),wc=Dt(gs),ha,da,li,ys=T({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==li&&(li&&t.type==="mousemove"?(ha=t.screenX-li.screenX,da=t.screenY-li.screenY):da=ha=0,li=t),ha)},movementY:function(t){return"movementY"in t?t.movementY:da}}),Rn=Dt(ys),Ac=T({},ys,{dataTransfer:0}),id=Dt(Ac),vs=T({},gs,{relatedTarget:0}),fa=Dt(vs),Lo=T({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),ma=Dt(Lo),xc=T({},He,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pa=Dt(xc),rd=T({},He,{data:0}),zo=Dt(rd),_s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ic[t])?!!i[t]:!1}function bs(){return Bo}var Cc=T({},gs,{key:function(t){if(t.key){var i=_s[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ai(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(t){return t.type==="keypress"?ai(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ai(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ga=Dt(Cc),Nc=T({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qo=Dt(Nc),ji=T({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),Dc=Dt(ji),Oc=T({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mc=Dt(Oc),kc=T({},ys,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=Dt(kc),tn=T({},He,{newState:0,oldState:0}),jc=Dt(tn),Vc=[9,13,27,32],ci=qn&&"CompositionEvent"in window,u=null;qn&&"documentMode"in document&&(u=document.documentMode);var g=qn&&"TextEvent"in window&&!u,_=qn&&(!ci||u&&8<u&&11>=u),S=" ",L=!1;function Q(t,i){switch(t){case"keyup":return Vc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ve=!1;function At(t,i){switch(t){case"compositionend":return ae(i);case"keypress":return i.which!==32?null:(L=!0,S);case"textInput":return t=i.data,t===S&&L?null:t;default:return null}}function Pe(t,i){if(Ve)return t==="compositionend"||!ci&&Q(t,i)?(t=Po(),ki=hr=si=null,Ve=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Ot={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ot[t.type]:i==="textarea"}function Vi(t,i,a,l){Oi?Mi?Mi.push(l):Mi=[l]:Oi=l,i=Eu(i,"onChange"),0<i.length&&(a=new ua("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Lt=null,ui=null;function Ho(t){Av(t,0)}function Pc(t){var i=ni(t);if(Mo(i))return t}function Qp(t,i){if(t==="change")return i}var Yp=!1;if(qn){var sd;if(qn){var ad="oninput"in document;if(!ad){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),ad=typeof Kp.oninput=="function"}sd=ad}else sd=!1;Yp=sd&&(!document.documentMode||9<document.documentMode)}function $p(){Lt&&(Lt.detachEvent("onpropertychange",Xp),ui=Lt=null)}function Xp(t){if(t.propertyName==="value"&&Pc(ui)){var i=[];Vi(i,ui,t,An(t)),Sc(Ho,i)}}function QE(t,i,a){t==="focusin"?($p(),Lt=i,ui=a,Lt.attachEvent("onpropertychange",Xp)):t==="focusout"&&$p()}function YE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pc(ui)}function KE(t,i){if(t==="click")return Pc(i)}function $E(t,i){if(t==="input"||t==="change")return Pc(i)}function XE(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var fn=typeof Object.is=="function"?Object.is:XE;function Fo(t,i){if(fn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Jr.call(i,h)||!fn(t[h],i[h]))return!1}return!0}function Wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zp(t,i){var a=Wp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wp(a)}}function Jp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Jp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function eg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=us(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=us(t.document)}return i}function od(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var WE=qn&&"documentMode"in document&&11>=document.documentMode,va=null,ld=null,Go=null,cd=!1;function tg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cd||va==null||va!==us(l)||(l=va,"selectionStart"in l&&od(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Go&&Fo(Go,l)||(Go=l,l=Eu(ld,"onSelect"),0<l.length&&(i=new ua("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=va)))}function Ts(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var _a={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},ud={},ng={};qn&&(ng=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function Es(t){if(ud[t])return ud[t];if(!_a[t])return t;var i=_a[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in ng)return ud[t]=i[a];return t}var ig=Es("animationend"),rg=Es("animationiteration"),sg=Es("animationstart"),ZE=Es("transitionrun"),JE=Es("transitionstart"),eS=Es("transitioncancel"),ag=Es("transitionend"),og=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function Hn(t,i){og.set(t,i),Bn(i,[t])}var lg=new WeakMap;function In(t,i){if(typeof t=="object"&&t!==null){var a=lg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:oa(i)},lg.set(t,i),i)}return{value:t,source:i,stack:oa(i)}}var Cn=[],ba=0,dd=0;function Uc(){for(var t=ba,i=dd=ba=0;i<t;){var a=Cn[i];Cn[i++]=null;var l=Cn[i];Cn[i++]=null;var h=Cn[i];Cn[i++]=null;var f=Cn[i];if(Cn[i++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&cg(a,h,f)}}function Lc(t,i,a,l){Cn[ba++]=t,Cn[ba++]=i,Cn[ba++]=a,Cn[ba++]=l,dd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function fd(t,i,a,l){return Lc(t,i,a,l),zc(t)}function Ta(t,i){return Lc(t,null,null,i),zc(t)}function cg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Qt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function zc(t){if(50<gl)throw gl=0,bf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ea={};function tS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,i,a,l){return new tS(t,i,a,l)}function md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pi(t,i){var a=t.alternate;return a===null?(a=mn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ug(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Bc(t,i,a,l,h,f){var b=0;if(l=t,typeof t=="function")md(t)&&(b=1);else if(typeof t=="string")b=iw(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=mn(31,a,i,h),t.elementType=N,t.lanes=f,t;case Y:return Ss(a.children,h,f,i);case re:b=8,h|=24;break;case X:return t=mn(12,a,i,h|2),t.elementType=X,t.lanes=f,t;case G:return t=mn(13,a,i,h),t.elementType=G,t.lanes=f,t;case fe:return t=mn(19,a,i,h),t.elementType=fe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:case te:b=10;break e;case ie:b=9;break e;case ce:b=11;break e;case O:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=mn(b,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function Ss(t,i,a,l){return t=mn(7,t,l,i),t.lanes=a,t}function pd(t,i,a){return t=mn(6,t,null,i),t.lanes=a,t}function gd(t,i,a){return i=mn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Sa=[],wa=0,qc=null,Hc=0,Nn=[],Dn=0,ws=null,Ui=1,Li="";function As(t,i){Sa[wa++]=Hc,Sa[wa++]=qc,qc=t,Hc=i}function hg(t,i,a){Nn[Dn++]=Ui,Nn[Dn++]=Li,Nn[Dn++]=ws,ws=t;var l=Ui;t=Li;var h=32-Qt(l)-1;l&=~(1<<h),a+=1;var f=32-Qt(i)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Ui=1<<32-Qt(i)+h|a<<h|l,Li=f+t}else Ui=1<<f|a<<h|l,Li=t}function yd(t){t.return!==null&&(As(t,1),hg(t,1,0))}function vd(t){for(;t===qc;)qc=Sa[--wa],Sa[wa]=null,Hc=Sa[--wa],Sa[wa]=null;for(;t===ws;)ws=Nn[--Dn],Nn[Dn]=null,Li=Nn[--Dn],Nn[Dn]=null,Ui=Nn[--Dn],Nn[Dn]=null}var nn=null,ct=null,qe=!1,xs=null,hi=!1,_d=Error(s(519));function Rs(t){var i=Error(s(418,""));throw Ko(In(i,t)),_d}function dg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[wt]=t,i[yt]=l,a){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(a=0;a<vl.length;a++)Oe(vl[a],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),hs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),la(i);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),ds(i,l.value,l.defaultValue,l.children),la(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Cv(i.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),l.onScroll!=null&&Oe("scroll",i),l.onScrollEnd!=null&&Oe("scrollend",i),l.onClick!=null&&(i.onclick=Su),i=!0):i=!1,i||Rs(t)}function fg(t){for(nn=t.return;nn;)switch(nn.tag){case 5:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:nn=nn.return}}function Qo(t){if(t!==nn)return!1;if(!qe)return fg(t),qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Vf(t.type,t.memoizedProps)),a=!a),a&&ct&&Rs(t),fg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ct=Gn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ct=null}}else i===27?(i=ct,Rr(t.type)?(t=zf,zf=null,ct=t):ct=i):ct=nn?Gn(t.stateNode.nextSibling):null;return!0}function Yo(){ct=nn=null,qe=!1}function mg(){var t=xs;return t!==null&&(an===null?an=t:an.push.apply(an,t),xs=null),t}function Ko(t){xs===null?xs=[t]:xs.push(t)}var bd=ne(null),Is=null,zi=null;function dr(t,i,a){se(bd,i._currentValue),i._currentValue=a}function Bi(t){t._currentValue=bd.current,le(bd)}function Td(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Ed(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var I=0;I<i.length;I++)if(E.context===i[I]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Td(f.return,a,t),l||(b=null);break e}f=E.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),Td(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function $o(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=h.type;fn(h.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(h===Nt.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(wl):t=[wl])}h=h.return}t!==null&&Ed(i,t,a,l),i.flags|=262144}function Fc(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cs(t){Is=t,zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Yt(t){return pg(Is,t)}function Gc(t,i){return Is===null&&Cs(t),pg(t,i)}function pg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},zi===null){if(t===null)throw Error(s(308));zi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else zi=zi.next=i;return a}var nS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},iS=r.unstable_scheduleCallback,rS=r.unstable_NormalPriority,Rt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new nS,data:new Map,refCount:0}}function Xo(t){t.refCount--,t.refCount===0&&iS(rS,function(){t.controller.abort()})}var Wo=null,wd=0,Aa=0,xa=null;function sS(t,i){if(Wo===null){var a=Wo=[];wd=0,Aa=Rf(),xa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return wd++,i.then(gg,gg),i}function gg(){if(--wd===0&&Wo!==null){xa!==null&&(xa.status="fulfilled");var t=Wo;Wo=null,Aa=0,xa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function aS(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var yg=K.S;K.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&sS(t,i),yg!==null&&yg(t,i)};var Ns=ne(null);function Ad(){var t=Ns.current;return t!==null?t:et.pooledCache}function Qc(t,i){i===null?se(Ns,Ns.current):se(Ns,i.pool)}function vg(){var t=Ad();return t===null?null:{parent:Rt._currentValue,pool:t}}var Zo=Error(s(460)),_g=Error(s(474)),Yc=Error(s(542)),xd={then:function(){}};function bg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Kc(){}function Tg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Kc,Kc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Sg(t),t;default:if(typeof i.status=="string")i.then(Kc,Kc);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Sg(t),t}throw Jo=i,Zo}}var Jo=null;function Eg(){if(Jo===null)throw Error(s(459));var t=Jo;return Jo=null,t}function Sg(t){if(t===Zo||t===Yc)throw Error(s(483))}var fr=!1;function Rd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=zc(t),cg(t,null,a),i}return Lc(t,l,i,a),zc(t)}function el(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Io(t,a)}}function Cd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Nd=!1;function tl(){if(Nd){var t=xa;if(t!==null)throw t}}function nl(t,i,a,l){Nd=!1;var h=t.updateQueue;fr=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var I=E,B=I.next;I.next=null,b===null?f=B:b.next=B,b=I;var $=t.alternate;$!==null&&($=$.updateQueue,E=$.lastBaseUpdate,E!==b&&(E===null?$.firstBaseUpdate=B:E.next=B,$.lastBaseUpdate=I))}if(f!==null){var J=h.baseState;b=0,$=B=I=null,E=f;do{var q=E.lane&-536870913,H=q!==E.lane;if(H?(Ue&q)===q:(l&q)===q){q!==0&&q===Aa&&(Nd=!0),$!==null&&($=$.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ee=t,_e=E;q=i;var We=a;switch(_e.tag){case 1:if(Ee=_e.payload,typeof Ee=="function"){J=Ee.call(We,J,q);break e}J=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=_e.payload,q=typeof Ee=="function"?Ee.call(We,J,q):Ee,q==null)break e;J=T({},J,q);break e;case 2:fr=!0}}q=E.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},$===null?(B=$=H,I=J):$=$.next=H,b|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;H=E,E=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);$===null&&(I=J),h.baseState=I,h.firstBaseUpdate=B,h.lastBaseUpdate=$,f===null&&(h.shared.lanes=0),Sr|=b,t.lanes=b,t.memoizedState=J}}function wg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Ag(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)wg(a[t],i)}var Ra=ne(null),$c=ne(0);function xg(t,i){t=Ki,se($c,t),se(Ra,i),Ki=t|i.baseLanes}function Dd(){se($c,Ki),se(Ra,Ra.current)}function Od(){Ki=$c.current,le(Ra),le($c)}var gr=0,Ie=null,$e=null,_t=null,Xc=!1,Ia=!1,Ds=!1,Wc=0,il=0,Ca=null,oS=0;function dt(){throw Error(s(321))}function Md(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!fn(t[a],i[a]))return!1;return!0}function kd(t,i,a,l,h,f){return gr=f,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?cy:uy,Ds=!1,f=a(l,h),Ds=!1,Ia&&(f=Ig(i,a,l,h)),Rg(t),f}function Rg(t){K.H=iu;var i=$e!==null&&$e.next!==null;if(gr=0,_t=$e=Ie=null,Xc=!1,il=0,Ca=null,i)throw Error(s(300));t===null||Mt||(t=t.dependencies,t!==null&&Fc(t)&&(Mt=!0))}function Ig(t,i,a,l){Ie=t;var h=0;do{if(Ia&&(Ca=null),il=0,Ia=!1,25<=h)throw Error(s(301));if(h+=1,_t=$e=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=mS,f=i(a,l)}while(Ia);return f}function lS(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?rl(i):i,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(Ie.flags|=1024),i}function jd(){var t=Wc!==0;return Wc=0,t}function Vd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Pd(t){if(Xc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Xc=!1}gr=0,_t=$e=Ie=null,Ia=!1,il=Wc=0,Ca=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ie.memoizedState=_t=t:_t=_t.next=t,_t}function bt(){if($e===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var i=_t===null?Ie.memoizedState:_t.next;if(i!==null)_t=i,$e=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},_t===null?Ie.memoizedState=_t=t:_t=_t.next=t}return _t}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(t){var i=il;return il+=1,Ca===null&&(Ca=[]),t=Tg(Ca,t,i),i=Ie,(_t===null?i.memoizedState:_t.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?cy:uy),t}function Zc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return rl(t);if(t.$$typeof===te)return Yt(t)}throw Error(s(438,String(t)))}function Ld(t){var i=null,a=Ie.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ud(),Ie.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=k;return i.index++,a}function qi(t,i){return typeof i=="function"?i(t):i}function Jc(t){var i=bt();return zd(i,$e,t)}function zd(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var E=b=null,I=null,B=i,$=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(Ue&J)===J:(gr&J)===J){var q=B.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===Aa&&($=!0);else if((gr&q)===q){B=B.next,q===Aa&&($=!0);continue}else J={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(E=I=J,b=f):I=I.next=J,Ie.lanes|=q,Sr|=q;J=B.action,Ds&&a(f,J),f=B.hasEagerState?B.eagerState:a(f,J)}else q={lane:J,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(E=I=q,b=f):I=I.next=q,Ie.lanes|=J,Sr|=J;B=B.next}while(B!==null&&B!==i);if(I===null?b=f:I.next=E,!fn(f,t.memoizedState)&&(Mt=!0,$&&(a=xa,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=I,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Bd(t){var i=bt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);fn(f,i.memoizedState)||(Mt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function Cg(t,i,a){var l=Ie,h=bt(),f=qe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!fn(($e||h).memoizedState,a);b&&(h.memoizedState=a,Mt=!0),h=h.queue;var E=Og.bind(null,l,h,t);if(sl(2048,8,E,[t]),h.getSnapshot!==i||b||_t!==null&&_t.memoizedState.tag&1){if(l.flags|=2048,Na(9,eu(),Dg.bind(null,l,h,a,i),null),et===null)throw Error(s(349));f||(gr&124)!==0||Ng(l,i,a)}return a}function Ng(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ie.updateQueue,i===null?(i=Ud(),Ie.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Dg(t,i,a,l){i.value=a,i.getSnapshot=l,Mg(i)&&kg(t)}function Og(t,i,a){return a(function(){Mg(i)&&kg(t)})}function Mg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!fn(t,a)}catch{return!0}}function kg(t){var i=Ta(t,2);i!==null&&_n(i,t,2)}function qd(t){var i=rn();if(typeof t=="function"){var a=t;if(t=a(),Ds){hn(!0);try{a()}finally{hn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:t},i}function jg(t,i,a,l){return t.baseState=a,zd(t,$e,typeof l=="function"?l:qi)}function cS(t,i,a,l,h){if(nu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};K.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,Vg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Vg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=K.T,b={};K.T=b;try{var E=a(h,l),I=K.S;I!==null&&I(b,E),Pg(t,i,E)}catch(B){Hd(t,i,B)}finally{K.T=f}}else try{f=a(h,l),Pg(t,i,f)}catch(B){Hd(t,i,B)}}function Pg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ug(t,i,l)},function(l){return Hd(t,i,l)}):Ug(t,i,a)}function Ug(t,i,a){i.status="fulfilled",i.value=a,Lg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Vg(t,a)))}function Hd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Lg(i),i=i.next;while(i!==l)}t.action=null}function Lg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function zg(t,i){return i}function Bg(t,i){if(qe){var a=et.formState;if(a!==null){e:{var l=Ie;if(qe){if(ct){t:{for(var h=ct,f=hi;h.nodeType!==8;){if(!f){h=null;break t}if(h=Gn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ct=Gn(h.nextSibling),l=h.data==="F!";break e}}Rs(l)}l=!1}l&&(i=a[0])}}return a=rn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:i},a.queue=l,a=ay.bind(null,Ie,l),l.dispatch=a,l=qd(!1),f=Kd.bind(null,Ie,!1,l.queue),l=rn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=cS.bind(null,Ie,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function qg(t){var i=bt();return Hg(i,$e,t)}function Hg(t,i,a){if(i=zd(t,i,zg)[0],t=Jc(qi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=rl(i)}catch(b){throw b===Zo?Yc:b}else l=i;i=bt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ie.flags|=2048,Na(9,eu(),uS.bind(null,h,a),null)),[l,f,t]}function uS(t,i){t.action=i}function Fg(t){var i=bt(),a=$e;if(a!==null)return Hg(i,a,t);bt(),i=i.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Na(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ie.updateQueue,i===null&&(i=Ud(),Ie.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function eu(){return{destroy:void 0,resource:void 0}}function Gg(){return bt().memoizedState}function tu(t,i,a,l){var h=rn();l=l===void 0?null:l,Ie.flags|=t,h.memoizedState=Na(1|i,eu(),a,l)}function sl(t,i,a,l){var h=bt();l=l===void 0?null:l;var f=h.memoizedState.inst;$e!==null&&l!==null&&Md(l,$e.memoizedState.deps)?h.memoizedState=Na(i,f,a,l):(Ie.flags|=t,h.memoizedState=Na(1|i,f,a,l))}function Qg(t,i){tu(8390656,8,t,i)}function Yg(t,i){sl(2048,8,t,i)}function Kg(t,i){return sl(4,2,t,i)}function $g(t,i){return sl(4,4,t,i)}function Xg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Wg(t,i,a){a=a!=null?a.concat([t]):null,sl(4,4,Xg.bind(null,i,t),a)}function Fd(){}function Zg(t,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Md(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Jg(t,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Md(i,l[1]))return l[0];if(l=t(),Ds){hn(!0);try{t()}finally{hn(!1)}}return a.memoizedState=[l,i],l}function Gd(t,i,a){return a===void 0||(gr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=nv(),Ie.lanes|=t,Sr|=t,a)}function ey(t,i,a,l){return fn(a,i)?a:Ra.current!==null?(t=Gd(t,a,l),fn(t,i)||(Mt=!0),t):(gr&42)===0?(Mt=!0,t.memoizedState=a):(t=nv(),Ie.lanes|=t,Sr|=t,i)}function ty(t,i,a,l,h){var f=oe.p;oe.p=f!==0&&8>f?f:8;var b=K.T,E={};K.T=E,Kd(t,!1,i,a);try{var I=h(),B=K.S;if(B!==null&&B(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var $=aS(I,l);al(t,i,$,vn(t))}else al(t,i,l,vn(t))}catch(J){al(t,i,{then:function(){},status:"rejected",reason:J},vn())}finally{oe.p=f,K.T=b}}function hS(){}function Qd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=ny(t).queue;ty(t,h,i,ge,a===null?hS:function(){return iy(t),a(l)})}function ny(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function iy(t){var i=ny(t).next.queue;al(t,i,{},vn())}function Yd(){return Yt(wl)}function ry(){return bt().memoizedState}function sy(){return bt().memoizedState}function dS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=vn();t=mr(a);var l=pr(i,t,a);l!==null&&(_n(l,i,a),el(l,i,a)),i={cache:Sd()},t.payload=i;return}i=i.return}}function fS(t,i,a){var l=vn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},nu(t)?oy(i,a):(a=fd(t,i,a,l),a!==null&&(_n(a,t,l),ly(a,i,l)))}function ay(t,i,a){var l=vn();al(t,i,a,l)}function al(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(nu(t))oy(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var b=i.lastRenderedState,E=f(b,a);if(h.hasEagerState=!0,h.eagerState=E,fn(E,b))return Lc(t,i,h,0),et===null&&Uc(),!1}catch{}finally{}if(a=fd(t,i,h,l),a!==null)return _n(a,t,l),ly(a,i,l),!0}return!1}function Kd(t,i,a,l){if(l={lane:2,revertLane:Rf(),action:l,hasEagerState:!1,eagerState:null,next:null},nu(t)){if(i)throw Error(s(479))}else i=fd(t,a,l,2),i!==null&&_n(i,t,2)}function nu(t){var i=t.alternate;return t===Ie||i!==null&&i===Ie}function oy(t,i){Ia=Xc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ly(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Io(t,a)}}var iu={readContext:Yt,use:Zc,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt},cy={readContext:Yt,use:Zc,useCallback:function(t,i){return rn().memoizedState=[t,i===void 0?null:i],t},useContext:Yt,useEffect:Qg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,tu(4194308,4,Xg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return tu(4194308,4,t,i)},useInsertionEffect:function(t,i){tu(4,2,t,i)},useMemo:function(t,i){var a=rn();i=i===void 0?null:i;var l=t();if(Ds){hn(!0);try{t()}finally{hn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=rn();if(a!==void 0){var h=a(i);if(Ds){hn(!0);try{a(i)}finally{hn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=fS.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var i=rn();return t={current:t},i.memoizedState=t},useState:function(t){t=qd(t);var i=t.queue,a=ay.bind(null,Ie,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Fd,useDeferredValue:function(t,i){var a=rn();return Gd(a,t,i)},useTransition:function(){var t=qd(!1);return t=ty.bind(null,Ie,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ie,h=rn();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),et===null)throw Error(s(349));(Ue&124)!==0||Ng(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Qg(Og.bind(null,l,f,t),[t]),l.flags|=2048,Na(9,eu(),Dg.bind(null,l,f,a,i),null),a},useId:function(){var t=rn(),i=et.identifierPrefix;if(qe){var a=Li,l=Ui;a=(l&~(1<<32-Qt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Wc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=oS++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Yd,useFormState:Bg,useActionState:Bg,useOptimistic:function(t){var i=rn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Kd.bind(null,Ie,!0,a),a.dispatch=i,[t,i]},useMemoCache:Ld,useCacheRefresh:function(){return rn().memoizedState=dS.bind(null,Ie)}},uy={readContext:Yt,use:Zc,useCallback:Zg,useContext:Yt,useEffect:Yg,useImperativeHandle:Wg,useInsertionEffect:Kg,useLayoutEffect:$g,useMemo:Jg,useReducer:Jc,useRef:Gg,useState:function(){return Jc(qi)},useDebugValue:Fd,useDeferredValue:function(t,i){var a=bt();return ey(a,$e.memoizedState,t,i)},useTransition:function(){var t=Jc(qi)[0],i=bt().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:Cg,useId:ry,useHostTransitionStatus:Yd,useFormState:qg,useActionState:qg,useOptimistic:function(t,i){var a=bt();return jg(a,$e,t,i)},useMemoCache:Ld,useCacheRefresh:sy},mS={readContext:Yt,use:Zc,useCallback:Zg,useContext:Yt,useEffect:Yg,useImperativeHandle:Wg,useInsertionEffect:Kg,useLayoutEffect:$g,useMemo:Jg,useReducer:Bd,useRef:Gg,useState:function(){return Bd(qi)},useDebugValue:Fd,useDeferredValue:function(t,i){var a=bt();return $e===null?Gd(a,t,i):ey(a,$e.memoizedState,t,i)},useTransition:function(){var t=Bd(qi)[0],i=bt().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:Cg,useId:ry,useHostTransitionStatus:Yd,useFormState:Fg,useActionState:Fg,useOptimistic:function(t,i){var a=bt();return $e!==null?jg(a,$e,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ld,useCacheRefresh:sy},Da=null,ol=0;function ru(t){var i=ol;return ol+=1,Da===null&&(Da=[]),Tg(Da,t,i)}function ll(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function su(t,i){throw i.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function hy(t){var i=t._init;return i(t._payload)}function dy(t){function i(V,M){if(t){var z=V.deletions;z===null?(V.deletions=[M],V.flags|=16):z.push(M)}}function a(V,M){if(!t)return null;for(;M!==null;)i(V,M),M=M.sibling;return null}function l(V){for(var M=new Map;V!==null;)V.key!==null?M.set(V.key,V):M.set(V.index,V),V=V.sibling;return M}function h(V,M){return V=Pi(V,M),V.index=0,V.sibling=null,V}function f(V,M,z){return V.index=z,t?(z=V.alternate,z!==null?(z=z.index,z<M?(V.flags|=67108866,M):z):(V.flags|=67108866,M)):(V.flags|=1048576,M)}function b(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function E(V,M,z,Z){return M===null||M.tag!==6?(M=pd(z,V.mode,Z),M.return=V,M):(M=h(M,z),M.return=V,M)}function I(V,M,z,Z){var me=z.type;return me===Y?$(V,M,z.props.children,Z,z.key):M!==null&&(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&hy(me)===M.type)?(M=h(M,z.props),ll(M,z),M.return=V,M):(M=Bc(z.type,z.key,z.props,null,V.mode,Z),ll(M,z),M.return=V,M)}function B(V,M,z,Z){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=gd(z,V.mode,Z),M.return=V,M):(M=h(M,z.children||[]),M.return=V,M)}function $(V,M,z,Z,me){return M===null||M.tag!==7?(M=Ss(z,V.mode,Z,me),M.return=V,M):(M=h(M,z),M.return=V,M)}function J(V,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=pd(""+M,V.mode,z),M.return=V,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return z=Bc(M.type,M.key,M.props,null,V.mode,z),ll(z,M),z.return=V,z;case U:return M=gd(M,V.mode,z),M.return=V,M;case R:var Z=M._init;return M=Z(M._payload),J(V,M,z)}if(ot(M)||P(M))return M=Ss(M,V.mode,z,null),M.return=V,M;if(typeof M.then=="function")return J(V,ru(M),z);if(M.$$typeof===te)return J(V,Gc(V,M),z);su(V,M)}return null}function q(V,M,z,Z){var me=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return me!==null?null:E(V,M,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return z.key===me?I(V,M,z,Z):null;case U:return z.key===me?B(V,M,z,Z):null;case R:return me=z._init,z=me(z._payload),q(V,M,z,Z)}if(ot(z)||P(z))return me!==null?null:$(V,M,z,Z,null);if(typeof z.then=="function")return q(V,M,ru(z),Z);if(z.$$typeof===te)return q(V,M,Gc(V,z),Z);su(V,z)}return null}function H(V,M,z,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return V=V.get(z)||null,E(M,V,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return V=V.get(Z.key===null?z:Z.key)||null,I(M,V,Z,me);case U:return V=V.get(Z.key===null?z:Z.key)||null,B(M,V,Z,me);case R:var Ne=Z._init;return Z=Ne(Z._payload),H(V,M,z,Z,me)}if(ot(Z)||P(Z))return V=V.get(z)||null,$(M,V,Z,me,null);if(typeof Z.then=="function")return H(V,M,z,ru(Z),me);if(Z.$$typeof===te)return H(V,M,z,Gc(M,Z),me);su(M,Z)}return null}function Ee(V,M,z,Z){for(var me=null,Ne=null,pe=M,be=M=0,jt=null;pe!==null&&be<z.length;be++){pe.index>be?(jt=pe,pe=null):jt=pe.sibling;var ze=q(V,pe,z[be],Z);if(ze===null){pe===null&&(pe=jt);break}t&&pe&&ze.alternate===null&&i(V,pe),M=f(ze,M,be),Ne===null?me=ze:Ne.sibling=ze,Ne=ze,pe=jt}if(be===z.length)return a(V,pe),qe&&As(V,be),me;if(pe===null){for(;be<z.length;be++)pe=J(V,z[be],Z),pe!==null&&(M=f(pe,M,be),Ne===null?me=pe:Ne.sibling=pe,Ne=pe);return qe&&As(V,be),me}for(pe=l(pe);be<z.length;be++)jt=H(pe,V,be,z[be],Z),jt!==null&&(t&&jt.alternate!==null&&pe.delete(jt.key===null?be:jt.key),M=f(jt,M,be),Ne===null?me=jt:Ne.sibling=jt,Ne=jt);return t&&pe.forEach(function(Or){return i(V,Or)}),qe&&As(V,be),me}function _e(V,M,z,Z){if(z==null)throw Error(s(151));for(var me=null,Ne=null,pe=M,be=M=0,jt=null,ze=z.next();pe!==null&&!ze.done;be++,ze=z.next()){pe.index>be?(jt=pe,pe=null):jt=pe.sibling;var Or=q(V,pe,ze.value,Z);if(Or===null){pe===null&&(pe=jt);break}t&&pe&&Or.alternate===null&&i(V,pe),M=f(Or,M,be),Ne===null?me=Or:Ne.sibling=Or,Ne=Or,pe=jt}if(ze.done)return a(V,pe),qe&&As(V,be),me;if(pe===null){for(;!ze.done;be++,ze=z.next())ze=J(V,ze.value,Z),ze!==null&&(M=f(ze,M,be),Ne===null?me=ze:Ne.sibling=ze,Ne=ze);return qe&&As(V,be),me}for(pe=l(pe);!ze.done;be++,ze=z.next())ze=H(pe,V,be,ze.value,Z),ze!==null&&(t&&ze.alternate!==null&&pe.delete(ze.key===null?be:ze.key),M=f(ze,M,be),Ne===null?me=ze:Ne.sibling=ze,Ne=ze);return t&&pe.forEach(function(pw){return i(V,pw)}),qe&&As(V,be),me}function We(V,M,z,Z){if(typeof z=="object"&&z!==null&&z.type===Y&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case w:e:{for(var me=z.key;M!==null;){if(M.key===me){if(me=z.type,me===Y){if(M.tag===7){a(V,M.sibling),Z=h(M,z.props.children),Z.return=V,V=Z;break e}}else if(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&hy(me)===M.type){a(V,M.sibling),Z=h(M,z.props),ll(Z,z),Z.return=V,V=Z;break e}a(V,M);break}else i(V,M);M=M.sibling}z.type===Y?(Z=Ss(z.props.children,V.mode,Z,z.key),Z.return=V,V=Z):(Z=Bc(z.type,z.key,z.props,null,V.mode,Z),ll(Z,z),Z.return=V,V=Z)}return b(V);case U:e:{for(me=z.key;M!==null;){if(M.key===me)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(V,M.sibling),Z=h(M,z.children||[]),Z.return=V,V=Z;break e}else{a(V,M);break}else i(V,M);M=M.sibling}Z=gd(z,V.mode,Z),Z.return=V,V=Z}return b(V);case R:return me=z._init,z=me(z._payload),We(V,M,z,Z)}if(ot(z))return Ee(V,M,z,Z);if(P(z)){if(me=P(z),typeof me!="function")throw Error(s(150));return z=me.call(z),_e(V,M,z,Z)}if(typeof z.then=="function")return We(V,M,ru(z),Z);if(z.$$typeof===te)return We(V,M,Gc(V,z),Z);su(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(a(V,M.sibling),Z=h(M,z),Z.return=V,V=Z):(a(V,M),Z=pd(z,V.mode,Z),Z.return=V,V=Z),b(V)):a(V,M)}return function(V,M,z,Z){try{ol=0;var me=We(V,M,z,Z);return Da=null,me}catch(pe){if(pe===Zo||pe===Yc)throw pe;var Ne=mn(29,pe,null,V.mode);return Ne.lanes=Z,Ne.return=V,Ne}finally{}}}var Oa=dy(!0),fy=dy(!1),On=ne(null),di=null;function yr(t){var i=t.alternate;se(It,It.current&1),se(On,t),di===null&&(i===null||Ra.current!==null||i.memoizedState!==null)&&(di=t)}function my(t){if(t.tag===22){if(se(It,It.current),se(On,t),di===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(di=t)}}else vr()}function vr(){se(It,It.current),se(On,On.current)}function Hi(t){le(On),di===t&&(di=null),le(It)}var It=ne(0);function au(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Lf(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function $d(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Xd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=vn(),h=mr(l);h.payload=i,a!=null&&(h.callback=a),i=pr(t,h,l),i!==null&&(_n(i,t,l),el(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=vn(),h=mr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=pr(t,h,l),i!==null&&(_n(i,t,l),el(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=vn(),l=mr(a);l.tag=2,i!=null&&(l.callback=i),i=pr(t,l,a),i!==null&&(_n(i,t,a),el(i,t,a))}};function py(t,i,a,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):i.prototype&&i.prototype.isPureReactComponent?!Fo(a,l)||!Fo(h,f):!0}function gy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Xd.enqueueReplaceState(i,i.state,null)}function Os(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var ou=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function yy(t){ou(t)}function vy(t){console.error(t)}function _y(t){ou(t)}function lu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function by(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wd(t,i,a){return a=mr(a),a.tag=3,a.payload={element:null},a.callback=function(){lu(t,i)},a}function Ty(t){return t=mr(t),t.tag=3,t}function Ey(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){by(i,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){by(i,a,l),typeof h!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function pS(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&$o(i,a,h,!0),a=On.current,a!==null){switch(a.tag){case 13:return di===null?Ef():a.alternate===null&&ut===0&&(ut=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===xd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),wf(t,l,h)),!1;case 22:return a.flags|=65536,l===xd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),wf(t,l,h)),!1}throw Error(s(435,a.tag))}return wf(t,l,h),Ef(),!1}if(qe)return i=On.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==_d&&(t=Error(s(422),{cause:l}),Ko(In(t,a)))):(l!==_d&&(i=Error(s(423),{cause:l}),Ko(In(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=In(l,a),h=Wd(t.stateNode,l,h),Cd(t,h),ut!==4&&(ut=2)),!1;var f=Error(s(520),{cause:l});if(f=In(f,a),pl===null?pl=[f]:pl.push(f),ut!==4&&(ut=2),i===null)return!0;l=In(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Wd(a.stateNode,l,t),Cd(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(wr===null||!wr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ty(h),Ey(h,t,a,l),Cd(a,h),!1}a=a.return}while(a!==null);return!1}var Sy=Error(s(461)),Mt=!1;function zt(t,i,a,l){i.child=t===null?fy(i,null,a,l):Oa(i,t.child,a,l)}function wy(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var b={};for(var E in l)E!=="ref"&&(b[E]=l[E])}else b=l;return Cs(i),l=kd(t,i,a,b,f,h),E=jd(),t!==null&&!Mt?(Vd(t,i,h),Fi(t,i,h)):(qe&&E&&yd(i),i.flags|=1,zt(t,i,l,h),i.child)}function Ay(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!md(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,xy(t,i,f,l,h)):(t=Bc(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!af(t,h)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(b,l)&&t.ref===i.ref)return Fi(t,i,h)}return i.flags|=1,t=Pi(f,l),t.ref=i.ref,t.return=i,i.child=t}function xy(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(Fo(f,l)&&t.ref===i.ref)if(Mt=!1,i.pendingProps=l=f,af(t,h))(t.flags&131072)!==0&&(Mt=!0);else return i.lanes=t.lanes,Fi(t,i,h)}return Zd(t,i,a,l,h)}function Ry(t,i,a){var l=i.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return Iy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qc(i,f!==null?f.cachePool:null),f!==null?xg(i,f):Dd(),my(i);else return i.lanes=i.childLanes=536870912,Iy(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Qc(i,f.cachePool),xg(i,f),vr(),i.memoizedState=null):(t!==null&&Qc(i,null),Dd(),vr());return zt(t,i,h,a),i.child}function Iy(t,i,a,l){var h=Ad();return h=h===null?null:{parent:Rt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Qc(i,null),Dd(),my(i),t!==null&&$o(t,i,l,!0),null}function cu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Zd(t,i,a,l,h){return Cs(i),a=kd(t,i,a,l,void 0,h),l=jd(),t!==null&&!Mt?(Vd(t,i,h),Fi(t,i,h)):(qe&&l&&yd(i),i.flags|=1,zt(t,i,a,h),i.child)}function Cy(t,i,a,l,h,f){return Cs(i),i.updateQueue=null,a=Ig(i,l,a,h),Rg(t),l=jd(),t!==null&&!Mt?(Vd(t,i,f),Fi(t,i,f)):(qe&&l&&yd(i),i.flags|=1,zt(t,i,a,f),i.child)}function Ny(t,i,a,l,h){if(Cs(i),i.stateNode===null){var f=Ea,b=a.contextType;typeof b=="object"&&b!==null&&(f=Yt(b)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Xd,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},Rd(i),b=a.contextType,f.context=typeof b=="object"&&b!==null?Yt(b):Ea,f.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&($d(i,a,b,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Xd.enqueueReplaceState(f,f.state,null),nl(i,l,f,h),tl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var E=i.memoizedProps,I=Os(a,E);f.props=I;var B=f.context,$=a.contextType;b=Ea,typeof $=="object"&&$!==null&&(b=Yt($));var J=a.getDerivedStateFromProps;$=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||B!==b)&&gy(i,f,l,b),fr=!1;var q=i.memoizedState;f.state=q,nl(i,l,f,h),tl(),B=i.memoizedState,E||q!==B||fr?(typeof J=="function"&&($d(i,a,J,l),B=i.memoizedState),(I=fr||py(i,a,I,l,q,B,b))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),f.props=l,f.state=B,f.context=b,l=I):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,Id(t,i),b=i.memoizedProps,$=Os(a,b),f.props=$,J=i.pendingProps,q=f.context,B=a.contextType,I=Ea,typeof B=="object"&&B!==null&&(I=Yt(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==J||q!==I)&&gy(i,f,l,I),fr=!1,q=i.memoizedState,f.state=q,nl(i,l,f,h),tl();var H=i.memoizedState;b!==J||q!==H||fr||t!==null&&t.dependencies!==null&&Fc(t.dependencies)?(typeof E=="function"&&($d(i,a,E,l),H=i.memoizedState),($=fr||py(i,a,$,l,q,H,I)||t!==null&&t.dependencies!==null&&Fc(t.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,H,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,H,I)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),f.props=l,f.state=H,f.context=I,l=$):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,cu(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=Oa(i,t.child,null,h),i.child=Oa(i,null,a,h)):zt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=Fi(t,i,h),t}function Dy(t,i,a,l){return Yo(),i.flags|=256,zt(t,i,a,l),i.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ef(t){return{baseLanes:t,cachePool:vg()}}function tf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Mn),t}function Oy(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(It.current&2)!==0),b&&(h=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,t===null){if(qe){if(h?yr(i):vr(),qe){var E=ct,I;if(I=E){e:{for(I=E,E=hi;I.nodeType!==8;){if(!E){E=null;break e}if(I=Gn(I.nextSibling),I===null){E=null;break e}}E=I}E!==null?(i.memoizedState={dehydrated:E,treeContext:ws!==null?{id:Ui,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},I=mn(18,null,null,0),I.stateNode=E,I.return=i,i.child=I,nn=i,ct=null,I=!0):I=!1}I||Rs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Lf(E)?i.lanes=32:i.lanes=536870912,null;Hi(i)}return E=l.children,l=l.fallback,h?(vr(),h=i.mode,E=uu({mode:"hidden",children:E},h),l=Ss(l,h,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,h=i.child,h.memoizedState=ef(a),h.childLanes=tf(t,b,a),i.memoizedState=Jd,l):(yr(i),nf(i,E))}if(I=t.memoizedState,I!==null&&(E=I.dehydrated,E!==null)){if(f)i.flags&256?(yr(i),i.flags&=-257,i=rf(t,i,a)):i.memoizedState!==null?(vr(),i.child=t.child,i.flags|=128,i=null):(vr(),h=l.fallback,E=i.mode,l=uu({mode:"visible",children:l.children},E),h=Ss(h,E,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Oa(i,t.child,null,a),l=i.child,l.memoizedState=ef(a),l.childLanes=tf(t,b,a),i.memoizedState=Jd,i=h);else if(yr(i),Lf(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var B=b.dgst;b=B,l=Error(s(419)),l.stack="",l.digest=b,Ko({value:l,source:null,stack:null}),i=rf(t,i,a)}else if(Mt||$o(t,i,a,!1),b=(a&t.childLanes)!==0,Mt||b){if(b=et,b!==null&&(l=a&-a,l=(l&42)!==0?1:sr(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,Ta(t,l),_n(b,t,l),Sy;E.data==="$?"||Ef(),i=rf(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,ct=Gn(E.nextSibling),nn=i,qe=!0,xs=null,hi=!1,t!==null&&(Nn[Dn++]=Ui,Nn[Dn++]=Li,Nn[Dn++]=ws,Ui=t.id,Li=t.overflow,ws=i),i=nf(i,l.children),i.flags|=4096);return i}return h?(vr(),h=l.fallback,E=i.mode,I=t.child,B=I.sibling,l=Pi(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,B!==null?h=Pi(B,h):(h=Ss(h,E,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,E=t.child.memoizedState,E===null?E=ef(a):(I=E.cachePool,I!==null?(B=Rt._currentValue,I=I.parent!==B?{parent:B,pool:B}:I):I=vg(),E={baseLanes:E.baseLanes|a,cachePool:I}),h.memoizedState=E,h.childLanes=tf(t,b,a),i.memoizedState=Jd,l):(yr(i),a=t.child,t=a.sibling,a=Pi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(b=i.deletions,b===null?(i.deletions=[t],i.flags|=16):b.push(t)),i.child=a,i.memoizedState=null,a)}function nf(t,i){return i=uu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function uu(t,i){return t=mn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function rf(t,i,a){return Oa(i,t.child,null,a),t=nf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function My(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Td(t.return,i,a)}function sf(t,i,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function ky(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;if(zt(t,i,l.children,a),l=It.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&My(t,a,i);else if(t.tag===19)My(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(It,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&au(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),sf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&au(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}sf(i,!0,a,null,f);break;case"together":sf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Fi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Sr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if($o(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Pi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Pi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function af(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Fc(t)))}function gS(t,i,a){switch(i.tag){case 3:Je(i,i.stateNode.containerInfo),dr(i,Rt,t.memoizedState.cache),Yo();break;case 27:case 5:rr(i);break;case 4:Je(i,i.stateNode.containerInfo);break;case 10:dr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(yr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Oy(t,i,a):(yr(i),t=Fi(t,i,a),t!==null?t.sibling:null);yr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||($o(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return ky(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(It,It.current),l)break;return null;case 22:case 23:return i.lanes=0,Ry(t,i,a);case 24:dr(i,Rt,t.memoizedState.cache)}return Fi(t,i,a)}function jy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Mt=!0;else{if(!af(t,a)&&(i.flags&128)===0)return Mt=!1,gS(t,i,a);Mt=(t.flags&131072)!==0}else Mt=!1,qe&&(i.flags&1048576)!==0&&hg(i,Hc,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")md(l)?(t=Os(l,t),i.tag=1,i=Ny(null,i,l,t,a)):(i.tag=0,i=Zd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ce){i.tag=11,i=wy(null,i,l,t,a);break e}else if(h===O){i.tag=14,i=Ay(null,i,l,t,a);break e}}throw i=Pt(l)||l,Error(s(306,i,""))}}return i;case 0:return Zd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Os(l,i.pendingProps),Ny(t,i,l,h,a);case 3:e:{if(Je(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,Id(t,i),nl(i,l,null,a);var b=i.memoizedState;if(l=b.cache,dr(i,Rt,l),l!==f.cache&&Ed(i,[Rt],a,!0),tl(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Dy(t,i,l,a);break e}else if(l!==h){h=In(Error(s(424)),i),Ko(h),i=Dy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ct=Gn(t.firstChild),nn=i,qe=!0,xs=null,hi=!0,a=fy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Yo(),l===h){i=Fi(t,i,a);break e}zt(t,i,l,a)}i=i.child}return i;case 26:return cu(t,i),t===null?(a=Lv(i.type,null,i.pendingProps,null))?i.memoizedState=a:qe||(a=i.type,t=i.pendingProps,l=wu(we.current).createElement(a),l[wt]=i,l[yt]=t,qt(l,a,t),ht(l),i.stateNode=l):i.memoizedState=Lv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return rr(i),t===null&&qe&&(l=i.stateNode=Vv(i.type,i.pendingProps,we.current),nn=i,hi=!0,h=ct,Rr(i.type)?(zf=h,ct=Gn(l.firstChild)):ct=h),zt(t,i,i.pendingProps.children,a),cu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&qe&&((h=l=ct)&&(l=FS(l,i.type,i.pendingProps,hi),l!==null?(i.stateNode=l,nn=i,ct=Gn(l.firstChild),hi=!1,h=!0):h=!1),h||Rs(i)),rr(i),h=i.type,f=i.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,Vf(h,f)?l=null:b!==null&&Vf(h,b)&&(i.flags|=32),i.memoizedState!==null&&(h=kd(t,i,lS,null,null,a),wl._currentValue=h),cu(t,i),zt(t,i,l,a),i.child;case 6:return t===null&&qe&&((t=a=ct)&&(a=GS(a,i.pendingProps,hi),a!==null?(i.stateNode=a,nn=i,ct=null,t=!0):t=!1),t||Rs(i)),null;case 13:return Oy(t,i,a);case 4:return Je(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Oa(i,null,l,a):zt(t,i,l,a),i.child;case 11:return wy(t,i,i.type,i.pendingProps,a);case 7:return zt(t,i,i.pendingProps,a),i.child;case 8:return zt(t,i,i.pendingProps.children,a),i.child;case 12:return zt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,dr(i,i.type,l.value),zt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Cs(i),h=Yt(h),l=l(h),i.flags|=1,zt(t,i,l,a),i.child;case 14:return Ay(t,i,i.type,i.pendingProps,a);case 15:return xy(t,i,i.type,i.pendingProps,a);case 19:return ky(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=uu(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Pi(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Ry(t,i,a);case 24:return Cs(i),l=Yt(Rt),t===null?(h=Ad(),h===null&&(h=et,f=Sd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},Rd(i),dr(i,Rt,h)):((t.lanes&a)!==0&&(Id(t,i),nl(i,null,null,a),tl()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),dr(i,Rt,l)):(l=f.cache,dr(i,Rt,l),l!==h.cache&&Ed(i,[Rt],a,!0))),zt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Gi(t){t.flags|=4}function Vy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Fv(i)){if(i=On.current,i!==null&&((Ue&4194048)===Ue?di!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||i!==di))throw Jo=xd,_g;t.flags|=8192}}function hu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?xo():536870912,t.lanes|=i,Va|=i)}function cl(t,i){if(!qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function st(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function yS(t,i,a){var l=i.pendingProps;switch(vd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(i),null;case 1:return st(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Bi(Rt),Jn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Qo(i)?Gi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,mg())),st(i),null;case 26:return a=i.memoizedState,t===null?(Gi(i),a!==null?(st(i),Vy(i,a)):(st(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Gi(i),st(i),Vy(i,a)):(st(i),i.flags&=-16777217):(t.memoizedProps!==l&&Gi(i),st(i),i.flags&=-16777217),null;case 27:wi(i),a=we.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return st(i),null}t=ve.current,Qo(i)?dg(i):(t=Vv(h,l,a),i.stateNode=t,Gi(i))}return st(i),null;case 5:if(wi(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return st(i),null}if(t=ve.current,Qo(i))dg(i);else{switch(h=wu(we.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[wt]=i,t[yt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(qt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Gi(i)}}return st(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=we.current,Qo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=nn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[wt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Cv(t.nodeValue,a)),t||Rs(i)}else t=wu(t).createTextNode(l),t[wt]=i,i.stateNode=t}return st(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Qo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[wt]=i}else Yo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),h=!1}else h=mg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Hi(i),i):(Hi(i),null)}if(Hi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),hu(i,i.updateQueue),st(i),null;case 4:return Jn(),t===null&&Df(i.stateNode.containerInfo),st(i),null;case 10:return Bi(i.type),st(i),null;case 19:if(le(It),h=i.memoizedState,h===null)return st(i),null;if(l=(i.flags&128)!==0,f=h.rendering,f===null)if(l)cl(h,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=au(t),f!==null){for(i.flags|=128,cl(h,!1),t=f.updateQueue,i.updateQueue=t,hu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ug(a,t),a=a.sibling;return se(It,It.current&1|2),i.child}t=t.sibling}h.tail!==null&&En()>mu&&(i.flags|=128,l=!0,cl(h,!1),i.lanes=4194304)}else{if(!l)if(t=au(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,hu(i,t),cl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qe)return st(i),null}else 2*En()-h.renderingStartTime>mu&&a!==536870912&&(i.flags|=128,l=!0,cl(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=En(),i.sibling=null,t=It.current,se(It,l?t&1|2:t&1),i):(st(i),null);case 22:case 23:return Hi(i),Od(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(st(i),i.subtreeFlags&6&&(i.flags|=8192)):st(i),a=i.updateQueue,a!==null&&hu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&le(Ns),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Bi(Rt),st(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function vS(t,i){switch(vd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Bi(Rt),Jn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return wi(i),null;case 13:if(Hi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Yo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return le(It),null;case 4:return Jn(),null;case 10:return Bi(i.type),null;case 22:case 23:return Hi(i),Od(),t!==null&&le(Ns),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Bi(Rt),null;case 25:return null;default:return null}}function Py(t,i){switch(vd(i),i.tag){case 3:Bi(Rt),Jn();break;case 26:case 27:case 5:wi(i);break;case 4:Jn();break;case 13:Hi(i);break;case 19:le(It);break;case 10:Bi(i.type);break;case 22:case 23:Hi(i),Od(),t!==null&&le(Ns);break;case 24:Bi(Rt)}}function ul(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==h)}}catch(E){Ze(i,i.return,E)}}function _r(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,h=i;var I=a,B=E;try{B()}catch($){Ze(h,I,$)}}}l=l.next}while(l!==f)}}catch($){Ze(i,i.return,$)}}function Uy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Ag(i,a)}catch(l){Ze(t,t.return,l)}}}function Ly(t,i,a){a.props=Os(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ze(t,i,l)}}function hl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Ze(t,i,h)}}function fi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Ze(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(t,i,h)}else a.current=null}function zy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Ze(t,t.return,h)}}function of(t,i,a){try{var l=t.stateNode;LS(l,t.type,a,i),l[yt]=i}catch(h){Ze(t,t.return,h)}}function By(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Rr(t.type)||t.tag===4}function lf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||By(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Rr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Su));else if(l!==4&&(l===27&&Rr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(cf(t,i,a),t=t.sibling;t!==null;)cf(t,i,a),t=t.sibling}function du(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Rr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(du(t,i,a),t=t.sibling;t!==null;)du(t,i,a),t=t.sibling}function qy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);qt(i,l,a),i[wt]=t,i[yt]=a}catch(f){Ze(t,t.return,f)}}var Qi=!1,ft=!1,uf=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,kt=null;function _S(t,i){if(t=t.containerInfo,kf=Nu,t=eg(t),od(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,E=-1,I=-1,B=0,$=0,J=t,q=null;t:for(;;){for(var H;J!==a||h!==0&&J.nodeType!==3||(E=b+h),J!==f||l!==0&&J.nodeType!==3||(I=b+l),J.nodeType===3&&(b+=J.nodeValue.length),(H=J.firstChild)!==null;)q=J,J=H;for(;;){if(J===t)break t;if(q===a&&++B===h&&(E=b),q===f&&++$===l&&(I=b),(H=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=H}a=E===-1||I===-1?null:{start:E,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(jf={focusedElem:t,selectionRange:a},Nu=!1,kt=i;kt!==null;)if(i=kt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,kt=t;else for(;kt!==null;){switch(i=kt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ee=Os(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ee,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Ze(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Uf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Uf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,kt=t;break}kt=i.return}}function Fy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:br(t,a),l&4&&ul(5,a);break;case 1:if(br(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(b){Ze(a,a.return,b)}else{var h=Os(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Ze(a,a.return,b)}}l&64&&Uy(a),l&512&&hl(a,a.return);break;case 3:if(br(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ag(t,i)}catch(b){Ze(a,a.return,b)}}break;case 27:i===null&&l&4&&qy(a);case 26:case 5:br(t,a),i===null&&l&4&&zy(a),l&512&&hl(a,a.return);break;case 12:br(t,a);break;case 13:br(t,a),l&4&&Yy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=IS.bind(null,a),QS(t,a))));break;case 22:if(l=a.memoizedState!==null||Qi,!l){i=i!==null&&i.memoizedState!==null||ft,h=Qi;var f=ft;Qi=l,(ft=i)&&!f?Tr(t,a,(a.subtreeFlags&8772)!==0):br(t,a),Qi=h,ft=f}break;case 30:break;default:br(t,a)}}function Gy(t){var i=t.alternate;i!==null&&(t.alternate=null,Gy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&lr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var rt=null,sn=!1;function Yi(t,i,a){for(a=a.child;a!==null;)Qy(t,i,a),a=a.sibling}function Qy(t,i,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(lt,a)}catch{}switch(a.tag){case 26:ft||fi(a,i),Yi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ft||fi(a,i);var l=rt,h=sn;Rr(a.type)&&(rt=a.stateNode,sn=!1),Yi(t,i,a),bl(a.stateNode),rt=l,sn=h;break;case 5:ft||fi(a,i);case 6:if(l=rt,h=sn,rt=null,Yi(t,i,a),rt=l,sn=h,rt!==null)if(sn)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(a.stateNode)}catch(f){Ze(a,i,f)}else try{rt.removeChild(a.stateNode)}catch(f){Ze(a,i,f)}break;case 18:rt!==null&&(sn?(t=rt,kv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Il(t)):kv(rt,a.stateNode));break;case 4:l=rt,h=sn,rt=a.stateNode.containerInfo,sn=!0,Yi(t,i,a),rt=l,sn=h;break;case 0:case 11:case 14:case 15:ft||_r(2,a,i),ft||_r(4,a,i),Yi(t,i,a);break;case 1:ft||(fi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ly(a,i,l)),Yi(t,i,a);break;case 21:Yi(t,i,a);break;case 22:ft=(l=ft)||a.memoizedState!==null,Yi(t,i,a),ft=l;break;default:Yi(t,i,a)}}function Yy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Il(t)}catch(a){Ze(i,i.return,a)}}function bS(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Hy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Hy),i;default:throw Error(s(435,t.tag))}}function hf(t,i){var a=bS(t);i.forEach(function(l){var h=CS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function pn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,b=i,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Rr(E.type)){rt=E.stateNode,sn=!1;break e}break;case 5:rt=E.stateNode,sn=!1;break e;case 3:case 4:rt=E.stateNode.containerInfo,sn=!0;break e}E=E.return}if(rt===null)throw Error(s(160));Qy(f,b,h),rt=null,sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ky(i,t),i=i.sibling}var Fn=null;function Ky(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pn(i,t),gn(t),l&4&&(_r(3,t,t.return),ul(3,t),_r(5,t,t.return));break;case 1:pn(i,t),gn(t),l&512&&(ft||a===null||fi(a,a.return)),l&64&&Qi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Fn;if(pn(i,t),gn(t),l&512&&(ft||a===null||fi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[os]||f[wt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),qt(f,l,a),f[wt]=t,ht(f),l=f;break e;case"link":var b=qv("link","href",h).get(l+(a.href||""));if(b){for(var E=0;E<b.length;E++)if(f=b[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(E,1);break t}}f=h.createElement(l),qt(f,l,a),h.head.appendChild(f);break;case"meta":if(b=qv("meta","content",h).get(l+(a.content||""))){for(E=0;E<b.length;E++)if(f=b[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(E,1);break t}}f=h.createElement(l),qt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[wt]=t,ht(f),l=f}t.stateNode=l}else Hv(h,t.type,t.stateNode);else t.stateNode=Bv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Hv(h,t.type,t.stateNode):Bv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&of(t,t.memoizedProps,a.memoizedProps)}break;case 27:pn(i,t),gn(t),l&512&&(ft||a===null||fi(a,a.return)),a!==null&&l&4&&of(t,t.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,t),gn(t),l&512&&(ft||a===null||fi(a,a.return)),t.flags&32){h=t.stateNode;try{wn(h,"")}catch(H){Ze(t,t.return,H)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,of(t,h,a!==null?a.memoizedProps:h)),l&1024&&(uf=!0);break;case 6:if(pn(i,t),gn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(H){Ze(t,t.return,H)}}break;case 3:if(Ru=null,h=Fn,Fn=Au(i.containerInfo),pn(i,t),Fn=h,gn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Il(i.containerInfo)}catch(H){Ze(t,t.return,H)}uf&&(uf=!1,$y(t));break;case 4:l=Fn,Fn=Au(t.stateNode.containerInfo),pn(i,t),gn(t),Fn=l;break;case 12:pn(i,t),gn(t);break;case 13:pn(i,t),gn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yf=En()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,hf(t,l)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,B=Qi,$=ft;if(Qi=B||h,ft=$||I,pn(i,t),ft=$,Qi=B,gn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||Qi||ft||Ms(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(f=I.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=I.stateNode;var J=I.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){Ze(I,I.return,H)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(H){Ze(I,I.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,hf(t,a))));break;case 19:pn(i,t),gn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,hf(t,l)));break;case 30:break;case 21:break;default:pn(i,t),gn(t)}}function gn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(By(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=lf(t);du(t,f,h);break;case 5:var b=a.stateNode;a.flags&32&&(wn(b,""),a.flags&=-33);var E=lf(t);du(t,E,b);break;case 3:case 4:var I=a.stateNode.containerInfo,B=lf(t);cf(t,B,I);break;default:throw Error(s(161))}}catch($){Ze(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function $y(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;$y(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function br(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Fy(t,i.alternate,i),i=i.sibling}function Ms(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:_r(4,i,i.return),Ms(i);break;case 1:fi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ly(i,i.return,a),Ms(i);break;case 27:bl(i.stateNode);case 26:case 5:fi(i,i.return),Ms(i);break;case 22:i.memoizedState===null&&Ms(i);break;case 30:Ms(i);break;default:Ms(i)}t=t.sibling}}function Tr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,b=f.flags;switch(f.tag){case 0:case 11:case 15:Tr(h,f,a),ul(4,f);break;case 1:if(Tr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Ze(l,l.return,B)}if(l=f,h=l.updateQueue,h!==null){var E=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)wg(I[h],E)}catch(B){Ze(l,l.return,B)}}a&&b&64&&Uy(f),hl(f,f.return);break;case 27:qy(f);case 26:case 5:Tr(h,f,a),a&&l===null&&b&4&&zy(f),hl(f,f.return);break;case 12:Tr(h,f,a);break;case 13:Tr(h,f,a),a&&b&4&&Yy(h,f);break;case 22:f.memoizedState===null&&Tr(h,f,a),hl(f,f.return);break;case 30:break;default:Tr(h,f,a)}i=i.sibling}}function df(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Xo(a))}function ff(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xo(t))}function mi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xy(t,i,a,l),i=i.sibling}function Xy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:mi(t,i,a,l),h&2048&&ul(9,i);break;case 1:mi(t,i,a,l);break;case 3:mi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xo(t)));break;case 12:if(h&2048){mi(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,b=f.id,E=f.onPostCommit;typeof E=="function"&&E(b,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){Ze(i,i.return,I)}}else mi(t,i,a,l);break;case 13:mi(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,b=i.alternate,i.memoizedState!==null?f._visibility&2?mi(t,i,a,l):dl(t,i):f._visibility&2?mi(t,i,a,l):(f._visibility|=2,Ma(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&df(b,i);break;case 24:mi(t,i,a,l),h&2048&&ff(i.alternate,i);break;default:mi(t,i,a,l)}}function Ma(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,b=i,E=a,I=l,B=b.flags;switch(b.tag){case 0:case 11:case 15:Ma(f,b,E,I,h),ul(8,b);break;case 23:break;case 22:var $=b.stateNode;b.memoizedState!==null?$._visibility&2?Ma(f,b,E,I,h):dl(f,b):($._visibility|=2,Ma(f,b,E,I,h)),h&&B&2048&&df(b.alternate,b);break;case 24:Ma(f,b,E,I,h),h&&B&2048&&ff(b.alternate,b);break;default:Ma(f,b,E,I,h)}i=i.sibling}}function dl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:dl(a,l),h&2048&&df(l.alternate,l);break;case 24:dl(a,l),h&2048&&ff(l.alternate,l);break;default:dl(a,l)}i=i.sibling}}var fl=8192;function ka(t){if(t.subtreeFlags&fl)for(t=t.child;t!==null;)Wy(t),t=t.sibling}function Wy(t){switch(t.tag){case 26:ka(t),t.flags&fl&&t.memoizedState!==null&&sw(Fn,t.memoizedState,t.memoizedProps);break;case 5:ka(t);break;case 3:case 4:var i=Fn;Fn=Au(t.stateNode.containerInfo),ka(t),Fn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=fl,fl=16777216,ka(t),fl=i):ka(t));break;default:ka(t)}}function Zy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ml(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,ev(l,t)}Zy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jy(t),t=t.sibling}function Jy(t){switch(t.tag){case 0:case 11:case 15:ml(t),t.flags&2048&&_r(9,t,t.return);break;case 3:ml(t);break;case 12:ml(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,fu(t)):ml(t);break;default:ml(t)}}function fu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];kt=l,ev(l,t)}Zy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:_r(8,i,i.return),fu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,fu(i));break;default:fu(i)}t=t.sibling}}function ev(t,i){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:_r(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,kt=l;else e:for(a=t;kt!==null;){l=kt;var h=l.sibling,f=l.return;if(Gy(l),l===a){kt=null;break e}if(h!==null){h.return=f,kt=h;break e}kt=f}}}var TS={getCacheForType:function(t){var i=Yt(Rt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},ES=typeof WeakMap=="function"?WeakMap:Map,Qe=0,et=null,De=null,Ue=0,Ye=0,yn=null,Er=!1,ja=!1,mf=!1,Ki=0,ut=0,Sr=0,ks=0,pf=0,Mn=0,Va=0,pl=null,an=null,gf=!1,yf=0,mu=1/0,pu=null,wr=null,Bt=0,Ar=null,Pa=null,Ua=0,vf=0,_f=null,tv=null,gl=0,bf=null;function vn(){if((Qe&2)!==0&&Ue!==0)return Ue&-Ue;if(K.T!==null){var t=Aa;return t!==0?t:Rf()}return ar()}function nv(){Mn===0&&(Mn=(Ue&536870912)===0||qe?Ao():536870912);var t=On.current;return t!==null&&(t.flags|=32),Mn}function _n(t,i,a){(t===et&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(La(t,0),xr(t,Ue,Mn,!1)),xi(t,a),((Qe&2)===0||t!==et)&&(t===et&&((Qe&2)===0&&(ks|=a),ut===4&&xr(t,Ue,Mn,!1)),pi(t))}function iv(t,i,a){if((Qe&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||as(t,i),h=l?AS(t,i):Sf(t,i,!0),f=l;do{if(h===0){ja&&!l&&xr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!SS(a)){h=Sf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var E=t;h=pl;var I=E.current.memoizedState.isDehydrated;if(I&&(La(E,b).flags|=256),b=Sf(E,b,!1),b!==2){if(mf&&!I){E.errorRecoveryDisabledLanes|=f,ks|=f,h=4;break e}f=an,an=h,f!==null&&(an===null?an=f:an.push.apply(an,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){La(t,0),xr(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:xr(l,i,Mn,!Er);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=yf+300-En(),10<h)){if(xr(l,i,Mn,!Er),na(l,0,!0)!==0)break e;l.timeoutHandle=Ov(rv.bind(null,l,a,an,pu,gf,i,Mn,ks,Va,Er,f,2,-0,0),h);break e}rv(l,a,an,pu,gf,i,Mn,ks,Va,Er,f,0,-0,0)}}break}while(!0);pi(t)}function rv(t,i,a,l,h,f,b,E,I,B,$,J,q,H){if(t.timeoutHandle=-1,J=i.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(Sl={stylesheets:null,count:0,unsuspend:rw},Wy(i),J=aw(),J!==null)){t.cancelPendingCommit=J(hv.bind(null,t,i,f,a,l,h,b,E,I,$,1,q,H)),xr(t,f,b,!B);return}hv(t,i,f,a,l,h,b,E,I)}function SS(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!fn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xr(t,i,a,l){i&=~pf,i&=~ks,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-Qt(h),b=1<<f;l[f]=-1,h&=~b}a!==0&&ei(t,a,i)}function gu(){return(Qe&6)===0?(yl(0),!1):!0}function Tf(){if(De!==null){if(Ye===0)var t=De.return;else t=De,zi=Is=null,Pd(t),Da=null,ol=0,t=De;for(;t!==null;)Py(t.alternate,t),t=t.return;De=null}}function La(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,BS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Tf(),et=t,De=a=Pi(t.current,null),Ue=i,Ye=0,yn=null,Er=!1,ja=as(t,i),mf=!1,Va=Mn=pf=ks=Sr=ut=0,an=pl=null,gf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Qt(l),f=1<<h;i|=t[h],l&=~f}return Ki=i,Uc(),a}function sv(t,i){Ie=null,K.H=iu,i===Zo||i===Yc?(i=Eg(),Ye=3):i===_g?(i=Eg(),Ye=4):Ye=i===Sy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,De===null&&(ut=1,lu(t,In(i,t.current)))}function av(){var t=K.H;return K.H=iu,t===null?iu:t}function ov(){var t=K.A;return K.A=TS,t}function Ef(){ut=4,Er||(Ue&4194048)!==Ue&&On.current!==null||(ja=!0),(Sr&134217727)===0&&(ks&134217727)===0||et===null||xr(et,Ue,Mn,!1)}function Sf(t,i,a){var l=Qe;Qe|=2;var h=av(),f=ov();(et!==t||Ue!==i)&&(pu=null,La(t,i)),i=!1;var b=ut;e:do try{if(Ye!==0&&De!==null){var E=De,I=yn;switch(Ye){case 8:Tf(),b=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(i=!0);var B=Ye;if(Ye=0,yn=null,za(t,E,I,B),a&&ja){b=0;break e}break;default:B=Ye,Ye=0,yn=null,za(t,E,I,B)}}wS(),b=ut;break}catch($){sv(t,$)}while(!0);return i&&t.shellSuspendCounter++,zi=Is=null,Qe=l,K.H=h,K.A=f,De===null&&(et=null,Ue=0,Uc()),b}function wS(){for(;De!==null;)lv(De)}function AS(t,i){var a=Qe;Qe|=2;var l=av(),h=ov();et!==t||Ue!==i?(pu=null,mu=En()+500,La(t,i)):ja=as(t,i);e:do try{if(Ye!==0&&De!==null){i=De;var f=yn;t:switch(Ye){case 1:Ye=0,yn=null,za(t,i,f,1);break;case 2:case 9:if(bg(f)){Ye=0,yn=null,cv(i);break}i=function(){Ye!==2&&Ye!==9||et!==t||(Ye=7),pi(t)},f.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:bg(f)?(Ye=0,yn=null,cv(i)):(Ye=0,yn=null,za(t,i,f,7));break;case 5:var b=null;switch(De.tag){case 26:b=De.memoizedState;case 5:case 27:var E=De;if(!b||Fv(b)){Ye=0,yn=null;var I=E.sibling;if(I!==null)De=I;else{var B=E.return;B!==null?(De=B,yu(B)):De=null}break t}}Ye=0,yn=null,za(t,i,f,5);break;case 6:Ye=0,yn=null,za(t,i,f,6);break;case 8:Tf(),ut=6;break e;default:throw Error(s(462))}}xS();break}catch($){sv(t,$)}while(!0);return zi=Is=null,K.H=l,K.A=h,Qe=a,De!==null?0:(et=null,Ue=0,Uc(),ut)}function xS(){for(;De!==null&&!To();)lv(De)}function lv(t){var i=jy(t.alternate,t,Ki);t.memoizedProps=t.pendingProps,i===null?yu(t):De=i}function cv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Cy(a,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=Cy(a,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:Pd(i);default:Py(a,i),i=De=ug(i,Ki),i=jy(a,i,Ki)}t.memoizedProps=t.pendingProps,i===null?yu(t):De=i}function za(t,i,a,l){zi=Is=null,Pd(i),Da=null,ol=0;var h=i.return;try{if(pS(t,h,i,a,Ue)){ut=1,lu(t,In(a,t.current)),De=null;return}}catch(f){if(h!==null)throw De=h,f;ut=1,lu(t,In(a,t.current)),De=null;return}i.flags&32768?(qe||l===1?t=!0:ja||(Ue&536870912)!==0?t=!1:(Er=t=!0,(l===2||l===9||l===3||l===6)&&(l=On.current,l!==null&&l.tag===13&&(l.flags|=16384))),uv(i,t)):yu(i)}function yu(t){var i=t;do{if((i.flags&32768)!==0){uv(i,Er);return}t=i.return;var a=yS(i.alternate,i,Ki);if(a!==null){De=a;return}if(i=i.sibling,i!==null){De=i;return}De=i=t}while(i!==null);ut===0&&(ut=5)}function uv(t,i){do{var a=vS(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);ut=6,De=null}function hv(t,i,a,l,h,f,b,E,I){t.cancelPendingCommit=null;do vu();while(Bt!==0);if((Qe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=dd,Ro(t,a,f,b,E,I),t===et&&(De=et=null,Ue=0),Pa=i,Ar=t,Ua=a,vf=f,_f=h,tv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,NS(ns,function(){return gv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=oe.p,oe.p=2,b=Qe,Qe|=4;try{_S(t,i,a)}finally{Qe=b,oe.p=h,K.T=l}}Bt=1,dv(),fv(),mv()}}function dv(){if(Bt===1){Bt=0;var t=Ar,i=Pa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var h=Qe;Qe|=4;try{Ky(i,t);var f=jf,b=eg(t.containerInfo),E=f.focusedElem,I=f.selectionRange;if(b!==E&&E&&E.ownerDocument&&Jp(E.ownerDocument.documentElement,E)){if(I!==null&&od(E)){var B=I.start,$=I.end;if($===void 0&&($=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min($,E.value.length);else{var J=E.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var H=q.getSelection(),Ee=E.textContent.length,_e=Math.min(I.start,Ee),We=I.end===void 0?_e:Math.min(I.end,Ee);!H.extend&&_e>We&&(b=We,We=_e,_e=b);var V=Zp(E,_e),M=Zp(E,We);if(V&&M&&(H.rangeCount!==1||H.anchorNode!==V.node||H.anchorOffset!==V.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var z=J.createRange();z.setStart(V.node,V.offset),H.removeAllRanges(),_e>We?(H.addRange(z),H.extend(M.node,M.offset)):(z.setEnd(M.node,M.offset),H.addRange(z))}}}}for(J=[],H=E;H=H.parentNode;)H.nodeType===1&&J.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<J.length;E++){var Z=J[E];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Nu=!!kf,jf=kf=null}finally{Qe=h,oe.p=l,K.T=a}}t.current=i,Bt=2}}function fv(){if(Bt===2){Bt=0;var t=Ar,i=Pa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var h=Qe;Qe|=4;try{Fy(t,i.alternate,i)}finally{Qe=h,oe.p=l,K.T=a}}Bt=3}}function mv(){if(Bt===4||Bt===3){Bt=0,fc();var t=Ar,i=Pa,a=Ua,l=tv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Bt=5:(Bt=0,Pa=Ar=null,pv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(wr=null),ia(a),i=i.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(lt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,h=oe.p,oe.p=2,K.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var E=l[b];f(E.value,{componentStack:E.stack})}}finally{K.T=i,oe.p=h}}(Ua&3)!==0&&vu(),pi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===bf?gl++:(gl=0,bf=t):gl=0,yl(0)}}function pv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Xo(i)))}function vu(t){return dv(),fv(),mv(),gv()}function gv(){if(Bt!==5)return!1;var t=Ar,i=vf;vf=0;var a=ia(Ua),l=K.T,h=oe.p;try{oe.p=32>a?32:a,K.T=null,a=_f,_f=null;var f=Ar,b=Ua;if(Bt=0,Pa=Ar=null,Ua=0,(Qe&6)!==0)throw Error(s(331));var E=Qe;if(Qe|=4,Jy(f.current),Xy(f,f.current,b,a),Qe=E,yl(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(lt,f)}catch{}return!0}finally{oe.p=h,K.T=l,pv(t,i)}}function yv(t,i,a){i=In(a,i),i=Wd(t.stateNode,i,2),t=pr(t,i,2),t!==null&&(xi(t,2),pi(t))}function Ze(t,i,a){if(t.tag===3)yv(t,t,a);else for(;i!==null;){if(i.tag===3){yv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(wr===null||!wr.has(l))){t=In(a,t),a=Ty(2),l=pr(i,a,2),l!==null&&(Ey(a,l,i,t),xi(l,2),pi(l));break}}i=i.return}}function wf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new ES;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(mf=!0,h.add(a),t=RS.bind(null,t,i,a),i.then(t,t))}function RS(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(Ue&a)===a&&(ut===4||ut===3&&(Ue&62914560)===Ue&&300>En()-yf?(Qe&2)===0&&La(t,0):pf|=a,Va===Ue&&(Va=0)),pi(t)}function vv(t,i){i===0&&(i=xo()),t=Ta(t,i),t!==null&&(xi(t,i),pi(t))}function IS(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),vv(t,a)}function CS(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),vv(t,a)}function NS(t,i){return es(t,i)}var _u=null,Ba=null,Af=!1,bu=!1,xf=!1,js=0;function pi(t){t!==Ba&&t.next===null&&(Ba===null?_u=Ba=t:Ba=Ba.next=t),bu=!0,Af||(Af=!0,OS())}function yl(t,i){if(!xf&&bu){xf=!0;do for(var a=!1,l=_u;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,E=l.pingedLanes;f=(1<<31-Qt(42|t)+1)-1,f&=h&~(b&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Ev(l,f))}else f=Ue,f=na(l,l===et?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||as(l,f)||(a=!0,Ev(l,f));l=l.next}while(a);xf=!1}}function DS(){_v()}function _v(){bu=Af=!1;var t=0;js!==0&&(zS()&&(t=js),js=0);for(var i=En(),a=null,l=_u;l!==null;){var h=l.next,f=bv(l,i);f===0?(l.next=null,a===null?_u=h:a.next=h,h===null&&(Ba=a)):(a=l,(t!==0||(f&3)!==0)&&(bu=!0)),l=h}yl(t)}function bv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-Qt(f),E=1<<b,I=h[b];I===-1?((E&a)===0||(E&l)!==0)&&(h[b]=wo(E,i)):I<=i&&(t.expiredLanes|=E),f&=~E}if(i=et,a=Ue,a=na(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ts(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||as(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ts(l),ia(a)){case 2:case 8:a=ea;break;case 32:a=ns;break;case 268435456:a=ta;break;default:a=ns}return l=Tv.bind(null,t),a=es(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ts(l),t.callbackPriority=2,t.callbackNode=null,2}function Tv(t,i){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(vu()&&t.callbackNode!==a)return null;var l=Ue;return l=na(t,t===et?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(iv(t,l,i),bv(t,En()),t.callbackNode!=null&&t.callbackNode===a?Tv.bind(null,t):null)}function Ev(t,i){if(vu())return null;iv(t,i,!0)}function OS(){qS(function(){(Qe&6)!==0?es(Eo,DS):_v()})}function Rf(){return js===0&&(js=Ao()),js}function Sv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ca(""+t)}function wv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function MS(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=Sv((h[yt]||null).action),b=l.submitter;b&&(i=(i=b[yt]||null)?Sv(i.formAction):b.getAttribute("formAction"),i!==null&&(f=i,b=null));var E=new ua("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(js!==0){var I=b?wv(h,b):new FormData(h);Qd(a,{pending:!0,data:I,method:h.method,action:f},null,I)}}else typeof f=="function"&&(E.preventDefault(),I=b?wv(h,b):new FormData(h),Qd(a,{pending:!0,data:I,method:h.method,action:f},f,I))},currentTarget:h}]})}}for(var If=0;If<hd.length;If++){var Cf=hd[If],kS=Cf.toLowerCase(),jS=Cf[0].toUpperCase()+Cf.slice(1);Hn(kS,"on"+jS)}Hn(ig,"onAnimationEnd"),Hn(rg,"onAnimationIteration"),Hn(sg,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(ZE,"onTransitionRun"),Hn(JE,"onTransitionStart"),Hn(eS,"onTransitionCancel"),Hn(ag,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function Av(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var b=l.length-1;0<=b;b--){var E=l[b],I=E.instance,B=E.currentTarget;if(E=E.listener,I!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=B;try{f(h)}catch($){ou($)}h.currentTarget=null,f=I}else for(b=0;b<l.length;b++){if(E=l[b],I=E.instance,B=E.currentTarget,E=E.listener,I!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=B;try{f(h)}catch($){ou($)}h.currentTarget=null,f=I}}}}function Oe(t,i){var a=i[Co];a===void 0&&(a=i[Co]=new Set);var l=t+"__bubble";a.has(l)||(xv(i,t,2,!1),a.add(l))}function Nf(t,i,a){var l=0;i&&(l|=4),xv(a,t,l,i)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[Tu]){t[Tu]=!0,No.forEach(function(a){a!=="selectionchange"&&(VS.has(a)||Nf(a,!1,t),Nf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Tu]||(i[Tu]=!0,Nf("selectionchange",!1,i))}}function xv(t,i,a,l){switch(Xv(i)){case 2:var h=cw;break;case 8:h=uw;break;default:h=Gf}a=h.bind(null,i,a,t),h=void 0,!xn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Of(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var E=l.stateNode.containerInfo;if(E===h)break;if(b===4)for(b=l.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;E!==null;){if(b=Ri(E),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){l=f=b;continue e}E=E.parentNode}}l=l.return}Sc(function(){var B=f,$=An(a),J=[];e:{var q=og.get(t);if(q!==void 0){var H=ua,Ee=t;switch(t){case"keypress":if(ai(a)===0)break e;case"keydown":case"keyup":H=ga;break;case"focusin":Ee="focus",H=fa;break;case"focusout":Ee="blur",H=fa;break;case"beforeblur":case"afterblur":H=fa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Dc;break;case ig:case rg:case sg:H=ma;break;case ag:H=Mc;break;case"scroll":case"scrollend":H=wc;break;case"wheel":H=ya;break;case"copy":case"cut":case"paste":H=pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=qo;break;case"toggle":case"beforetoggle":H=jc}var _e=(i&4)!==0,We=!_e&&(t==="scroll"||t==="scrollend"),V=_e?q!==null?q+"Capture":null:q;_e=[];for(var M=B,z;M!==null;){var Z=M;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||V===null||(Z=ms(M,V),Z!=null&&_e.push(_l(M,Z,z))),We)break;M=M.return}0<_e.length&&(q=new H(q,Ee,null,a,$),J.push({event:q,listeners:_e}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Di&&(Ee=a.relatedTarget||a.fromElement)&&(Ri(Ee)||Ee[Sn]))break e;if((H||q)&&(q=$.window===$?$:(q=$.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Ee=a.relatedTarget||a.toElement,H=B,Ee=Ee?Ri(Ee):null,Ee!==null&&(We=c(Ee),_e=Ee.tag,Ee!==We||_e!==5&&_e!==27&&_e!==6)&&(Ee=null)):(H=null,Ee=B),H!==Ee)){if(_e=Rn,Z="onMouseLeave",V="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(_e=qo,Z="onPointerLeave",V="onPointerEnter",M="pointer"),We=H==null?q:ni(H),z=Ee==null?q:ni(Ee),q=new _e(Z,M+"leave",H,a,$),q.target=We,q.relatedTarget=z,Z=null,Ri($)===B&&(_e=new _e(V,M+"enter",Ee,a,$),_e.target=z,_e.relatedTarget=We,Z=_e),We=Z,H&&Ee)t:{for(_e=H,V=Ee,M=0,z=_e;z;z=qa(z))M++;for(z=0,Z=V;Z;Z=qa(Z))z++;for(;0<M-z;)_e=qa(_e),M--;for(;0<z-M;)V=qa(V),z--;for(;M--;){if(_e===V||V!==null&&_e===V.alternate)break t;_e=qa(_e),V=qa(V)}_e=null}else _e=null;H!==null&&Rv(J,q,H,_e,!1),Ee!==null&&We!==null&&Rv(J,We,Ee,_e,!0)}}e:{if(q=B?ni(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var me=Qp;else if(xt(q))if(Yp)me=$E;else{me=YE;var Ne=QE}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&jo(B.elementType)&&(me=Qp):me=KE;if(me&&(me=me(t,B))){Vi(J,me,a,$);break e}Ne&&Ne(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&ur(q,"number",q.value)}switch(Ne=B?ni(B):window,t){case"focusin":(xt(Ne)||Ne.contentEditable==="true")&&(va=Ne,ld=B,Go=null);break;case"focusout":Go=ld=va=null;break;case"mousedown":cd=!0;break;case"contextmenu":case"mouseup":case"dragend":cd=!1,tg(J,a,$);break;case"selectionchange":if(WE)break;case"keydown":case"keyup":tg(J,a,$)}var pe;if(ci)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Ve?Q(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(_&&a.locale!=="ko"&&(Ve||be!=="onCompositionStart"?be==="onCompositionEnd"&&Ve&&(pe=Po()):(si=$,hr="value"in si?si.value:si.textContent,Ve=!0)),Ne=Eu(B,be),0<Ne.length&&(be=new zo(be,t,null,a,$),J.push({event:be,listeners:Ne}),pe?be.data=pe:(pe=ae(a),pe!==null&&(be.data=pe)))),(pe=g?At(t,a):Pe(t,a))&&(be=Eu(B,"onBeforeInput"),0<be.length&&(Ne=new zo("onBeforeInput","beforeinput",null,a,$),J.push({event:Ne,listeners:be}),Ne.data=pe)),MS(J,t,B,a,$)}Av(J,i)})}function _l(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Eu(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ms(t,a),h!=null&&l.unshift(_l(t,h,f)),h=ms(t,i),h!=null&&l.push(_l(t,h,f))),t.tag===3)return l;t=t.return}return[]}function qa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Rv(t,i,a,l,h){for(var f=i._reactName,b=[];a!==null&&a!==l;){var E=a,I=E.alternate,B=E.stateNode;if(E=E.tag,I!==null&&I===l)break;E!==5&&E!==26&&E!==27||B===null||(I=B,h?(B=ms(a,f),B!=null&&b.unshift(_l(a,B,I))):h||(B=ms(a,f),B!=null&&b.push(_l(a,B,I)))),a=a.return}b.length!==0&&t.push({event:i,listeners:b})}var PS=/\r\n?/g,US=/\u0000|\uFFFD/g;function Iv(t){return(typeof t=="string"?t:""+t).replace(PS,`
`).replace(US,"")}function Cv(t,i){return i=Iv(i),Iv(t)===i}function Su(){}function Xe(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||wn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&wn(t,""+l);break;case"className":ii(t,"class",l);break;case"tabIndex":ii(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(t,a,l);break;case"style":ko(t,l,f);break;case"data":if(i!=="object"){ii(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Xe(t,i,"name",h.name,h,null),Xe(t,i,"formEncType",h.formEncType,h,null),Xe(t,i,"formMethod",h.formMethod,h,null),Xe(t,i,"formTarget",h.formTarget,h,null)):(Xe(t,i,"encType",h.encType,h,null),Xe(t,i,"method",h.method,h,null),Xe(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Su);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),cr(t,"popover",l);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":cr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=td.get(a)||a,cr(t,a,l))}}function Mf(t,i,a,l,h,f){switch(a){case"style":ko(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?wn(t,l):(typeof l=="number"||typeof l=="bigint")&&wn(t,""+l);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Su);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ra.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[yt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):cr(t,a,l)}}}function qt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xe(t,i,f,b,a,null)}}h&&Xe(t,i,"srcSet",a.srcSet,a,null),l&&Xe(t,i,"src",a.src,a,null);return;case"input":Oe("invalid",t);var E=f=b=h=null,I=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":b=$;break;case"checked":I=$;break;case"defaultChecked":B=$;break;case"value":f=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:Xe(t,i,l,$,a,null)}}hs(t,f,E,I,B,b,h,!1),la(t);return;case"select":Oe("invalid",t),l=b=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":b=E;break;case"multiple":l=E;default:Xe(t,i,h,E,a,null)}i=f,a=b,t.multiple=!!l,i!=null?Ni(t,!!l,i,!1):a!=null&&Ni(t,!!l,a,!0);return;case"textarea":Oe("invalid",t),f=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(E=a[b],E!=null))switch(b){case"value":l=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xe(t,i,b,E,a,null)}ds(t,l,h,f),la(t);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xe(t,i,I,l,a,null)}return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(l=0;l<vl.length;l++)Oe(vl[l],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xe(t,i,B,l,a,null)}return;default:if(jo(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&Mf(t,i,$,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Xe(t,i,E,l,a,null))}function LS(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,E=null,I=null,B=null,$=null;for(H in a){var J=a[H];if(a.hasOwnProperty(H)&&J!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":I=J;default:l.hasOwnProperty(H)||Xe(t,i,H,null,l,J)}}for(var q in l){var H=l[q];if(J=a[q],l.hasOwnProperty(q)&&(H!=null||J!=null))switch(q){case"type":f=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":$=H;break;case"value":b=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==J&&Xe(t,i,q,H,l,J)}}dn(t,b,E,I,B,$,f,h);return;case"select":H=b=E=q=null;for(f in a)if(I=a[f],a.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":H=I;default:l.hasOwnProperty(f)||Xe(t,i,f,null,l,I)}for(h in l)if(f=l[h],I=a[h],l.hasOwnProperty(h)&&(f!=null||I!=null))switch(h){case"value":q=f;break;case"defaultValue":E=f;break;case"multiple":b=f;default:f!==I&&Xe(t,i,h,f,l,I)}i=E,a=b,l=H,q!=null?Ni(t,!!a,q,!1):!!l!=!!a&&(i!=null?Ni(t,!!a,i,!0):Ni(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xe(t,i,E,null,l,h)}for(b in l)if(h=l[b],f=a[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Xe(t,i,b,h,l,f)}Ke(t,q,H);return;case"option":for(var Ee in a)if(q=a[Ee],a.hasOwnProperty(Ee)&&q!=null&&!l.hasOwnProperty(Ee))switch(Ee){case"selected":t.selected=!1;break;default:Xe(t,i,Ee,null,l,q)}for(I in l)if(q=l[I],H=a[I],l.hasOwnProperty(I)&&q!==H&&(q!=null||H!=null))switch(I){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Xe(t,i,I,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)q=a[_e],a.hasOwnProperty(_e)&&q!=null&&!l.hasOwnProperty(_e)&&Xe(t,i,_e,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:Xe(t,i,B,q,l,H)}return;default:if(jo(i)){for(var We in a)q=a[We],a.hasOwnProperty(We)&&q!==void 0&&!l.hasOwnProperty(We)&&Mf(t,i,We,void 0,l,q);for($ in l)q=l[$],H=a[$],!l.hasOwnProperty($)||q===H||q===void 0&&H===void 0||Mf(t,i,$,q,l,H);return}}for(var V in a)q=a[V],a.hasOwnProperty(V)&&q!=null&&!l.hasOwnProperty(V)&&Xe(t,i,V,null,l,q);for(J in l)q=l[J],H=a[J],!l.hasOwnProperty(J)||q===H||q==null&&H==null||Xe(t,i,J,q,l,H)}var kf=null,jf=null;function wu(t){return t.nodeType===9?t:t.ownerDocument}function Nv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Vf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Pf=null;function zS(){var t=window.event;return t&&t.type==="popstate"?t===Pf?!1:(Pf=t,!0):(Pf=null,!1)}var Ov=typeof setTimeout=="function"?setTimeout:void 0,BS=typeof clearTimeout=="function"?clearTimeout:void 0,Mv=typeof Promise=="function"?Promise:void 0,qS=typeof queueMicrotask=="function"?queueMicrotask:typeof Mv<"u"?function(t){return Mv.resolve(null).then(t).catch(HS)}:Ov;function HS(t){setTimeout(function(){throw t})}function Rr(t){return t==="head"}function kv(t,i){var a=i,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&bl(b.documentElement),a&2&&bl(b.body),a&4)for(a=b.head,bl(a),b=a.firstChild;b;){var E=b.nextSibling,I=b.nodeName;b[os]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=E}}if(h===0){t.removeChild(f),Il(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Il(i)}function Uf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uf(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function FS(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[os])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Gn(t.nextSibling),t===null)break}return null}function GS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Gn(t.nextSibling),t===null))return null;return t}function Lf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function QS(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Gn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var zf=null;function jv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Vv(t,i,a){switch(i=wu(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function bl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);lr(t)}var kn=new Map,Pv=new Set;function Au(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $i=oe.d;oe.d={f:YS,r:KS,D:$S,C:XS,L:WS,m:ZS,X:ew,S:JS,M:tw};function YS(){var t=$i.f(),i=gu();return t||i}function KS(t){var i=ti(t);i!==null&&i.tag===5&&i.type==="form"?iy(i):$i.r(t)}var Ha=typeof document>"u"?null:document;function Uv(t,i,a){var l=Ha;if(l&&typeof i=="string"&&i){var h=vt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Pv.has(h)||(Pv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),qt(i,"link",t),ht(i),l.head.appendChild(i)))}}function $S(t){$i.D(t),Uv("dns-prefetch",t,null)}function XS(t,i){$i.C(t,i),Uv("preconnect",t,i)}function WS(t,i,a){$i.L(t,i,a);var l=Ha;if(l&&t&&i){var h='link[rel="preload"][as="'+vt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+vt(a.imageSizes)+'"]')):h+='[href="'+vt(t)+'"]';var f=h;switch(i){case"style":f=Fa(t);break;case"script":f=Ga(t)}kn.has(f)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),kn.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Tl(f))||i==="script"&&l.querySelector(El(f))||(i=l.createElement("link"),qt(i,"link",t),ht(i),l.head.appendChild(i)))}}function ZS(t,i){$i.m(t,i);var a=Ha;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+vt(l)+'"][href="'+vt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ga(t)}if(!kn.has(f)&&(t=T({rel:"modulepreload",href:t},i),kn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(El(f)))return}l=a.createElement("link"),qt(l,"link",t),ht(l),a.head.appendChild(l)}}}function JS(t,i,a){$i.S(t,i,a);var l=Ha;if(l&&t){var h=Jt(l).hoistableStyles,f=Fa(t);i=i||"default";var b=h.get(f);if(!b){var E={loading:0,preload:null};if(b=l.querySelector(Tl(f)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=kn.get(f))&&Bf(t,a);var I=b=l.createElement("link");ht(I),qt(I,"link",t),I._p=new Promise(function(B,$){I.onload=B,I.onerror=$}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,xu(b,i,l)}b={type:"stylesheet",instance:b,count:1,state:E},h.set(f,b)}}}function ew(t,i){$i.X(t,i);var a=Ha;if(a&&t){var l=Jt(a).hoistableScripts,h=Ga(t),f=l.get(h);f||(f=a.querySelector(El(h)),f||(t=T({src:t,async:!0},i),(i=kn.get(h))&&qf(t,i),f=a.createElement("script"),ht(f),qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function tw(t,i){$i.M(t,i);var a=Ha;if(a&&t){var l=Jt(a).hoistableScripts,h=Ga(t),f=l.get(h);f||(f=a.querySelector(El(h)),f||(t=T({src:t,async:!0,type:"module"},i),(i=kn.get(h))&&qf(t,i),f=a.createElement("script"),ht(f),qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Lv(t,i,a,l){var h=(h=we.current)?Au(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Fa(a.href),a=Jt(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Fa(a.href);var f=Jt(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(Tl(t)))&&!f._p&&(b.instance=f,b.state.loading=5),kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kn.set(t,a),f||nw(h,t,a,b.state))),i&&l===null)throw Error(s(528,""));return b}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ga(a),a=Jt(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Fa(t){return'href="'+vt(t)+'"'}function Tl(t){return'link[rel="stylesheet"]['+t+"]"}function zv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function nw(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),qt(i,"link",a),ht(i),t.head.appendChild(i))}function Ga(t){return'[src="'+vt(t)+'"]'}function El(t){return"script[async]"+t}function Bv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+vt(a.href)+'"]');if(l)return i.instance=l,ht(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ht(l),qt(l,"style",h),xu(l,a.precedence,t),i.instance=l;case"stylesheet":h=Fa(a.href);var f=t.querySelector(Tl(h));if(f)return i.state.loading|=4,i.instance=f,ht(f),f;l=zv(a),(h=kn.get(h))&&Bf(l,h),f=(t.ownerDocument||t).createElement("link"),ht(f);var b=f;return b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),qt(f,"link",l),i.state.loading|=4,xu(f,a.precedence,t),i.instance=f;case"script":return f=Ga(a.src),(h=t.querySelector(El(f)))?(i.instance=h,ht(h),h):(l=a,(h=kn.get(f))&&(l=T({},a),qf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ht(h),qt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,xu(l,a.precedence,t));return i.instance}function xu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var E=l[b];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Bf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function qf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ru=null;function qv(t,i,a){if(Ru===null){var l=new Map,h=Ru=new Map;h.set(a,l)}else h=Ru,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[os]||f[wt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(i)||"";b=t+b;var E=l.get(b);E?E.push(f):l.set(b,[f])}}return l}function Hv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function iw(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Fv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Sl=null;function rw(){}function sw(t,i,a){if(Sl===null)throw Error(s(475));var l=Sl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Fa(a.href),f=t.querySelector(Tl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Iu.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,ht(f);return}f=t.ownerDocument||t,a=zv(a),(h=kn.get(h))&&Bf(a,h),f=f.createElement("link"),ht(f);var b=f;b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),qt(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Iu.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function aw(){if(Sl===null)throw Error(s(475));var t=Sl;return t.stylesheets&&t.count===0&&Hf(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Hf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Iu(){if(this.count--,this.count===0){if(this.stylesheets)Hf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cu=null;function Hf(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cu=new Map,i.forEach(ow,t),Cu=null,Iu.call(t))}function ow(t,i){if(!(i.state.loading&4)){var a=Cu.get(t);if(a)var l=a.get(null);else{a=new Map,Cu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=i.instance,b=h.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,h),a.set(b,h),this.count++,l=Iu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var wl={$$typeof:te,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function lw(t,i,a,l,h,f,b,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Gv(t,i,a,l,h,f,b,E,I,B,$,J){return t=new lw(t,i,a,b,E,I,B,J),i=1,f===!0&&(i|=24),f=mn(3,null,null,i),t.current=f,f.stateNode=t,i=Sd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},Rd(f),t}function Qv(t){return t?(t=Ea,t):Ea}function Yv(t,i,a,l,h,f){h=Qv(h),l.context===null?l.context=h:l.pendingContext=h,l=mr(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=pr(t,l,i),a!==null&&(_n(a,t,i),el(a,t,i))}function Kv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Ff(t,i){Kv(t,i),(t=t.alternate)&&Kv(t,i)}function $v(t){if(t.tag===13){var i=Ta(t,67108864);i!==null&&_n(i,t,67108864),Ff(t,67108864)}}var Nu=!0;function cw(t,i,a,l){var h=K.T;K.T=null;var f=oe.p;try{oe.p=2,Gf(t,i,a,l)}finally{oe.p=f,K.T=h}}function uw(t,i,a,l){var h=K.T;K.T=null;var f=oe.p;try{oe.p=8,Gf(t,i,a,l)}finally{oe.p=f,K.T=h}}function Gf(t,i,a,l){if(Nu){var h=Qf(l);if(h===null)Of(t,i,l,Du,a),Wv(t,l);else if(dw(h,t,i,a,l))l.stopPropagation();else if(Wv(t,l),i&4&&-1<hw.indexOf(t)){for(;h!==null;){var f=ti(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=zn(f.pendingLanes);if(b!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var I=1<<31-Qt(b);E.entanglements[1]|=I,b&=~I}pi(f),(Qe&6)===0&&(mu=En()+500,yl(0))}}break;case 13:E=Ta(f,2),E!==null&&_n(E,f,2),gu(),Ff(f,2)}if(f=Qf(l),f===null&&Of(t,i,l,Du,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Of(t,i,l,null,a)}}function Qf(t){return t=An(t),Yf(t)}var Du=null;function Yf(t){if(Du=null,t=Ri(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Du=t,null}function Xv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($h()){case Eo:return 2;case ea:return 8;case ns:case Xh:return 32;case ta:return 268435456;default:return 32}default:return 32}}var Kf=!1,Ir=null,Cr=null,Nr=null,Al=new Map,xl=new Map,Dr=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wv(t,i){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Al.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(i.pointerId)}}function Rl(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=ti(i),i!==null&&$v(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function dw(t,i,a,l,h){switch(i){case"focusin":return Ir=Rl(Ir,t,i,a,l,h),!0;case"dragenter":return Cr=Rl(Cr,t,i,a,l,h),!0;case"mouseover":return Nr=Rl(Nr,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return Al.set(f,Rl(Al.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,xl.set(f,Rl(xl.get(f)||null,t,i,a,l,h)),!0}return!1}function Zv(t){var i=Ri(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,gc(t.priority,function(){if(a.tag===13){var l=vn();l=sr(l);var h=Ta(a,l);h!==null&&_n(h,a,l),Ff(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ou(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Qf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Di=l,a.target.dispatchEvent(l),Di=null}else return i=ti(a),i!==null&&$v(i),t.blockedOn=a,!1;i.shift()}return!0}function Jv(t,i,a){Ou(t)&&a.delete(i)}function fw(){Kf=!1,Ir!==null&&Ou(Ir)&&(Ir=null),Cr!==null&&Ou(Cr)&&(Cr=null),Nr!==null&&Ou(Nr)&&(Nr=null),Al.forEach(Jv),xl.forEach(Jv)}function Mu(t,i){t.blockedOn===i&&(t.blockedOn=null,Kf||(Kf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,fw)))}var ku=null;function e_(t){ku!==t&&(ku=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ku===t&&(ku=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Yf(l||a)===null)continue;break}var f=ti(a);f!==null&&(t.splice(i,3),i-=3,Qd(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Il(t){function i(I){return Mu(I,t)}Ir!==null&&Mu(Ir,t),Cr!==null&&Mu(Cr,t),Nr!==null&&Mu(Nr,t),Al.forEach(i),xl.forEach(i);for(var a=0;a<Dr.length;a++){var l=Dr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Dr.length&&(a=Dr[0],a.blockedOn===null);)Zv(a),a.blockedOn===null&&Dr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],b=h[yt]||null;if(typeof f=="function")b||e_(a);else if(b){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[yt]||null)E=b.formAction;else if(Yf(h)!==null)continue}else E=b.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),e_(a)}}}function $f(t){this._internalRoot=t}ju.prototype.render=$f.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=vn();Yv(a,l,t,i,null,null)},ju.prototype.unmount=$f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Yv(t.current,2,null,t,null,null),gu(),i[Sn]=null}};function ju(t){this._internalRoot=t}ju.prototype.unstable_scheduleHydration=function(t){if(t){var i=ar();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Dr.length&&i!==0&&i<Dr[a].priority;a++);Dr.splice(a,0,t),a===0&&Zv(t)}};var t_=e.version;if(t_!=="19.1.1")throw Error(s(527,t_,"19.1.1"));oe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=v(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var mw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{lt=Vu.inject(mw),Ge=Vu}catch{}}return Nl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=yy,f=vy,b=_y,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=Gv(t,1,!1,null,null,a,l,h,f,b,E,null),t[Sn]=i.current,Df(t),new $f(i)},Nl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=yy,b=vy,E=_y,I=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=Gv(t,1,!0,i,a??null,l,h,f,b,E,I,B),i.context=Qv(null),a=i.current,l=vn(),l=sr(l),h=mr(l),h.callback=null,pr(a,h,l),a=l,i.current.lanes=a,xi(i,a),pi(i),t[Sn]=i.current,Df(t),new ju(i)},Nl.version="19.1.1",Nl}var h_;function ww(){if(h_)return Zf.exports;h_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Zf.exports=Sw(),Zf.exports}var Aw=ww();const xw=()=>{};var d_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Rw=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],m=r[n++],v=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(v>>10)),e[s++]=String.fromCharCode(56320+(v&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},W0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,m=d?r[o+1]:0,v=o+2<r.length,y=v?r[o+2]:0,T=c>>2,A=(c&3)<<4|m>>4;let w=(m&15)<<2|y>>6,U=y&63;v||(U=64,d||(w=64)),s.push(n[T],n[A],n[w],n[U])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(X0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Rw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const A=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||m==null||y==null||A==null)throw new Iw;const w=c<<2|m>>4;if(s.push(w),y!==64){const U=m<<4&240|y>>2;if(s.push(U),A!==64){const Y=y<<6&192|A;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Iw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Cw=function(r){const e=X0(r);return W0.encodeByteArray(e,!0)},Ju=function(r){return Cw(r).replace(/\./g,"")},Z0=function(r){try{return W0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=()=>Nw().__FIREBASE_DEFAULTS__,Ow=()=>{if(typeof process>"u"||typeof d_>"u")return;const r=d_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Mw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Z0(r[1]);return e&&JSON.parse(e)},bh=()=>{try{return xw()||Dw()||Ow()||Mw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},J0=r=>bh()?.emulatorHosts?.[r],eb=r=>{const e=J0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},tb=()=>bh()?.config,nb=r=>bh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qm(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Ju(JSON.stringify(n)),Ju(JSON.stringify(d)),""].join(".")}const Pl={};function Vw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Pl))Pl[e]?r.emulator.push(e):r.prod.push(e);return r}function Pw(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let f_=!1;function Ym(r,e){if(typeof window>"u"||typeof document>"u"||!$s(window.location.host)||Pl[r]===e||Pl[r]||f_)return;Pl[r]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",c=Vw().prod.length>0;function d(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function v(w,U){w.setAttribute("width","24"),w.setAttribute("id",U),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{f_=!0,d()},w}function T(w,U){w.setAttribute("id",U),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function A(){const w=Pw(s),U=n("text"),Y=document.getElementById(U)||document.createElement("span"),re=n("learnmore"),X=document.getElementById(re)||document.createElement("a"),F=n("preprendIcon"),ie=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const te=w.element;m(te),T(X,re);const ce=y();v(ie,F),te.append(ie,Y,X,ce),document.body.appendChild(te)}c?(Y.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function Lw(){const r=bh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ib(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Bw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qw(){const r=Zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Hw(){return!Lw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rb(){try{return typeof indexedDB=="object"}catch{return!1}}function sb(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}function Fw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="FirebaseError";class Zn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Gw,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xs.prototype.create)}}class Xs{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?Qw(c,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Zn(o,m,s)}}function Qw(r,e){return r.replace(Yw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Yw=/\{\$([^}]+)}/g;function Kw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function qr(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],d=e[o];if(m_(c)&&m_(d)){if(!qr(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function m_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $w(r,e){const n=new Xw(r,e);return n.subscribe.bind(n)}class Xw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Ww(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=nm),o.error===void 0&&(o.error=nm),o.complete===void 0&&(o.complete=nm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ww(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=1e3,Jw=2,eA=14400*1e3,tA=.5;function p_(r,e=Zw,n=Jw){const s=e*Math.pow(n,r),o=Math.round(tA*s*(Math.random()-.5)*2);return Math.min(eA,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r){return r&&r._delegate?r._delegate:r}class Ln{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new kw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rA(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iA(r){return r===Vs?void 0:r}function rA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const aA={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},oA=Me.INFO,lA={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},cA=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=lA[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Th{constructor(e){this.name=e,this._logLevel=oA,this._logHandler=cA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const uA=(r,e)=>e.some(n=>r instanceof n);let g_,y_;function hA(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dA(){return y_||(y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ab=new WeakMap,vm=new WeakMap,ob=new WeakMap,im=new WeakMap,Km=new WeakMap;function fA(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Ur(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&ab.set(n,r)}).catch(()=>{}),Km.set(e,r),e}function mA(r){if(vm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});vm.set(r,e)}let _m={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return vm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ob.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function pA(r){_m=r(_m)}function gA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(rm(this),e,...n);return ob.set(s,e.sort?e.sort():[e]),Ur(s)}:dA().includes(r)?function(...e){return r.apply(rm(this),e),Ur(ab.get(this))}:function(...e){return Ur(r.apply(rm(this),e))}}function yA(r){return typeof r=="function"?gA(r):(r instanceof IDBTransaction&&mA(r),uA(r,hA())?new Proxy(r,_m):r)}function Ur(r){if(r instanceof IDBRequest)return fA(r);if(im.has(r))return im.get(r);const e=yA(r);return e!==r&&(im.set(r,e),Km.set(e,r)),e}const rm=r=>Km.get(r);function lb(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),m=Ur(d);return s&&d.addEventListener("upgradeneeded",v=>{s(Ur(d.result),v.oldVersion,v.newVersion,Ur(d.transaction),v)}),n&&d.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),m.then(v=>{c&&v.addEventListener("close",()=>c()),o&&v.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const vA=["get","getKey","getAll","getAllKeys","count"],_A=["put","add","delete","clear"],sm=new Map;function v_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=_A.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||vA.includes(n)))return;const c=async function(d,...m){const v=this.transaction(d,o?"readwrite":"readonly");let y=v.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&v.done]))[0]};return sm.set(e,c),c}pA(r=>({...r,get:(e,n,s)=>v_(e,n)||r.get(e,n,s),has:(e,n)=>!!v_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function TA(r){return r.getComponent()?.type==="VERSION"}const bm="@firebase/app",__="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new Th("@firebase/app"),EA="@firebase/app-compat",SA="@firebase/analytics-compat",wA="@firebase/analytics",AA="@firebase/app-check-compat",xA="@firebase/app-check",RA="@firebase/auth",IA="@firebase/auth-compat",CA="@firebase/database",NA="@firebase/data-connect",DA="@firebase/database-compat",OA="@firebase/functions",MA="@firebase/functions-compat",kA="@firebase/installations",jA="@firebase/installations-compat",VA="@firebase/messaging",PA="@firebase/messaging-compat",UA="@firebase/performance",LA="@firebase/performance-compat",zA="@firebase/remote-config",BA="@firebase/remote-config-compat",qA="@firebase/storage",HA="@firebase/storage-compat",FA="@firebase/firestore",GA="@firebase/ai",QA="@firebase/firestore-compat",YA="firebase",KA="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="[DEFAULT]",$A={[bm]:"fire-core",[EA]:"fire-core-compat",[wA]:"fire-analytics",[SA]:"fire-analytics-compat",[xA]:"fire-app-check",[AA]:"fire-app-check-compat",[RA]:"fire-auth",[IA]:"fire-auth-compat",[CA]:"fire-rtdb",[NA]:"fire-data-connect",[DA]:"fire-rtdb-compat",[OA]:"fire-fn",[MA]:"fire-fn-compat",[kA]:"fire-iid",[jA]:"fire-iid-compat",[VA]:"fire-fcm",[PA]:"fire-fcm-compat",[UA]:"fire-perf",[LA]:"fire-perf-compat",[zA]:"fire-rc",[BA]:"fire-rc-compat",[qA]:"fire-gcs",[HA]:"fire-gcs-compat",[FA]:"fire-fst",[QA]:"fire-fst-compat",[GA]:"fire-vertex","fire-js":"fire-js",[YA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map,XA=new Map,Em=new Map;function b_(r,e){try{r.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function $n(r){const e=r.name;if(Em.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;Em.set(e,r);for(const n of eh.values())b_(n,r);for(const n of XA.values())b_(n,r);return!0}function $r(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Vn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new Xs("app","Firebase",WA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=KA;function cb(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Tm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Lr.create("bad-app-name",{appName:String(o)});if(n||(n=tb()),!n)throw Lr.create("no-options");const c=eh.get(o);if(c){if(qr(n,c.options)&&qr(s,c.config))return c;throw Lr.create("duplicate-app",{appName:o})}const d=new sA(o);for(const v of Em.values())d.addComponent(v);const m=new ZA(n,s,d);return eh.set(o,m),m}function Eh(r=Tm){const e=eh.get(r);if(!e&&r===Tm&&tb())return cb();if(!e)throw Lr.create("no-app",{appName:r});return e}function cn(r,e,n){let s=$A[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(d.join(" "));return}$n(new Ln(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="firebase-heartbeat-database",e1=1,Ql="firebase-heartbeat-store";let am=null;function ub(){return am||(am=lb(JA,e1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(r=>{throw Lr.create("idb-open",{originalErrorMessage:r.message})})),am}async function t1(r){try{const n=(await ub()).transaction(Ql),s=await n.objectStore(Ql).get(hb(r));return await n.done,s}catch(e){if(e instanceof Zn)er.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e?.message});er.warn(n.message)}}}async function T_(r,e){try{const s=(await ub()).transaction(Ql,"readwrite");await s.objectStore(Ql).put(e,hb(r)),await s.done}catch(n){if(n instanceof Zn)er.warn(n.message);else{const s=Lr.create("idb-set",{originalErrorMessage:n?.message});er.warn(s.message)}}}function hb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=1024,i1=30;class r1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=E_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>i1){const o=o1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){er.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=E_(),{heartbeatsToSend:n,unsentEntries:s}=s1(this._heartbeatsCache.heartbeats),o=Ju(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return er.warn(e),""}}}function E_(){return new Date().toISOString().substring(0,10)}function s1(r,e=n1){const n=[];let s=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),S_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),S_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class a1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rb()?sb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await t1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return T_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return T_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function S_(r){return Ju(JSON.stringify({version:2,heartbeats:r})).length}function o1(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(r){$n(new Ln("platform-logger",e=>new bA(e),"PRIVATE")),$n(new Ln("heartbeat",e=>new r1(e),"PRIVATE")),cn(bm,__,r),cn(bm,__,"esm2020"),cn("fire-js","")}l1("");function db(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c1=db,fb=new Xs("auth","Firebase",db());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Th("@firebase/auth");function u1(r,...e){th.logLevel<=Me.WARN&&th.warn(`Auth (${mo}): ${r}`,...e)}function Hu(r,...e){th.logLevel<=Me.ERROR&&th.error(`Auth (${mo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(r,...e){throw Xm(r,...e)}function Kn(r,...e){return Xm(r,...e)}function $m(r,e,n){const s={...c1(),[e]:n};return new Xs("auth","Firebase",s).create(e,{appName:r.name})}function Bs(r){return $m(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h1(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ei(r,"argument-error"),$m(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return fb.create(r,...e)}function Se(r,e,...n){if(!r)throw Xm(e,...n)}function Wi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Hu(e),new Error(e)}function tr(r,e){r||Wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(){return typeof self<"u"&&self.location?.href||""}function d1(){return w_()==="http:"||w_()==="https:"}function w_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d1()||ib()||"connection"in navigator)?navigator.onLine:!0}function m1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=Uw()||Bw()}get(){return f1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(r,e){tr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y1=new ic(3e4,6e4);function Zm(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function po(r,e,n,s,o={}){return pb(r,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const m=nc({key:r.config.apiKey,...d}).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:v,...c};return zw()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&$s(r.emulatorConfig.host)&&(y.credentials="include"),mb.fetch()(await gb(r,r.config.apiHost,n,m),y)})}async function pb(r,e,n){r._canInitEmulator=!1;const s={...p1,...e};try{const o=new _1(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Pu(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[v,y]=m.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pu(r,"credential-already-in-use",d);if(v==="EMAIL_EXISTS")throw Pu(r,"email-already-in-use",d);if(v==="USER_DISABLED")throw Pu(r,"user-disabled",d);const T=s[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw $m(r,T,y);Ei(r,T)}}catch(o){if(o instanceof Zn)throw o;Ei(r,"network-request-failed",{message:String(o)})}}async function v1(r,e,n,s,o={}){const c=await po(r,e,n,s,o);return"mfaPendingCredential"in c&&Ei(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function gb(r,e,n,s){const o=`${e}${n}?${s}`,c=r,d=c.config.emulator?Wm(r.config,o):`${r.config.apiScheme}://${o}`;return g1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class _1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Kn(this.auth,"network-request-failed")),y1.get())})}}function Pu(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Kn(r,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(r,e){return po(r,"POST","/v1/accounts:delete",e)}async function nh(r,e){return po(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T1(r,e=!1){const n=gt(r),s=await n.getIdToken(e),o=Jm(s);Se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:Ul(om(o.auth_time)),issuedAtTime:Ul(om(o.iat)),expirationTime:Ul(om(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function om(r){return Number(r)*1e3}function Jm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Z0(n);return o?JSON.parse(o):(Hu("Failed to decode base64 JWT payload"),null)}catch(o){return Hu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function A_(r){const e=Jm(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Zn&&E1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function E1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ul(this.lastLoginAt),this.creationTime=Ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(r){const e=r.auth,n=await r.getIdToken(),s=await Yl(r,nh(e,{idToken:n}));Se(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?yb(o.providerUserInfo):[],d=A1(r.providerData,c),m=r.isAnonymous,v=!(r.email&&o.passwordHash)&&!d?.length,y=m?v:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new wm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function w1(r){const e=gt(r);await ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function yb(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(r,e){const n=await pb(r,{},async()=>{const s=nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await gb(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:m,body:s};return r.emulatorConfig&&$s(r.emulatorConfig.host)&&(v.credentials="include"),mb.fetch()(d,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function R1(r,e){return po(r,"POST","/v2/accounts:revokeToken",Zm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=A_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await x1(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new Wa;return s&&(Se(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Se(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new S1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new wm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Yl(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T1(this,e)}reload(){return w1(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ih(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Bs(this.auth));const e=await this.getIdToken();return await Yl(this,b1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,v=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:A,emailVerified:w,isAnonymous:U,providerData:Y,stsTokenManager:re}=n;Se(A&&re,e,"internal-error");const X=Wa.fromJSON(this.name,re);Se(typeof A=="string",e,"internal-error"),Mr(s,e.name),Mr(o,e.name),Se(typeof w=="boolean",e,"internal-error"),Se(typeof U=="boolean",e,"internal-error"),Mr(c,e.name),Mr(d,e.name),Mr(m,e.name),Mr(v,e.name),Mr(y,e.name),Mr(T,e.name);const F=new Qn({uid:A,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:U,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:X,createdAt:y,lastLoginAt:T});return Y&&Array.isArray(Y)&&(F.providerData=Y.map(ie=>({...ie}))),v&&(F._redirectEventId=v),F}static async _fromIdTokenResponse(e,n,s=!1){const o=new Wa;o.updateFromServerResponse(n);const c=new Qn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ih(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Se(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?yb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,m=new Wa;m.updateFromIdToken(s);const v=new Qn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new wm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(v,y),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;function Zi(r){tr(r instanceof Function,"Expected a class definition");let e=x_.get(r);return e?(tr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,x_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vb.type="NONE";const R_=vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(r,e,n){return`firebase:${r}:${e}:${n}`}class Za{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Fu(this.userKey,o.apiKey,c),this.fullPersistenceKey=Fu("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nh(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Za(Zi(R_),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Zi(R_);const d=Fu(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(d);if(T){let A;if(typeof T=="string"){const w=await nh(e,{idToken:T}).catch(()=>{});if(!w)break;A=await Qn._fromGetAccountInfoResponse(e,w,T)}else A=Qn._fromJSON(e,T);y!==c&&(m=A),c=y;break}}catch{}const v=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!v.length?new Za(c,e,s):(c=v[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Za(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Eb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_b(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wb(e))return"Blackberry";if(Ab(e))return"Webos";if(bb(e))return"Safari";if((e.includes("chrome/")||Tb(e))&&!e.includes("edge/"))return"Chrome";if(Sb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function _b(r=Zt()){return/firefox\//i.test(r)}function bb(r=Zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tb(r=Zt()){return/crios\//i.test(r)}function Eb(r=Zt()){return/iemobile/i.test(r)}function Sb(r=Zt()){return/android/i.test(r)}function wb(r=Zt()){return/blackberry/i.test(r)}function Ab(r=Zt()){return/webos/i.test(r)}function ep(r=Zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function I1(r=Zt()){return ep(r)&&!!window.navigator?.standalone}function C1(){return qw()&&document.documentMode===10}function xb(r=Zt()){return ep(r)||Sb(r)||Ab(r)||wb(r)||/windows phone/i.test(r)||Eb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r,e=[]){let n;switch(r){case"Browser":n=I_(Zt());break;case"Worker":n=`${I_(Zt())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,m)=>{try{const v=e(c);d(v)}catch(v){m(v)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(r,e={}){return po(r,"GET","/v2/passwordPolicy",Zm(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=6;class M1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??O1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C_(this),this.idTokenSubscription=new C_(this),this.beforeStateQueue=new N1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nh(this,{idToken:e}),s=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(Bs(this));const n=e?gt(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(Bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D1(this),n=new M1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xs("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await R1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zi(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[Zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const v=e.addObserver(n,s,o);return()=>{d=!0,v()}}else{const v=e.addObserver(n);return()=>{d=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&u1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Sh(r){return gt(r)}class C_{constructor(e){this.auth=e,this.observer=null,this.addObserver=$w(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j1(r){tp=r}function V1(r){return tp.loadJS(r)}function P1(){return tp.gapiScript}function U1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(r,e){const n=$r(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(qr(c,e??{}))return o;Ei(o,"already-initialized")}return n.initialize({options:e})}function z1(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Zi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function B1(r,e,n){const s=Sh(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=Ib(e),{host:d,port:m}=q1(e),v=m===null?"":`:${m}`,y={url:`${c}//${d}${v}/`},T=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(qr(y,s.config.emulator)&&qr(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,$s(d)?(Qm(`${c}//${d}${v}`),Ym("Auth",!0)):H1()}function Ib(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function q1(r){const e=Ib(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:N_(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:N_(d)}}}function N_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function H1(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(r,e){return v1(r,"POST","/v1/accounts:signInWithIdp",Zm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="http://localhost";class Fs extends Cb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new Fs(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ja(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ja(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ja(e,n)}buildRequest(){const e={requestUri:F1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends np{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends rc{constructor(){super("facebook.com")}static credential(e){return Fs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fs._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Xi.credential(n,s)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends rc{constructor(){super("github.com")}static credential(e){return Fs._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.GITHUB_SIGN_IN_METHOD="github.com";jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends rc{constructor(){super("twitter.com")}static credential(e,n){return Fs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Vr.credential(n,s)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Qn._fromIdTokenResponse(e,s,o),d=D_(s);return new ao({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=D_(s);return new ao({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function D_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends Zn{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new rh(e,n,s,o)}}function Nb(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?rh._fromErrorAndOperation(r,c,e,s):c})}async function G1(r,e,n=!1){const s=await Yl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return ao._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(r,e,n=!1){const{auth:s}=r;if(Vn(s.app))return Promise.reject(Bs(s));const o="reauthenticate";try{const c=await Yl(r,Nb(s,o,e,r),n);Se(c.idToken,s,"internal-error");const d=Jm(c.idToken);Se(d,s,"internal-error");const{sub:m}=d;return Se(r.uid===m,s,"user-mismatch"),ao._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ei(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(r,e,n=!1){if(Vn(r.app))return Promise.reject(Bs(r));const s="signIn",o=await Nb(r,s,e),c=await ao._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}function K1(r,e,n,s){return gt(r).onIdTokenChanged(e,n,s)}function $1(r,e,n){return gt(r).beforeAuthStateChanged(e,n)}function X1(r,e,n,s){return gt(r).onAuthStateChanged(e,n,s)}function W1(r){return gt(r).signOut()}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=1e3,J1=10;class Ob extends Db{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,v)=>{this.notifyListeners(d,v)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);C1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,J1):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ob.type="LOCAL";const ex=Ob;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends Db{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Mb.type="SESSION";const kb=Mb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new wh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,c)),v=await tx(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:v})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,v)=>{const y=ip("",20);o.port1.start();const T=setTimeout(()=>{v(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const w=A;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(w.data.response);break;default:clearTimeout(T),clearTimeout(c),v(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return window}function ix(r){yi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){return typeof yi().WorkerGlobalScope<"u"&&typeof yi().importScripts=="function"}async function rx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sx(){return navigator?.serviceWorker?.controller||null}function ax(){return jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firebaseLocalStorageDb",ox=1,ah="firebaseLocalStorage",Pb="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ah(r,e){return r.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function lx(){const r=indexedDB.deleteDatabase(Vb);return new sc(r).toPromise()}function Am(){const r=indexedDB.open(Vb,ox);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ah,{keyPath:Pb})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ah)?e(s):(s.close(),await lx(),e(await Am()))})})}async function O_(r,e,n){const s=Ah(r,!0).put({[Pb]:e,value:n});return new sc(s).toPromise()}async function cx(r,e){const n=Ah(r,!1).get(e),s=await new sc(n).toPromise();return s===void 0?null:s.value}function M_(r,e){const n=Ah(r,!0).delete(e);return new sc(n).toPromise()}const ux=800,hx=3;class Ub{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>hx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(ax()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rx(),!this.activeServiceWorker)return;this.sender=new nx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Am();return await O_(e,sh,"1"),await M_(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>O_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>cx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>M_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Ah(o,!1).getAll();return new sc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ux)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ub.type="LOCAL";const dx=Ub;new ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(r,e){return e?Zi(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends Cb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ja(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ja(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fx(r){return Y1(r.auth,new rp(r),r.bypassAuthState)}function mx(r){const{auth:e,user:n}=r;return Se(n,e,"internal-error"),Q1(n,new rp(r),r.bypassAuthState)}async function px(r){const{auth:e,user:n}=r;return Se(n,e,"internal-error"),G1(n,new rp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const v={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(v))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fx;case"linkViaPopup":case"linkViaRedirect":return px;case"reauthViaPopup":case"reauthViaRedirect":return mx;default:Ei(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=new ic(2e3,1e4);async function yx(r,e,n){if(Vn(r.app))return Promise.reject(Kn(r,"operation-not-supported-in-this-environment"));const s=Sh(r);h1(r,e,np);const o=Lb(s,n);return new Ps(s,"signInViaPopup",e,o).executeNotNull()}class Ps extends zb{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Ps.currentPopupAction&&Ps.currentPopupAction.cancel(),Ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gx.get())};e()}}Ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="pendingRedirect",Gu=new Map;class _x extends zb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Gu.get(this.auth._key());if(!e){try{const s=await bx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Gu.set(this.auth._key(),e)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bx(r,e){const n=Sx(e),s=Ex(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Tx(r,e){Gu.set(r._key(),e)}function Ex(r){return Zi(r._redirectPersistence)}function Sx(r){return Fu(vx,r.config.apiKey,r.name)}async function wx(r,e,n=!1){if(Vn(r.app))return Promise.reject(Bs(r));const s=Sh(r),o=Lb(s,e),d=await new _x(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=600*1e3;class xx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Bb(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ax&&this.cachedEventUids.clear(),this.cachedEventUids.has(k_(e))}saveEventToCache(e){this.cachedEventUids.add(k_(e)),this.lastProcessedEventTime=Date.now()}}function k_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Bb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function Rx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(r,e={}){return po(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nx=/^https?/;async function Dx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Ix(r);for(const n of e)try{if(Ox(n))return}catch{}Ei(r,"unauthorized-domain")}function Ox(r){const e=Sm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Nx.test(n))return!1;if(Cx.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new ic(3e4,6e4);function j_(){const r=yi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function kx(r){return new Promise((e,n)=>{function s(){j_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j_(),n(Kn(r,"network-request-failed"))},timeout:Mx.get()})}if(yi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yi().gapi?.load)s();else{const o=U1("iframefcb");return yi()[o]=()=>{gapi.load?s():n(Kn(r,"network-request-failed"))},V1(`${P1()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Qu=null,e})}let Qu=null;function jx(r){return Qu=Qu||kx(r),Qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=new ic(5e3,15e3),Px="__/auth/iframe",Ux="emulator/auth/iframe",Lx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bx(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Wm(e,Ux):`https://${r.config.authDomain}/${Px}`,s={apiKey:e.apiKey,appName:r.name,v:mo},o=zx.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${nc(s).slice(1)}`}async function qx(r){const e=await jx(r),n=yi().gapi;return Se(n,r,"internal-error"),e.open({where:document.body,url:Bx(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lx,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=Kn(r,"network-request-failed"),m=yi().setTimeout(()=>{c(d)},Vx.get());function v(){yi().clearTimeout(m),o(s)}s.ping(v).then(v,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Fx=500,Gx=600,Qx="_blank",Yx="http://localhost";class V_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kx(r,e,n,s=Fx,o=Gx){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const v={...Hx,width:s.toString(),height:o.toString(),top:c,left:d},y=Zt().toLowerCase();n&&(m=Tb(y)?Qx:n),_b(y)&&(e=e||Yx,v.scrollbars="yes");const T=Object.entries(v).reduce((w,[U,Y])=>`${w}${U}=${Y},`,"");if(I1(y)&&m!=="_self")return $x(e||"",m),new V_(null);const A=window.open(e||"",m,T);Se(A,r,"popup-blocked");try{A.focus()}catch{}return new V_(A)}function $x(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="__/auth/handler",Wx="emulator/auth/handler",Zx=encodeURIComponent("fac");async function P_(r,e,n,s,o,c){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:mo,eventId:o};if(e instanceof np){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",Kw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))d[T]=A}if(e instanceof rc){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const v=await r._getAppCheckToken(),y=v?`#${Zx}=${encodeURIComponent(v)}`:"";return`${Jx(r)}?${nc(m).slice(1)}${y}`}function Jx({config:r}){return r.emulator?Wm(r,Wx):`https://${r.authDomain}/${Xx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="webStorageSupport";class eR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kb,this._completeRedirectFn=wx,this._overrideRedirectResult=Tx}async _openPopup(e,n,s,o){tr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await P_(e,n,s,Sm(),o);return Kx(e,c,ip())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await P_(e,n,s,Sm(),o);return ix(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(tr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await qx(e),s=new xx(e);return n.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lm,{type:lm},o=>{const c=o?.[0]?.[lm];c!==void 0&&n(!!c),Ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Dx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xb()||bb()||ep()}}const tR=eR;var U_="@firebase/auth",L_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rR(r){$n(new Ln("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Se(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const v={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rb(r)},y=new k1(s,o,c,v);return z1(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),$n(new Ln("auth-internal",e=>{const n=Sh(e.getProvider("auth").getImmediate());return(s=>new nR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(U_,L_,iR(r)),cn(U_,L_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=300,aR=nb("authIdTokenMaxAge")||sR;let z_=null;const oR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>aR)return;const o=n?.token;z_!==o&&(z_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function lR(r=Eh()){const e=$r(r,"auth");if(e.isInitialized())return e.getImmediate();const n=L1(r,{popupRedirectResolver:tR,persistence:[dx,ex,kb]}),s=nb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=oR(c.toString());$1(n,d,()=>d(n.currentUser)),K1(n,m=>d(m))}}const o=J0("auth");return o&&B1(n,`http://${o}`),n}function cR(){return document.getElementsByTagName("head")?.[0]??document}j1({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=Kn("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",cR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rR("Browser");var uR="firebase",hR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn(uR,hR,"app");var B_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zr,qb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,R){function N(){}N.prototype=R.prototype,O.D=R.prototype,O.prototype=new N,O.prototype.constructor=O,O.C=function(k,j,P){for(var C=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)C[Pt-2]=arguments[Pt];return R.prototype[j].apply(k,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,R,N){N||(N=0);var k=Array(16);if(typeof R=="string")for(var j=0;16>j;++j)k[j]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(j=0;16>j;++j)k[j]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=O.g[0],N=O.g[1],j=O.g[2];var P=O.g[3],C=R+(P^N&(j^P))+k[0]+3614090360&4294967295;R=N+(C<<7&4294967295|C>>>25),C=P+(j^R&(N^j))+k[1]+3905402710&4294967295,P=R+(C<<12&4294967295|C>>>20),C=j+(N^P&(R^N))+k[2]+606105819&4294967295,j=P+(C<<17&4294967295|C>>>15),C=N+(R^j&(P^R))+k[3]+3250441966&4294967295,N=j+(C<<22&4294967295|C>>>10),C=R+(P^N&(j^P))+k[4]+4118548399&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(j^R&(N^j))+k[5]+1200080426&4294967295,P=R+(C<<12&4294967295|C>>>20),C=j+(N^P&(R^N))+k[6]+2821735955&4294967295,j=P+(C<<17&4294967295|C>>>15),C=N+(R^j&(P^R))+k[7]+4249261313&4294967295,N=j+(C<<22&4294967295|C>>>10),C=R+(P^N&(j^P))+k[8]+1770035416&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(j^R&(N^j))+k[9]+2336552879&4294967295,P=R+(C<<12&4294967295|C>>>20),C=j+(N^P&(R^N))+k[10]+4294925233&4294967295,j=P+(C<<17&4294967295|C>>>15),C=N+(R^j&(P^R))+k[11]+2304563134&4294967295,N=j+(C<<22&4294967295|C>>>10),C=R+(P^N&(j^P))+k[12]+1804603682&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(j^R&(N^j))+k[13]+4254626195&4294967295,P=R+(C<<12&4294967295|C>>>20),C=j+(N^P&(R^N))+k[14]+2792965006&4294967295,j=P+(C<<17&4294967295|C>>>15),C=N+(R^j&(P^R))+k[15]+1236535329&4294967295,N=j+(C<<22&4294967295|C>>>10),C=R+(j^P&(N^j))+k[1]+4129170786&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^j&(R^N))+k[6]+3225465664&4294967295,P=R+(C<<9&4294967295|C>>>23),C=j+(R^N&(P^R))+k[11]+643717713&4294967295,j=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(j^P))+k[0]+3921069994&4294967295,N=j+(C<<20&4294967295|C>>>12),C=R+(j^P&(N^j))+k[5]+3593408605&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^j&(R^N))+k[10]+38016083&4294967295,P=R+(C<<9&4294967295|C>>>23),C=j+(R^N&(P^R))+k[15]+3634488961&4294967295,j=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(j^P))+k[4]+3889429448&4294967295,N=j+(C<<20&4294967295|C>>>12),C=R+(j^P&(N^j))+k[9]+568446438&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^j&(R^N))+k[14]+3275163606&4294967295,P=R+(C<<9&4294967295|C>>>23),C=j+(R^N&(P^R))+k[3]+4107603335&4294967295,j=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(j^P))+k[8]+1163531501&4294967295,N=j+(C<<20&4294967295|C>>>12),C=R+(j^P&(N^j))+k[13]+2850285829&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^j&(R^N))+k[2]+4243563512&4294967295,P=R+(C<<9&4294967295|C>>>23),C=j+(R^N&(P^R))+k[7]+1735328473&4294967295,j=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(j^P))+k[12]+2368359562&4294967295,N=j+(C<<20&4294967295|C>>>12),C=R+(N^j^P)+k[5]+4294588738&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^j)+k[8]+2272392833&4294967295,P=R+(C<<11&4294967295|C>>>21),C=j+(P^R^N)+k[11]+1839030562&4294967295,j=P+(C<<16&4294967295|C>>>16),C=N+(j^P^R)+k[14]+4259657740&4294967295,N=j+(C<<23&4294967295|C>>>9),C=R+(N^j^P)+k[1]+2763975236&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^j)+k[4]+1272893353&4294967295,P=R+(C<<11&4294967295|C>>>21),C=j+(P^R^N)+k[7]+4139469664&4294967295,j=P+(C<<16&4294967295|C>>>16),C=N+(j^P^R)+k[10]+3200236656&4294967295,N=j+(C<<23&4294967295|C>>>9),C=R+(N^j^P)+k[13]+681279174&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^j)+k[0]+3936430074&4294967295,P=R+(C<<11&4294967295|C>>>21),C=j+(P^R^N)+k[3]+3572445317&4294967295,j=P+(C<<16&4294967295|C>>>16),C=N+(j^P^R)+k[6]+76029189&4294967295,N=j+(C<<23&4294967295|C>>>9),C=R+(N^j^P)+k[9]+3654602809&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^j)+k[12]+3873151461&4294967295,P=R+(C<<11&4294967295|C>>>21),C=j+(P^R^N)+k[15]+530742520&4294967295,j=P+(C<<16&4294967295|C>>>16),C=N+(j^P^R)+k[2]+3299628645&4294967295,N=j+(C<<23&4294967295|C>>>9),C=R+(j^(N|~P))+k[0]+4096336452&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~j))+k[7]+1126891415&4294967295,P=R+(C<<10&4294967295|C>>>22),C=j+(R^(P|~N))+k[14]+2878612391&4294967295,j=P+(C<<15&4294967295|C>>>17),C=N+(P^(j|~R))+k[5]+4237533241&4294967295,N=j+(C<<21&4294967295|C>>>11),C=R+(j^(N|~P))+k[12]+1700485571&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~j))+k[3]+2399980690&4294967295,P=R+(C<<10&4294967295|C>>>22),C=j+(R^(P|~N))+k[10]+4293915773&4294967295,j=P+(C<<15&4294967295|C>>>17),C=N+(P^(j|~R))+k[1]+2240044497&4294967295,N=j+(C<<21&4294967295|C>>>11),C=R+(j^(N|~P))+k[8]+1873313359&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~j))+k[15]+4264355552&4294967295,P=R+(C<<10&4294967295|C>>>22),C=j+(R^(P|~N))+k[6]+2734768916&4294967295,j=P+(C<<15&4294967295|C>>>17),C=N+(P^(j|~R))+k[13]+1309151649&4294967295,N=j+(C<<21&4294967295|C>>>11),C=R+(j^(N|~P))+k[4]+4149444226&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~j))+k[11]+3174756917&4294967295,P=R+(C<<10&4294967295|C>>>22),C=j+(R^(P|~N))+k[2]+718787259&4294967295,j=P+(C<<15&4294967295|C>>>17),C=N+(P^(j|~R))+k[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(j+(C<<21&4294967295|C>>>11))&4294967295,O.g[2]=O.g[2]+j&4294967295,O.g[3]=O.g[3]+P&4294967295}s.prototype.u=function(O,R){R===void 0&&(R=O.length);for(var N=R-this.blockSize,k=this.B,j=this.h,P=0;P<R;){if(j==0)for(;P<=N;)o(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<R;)if(k[j++]=O.charCodeAt(P++),j==this.blockSize){o(this,k),j=0;break}}else for(;P<R;)if(k[j++]=O[P++],j==this.blockSize){o(this,k),j=0;break}}this.h=j,this.o+=R},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;var N=8*this.o;for(R=O.length-8;R<O.length;++R)O[R]=N&255,N/=256;for(this.u(O),O=Array(16),R=N=0;4>R;++R)for(var k=0;32>k;k+=8)O[N++]=this.g[R]>>>k&255;return O};function c(O,R){var N=m;return Object.prototype.hasOwnProperty.call(N,O)?N[O]:N[O]=R(O)}function d(O,R){this.h=R;for(var N=[],k=!0,j=O.length-1;0<=j;j--){var P=O[j]|0;k&&P==R||(N[j]=P,k=!1)}this.g=N}var m={};function v(O){return-128<=O&&128>O?c(O,function(R){return new d([R|0],0>R?-1:0)}):new d([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return A;if(0>O)return X(y(-O));for(var R=[],N=1,k=0;O>=N;k++)R[k]=O/N|0,N*=4294967296;return new d(R,0)}function T(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return X(T(O.substring(1),R));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=y(Math.pow(R,8)),k=A,j=0;j<O.length;j+=8){var P=Math.min(8,O.length-j),C=parseInt(O.substring(j,j+P),R);8>P?(P=y(Math.pow(R,P)),k=k.j(P).add(y(C))):(k=k.j(N),k=k.add(y(C)))}return k}var A=v(0),w=v(1),U=v(16777216);r=d.prototype,r.m=function(){if(re(this))return-X(this).m();for(var O=0,R=1,N=0;N<this.g.length;N++){var k=this.i(N);O+=(0<=k?k:4294967296+k)*R,R*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(Y(this))return"0";if(re(this))return"-"+X(this).toString(O);for(var R=y(Math.pow(O,6)),N=this,k="";;){var j=ce(N,R).g;N=F(N,j.j(R));var P=((0<N.g.length?N.g[0]:N.h)>>>0).toString(O);if(N=j,Y(N))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function Y(O){if(O.h!=0)return!1;for(var R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function re(O){return O.h==-1}r.l=function(O){return O=F(this,O),re(O)?-1:Y(O)?0:1};function X(O){for(var R=O.g.length,N=[],k=0;k<R;k++)N[k]=~O.g[k];return new d(N,~O.h).add(w)}r.abs=function(){return re(this)?X(this):this},r.add=function(O){for(var R=Math.max(this.g.length,O.g.length),N=[],k=0,j=0;j<=R;j++){var P=k+(this.i(j)&65535)+(O.i(j)&65535),C=(P>>>16)+(this.i(j)>>>16)+(O.i(j)>>>16);k=C>>>16,P&=65535,C&=65535,N[j]=C<<16|P}return new d(N,N[N.length-1]&-2147483648?-1:0)};function F(O,R){return O.add(X(R))}r.j=function(O){if(Y(this)||Y(O))return A;if(re(this))return re(O)?X(this).j(X(O)):X(X(this).j(O));if(re(O))return X(this.j(X(O)));if(0>this.l(U)&&0>O.l(U))return y(this.m()*O.m());for(var R=this.g.length+O.g.length,N=[],k=0;k<2*R;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var j=0;j<O.g.length;j++){var P=this.i(k)>>>16,C=this.i(k)&65535,Pt=O.i(j)>>>16,ot=O.i(j)&65535;N[2*k+2*j]+=C*ot,ie(N,2*k+2*j),N[2*k+2*j+1]+=P*ot,ie(N,2*k+2*j+1),N[2*k+2*j+1]+=C*Pt,ie(N,2*k+2*j+1),N[2*k+2*j+2]+=P*Pt,ie(N,2*k+2*j+2)}for(k=0;k<R;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=R;k<2*R;k++)N[k]=0;return new d(N,0)};function ie(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function te(O,R){this.g=O,this.h=R}function ce(O,R){if(Y(R))throw Error("division by zero");if(Y(O))return new te(A,A);if(re(O))return R=ce(X(O),R),new te(X(R.g),X(R.h));if(re(R))return R=ce(O,X(R)),new te(X(R.g),R.h);if(30<O.g.length){if(re(O)||re(R))throw Error("slowDivide_ only works with positive integers.");for(var N=w,k=R;0>=k.l(O);)N=G(N),k=G(k);var j=fe(N,1),P=fe(k,1);for(k=fe(k,2),N=fe(N,2);!Y(k);){var C=P.add(k);0>=C.l(O)&&(j=j.add(N),P=C),k=fe(k,1),N=fe(N,1)}return R=F(O,j.j(R)),new te(j,R)}for(j=A;0<=O.l(R);){for(N=Math.max(1,Math.floor(O.m()/R.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=y(N),C=P.j(R);re(C)||0<C.l(O);)N-=k,P=y(N),C=P.j(R);Y(P)&&(P=w),j=j.add(P),O=F(O,C)}return new te(j,O)}r.A=function(O){return ce(this,O).h},r.and=function(O){for(var R=Math.max(this.g.length,O.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)&O.i(k);return new d(N,this.h&O.h)},r.or=function(O){for(var R=Math.max(this.g.length,O.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)|O.i(k);return new d(N,this.h|O.h)},r.xor=function(O){for(var R=Math.max(this.g.length,O.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)^O.i(k);return new d(N,this.h^O.h)};function G(O){for(var R=O.g.length+1,N=[],k=0;k<R;k++)N[k]=O.i(k)<<1|O.i(k-1)>>>31;return new d(N,O.h)}function fe(O,R){var N=R>>5;R%=32;for(var k=O.g.length-N,j=[],P=0;P<k;P++)j[P]=0<R?O.i(P+N)>>>R|O.i(P+N+1)<<32-R:O.i(P+N);return new d(j,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,qb=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,zr=d}).apply(typeof B_<"u"?B_:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hb,Ol,Fb,Yu,xm,Gb,Qb,Yb;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(u,g){if(g)e:{var _=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in _))break e;_=_[L]}u=u[u.length-1],S=_[u],g=g(S),g!=S&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function c(u,g){u instanceof String&&(u+="");var _=0,S=!1,L={next:function(){if(!S&&_<u.length){var Q=_++;return{value:g(Q,u[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(u){return u||function(){return c(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function v(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function y(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function T(u,g,_){return u.call.apply(u.bind,arguments)}function A(u,g,_){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(g,L)}}return function(){return u.apply(g,arguments)}}function w(u,g,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,w.apply(null,arguments)}function U(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function Y(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(S,L,Q){for(var ae=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ae[Ve-2]=arguments[Ve];return g.prototype[L].apply(S,ae)}}function re(u){const g=u.length;if(0<g){const _=Array(g);for(let S=0;S<g;S++)_[S]=u[S];return _}return[]}function X(u,g){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(v(S)){const L=u.length||0,Q=S.length||0;u.length=L+Q;for(let ae=0;ae<Q;ae++)u[L+ae]=S[ae]}else u.push(S)}}class F{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ie(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function ce(u){return ce[" "](u),u}ce[" "]=function(){};var G=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function fe(u,g,_){for(const S in u)g.call(_,u[S],S,u)}function O(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function R(u){const g={};for(const _ in u)g[_]=u[_];return g}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,g){let _,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(_ in S)u[_]=S[_];for(let Q=0;Q<N.length;Q++)_=N[Q],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function j(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function P(u){m.setTimeout(()=>{throw u},0)}function C(){var u=Be;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Pt{constructor(){this.h=this.g=null}add(g,_){const S=ot.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var ot=new F(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ge=!1,Be=new Pt,D=()=>{const u=m.Promise.resolve(void 0);oe=()=>{u.then(ne)}};var ne=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){P(_)}var g=ot;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ge=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return u})();function Ce(u,g){if(se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(G){e:{try{ce(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:we[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}Y(Ce,se);var we={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Jn(u,g,_,S,L){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=L,this.key=++Je,this.da=this.fa=!1}function rr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wi(u){this.src=u,this.g={},this.h=0}wi.prototype.add=function(u,g,_,S,L){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var ae=es(u,g,S,L);return-1<ae?(g=u[ae],_||(g.fa=!1)):(g=new Jn(g,this.src,Q,!!S,L),g.fa=_,u.push(g)),g};function Jr(u,g){var _=g.type;if(_ in u.g){var S=u.g[_],L=Array.prototype.indexOf.call(S,g,void 0),Q;(Q=0<=L)&&Array.prototype.splice.call(S,L,1),Q&&(rr(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function es(u,g,_,S){for(var L=0;L<u.length;++L){var Q=u[L];if(!Q.da&&Q.listener==g&&Q.capture==!!_&&Q.ha==S)return L}return-1}var ts="closure_lm_"+(1e6*Math.random()|0),To={};function fc(u,g,_,S,L){if(Array.isArray(g)){for(var Q=0;Q<g.length;Q++)fc(u,g[Q],_,S,L);return null}return _=mc(_),u&&u[Nt]?u.K(g,_,y(S)?!!S.capture:!1,L):En(u,g,_,!1,S,L)}function En(u,g,_,S,L,Q){if(!g)throw Error("Invalid event type");var ae=y(L)?!!L.capture:!!L,Ve=ta(u);if(Ve||(u[ts]=Ve=new wi(u)),_=Ve.add(g,_,S,ae,Q),_.proxy)return _;if(S=$h(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)ve||(L=ae),L===void 0&&(L=!1),u.addEventListener(g.toString(),S,L);else if(u.attachEvent)u.attachEvent(ns(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function $h(){function u(_){return g.call(u.src,u.listener,_)}const g=Xh;return u}function Eo(u,g,_,S,L){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)Eo(u,g[Q],_,S,L);else S=y(S)?!!S.capture:!!S,_=mc(_),u&&u[Nt]?(u=u.i,g=String(g).toString(),g in u.g&&(Q=u.g[g],_=es(Q,_,S,L),-1<_&&(rr(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete u.g[g],u.h--)))):u&&(u=ta(u))&&(g=u.g[g.toString()],u=-1,g&&(u=es(g,_,S,L)),(_=-1<u?g[u]:null)&&ea(_))}function ea(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Nt])Jr(g.i,u);else{var _=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(_,S,u.capture):g.detachEvent?g.detachEvent(ns(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=ta(g))?(Jr(_,u),_.h==0&&(_.src=null,g[ts]=null)):rr(u)}}}function ns(u){return u in To?To[u]:To[u]="on"+u}function Xh(u,g){if(u.da)u=!0;else{g=new Ce(g,this);var _=u.listener,S=u.ha||u.src;u.fa&&ea(u),u=_.call(S,g)}return u}function ta(u){return u=u[ts],u instanceof wi?u:null}var So="__closure_events_fn_"+(1e9*Math.random()>>>0);function mc(u){return typeof u=="function"?u:(u[So]||(u[So]=function(g){return u.handleEvent(g)}),u[So])}function lt(){le.call(this),this.i=new wi(this),this.M=this,this.F=null}Y(lt,le),lt.prototype[Nt]=!0,lt.prototype.removeEventListener=function(u,g,_,S){Eo(this,u,g,_,S)};function Ge(u,g){var _,S=u.F;if(S)for(_=[];S;S=S.F)_.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new se(g,u);else if(g instanceof se)g.target=g.target||u;else{var L=g;g=new se(S,u),k(g,L)}if(L=!0,_)for(var Q=_.length-1;0<=Q;Q--){var ae=g.g=_[Q];L=hn(ae,S,!0,g)&&L}if(ae=g.g=u,L=hn(ae,S,!0,g)&&L,L=hn(ae,S,!1,g)&&L,_)for(Q=0;Q<_.length;Q++)ae=g.g=_[Q],L=hn(ae,S,!1,g)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],S=0;S<_.length;S++)rr(_[S]);delete u.g[g],u.h--}}this.F=null},lt.prototype.K=function(u,g,_,S){return this.i.add(String(u),g,!1,_,S)},lt.prototype.L=function(u,g,_,S){return this.i.add(String(u),g,!0,_,S)};function hn(u,g,_,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,Q=0;Q<g.length;++Q){var ae=g[Q];if(ae&&!ae.da&&ae.capture==_){var Ve=ae.listener,At=ae.ha||ae.src;ae.fa&&Jr(u.i,ae),L=Ve.call(At,S)!==!1&&L}}return L&&!S.defaultPrevented}function Qt(u,g,_){if(typeof u=="function")_&&(u=w(u,_));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(u,g||0)}function pc(u){u.g=Qt(()=>{u.g=null,u.i&&(u.i=!1,pc(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Wh extends le{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:pc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(u){le.call(this),this.h=u,this.g={}}Y(is,le);var rs=[];function ss(u){fe(u.g,function(g,_){this.g.hasOwnProperty(_)&&ea(g)},u),u.g={}}is.prototype.N=function(){is.aa.N.call(this),ss(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=m.JSON.stringify,na=m.JSON.parse,as=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function wo(){}wo.prototype.h=null;function Ao(u){return u.h||(u.h=u.i())}function xo(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xi(){se.call(this,"d")}Y(xi,se);function Ro(){se.call(this,"c")}Y(Ro,se);var ei={},Io=null;function sr(){return Io=Io||new lt}ei.La="serverreachability";function ia(u){se.call(this,ei.La,u)}Y(ia,se);function ar(u){const g=sr();Ge(g,new ia(g))}ei.STAT_EVENT="statevent";function gc(u,g){se.call(this,ei.STAT_EVENT,u),this.stat=g}Y(gc,se);function it(u){const g=sr();Ge(g,new gc(g,u))}ei.Ma="timingevent";function wt(u,g){se.call(this,ei.Ma,u),this.size=g}Y(wt,se);function yt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},g)}function Sn(){this.g=!0}Sn.prototype.xa=function(){this.g=!1};function Co(u,g,_,S,L,Q){u.info(function(){if(u.g)if(Q)for(var ae="",Ve=Q.split("&"),At=0;At<Ve.length;At++){var Pe=Ve[At].split("=");if(1<Pe.length){var Ot=Pe[0];Pe=Pe[1];var xt=Ot.split("_");ae=2<=xt.length&&xt[1]=="type"?ae+(Ot+"="+Pe+"&"):ae+(Ot+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+g+`
`+_+`
`+ae})}function Zh(u,g,_,S,L,Q,ae){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+g+`
`+_+`
`+Q+" "+ae})}function or(u,g,_,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+os(u,_)+(S?" "+S:"")})}function yc(u,g){u.info(function(){return"TIMEOUT: "+g})}Sn.prototype.info=function(){};function os(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var S=_[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var Q=L[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<L.length;ae++)L[ae]=""}}}}return zn(_)}catch{return g}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ni(){}Y(ni,wo),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},ti=new ni;function Jt(u,g,_,S){this.j=u,this.i=g,this.l=_,this.R=S||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var No={},ra={};function Bn(u,g,_){u.L=1,u.v=ds(dn(g)),u.m=_,u.P=!0,Ii(u,null)}function Ii(u,g){u.F=Date.now(),ls(u),u.A=dn(u.v);var _=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Vo(_.i,"t",S),u.C=0,_=u.j.J,u.h=new ht,u.g=Mc(u.j,_?g:null,!u.m),0<u.O&&(u.M=new Wh(w(u.Y,u,u.g),u.O)),g=u.U,_=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(rs[0]=L.toString()),L=rs);for(var Q=0;Q<L.length;Q++){var ae=fc(_,L[Q],S||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ar(),Co(u.i,u.u,u.A,u.l,u.R,u.m)}Jt.prototype.ca=function(u){u=u.target;const g=this.M;g&&Rn(u)==3?g.j():this.Y(u)},Jt.prototype.Y=function(u){try{if(u==this.g)e:{const xt=Rn(this.g);var g=this.g.Ba();const Vi=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Ac(this.g)))){this.J||xt!=4||g==7||(g==8||0>=Vi?ar(3):ar(2)),cr(this);var _=this.g.Z();this.X=_;t:if(vc(this)){var S=Ac(this.g);u="";var L=S.length,Q=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ut(this),ii(this);var ae="";break t}this.h.i=new m.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,u+=this.h.i.decode(S[g],{stream:!(Q&&g==L-1)});S.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Zh(this.i,this.u,this.A,this.l,this.R,xt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,At=this.g;if((Ve=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Ve)){var Pe=Ve;break t}}Pe=null}if(_=Pe)or(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,_);else{this.o=!1,this.s=3,it(12),Ut(this),ii(this);break e}}if(this.P){_=!0;let Lt;for(;!this.J&&this.C<ae.length;)if(Lt=_c(this,ae),Lt==ra){xt==4&&(this.s=4,it(14),_=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==No){this.s=4,it(15),or(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else or(this.i,this.l,Lt,null),cs(this,Lt);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||ae.length!=0||this.h.h||(this.s=1,it(16),_=!1),this.o=this.o&&_,!_)or(this.i,this.l,ae,"[Invalid Chunked Response]"),Ut(this),ii(this);else if(0<ae.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),bs(Ot),Ot.M=!0,it(11))}}else or(this.i,this.l,ae,null),cs(this,ae);xt==4&&Ut(this),this.o&&!this.J&&(xt==4?Nc(this.j,this):(this.o=!1,ls(this)))}else id(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),Ut(this),ii(this)}}}catch{}finally{}};function vc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _c(u,g){var _=u.C,S=g.indexOf(`
`,_);return S==-1?ra:(_=Number(g.substring(_,S)),isNaN(_)?No:(S+=1,S+_>g.length?ra:(g=g.slice(S,S+_),u.C=S+_,g)))}Jt.prototype.cancel=function(){this.J=!0,Ut(this)};function ls(u){u.S=Date.now()+u.I,bc(u,u.I)}function bc(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=yt(w(u.ba,u),g)}function cr(u){u.B&&(m.clearTimeout(u.B),u.B=null)}Jt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(yc(this.i,this.A),this.L!=2&&(ar(),it(17)),Ut(this),this.s=2,ii(this)):bc(this,this.S-u)};function ii(u){u.j.G==0||u.J||Nc(u.j,u)}function Ut(u){cr(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,ss(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function cs(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||Do(_.h,u))){if(!u.K&&Do(_.h,u)&&_.G==3){try{var S=_.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ga(_),ma(_);else break e;Bo(_),it(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=yt(w(_.Za,_),6e3));if(1>=aa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ji(_,11)}else if((u.K||_.g==u)&&ga(_),!ie(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let Pe=L[g];if(_.T=Pe[0],Pe=Pe[1],_.G==2)if(Pe[0]=="c"){_.K=Pe[1],_.ia=Pe[2];const Ot=Pe[3];Ot!=null&&(_.la=Ot,_.j.info("VER="+_.la));const xt=Pe[4];xt!=null&&(_.Aa=xt,_.j.info("SVER="+_.Aa));const Vi=Pe[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(S=1.5*Vi,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Lt=u.g;if(Lt){const ui=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var Q=S.h;Q.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(oa(Q,Q.h),Q.h=null))}if(S.D){const Ho=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(S.ya=Ho,Ke(S.I,S.D,Ho))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ae=u;if(S.qa=Oc(S,S.J?S.ia:null,S.W),ae.K){en(S.h,ae);var Ve=ae,At=S.L;At&&(Ve.I=At),Ve.B&&(cr(Ve),ls(Ve)),S.g=ae}else Ic(S);0<_.i.length&&pa(_)}else Pe[0]!="stop"&&Pe[0]!="close"||ji(_,7);else _.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?ji(_,7):Lo(_):Pe[0]!="noop"&&_.l&&_.l.ta(Pe),_.v=0)}}ar(4)}catch{}}var Tc=class{constructor(u,g){this.g=u,this.map=g}};function Ci(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function aa(u){return u.h?1:u.g?u.g.size:0}function Do(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function oa(u,g){u.g?u.g.add(g):u.h=g}function en(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ci.prototype.cancel=function(){if(this.i=Oo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Oo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return re(u.i)}function Jh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(v(u)){for(var g=[],_=u.length,S=0;S<_;S++)g.push(u[S]);return g}g=[],_=0;for(S in u)g[_++]=u[S];return g}function la(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(v(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const S in u)g[_++]=S;return g}}}function Mo(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(v(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=la(u),S=Jh(u),L=S.length,Q=0;Q<L;Q++)g.call(void 0,S[Q],_&&_[Q],u)}var us=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var S=u[_].indexOf("="),L=null;if(0<=S){var Q=u[_].substring(0,S);L=u[_].substring(S+1)}else Q=u[_];g(Q,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function vt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof vt){this.h=u.h,hs(this,u.j),this.o=u.o,this.g=u.g,ur(this,u.s),this.l=u.l;var g=u.i,_=new Di;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Ni(this,_),this.m=u.m}else u&&(g=String(u).match(us))?(this.h=!1,hs(this,g[1]||"",!0),this.o=wn(g[2]||""),this.g=wn(g[3]||"",!0),ur(this,g[4]),this.l=wn(g[5]||"",!0),Ni(this,g[6]||"",!0),this.m=wn(g[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}vt.prototype.toString=function(){var u=[],g=this.j;g&&u.push(fs(g,ko,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(fs(g,ko,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(fs(_,_.charAt(0)=="/"?td:jo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",fs(_,ca)),u.join("")};function dn(u){return new vt(u)}function hs(u,g,_){u.j=_?wn(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ur(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Ni(u,g,_){g instanceof Di?(u.i=g,Sc(u.i,u.h)):(_||(g=fs(g,nd)),u.i=new Di(g,u.h))}function Ke(u,g,_){u.i.set(g,_)}function ds(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function wn(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fs(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Ec),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ec(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ko=/[#\/\?@]/g,jo=/[#\?:]/g,td=/[#\?]/g,nd=/[#\?@]/g,ca=/#/g;function Di(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&ed(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Di.prototype,r.add=function(u,g){An(this),this.i=null,u=ri(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function Oi(u,g){An(u),g=ri(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Mi(u,g){return An(u),g=ri(u,g),u.g.has(g)}r.forEach=function(u,g){An(this),this.g.forEach(function(_,S){_.forEach(function(L){u.call(g,L,S,this)},this)},this)},r.na=function(){An(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let S=0;S<g.length;S++){const L=u[S];for(let Q=0;Q<L.length;Q++)_.push(g[S])}return _},r.V=function(u){An(this);let g=[];if(typeof u=="string")Mi(this,u)&&(g=g.concat(this.g.get(ri(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},r.set=function(u,g){return An(this),this.i=null,u=ri(this,u),Mi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Vo(u,g,_){Oi(u,g),0<_.length&&(u.i=null,u.g.set(ri(u,g),re(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var S=g[_];const Q=encodeURIComponent(String(S)),ae=this.V(S);for(S=0;S<ae.length;S++){var L=Q;ae[S]!==""&&(L+="="+encodeURIComponent(String(ae[S]))),u.push(L)}}return this.i=u.join("&")};function ri(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Sc(u,g){g&&!u.j&&(An(u),u.i=null,u.g.forEach(function(_,S){var L=S.toLowerCase();S!=L&&(Oi(this,S),Vo(this,L,_))},u)),u.j=g}function ms(u,g){const _=new Sn;if(m.Image){const S=new Image;S.onload=U(xn,_,"TestLoadImage: loaded",!0,g,S),S.onerror=U(xn,_,"TestLoadImage: error",!1,g,S),S.onabort=U(xn,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=U(xn,_,"TestLoadImage: timeout",!1,g,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function qn(u,g){const _=new Sn,S=new AbortController,L=setTimeout(()=>{S.abort(),xn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(Q=>{clearTimeout(L),Q.ok?xn(_,"TestPingServer: ok",!0,g):xn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),xn(_,"TestPingServer: error",!1,g)})}function xn(u,g,_,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(_)}catch{}}function ps(){this.g=new as}function si(u,g,_){const S=_||"";try{Mo(u,function(L,Q){let ae=L;y(L)&&(ae=zn(L)),g.push(S+Q+"="+encodeURIComponent(ae))})}catch(L){throw g.push(S+"type="+encodeURIComponent("_badmap")),L}}function hr(u){this.l=u.Ub||null,this.j=u.eb||!1}Y(hr,wo),hr.prototype.g=function(){return new ki(this.l,this.j)},hr.prototype.i=(function(u){return function(){return u}})({});function ki(u,g){lt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(ki,lt),r=ki.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,oi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Po(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Po(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ai(this):oi(this),this.readyState==3&&Po(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ai(this))},r.Qa=function(u){this.g&&(this.response=u,ai(this))},r.ga=function(){this.g&&ai(this)};function ai(u){u.readyState=4,u.l=null,u.j=null,u.v=null,oi(u)}r.setRequestHeader=function(u,g){this.u.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function oi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Uo(u){let g="";return fe(u,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function Dt(u,g,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Uo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ke(u,g,_))}function He(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(He,lt);var ua=/^https?$/i,gs=["POST","PUT"];r=He.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?Ao(this.o):Ao(ti),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){wc(this,Q);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)_.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())_.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),L=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(gs,g,void 0))||S||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of _)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ys(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){wc(this,Q)}};function wc(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,ha(u),li(u)}function ha(u){u.A||(u.A=!0,Ge(u,"complete"),Ge(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ge(this,"complete"),Ge(this,"abort"),li(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),He.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},r.bb=function(){da(this)};function da(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Rn(u)!=4||u.Z()!=2)){if(u.u&&Rn(u)==4)Qt(u.Ea,0,u);else if(Ge(u,"readystatechange"),Rn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var S;if(S=ae===0){var L=String(u.D).match(us)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),S=!ua.test(L?L.toLowerCase():"")}_=S}if(_)Ge(u,"complete"),Ge(u,"success");else{u.m=6;try{var Q=2<Rn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",ha(u)}}finally{li(u)}}}}function li(u,g){if(u.g){ys(u);const _=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Ge(u,"ready");try{_.onreadystatechange=S}catch{}}}function ys(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Rn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),na(g)}};function Ac(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function id(u){const g={};u=(u.g&&2<=Rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(ie(u[S]))continue;var _=j(u[S]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=g[L]||[];g[L]=Q,Q.push(_)}O(g,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function fa(u){this.Aa=0,this.i=[],this.j=new Sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,u),this.cb=vs("retryDelaySeedMs",1e4,u),this.Wa=vs("forwardChannelMaxRetries",2,u),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ci(u&&u.concurrentRequestLimit),this.Da=new ps,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=fa.prototype,r.la=8,r.G=1,r.connect=function(u,g,_,S){it(0),this.W=u,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=Oc(this,null,this.W),pa(this)};function Lo(u){if(xc(u),u.G==3){var g=u.U++,_=dn(u.I);if(Ke(_,"SID",u.K),Ke(_,"RID",g),Ke(_,"TYPE","terminate"),_s(u,_),g=new Jt(u,u.j,g),g.L=2,g.v=ds(dn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=Mc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ls(g)}Dc(u)}function ma(u){u.g&&(bs(u),u.g.cancel(),u.g=null)}function xc(u){ma(u),u.u&&(m.clearTimeout(u.u),u.u=null),ga(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function pa(u){if(!sa(u.h)&&!u.s){u.s=!0;var g=u.Ga;oe||D(),ge||(oe(),ge=!0),Be.add(g,u),u.B=0}}function rd(u,g){return aa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=yt(w(u.Ga,u,g),qo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Jt(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=R(Q),k(Q,this.S)):Q=this.S),this.m!==null||this.O||(L.H=Q,Q=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Rc(this,L,g),_=dn(this.I),Ke(_,"RID",u),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),_s(this,_),Q&&(this.O?g="headers="+encodeURIComponent(String(Uo(Q)))+"&"+g:this.m&&Dt(_,this.m,Q)),oa(this.h,L),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",g),Ke(_,"SID","null"),L.T=!0,Bn(L,_,null)):Bn(L,_,g),this.G=2}}else this.G==3&&(u?zo(this,u):this.i.length==0||sa(this.h)||zo(this))};function zo(u,g){var _;g?_=g.l:_=u.U++;const S=dn(u.I);Ke(S,"SID",u.K),Ke(S,"RID",_),Ke(S,"AID",u.T),_s(u,S),u.m&&u.o&&Dt(S,u.m,u.o),_=new Jt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Rc(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),oa(u.h,_),Bn(_,S,g)}function _s(u,g){u.H&&fe(u.H,function(_,S){Ke(g,S,_)}),u.l&&Mo({},function(_,S){Ke(g,S,_)})}function Rc(u,g,_){_=Math.min(u.i.length,_);var S=u.l?w(u.l.Na,u.l,u):null;e:{var L=u.i;let Q=-1;for(;;){const ae=["count="+_];Q==-1?0<_?(Q=L[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let Ve=!0;for(let At=0;At<_;At++){let Pe=L[At].g;const Ot=L[At].map;if(Pe-=Q,0>Pe)Q=Math.max(0,L[At].g-100),Ve=!1;else try{si(Ot,ae,"req"+Pe+"_")}catch{S&&S(Ot)}}if(Ve){S=ae.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,S}function Ic(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;oe||D(),ge||(oe(),ge=!0),Be.add(g,u),u.v=0}}function Bo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=yt(w(u.Fa,u),qo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Cc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=yt(w(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),ma(this),Cc(this))};function bs(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function Cc(u){u.g=new Jt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=dn(u.qa);Ke(g,"RID","rpc"),Ke(g,"SID",u.K),Ke(g,"AID",u.T),Ke(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(g,"TO",u.ja),Ke(g,"TYPE","xmlhttp"),_s(u,g),u.m&&u.o&&Dt(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ds(dn(g)),_.m=null,_.P=!0,Ii(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ma(this),Bo(this),it(19))};function ga(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Nc(u,g){var _=null;if(u.g==g){ga(u),bs(u),u.g=null;var S=2}else if(Do(u.h,g))_=g.D,en(u.h,g),S=1;else return;if(u.G!=0){if(g.o)if(S==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=u.B;S=sr(),Ge(S,new wt(S,_)),pa(u)}else Ic(u);else if(L=g.s,L==3||L==0&&0<g.X||!(S==1&&rd(u,g)||S==2&&Bo(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),L){case 1:ji(u,5);break;case 4:ji(u,10);break;case 3:ji(u,6);break;default:ji(u,2)}}}function qo(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function ji(u,g){if(u.j.info("Error code "+g),g==2){var _=w(u.fb,u),S=u.Xa;const L=!S;S=new vt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||hs(S,"https"),ds(S),L?ms(S.toString(),_):qn(S.toString(),_)}else it(2);u.G=0,u.l&&u.l.sa(g),Dc(u),xc(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Dc(u){if(u.G=0,u.ka=[],u.l){const g=Oo(u.h);(g.length!=0||u.i.length!=0)&&(X(u.ka,g),X(u.ka,u.i),u.h.i.length=0,re(u.i),u.i.length=0),u.l.ra()}}function Oc(u,g,_){var S=_ instanceof vt?dn(_):new vt(_);if(S.g!="")g&&(S.g=g+"."+S.g),ur(S,S.s);else{var L=m.location;S=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var Q=new vt(null);S&&hs(Q,S),g&&(Q.g=g),L&&ur(Q,L),_&&(Q.l=_),S=Q}return _=u.D,g=u.ya,_&&g&&Ke(S,_,g),Ke(S,"VER",u.la),_s(u,S),S}function Mc(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new He(new hr({eb:_})):new He(u.pa),g.Ha(u.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function kc(){}r=kc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ya(){}ya.prototype.g=function(u,g){return new tn(u,g)};function tn(u,g){lt.call(this),this.g=new fa(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!ie(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ie(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ci(this)}Y(tn,lt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Lo(this.g)},tn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=zn(u),u=_);g.i.push(new Tc(g.Ya++,u)),g.G==3&&pa(g)},tn.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,tn.aa.N.call(this)};function jc(u){xi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}Y(jc,xi);function Vc(){Ro.call(this),this.status=1}Y(Vc,Ro);function ci(u){this.g=u}Y(ci,kc),ci.prototype.ua=function(){Ge(this.g,"a")},ci.prototype.ta=function(u){Ge(this.g,new jc(u))},ci.prototype.sa=function(u){Ge(this.g,new Vc)},ci.prototype.ra=function(){Ge(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,Yb=function(){return new ya},Qb=function(){return sr()},Gb=ei,xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,Yu=lr,Ri.COMPLETE="complete",Fb=Ri,xo.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Ol=xo,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,Hb=He}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const q_="@firebase/firestore",H_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Th("@firebase/firestore");function Qa(){return Gs.logLevel}function he(r,...e){if(Gs.logLevel<=Me.DEBUG){const n=e.map(sp);Gs.debug(`Firestore (${go}): ${r}`,...n)}}function nr(r,...e){if(Gs.logLevel<=Me.ERROR){const n=e.map(sp);Gs.error(`Firestore (${go}): ${r}`,...n)}}function oo(r,...e){if(Gs.logLevel<=Me.WARN){const n=e.map(sp);Gs.warn(`Firestore (${go}): ${r}`,...n)}}function sp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Kb(r,s,n)}function Kb(r,e,n){let s=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw nr(s),new Error(s)}function Fe(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||Kb(e,o,s)}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class fR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class mR{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let s=this.i;const o=v=>this.i!==s?(s=this.i,n(v)):Promise.resolve();let c=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ji,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},m=v=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>m(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ji)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string",31837,{l:s}),new $b(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class pR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new pR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class F_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const s=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new F_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new F_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=vR(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function Rm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return cm(o)===cm(c)?ke(o,c):cm(o)?1:-1}return ke(r.length,e.length)}const _R=55296,bR=57343;function cm(r){const e=r.charCodeAt(0);return e>=_R&&e<=bR}function lo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="__name__";class gi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=gi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return ke(e.length,n.length)}static compareSegments(e,n){const s=gi.isNumericId(e),o=gi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?gi.extractNumericId(e).compare(gi.extractNumericId(n)):Rm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zr.fromString(e.substring(4,e.length-2))}}class tt extends gi{construct(e,n,s){return new tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new tt(n)}static emptyPath(){return new tt([])}}const TR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends gi{construct(e,n,s){return new Ft(e,n,s)}static isValidIdentifier(e){return TR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G_}static keyField(){return new Ft([G_])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new ue(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ue(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=v,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(c(),o++)}if(c(),d)throw new ue(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(tt.fromString(e))}static fromName(e){return new ye(tt.fromString(e).popFirst(5))}static empty(){return new ye(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r,e,n){if(!n)throw new ue(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ER(r,e,n,s){if(e===!0&&s===!0)throw new ue(W.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Q_(r){if(!ye.isDocumentKey(r))throw new ue(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Y_(r){if(ye.isDocumentKey(r))throw new ue(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Wb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Xn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ue(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xh(r);throw new ue(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function SR(r,e){if(e<=0)throw new ue(W.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r,e){const n={typeString:r};return e&&(n.value=e),n}function ac(r,e){if(!Wb(r))throw new ue(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ue(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=-62135596800,$_=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*$_);return new nt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<K_)throw new ue(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$_}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ac(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-K_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:St("string",nt._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new nt(0,0))}static max(){return new Ae(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=-1;function wR(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new nt(n+1,0):new nt(n,s));return new Hr(o,ye.empty(),e)}function AR(r){return new Hr(r.readTime,r.key,Kl)}class Hr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Hr(Ae.min(),ye.empty(),Kl)}static max(){return new Hr(Ae.max(),ye.empty(),Kl)}}function xR(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(r.documentKey,e.documentKey),n!==0?n:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==RR)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.reject(n)}static resolve(e){return new ee(((n,s)=>{n(e)}))}static reject(e){return new ee(((n,s)=>{s(e)}))}static waitFor(e){return new ee(((n,s)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&n()}),(v=>s(v)))})),d=!0,c===o&&n()}))}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next((o=>o?ee.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new ee(((s,o)=>{const c=e.length,d=new Array(c);let m=0;for(let v=0;v<c;v++){const y=v;n(e[y]).next((T=>{d[y]=T,++m,m===c&&s(d)}),(T=>o(T)))}}))}static doWhile(e,n){return new ee(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function CR(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=-1;function Ih(r){return r==null}function oh(r){return r===0&&1/r==-1/0}function NR(r){return typeof r=="number"&&Number.isInteger(r)&&!oh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="";function DR(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=X_(e)),e=OR(r.get(n),e);return X_(e)}function OR(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case Zb:n+="";break;default:n+=c}}return n}function X_(r){return r+Zb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Xr(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function Jb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lu(this.root,e,this.comparator,!0)}}class Lu{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??Ht.RED,this.left=o??Ht.EMPTY,this.right=c??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new Ht(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z_(this.data.getIterator())}getIteratorFrom(e){return new Z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class Z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Ct(Ft.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new eT("Invalid base64 string: "+c):c}})(e);return new Gt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const MR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(r){if(Fe(!!r,39018),typeof r=="string"){let e=0;const n=MR.exec(r);if(Fe(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Gr(r){return typeof r=="string"?Gt.fromBase64String(r):Gt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="server_timestamp",nT="__type__",iT="__previous_value__",rT="__local_write_time__";function lp(r){return(r?.mapValue?.fields||{})[nT]?.stringValue===tT}function Ch(r){const e=r.mapValue.fields[iT];return lp(e)?Ch(e):e}function $l(r){const e=Fr(r.mapValue.fields[rT].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,s,o,c,d,m,v,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=v,this.useFetchStreams=y,this.isUsingEmulator=T}}const lh="(default)";class Xl{constructor(e,n){this.projectId=e,this.database=n||lh}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="__type__",jR="__max__",zu={mapValue:{}},aT="__vector__",ch="value";function Qr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?lp(r)?4:PR(r)?9007199254740991:VR(r)?10:11:Te(28295,{value:r})}function Si(r,e){if(r===e)return!0;const n=Qr(r);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return $l(r).isEqual($l(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Fr(o.timestampValue),m=Fr(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Gr(o.bytesValue).isEqual(Gr(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return mt(o.geoPointValue.latitude)===mt(c.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return mt(o.integerValue)===mt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=mt(o.doubleValue),m=mt(c.doubleValue);return d===m?oh(d)===oh(m):isNaN(d)&&isNaN(m)}return!1})(r,e);case 9:return lo(r.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(W_(d)!==W_(m))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(m[v]===void 0||!Si(d[v],m[v])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function Wl(r,e){return(r.values||[]).find((n=>Si(n,e)))!==void 0}function co(r,e){if(r===e)return 0;const n=Qr(r),s=Qr(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=mt(c.integerValue||c.doubleValue),v=mt(d.integerValue||d.doubleValue);return m<v?-1:m>v?1:m===v?0:isNaN(m)?isNaN(v)?0:-1:1})(r,e);case 3:return J_(r.timestampValue,e.timestampValue);case 4:return J_($l(r),$l(e));case 5:return Rm(r.stringValue,e.stringValue);case 6:return(function(c,d){const m=Gr(c),v=Gr(d);return m.compareTo(v)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),v=d.split("/");for(let y=0;y<m.length&&y<v.length;y++){const T=ke(m[y],v[y]);if(T!==0)return T}return ke(m.length,v.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=ke(mt(c.latitude),mt(d.latitude));return m!==0?m:ke(mt(c.longitude),mt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return e0(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const m=c.fields||{},v=d.fields||{},y=m[ch]?.arrayValue,T=v[ch]?.arrayValue,A=ke(y?.values?.length||0,T?.values?.length||0);return A!==0?A:e0(y,T)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===zu.mapValue&&d===zu.mapValue)return 0;if(c===zu.mapValue)return 1;if(d===zu.mapValue)return-1;const m=c.fields||{},v=Object.keys(m),y=d.fields||{},T=Object.keys(y);v.sort(),T.sort();for(let A=0;A<v.length&&A<T.length;++A){const w=Rm(v[A],T[A]);if(w!==0)return w;const U=co(m[v[A]],y[T[A]]);if(U!==0)return U}return ke(v.length,T.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function J_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const n=Fr(r),s=Fr(e),o=ke(n.seconds,s.seconds);return o!==0?o:ke(n.nanos,s.nanos)}function e0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=co(n[o],s[o]);if(c)return c}return ke(n.length,s.length)}function uo(r){return Im(r)}function Im(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Fr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Gr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ye.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=Im(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${Im(n.fields[d])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function Ku(r){switch(Qr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ch(r);return e?16+Ku(e):16;case 5:return 2*r.stringValue.length;case 6:return Gr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+Ku(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Xr(s.fields,((c,d)=>{o+=c.length+Ku(d)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function t0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Cm(r){return!!r&&"integerValue"in r}function cp(r){return!!r&&"arrayValue"in r}function n0(r){return!!r&&"nullValue"in r}function i0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function $u(r){return!!r&&"mapValue"in r}function VR(r){return(r?.mapValue?.fields||{})[sT]?.stringValue===aT}function Ll(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Xr(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ll(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(r.arrayValue.values[n]);return e}return{...r}}function PR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===jR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!$u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=Ft.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const v=this.getFieldsMap(n);this.applyChanges(v,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=Ll(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];$u(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Xr(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new ln(Ll(this.value))}}function oT(r){const e=[];return Xr(r.fields,((n,s)=>{const o=new Ft([n]);if($u(s)){const c=oT(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,s,o,c,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Wt(e,0,Ae.min(),Ae.min(),Ae.min(),ln.empty(),0)}static newFoundDocument(e,n,s,o){return new Wt(e,1,n,Ae.min(),s,o,0)}static newNoDocument(e,n){return new Wt(e,2,n,Ae.min(),Ae.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Ae.min(),Ae.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.position=e,this.inclusive=n}}function r0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?s=ye.comparator(ye.fromName(d.referenceValue),n.key):s=co(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function s0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Si(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function UR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{}class Et extends lT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new zR(e,n,s):n==="array-contains"?new HR(e,s):n==="in"?new FR(e,s):n==="not-in"?new GR(e,s):n==="array-contains-any"?new QR(e,s):new Et(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new BR(e,s):new qR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends lT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Wn(e,n)}matches(e){return cT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cT(r){return r.op==="and"}function uT(r){return LR(r)&&cT(r)}function LR(r){for(const e of r.filters)if(e instanceof Wn)return!1;return!0}function Nm(r){if(r instanceof Et)return r.field.canonicalString()+r.op.toString()+uo(r.value);if(uT(r))return r.filters.map((e=>Nm(e))).join(",");{const e=r.filters.map((n=>Nm(n))).join(",");return`${r.op}(${e})`}}function hT(r,e){return r instanceof Et?(function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&Si(s.value,o.value)})(r,e):r instanceof Wn?(function(s,o){return o instanceof Wn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,m)=>c&&hT(d,o.filters[m])),!0):!1})(r,e):void Te(19439)}function dT(r){return r instanceof Et?(function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`})(r):r instanceof Wn?(function(n){return n.op.toString()+" {"+n.getFilters().map(dT).join(" ,")+"}"})(r):"Filter"}class zR extends Et{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class BR extends Et{constructor(e,n){super(e,"in",n),this.keys=fT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class qR extends Et{constructor(e,n){super(e,"not-in",n),this.keys=fT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function fT(r,e){return(e.arrayValue?.values||[]).map((n=>ye.fromName(n.referenceValue)))}class HR extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cp(n)&&Wl(n.arrayValue,this.value)}}class FR extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}}class GR extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wl(this.value.arrayValue,n)}}class QR extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Wl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n=null,s=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function a0(r,e=null,n=[],s=[],o=null,c=null,d=null){return new YR(r,e,n,s,o,c,d)}function up(r){const e=xe(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Nm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>uo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>uo(s))).join(",")),e.Te=n}return e.Te}function hp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!UR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!hT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!s0(r.startAt,e.startAt)&&s0(r.endAt,e.endAt)}function Dm(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n=null,s=[],o=[],c=null,d="F",m=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KR(r,e,n,s,o,c,d,m){return new _o(r,e,n,s,o,c,d,m)}function dp(r){return new _o(r)}function o0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function mT(r){return r.collectionGroup!==null}function zl(r){const e=xe(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Ct(Ft.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Zl(c,s))})),n.has(Ft.keyField().canonicalString())||e.Ie.push(new Zl(Ft.keyField(),s))}return e.Ie}function vi(r){const e=xe(r);return e.Ee||(e.Ee=$R(e,zl(r))),e.Ee}function $R(r,e){if(r.limitType==="F")return a0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Zl(o.field,c)}));const n=r.endAt?new uh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new uh(r.startAt.position,r.startAt.inclusive):null;return a0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Om(r,e){const n=r.filters.concat([e]);return new _o(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function hh(r,e,n){return new _o(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Nh(r,e){return hp(vi(r),vi(e))&&r.limitType===e.limitType}function pT(r){return`${up(vi(r))}|lt:${r.limitType}`}function Ya(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>dT(o))).join(", ")}]`),Ih(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>uo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>uo(o))).join(",")),`Target(${s})`})(vi(r))}; limitType=${r.limitType})`}function Dh(r,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ye.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,o){for(const c of zl(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,v){const y=r0(d,m,v);return d.inclusive?y<=0:y<0})(s.startAt,zl(s),o)||s.endAt&&!(function(d,m,v){const y=r0(d,m,v);return d.inclusive?y>=0:y>0})(s.endAt,zl(s),o))})(r,e)}function XR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function gT(r){return(e,n)=>{let s=!1;for(const o of zl(r)){const c=WR(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function WR(r,e,n){const s=r.field.isKeyField()?ye.comparator(e.key,n.key):(function(c,d,m){const v=d.data.field(c),y=m.data.field(c);return v!==null&&y!==null?co(v,y):Te(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xr(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return Jb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new at(ye.comparator);function ir(){return ZR}const yT=new at(ye.comparator);function Ml(...r){let e=yT;for(const n of r)e=e.insert(n.key,n);return e}function vT(r){let e=yT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Us(){return Bl()}function _T(){return Bl()}function Bl(){return new Ws((r=>r.toString()),((r,e)=>r.isEqual(e)))}const JR=new at(ye.comparator),eI=new Ct(ye.comparator);function je(...r){let e=eI;for(const n of r)e=e.add(n);return e}const tI=new Ct(ke);function nI(){return tI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function bT(r){return{integerValue:""+r}}function iI(r,e){return NR(e)?bT(e):fp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this._=void 0}}function rI(r,e,n){return r instanceof Jl?(function(o,c){const d={fields:{[nT]:{stringValue:tT},[rT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&lp(c)&&(c=Ch(c)),c&&(d.fields[iT]=c),{mapValue:d}})(n,e):r instanceof ec?ET(r,e):r instanceof tc?ST(r,e):(function(o,c){const d=TT(o,c),m=l0(d)+l0(o.Ae);return Cm(d)&&Cm(o.Ae)?bT(m):fp(o.serializer,m)})(r,e)}function sI(r,e,n){return r instanceof ec?ET(r,e):r instanceof tc?ST(r,e):n}function TT(r,e){return r instanceof dh?(function(s){return Cm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Jl extends Oh{}class ec extends Oh{constructor(e){super(),this.elements=e}}function ET(r,e){const n=wT(e);for(const s of r.elements)n.some((o=>Si(o,s)))||n.push(s);return{arrayValue:{values:n}}}class tc extends Oh{constructor(e){super(),this.elements=e}}function ST(r,e){let n=wT(e);for(const s of r.elements)n=n.filter((o=>!Si(o,s)));return{arrayValue:{values:n}}}class dh extends Oh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function l0(r){return mt(r.integerValue||r.doubleValue)}function wT(r){return cp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.field=e,this.transform=n}}function oI(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof ec&&o instanceof ec||s instanceof tc&&o instanceof tc?lo(s.elements,o.elements,Si):s instanceof dh&&o instanceof dh?Si(s.Ae,o.Ae):s instanceof Jl&&o instanceof Jl})(r.transform,e.transform)}class lI{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mh{}function AT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new mp(r.key,Un.none()):new oc(r.key,r.data,Un.none());{const n=r.data,s=ln.empty();let o=new Ct(Ft.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new Wr(r.key,s,new bn(o.toArray()),Un.none())}}function cI(r,e,n){r instanceof oc?(function(o,c,d){const m=o.value.clone(),v=u0(o.fieldTransforms,c,d.transformResults);m.setAll(v),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Wr?(function(o,c,d){if(!Xu(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=u0(o.fieldTransforms,c,d.transformResults),v=c.data;v.setAll(xT(o)),v.setAll(m),c.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(r,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function ql(r,e,n,s){return r instanceof oc?(function(c,d,m,v){if(!Xu(c.precondition,d))return m;const y=c.value.clone(),T=h0(c.fieldTransforms,v,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof Wr?(function(c,d,m,v){if(!Xu(c.precondition,d))return m;const y=h0(c.fieldTransforms,v,d),T=d.data;return T.setAll(xT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(r,e,n,s):(function(c,d,m){return Xu(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(r,e,n)}function uI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=TT(s.transform,o||null);c!=null&&(n===null&&(n=ln.empty()),n.set(s.field,c))}return n||null}function c0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&lo(s,o,((c,d)=>oI(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class oc extends Mh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Wr extends Mh{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function xT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function u0(r,e,n){const s=new Map;Fe(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const c=r[o],d=c.transform,m=e.data.field(c.field);s.set(c.field,sI(d,m,n[o]))}return s}function h0(r,e,n){const s=new Map;for(const o of r){const c=o.transform,d=n.data.field(o.field);s.set(o.field,rI(c,d,e))}return s}class mp extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hI extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&cI(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ql(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ql(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=_T();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(o.key)?null:m;const v=AT(d,m);v!==null&&s.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),je())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,((n,s)=>c0(n,s)))&&lo(this.baseMutations,e.baseMutations,((n,s)=>c0(n,s)))}}class pp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Fe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return JR})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new pp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Le;function pI(r){switch(r){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function RT(r){if(r===void 0)return nr("GRPC error has no .code"),W.UNKNOWN;switch(r){case Tt.OK:return W.OK;case Tt.CANCELLED:return W.CANCELLED;case Tt.UNKNOWN:return W.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return W.INTERNAL;case Tt.UNAVAILABLE:return W.UNAVAILABLE;case Tt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Tt.NOT_FOUND:return W.NOT_FOUND;case Tt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Tt.ABORTED:return W.ABORTED;case Tt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Tt.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:r})}}(Le=Tt||(Tt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new zr([4294967295,4294967295],0);function d0(r){const e=gI().encode(r),n=new qb;return n.update(e),new Uint8Array(n.digest())}function f0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new zr([n,s],0),new zr([o,c],0)]}class gp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new kl(`Invalid padding: ${n}`);if(s<0)throw new kl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new kl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new kl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zr.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(zr.fromNumber(s)));return o.compare(yI)===1&&(o=new zr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=d0(e),[s,o]=f0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new gp(c,o,n);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=d0(e),[s,o]=f0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new kh(Ae.min(),o,new at(ke),ir(),je())}}class lc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new lc(s,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class IT{constructor(e,n){this.targetId=e,this.Ce=n}}class CT{constructor(e,n,s=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class m0{constructor(){this.ve=0,this.Fe=p0(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),s=je();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:c})}})),new lc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=p0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=Bu(),this.He=Bu(),this.Ye=new at(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Dm(c))if(s===0){const d=new ye(c.path);this.et(n,d,Wt.newNoDocument(d,Ae.min()))}else Fe(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const m=this.ut(e),v=m?this.ct(m,e,d):1;if(v!==0){this.it(n);const y=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,m;try{d=Gr(s).toUint8Array()}catch(v){if(v instanceof eT)return oo("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{m=new gp(d,o,c)}catch(v){return oo(v instanceof kl?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Dm(m.target)){const v=new ye(m.target.path);this.It(v).has(d)||this.Et(d,v)||this.et(d,v,Wt.newNoDocument(v,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=je();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((v=>{const y=this.ot(v);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new kh(e,n,this.Ye,this.je,s);return this.je=ir(),this.Je=Bu(),this.He=Bu(),this.Ye=new at(ke),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new m0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new m0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bu(){return new at(ye.comparator)}function p0(){return new at(ye.comparator)}const _I={asc:"ASCENDING",desc:"DESCENDING"},bI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TI={and:"AND",or:"OR"};class EI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mm(r,e){return r.useProto3Json||Ih(e)?e:{value:e}}function fh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function SI(r,e){return fh(r,e.toTimestamp())}function _i(r){return Fe(!!r,49232),Ae.fromTimestamp((function(n){const s=Fr(n);return new nt(s.seconds,s.nanos)})(r))}function yp(r,e){return km(r,e).canonicalString()}function km(r,e){const n=(function(o){return new tt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function DT(r){const e=tt.fromString(r);return Fe(VT(e),10190,{key:e.toString()}),e}function jm(r,e){return yp(r.databaseId,e.path)}function um(r,e){const n=DT(e);if(n.get(1)!==r.databaseId.projectId)throw new ue(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ue(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ye(MT(n))}function OT(r,e){return yp(r.databaseId,e)}function wI(r){const e=DT(r);return e.length===4?tt.emptyPath():MT(e)}function Vm(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function MT(r){return Fe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function g0(r,e,n){return{name:jm(r,e),fields:n.value.mapValue.fields}}function AI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Fe(T===void 0||typeof T=="string",58123),Gt.fromBase64String(T||"")):(Fe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Gt.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const T=y.code===void 0?W.UNKNOWN:RT(y.code);return new ue(T,y.message||"")})(d);n=new CT(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=um(r,s.document.name),c=_i(s.document.updateTime),d=s.document.createTime?_i(s.document.createTime):Ae.min(),m=new ln({mapValue:{fields:s.document.fields}}),v=Wt.newFoundDocument(o,c,d,m),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Wu(y,T,v.key,v)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=um(r,s.document),c=s.readTime?_i(s.readTime):Ae.min(),d=Wt.newNoDocument(o,c),m=s.removedTargetIds||[];n=new Wu([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=um(r,s.document),c=s.removedTargetIds||[];n=new Wu([],c,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new mI(o,c),m=s.targetId;n=new IT(m,d)}}return n}function xI(r,e){let n;if(e instanceof oc)n={update:g0(r,e.key,e.value)};else if(e instanceof mp)n={delete:jm(r,e.key)};else if(e instanceof Wr)n={update:g0(r,e.key,e.data),updateMask:jI(e.fieldMask)};else{if(!(e instanceof hI))return Te(16599,{Vt:e.type});n={verify:jm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const m=d.transform;if(m instanceof Jl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ec)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof tc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof dh)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:SI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Te(27497)})(r,e.precondition)),n}function RI(r,e){return r&&r.length>0?(Fe(e!==void 0,14353),r.map((n=>(function(o,c){let d=o.updateTime?_i(o.updateTime):_i(c);return d.isEqual(Ae.min())&&(d=_i(c)),new lI(d,o.transformResults||[])})(n,e)))):[]}function II(r,e){return{documents:[OT(r,e.path)]}}function CI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=OT(r,o);const c=(function(y){if(y.length!==0)return jT(Wn.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(w){return{field:Ka(w.field),direction:OI(w.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Mm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function NI(r){let e=wI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Fe(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(A){const w=kT(A);return w instanceof Wn&&uT(w)?w.getFilters():[w]})(n.where));let d=[];n.orderBy&&(d=(function(A){return A.map((w=>(function(Y){return new Zl($a(Y.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(w)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let w;return w=typeof A=="object"?A.value:A,Ih(w)?null:w})(n.limit));let v=null;n.startAt&&(v=(function(A){const w=!!A.before,U=A.values||[];return new uh(U,w)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const w=!A.before,U=A.values||[];return new uh(U,w)})(n.endAt)),KR(e,o,d,c,m,"F",v,y)}function DI(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=$a(n.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=$a(n.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$a(n.unaryFilter.field);return Et.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=$a(n.unaryFilter.field);return Et.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Et.create($a(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Wn.create(n.compositeFilter.filters.map((s=>kT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(n.compositeFilter.op))})(r):Te(30097,{filter:r})}function OI(r){return _I[r]}function MI(r){return bI[r]}function kI(r){return TI[r]}function Ka(r){return{fieldPath:r.canonicalString()}}function $a(r){return Ft.fromServerFormat(r.fieldPath)}function jT(r){return r instanceof Et?(function(n){if(n.op==="=="){if(i0(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(n0(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(i0(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(n0(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:MI(n.op),value:n.value}}})(r):r instanceof Wn?(function(n){const s=n.getFilters().map((o=>jT(o)));return s.length===1?s[0]:{compositeFilter:{op:kI(n.op),filters:s}}})(r):Te(54877,{filter:r})}function jI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function VT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,s,o,c=Ae.min(),d=Ae.min(),m=Gt.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=v}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.yt=e}}function PI(r){const e=NI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.Cn=new LI}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Hr.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class LI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ct(tt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ct(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PT=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(PT,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ho(0)}static cr(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="LruGarbageCollector",zI=1048576;function _0([r,e],[n,s]){const o=ke(r,n);return o===0?ke(e,s):o}class BI{constructor(e){this.Ir=e,this.buffer=new Ct(_0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();_0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(v0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vo(n)?he(v0,"Ignoring IndexedDB error during garbage collection: ",n):await yo(n)}await this.Vr(3e5)}))}}class HI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Rh.ce);const s=new BI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(y0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,d,m,v,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,n)))).next((A=>(c=A,v=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(y=Date.now(),Qa()<=Me.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(v-m)+`ms
	Removed ${A} documents in `+(y-v)+`ms
Total Duration: ${y-T}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A}))))}}function FI(r,e){return new HI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.changes=new Ws((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&ql(s.mutation,o,bn.empty(),nt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,je()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=je()){const o=Us();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=Ml();return c.forEach(((m,v)=>{d=d.insert(m,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Us();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,je())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,s,o){let c=ir();const d=Bl(),m=(function(){return Bl()})();return n.forEach(((v,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof Wr)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),ql(T.mutation,y,T.mutation.getFieldMask(),nt.now())):d.set(y.key,bn.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>m.set(y,new QI(T,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Bl();let o=new at(((d,m)=>d-m)),c=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((v=>{const y=n.get(v);if(y===null)return;let T=s.get(v)||bn.empty();T=m.applyToLocalView(y,T),s.set(v,T);const A=(o.get(m.batchId)||je()).add(v);o=o.insert(m.batchId,A)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),y=v.key,T=v.value,A=_T();T.forEach((w=>{if(!c.has(w)){const U=AT(n.get(w),s.get(w));U!==null&&A.set(w,U),c=c.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,A))}return ee.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):ee.resolve(Us());let m=Kl,v=c;return d.next((y=>ee.forEach(y,((T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(T)?ee.resolve():this.remoteDocumentCache.getEntry(e,T).next((w=>{v=v.insert(T,w)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,v,y,je()))).next((T=>({batchId:m,changes:vT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((s=>{let o=Ml();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=Ml();return this.indexManager.getCollectionParents(e,c).next((m=>ee.forEach(m,(v=>{const y=(function(A,w){return new _o(w,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((T=>{T.forEach(((A,w)=>{d=d.insert(A,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((v,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,Wt.newInvalidDocument(T)))}));let m=Ml();return d.forEach(((v,y)=>{const T=c.get(v);T!==void 0&&ql(T.mutation,y,bn.empty(),nt.now()),Dh(n,y)&&(m=m.insert(v,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ee.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:_i(o.createTime)}})(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:PI(o.bundledQuery),readTime:_i(o.readTime)}})(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.overlays=new at(ye.comparator),this.qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Us();return ee.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=Us(),c=n.length+1,d=new ye(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const v=m.getNext().value,y=v.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&v.largestBatchId>s&&o.set(v.getKey(),v)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new at(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Us(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=Us(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((y,T)=>m.set(y,T))),!(m.size()>=o)););return ee.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new fI(n,s));let c=this.qr.get(n);c===void 0&&(c=je(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.Qr=new Ct(Vt.$r),this.Ur=new Ct(Vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Vt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Vt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ye(new tt([])),s=new Vt(n,e),o=new Vt(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new tt([])),s=new Vt(n,e),o=new Vt(n,e+1);let c=je();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Vt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Vt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(Vt.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new dI(c,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Vt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,n){return ee.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return ee.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?op:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Vt(n,0),o=new Vt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const m=this.Xr(d.Yr);c.push(m)})),ee.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ct(ke);return n.forEach((o=>{const c=new Vt(o,0),d=new Vt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{s=s.add(m.Yr)}))})),ee.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;ye.isDocumentKey(c)||(c=c.child(""));const d=new Vt(new ye(c),0);let m=new Ct(ke);return this.Zr.forEachWhile((v=>{const y=v.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(v.Yr)),!0)}),d),ee.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ee.forEach(n.mutations,(o=>{const c=new Vt(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Vt(n,0),o=this.Zr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.ri=e,this.docs=(function(){return new at(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let s=ir();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():Wt.newInvalidDocument(o))})),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=ir();const d=n.path,m=new ye(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:y,value:{document:T}}=v.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||xR(AR(T),s)<=0||(o.has(T.key)||Dh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return ee.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Te(9500)}ii(e,n){return ee.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new JI(this)}getSize(e){return ee.resolve(this.size)}}class JI extends GI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ee.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.persistence=e,this.si=new Ws((n=>up(n)),hp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new vp,this.targetCount=0,this.ai=ho.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ee.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Pr(n),ee.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(c).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ee.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rh(0),this.li=!1,this.li=!0,this.hi=new XI,this.referenceDelegate=e(this),this.Pi=new e2(this),this.indexManager=new UI,this.remoteDocumentCache=(function(o){return new ZI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new VI(n),this.Ii=new KI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $I,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new WI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new t2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ee.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class t2 extends IR{constructor(e){super(),this.currentSequenceNumber=e}}class _p{constructor(e){this.persistence=e,this.Ri=new vp,this.Vi=null}static mi(e){return new _p(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Ae.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ee.or([()=>ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class mh{constructor(e,n){this.persistence=e,this.pi=new Ws((s=>DR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=FI(this,n)}static mi(e,n){return new mh(e,n)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ee.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ee.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((m=>{m||(s++,c.removeEntry(d,Ae.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ku(e.data.value)),n}br(e,n,s){return ee.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=je(),o=je();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new bp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Hw()?8:CR(Zt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new n2;return this.Ss(e,n,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,d,m.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Qa()<=Me.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(Qa()<=Me.DEBUG&&he("QueryEngine","Query:",Ya(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Qa()<=Me.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(n))):ee.resolve())}ys(e,n){if(o0(n))return ee.resolve(null);let s=vi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=hh(n,null,"F"),s=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=je(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((v=>{const y=this.Ds(n,m);return this.Cs(n,y,d,v.readTime)?this.ys(e,hh(n,null,"F")):this.vs(e,y,n,v)}))))})))))}ws(e,n,s,o){return o0(n)||o.isEqual(Ae.min())?ee.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,o)?ee.resolve(null):(Qa()<=Me.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ya(n)),this.vs(e,d,n,wR(o,Kl)).next((m=>m)))}))}Ds(e,n){let s=new Ct(gT(e));return n.forEach(((o,c)=>{Dh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return Qa()<=Me.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ya(n)),this.ps.getDocumentsMatchingQuery(e,n,Hr.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="LocalStore",r2=3e8;class s2{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new at(ke),this.xs=new Ws((c=>up(c)),hp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function a2(r,e,n,s){return new s2(r,e,n,s)}async function LT(r,e){const n=xe(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],m=[];let v=je();for(const y of o){d.push(y.batchId);for(const T of y.mutations)v=v.add(T.key)}for(const y of c){m.push(y.batchId);for(const T of y.mutations)v=v.add(T.key)}return n.localDocuments.getDocuments(s,v).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function o2(r,e){const n=xe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,v,y,T){const A=y.batch,w=A.keys();let U=ee.resolve();return w.forEach((Y=>{U=U.next((()=>T.getEntry(v,Y))).next((re=>{const X=y.docVersions.get(Y);Fe(X!==null,48541),re.version.compareTo(X)<0&&(A.applyToRemoteDocument(re,y),re.isValidDocument()&&(re.setReadTime(y.commitVersion),T.addEntry(re)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(v,A)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let v=je();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(v=v.add(m.batch.mutations[y].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function zT(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function l2(r,e){const n=xe(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((T,A)=>{const w=o.get(A);if(!w)return;m.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,A))));let U=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?U=U.withResumeToken(Gt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,s)),o=o.insert(A,U),(function(re,X,F){return re.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=r2?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(w,U,T)&&m.push(n.Pi.updateTargetData(c,U))}));let v=ir(),y=je();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),m.push(c2(c,d,e.documentUpdates).next((T=>{v=T.ks,y=T.qs}))),!s.isEqual(Ae.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(T)}return ee.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,v,y))).next((()=>v))})).then((c=>(n.Ms=o,c)))}function c2(r,e,n){let s=je(),o=je();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=ir();return n.forEach(((m,v)=>{const y=c.get(m);v.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(Ae.min())?(e.removeEntry(m,v.readTime),d=d.insert(m,v)):!y.isValidDocument()||v.version.compareTo(y.version)>0||v.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(v),d=d.insert(m,v)):he(Tp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",v.version)})),{ks:d,qs:o}}))}function u2(r,e){const n=xe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=op),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function h2(r,e){const n=xe(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,ee.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new Pr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Pm(r,e,n){const s=xe(r),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!vo(d))throw d;he(Tp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function b0(r,e,n){const s=xe(r);let o=Ae.min(),c=je();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,y,T){const A=xe(v),w=A.xs.get(T);return w!==void 0?ee.resolve(A.Ms.get(w)):A.Pi.getTargetData(y,T)})(s,d,vi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,m.targetId).next((v=>{c=v}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Ae.min(),n?c:je()))).next((m=>(d2(s,XR(e),m),{documents:m,Qs:c})))))}function d2(r,e,n){let s=r.Os.get(e)||Ae.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class T0{constructor(){this.activeTargetIds=nI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f2{constructor(){this.Mo=new T0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new T0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="ConnectivityMonitor";class S0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(E0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(E0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function Um(){return qu===null?qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="RestConnection",p2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===lh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const d=Um(),m=this.zo(e,n.toUriEncodedString());he(hm,`Sending RPC '${e}' ${d}:`,m,s);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,c);const{host:y}=new URL(m),T=$s(y);return this.Jo(e,m,v,s,T).then((A=>(he(hm,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw oo(hm,`RPC '${e}' ${d} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,n,s,o,c,d){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=p2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class v2 extends g2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const d=Um();return new Promise(((m,v)=>{const y=new Hb;y.setWithCredentials(!0),y.listenOnce(Fb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Yu.NO_ERROR:const A=y.getResponseJson();he($t,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),m(A);break;case Yu.TIMEOUT:he($t,`RPC '${e}' ${d} timed out`),v(new ue(W.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const w=y.getStatus();if(he($t,`RPC '${e}' ${d} failed with status:`,w,"response text:",y.getResponseText()),w>0){let U=y.getResponseJson();Array.isArray(U)&&(U=U[0]);const Y=U?.error;if(Y&&Y.status&&Y.message){const re=(function(F){const ie=F.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ie)>=0?ie:W.UNKNOWN})(Y.status);v(new ue(re,Y.message))}else v(new ue(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else v(new ue(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he($t,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);he($t,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=Um(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Yb(),m=Qb(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(v.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,n,s),v.encodeInitMessageHeaders=!0;const T=c.join("");he($t,`Creating RPC '${e}' stream ${o}: ${T}`,v);const A=d.createWebChannel(T,v);this.I_(A);let w=!1,U=!1;const Y=new y2({Yo:X=>{U?he($t,`Not sending because RPC '${e}' stream ${o} is closed:`,X):(w||(he($t,`Opening RPC '${e}' stream ${o} transport.`),A.open(),w=!0),he($t,`RPC '${e}' stream ${o} sending:`,X),A.send(X))},Zo:()=>A.close()}),re=(X,F,ie)=>{X.listen(F,(te=>{try{ie(te)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return re(A,Ol.EventType.OPEN,(()=>{U||(he($t,`RPC '${e}' stream ${o} transport opened.`),Y.o_())})),re(A,Ol.EventType.CLOSE,(()=>{U||(U=!0,he($t,`RPC '${e}' stream ${o} transport closed`),Y.a_(),this.E_(A))})),re(A,Ol.EventType.ERROR,(X=>{U||(U=!0,oo($t,`RPC '${e}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),Y.a_(new ue(W.UNAVAILABLE,"The operation could not be completed")))})),re(A,Ol.EventType.MESSAGE,(X=>{if(!U){const F=X.data[0];Fe(!!F,16349);const ie=F,te=ie?.error||ie[0]?.error;if(te){he($t,`RPC '${e}' stream ${o} received error:`,te);const ce=te.status;let G=(function(R){const N=Tt[R];if(N!==void 0)return RT(N)})(ce),fe=te.message;G===void 0&&(G=W.INTERNAL,fe="Unknown error status: "+ce+" with message "+te.message),U=!0,Y.a_(new ue(G,fe)),A.close()}else he($t,`RPC '${e}' stream ${o} received:`,F),Y.u_(F)}})),re(m,Gb.STAT_EVENT,(X=>{X.stat===xm.PROXY?he($t,`RPC '${e}' stream ${o} detected buffering proxy`):X.stat===xm.NOPROXY&&he($t,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function dm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(r){return new EI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="PersistentStream";class qT{constructor(e,n,s,o,c,d,m,v){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(nr(n.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ue(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(w0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(w0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _2 extends qT{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=AI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ae.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ae.min():d.readTime?_i(d.readTime):Ae.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Vm(this.serializer),n.addTarget=(function(c,d){let m;const v=d.target;if(m=Dm(v)?{documents:II(c,v)}:{query:CI(c,v).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=NT(c,d.resumeToken);const y=Mm(c,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ae.min())>0){m.readTime=fh(c,d.snapshotVersion.toTimestamp());const y=Mm(c,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=DI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Vm(this.serializer),n.removeTarget=e,this.q_(n)}}class b2 extends qT{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=RI(e.writeResults,e.commitTime),s=_i(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Vm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>xI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{}class E2 extends T2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,km(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(W.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,km(n,s),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue(W.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class S2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class w2{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Zs(this)&&(he(Qs,"Restarting streams for network reachability change."),await(async function(v){const y=xe(v);y.Ea.add(4),await cc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Vh(y)})(this))}))})),this.Ra=new S2(s,o)}}async function Vh(r){if(Zs(r))for(const e of r.da)await e(!0)}async function cc(r){for(const e of r.da)await e(!1)}function HT(r,e){const n=xe(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ap(n)?wp(n):bo(n).O_()&&Sp(n,e))}function Ep(r,e){const n=xe(r),s=bo(n);n.Ia.delete(e),s.O_()&&FT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Zs(n)&&n.Ra.set("Unknown"))}function Sp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(r).Y_(e)}function FT(r,e){r.Va.Ue(e),bo(r).Z_(e)}function wp(r){r.Va=new vI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),bo(r).start(),r.Ra.ua()}function Ap(r){return Zs(r)&&!bo(r).x_()&&r.Ia.size>0}function Zs(r){return xe(r).Ea.size===0}function GT(r){r.Va=void 0}async function A2(r){r.Ra.set("Online")}async function x2(r){r.Ia.forEach(((e,n)=>{Sp(r,e)}))}async function R2(r,e){GT(r),Ap(r)?(r.Ra.ha(e),wp(r)):r.Ra.set("Unknown")}async function I2(r,e,n){if(r.Ra.set("Online"),e instanceof CT&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){he(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ph(r,s)}else if(e instanceof Wu?r.Va.Ze(e):e instanceof IT?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ae.min()))try{const s=await zT(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((v,y)=>{if(v.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(v.resumeToken,d))}})),m.targetMismatches.forEach(((v,y)=>{const T=c.Ia.get(v);if(!T)return;c.Ia.set(v,T.withResumeToken(Gt.EMPTY_BYTE_STRING,T.snapshotVersion)),FT(c,v);const A=new Pr(T.target,v,y,T.sequenceNumber);Sp(c,A)})),c.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){he(Qs,"Failed to raise snapshot:",s),await ph(r,s)}}async function ph(r,e,n){if(!vo(e))throw e;r.Ea.add(1),await cc(r),r.Ra.set("Offline"),n||(n=()=>zT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(Qs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Vh(r)}))}function QT(r,e){return e().catch((n=>ph(r,n,e)))}async function Ph(r){const e=xe(r),n=Yr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:op;for(;C2(e);)try{const o=await u2(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,N2(e,o)}catch(o){await ph(e,o)}YT(e)&&KT(e)}function C2(r){return Zs(r)&&r.Ta.length<10}function N2(r,e){r.Ta.push(e);const n=Yr(r);n.O_()&&n.X_&&n.ea(e.mutations)}function YT(r){return Zs(r)&&!Yr(r).x_()&&r.Ta.length>0}function KT(r){Yr(r).start()}async function D2(r){Yr(r).ra()}async function O2(r){const e=Yr(r);for(const n of r.Ta)e.ea(n.mutations)}async function M2(r,e,n){const s=r.Ta.shift(),o=pp.from(s,e,n);await QT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Ph(r)}async function k2(r,e){e&&Yr(r).X_&&await(async function(s,o){if((function(d){return pI(d)&&d!==W.ABORTED})(o.code)){const c=s.Ta.shift();Yr(s).B_(),await QT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Ph(s)}})(r,e),YT(r)&&KT(r)}async function A0(r,e){const n=xe(r);n.asyncQueue.verifyOperationInProgress(),he(Qs,"RemoteStore received new credentials");const s=Zs(n);n.Ea.add(3),await cc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vh(n)}async function j2(r,e){const n=xe(r);e?(n.Ea.delete(2),await Vh(n)):e||(n.Ea.add(2),await cc(n),n.Ra.set("Unknown"))}function bo(r){return r.ma||(r.ma=(function(n,s,o){const c=xe(n);return c.sa(),new _2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:A2.bind(null,r),t_:x2.bind(null,r),r_:R2.bind(null,r),H_:I2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Ap(r)?wp(r):r.Ra.set("Unknown")):(await r.ma.stop(),GT(r))}))),r.ma}function Yr(r){return r.fa||(r.fa=(function(n,s,o){const c=xe(n);return c.sa(),new b2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:D2.bind(null,r),r_:k2.bind(null,r),ta:O2.bind(null,r),na:M2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Ph(r)):(await r.fa.stop(),r.Ta.length>0&&(he(Qs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,m=new xp(e,n,d,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rp(r,e){if(nr("AsyncQueue",`${e}: ${r}`),vo(r))return new ue(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static emptySet(e){return new eo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=Ml(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new eo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.ga=new at(ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class fo{constructor(e,n,s,o,c,d,m,v,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new fo(e,n,eo.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class P2{constructor(){this.queries=R0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=xe(n),c=o.queries;o.queries=R0(),c.forEach(((d,m)=>{for(const v of m.Sa)v.onError(s)}))})(this,new ue(W.ABORTED,"Firestore shutting down"))}}function R0(){return new Ws((r=>pT(r)),Nh)}async function $T(r,e){const n=xe(r);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new V2,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=Rp(d,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Ip(n)}async function XT(r,e){const n=xe(r),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function U2(r,e){const n=xe(r);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const m of d.Sa)m.Fa(o)&&(s=!0);d.wa=o}}s&&Ip(n)}function L2(r,e,n){const s=xe(r),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function Ip(r){r.Ca.forEach((e=>{e.next()}))}var Lm,I0;(I0=Lm||(Lm={})).Ma="default",I0.Cache="cache";class WT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new fo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.key=e}}class JT{constructor(e){this.key=e}}class z2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=gT(e),this.tu=new eo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new x0,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const w=o.get(T),U=Dh(this.query,A)?A:null,Y=!!w&&this.mutatedKeys.has(w.key),re=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let X=!1;w&&U?w.data.isEqual(U.data)?Y!==re&&(s.track({type:3,doc:U}),X=!0):this.su(w,U)||(s.track({type:2,doc:U}),X=!0,(v&&this.eu(U,v)>0||y&&this.eu(U,y)<0)&&(m=!0)):!w&&U?(s.track({type:0,doc:U}),X=!0):w&&!U&&(s.track({type:1,doc:w}),X=!0,(v||y)&&(m=!0)),X&&(U?(d=d.add(U),c=re?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,A)=>(function(U,Y){const re=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:X})}};return re(U)-re(Y)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,y=v!==this.Za;return this.Za=v,d.length!==0||y?{snapshot:new fo(this.query,e.tu,c,d,e.mutatedKeys,v===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new x0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new JT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new ZT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cp="SyncEngine";class B2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class q2{constructor(e){this.key=e,this.hu=!1}}class H2{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ws((m=>pT(m)),Nh),this.Iu=new Map,this.Eu=new Set,this.du=new at(ye.comparator),this.Au=new Map,this.Ru=new vp,this.Vu={},this.mu=new Map,this.fu=ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function F2(r,e,n=!0){const s=sE(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await eE(s,e,n,!0),o}async function G2(r,e){const n=sE(r);await eE(n,e,!0,!1)}async function eE(r,e,n,s){const o=await h2(r.localStore,vi(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await Q2(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&HT(r.remoteStore,o),m}async function Q2(r,e,n,s,o){r.pu=(A,w,U)=>(async function(re,X,F,ie){let te=X.view.ru(F);te.Cs&&(te=await b0(re.localStore,X.query,!1).then((({documents:O})=>X.view.ru(O,te))));const ce=ie&&ie.targetChanges.get(X.targetId),G=ie&&ie.targetMismatches.get(X.targetId)!=null,fe=X.view.applyChanges(te,re.isPrimaryClient,ce,G);return N0(re,X.targetId,fe.au),fe.snapshot})(r,A,w,U);const c=await b0(r.localStore,e,!0),d=new z2(e,c.Qs),m=d.ru(c.documents),v=lc.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=d.applyChanges(m,r.isPrimaryClient,v);N0(r,n,y.au);const T=new B2(e,n,d);return r.Tu.set(e,T),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function Y2(r,e,n){const s=xe(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!Nh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Pm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Ep(s.remoteStore,o.targetId),zm(s,o.targetId)})).catch(yo)):(zm(s,o.targetId),await Pm(s.localStore,o.targetId,!0))}async function K2(r,e){const n=xe(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ep(n.remoteStore,s.targetId))}async function $2(r,e,n){const s=nC(r);try{const o=await(function(d,m){const v=xe(d),y=nt.now(),T=m.reduce(((U,Y)=>U.add(Y.key)),je());let A,w;return v.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let Y=ir(),re=je();return v.Ns.getEntries(U,T).next((X=>{Y=X,Y.forEach(((F,ie)=>{ie.isValidDocument()||(re=re.add(F))}))})).next((()=>v.localDocuments.getOverlayedDocuments(U,Y))).next((X=>{A=X;const F=[];for(const ie of m){const te=uI(ie,A.get(ie.key).overlayedDocument);te!=null&&F.push(new Wr(ie.key,te,oT(te.value.mapValue),Un.exists(!0)))}return v.mutationQueue.addMutationBatch(U,y,F,m)})).next((X=>{w=X;const F=X.applyToLocalDocumentSet(A,re);return v.documentOverlayCache.saveOverlays(U,X.batchId,F)}))})).then((()=>({batchId:w.batchId,changes:vT(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,m,v){let y=d.Vu[d.currentUser.toKey()];y||(y=new at(ke)),y=y.insert(m,v),d.Vu[d.currentUser.toKey()]=y})(s,o.batchId,n),await uc(s,o.changes),await Ph(s.remoteStore)}catch(o){const c=Rp(o,"Failed to persist write");n.reject(c)}}async function tE(r,e){const n=xe(r);try{const s=await l2(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Fe(d.hu,14607):o.removedDocuments.size>0&&(Fe(d.hu,42227),d.hu=!1))})),await uc(n,s,e)}catch(s){await yo(s)}}function C0(r,e,n){const s=xe(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const v=xe(d);v.onlineState=m;let y=!1;v.queries.forEach(((T,A)=>{for(const w of A.Sa)w.va(m)&&(y=!0)})),y&&Ip(v)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function X2(r,e,n){const s=xe(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new at(ye.comparator);d=d.insert(c,Wt.newNoDocument(c,Ae.min()));const m=je().add(c),v=new kh(Ae.min(),new Map,new at(ke),d,m);await tE(s,v),s.du=s.du.remove(c),s.Au.delete(e),Np(s)}else await Pm(s.localStore,e,!1).then((()=>zm(s,e,n))).catch(yo)}async function W2(r,e){const n=xe(r),s=e.batch.batchId;try{const o=await o2(n.localStore,e);iE(n,s,null),nE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await uc(n,o)}catch(o){await yo(o)}}async function Z2(r,e,n){const s=xe(r);try{const o=await(function(d,m){const v=xe(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return v.mutationQueue.lookupMutationBatch(y,m).next((A=>(Fe(A!==null,37113),T=A.keys(),v.mutationQueue.removeMutationBatch(y,A)))).next((()=>v.mutationQueue.performConsistencyCheck(y))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(y,T,m))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>v.localDocuments.getDocuments(y,T)))}))})(s.localStore,e);iE(s,e,n),nE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await uc(s,o)}catch(o){await yo(o)}}function nE(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function iE(r,e,n){const s=xe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function zm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||rE(r,s)}))}function rE(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Ep(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Np(r))}function N0(r,e,n){for(const s of n)s instanceof ZT?(r.Ru.addReference(s.key,e),J2(r,s)):s instanceof JT?(he(Cp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||rE(r,s.key)):Te(19791,{wu:s})}function J2(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(he(Cp,"New document in limbo: "+n),r.Eu.add(s),Np(r))}function Np(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ye(tt.fromString(e)),s=r.fu.next();r.Au.set(s,new q2(n)),r.du=r.du.insert(n,s),HT(r.remoteStore,new Pr(vi(dp(n.path)),s,"TargetPurposeLimboResolution",Rh.ce))}}async function uc(r,e,n){const s=xe(r),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,v)=>{d.push(s.pu(v,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(v.targetId)?.current;s.sharedClientState.updateQueryState(v.targetId,T?"current":"not-current")}if(y){o.push(y);const T=bp.As(v.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(v,y){const T=xe(v);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ee.forEach(y,(w=>ee.forEach(w.Es,(U=>T.persistence.referenceDelegate.addReference(A,w.targetId,U))).next((()=>ee.forEach(w.ds,(U=>T.persistence.referenceDelegate.removeReference(A,w.targetId,U)))))))))}catch(A){if(!vo(A))throw A;he(Tp,"Failed to update sequence numbers: "+A)}for(const A of y){const w=A.targetId;if(!A.fromCache){const U=T.Ms.get(w),Y=U.snapshotVersion,re=U.withLastLimboFreeSnapshotVersion(Y);T.Ms=T.Ms.insert(w,re)}}})(s.localStore,c))}async function eC(r,e){const n=xe(r);if(!n.currentUser.isEqual(e)){he(Cp,"User change. New user:",e.toKey());const s=await LT(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((v=>{v.reject(new ue(W.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await uc(n,s.Ls)}}function tC(r,e){const n=xe(r),s=n.Au.get(e);if(s&&s.hu)return je().add(s.key);{let o=je();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function sE(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=tE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X2.bind(null,e),e.Pu.H_=U2.bind(null,e.eventManager),e.Pu.yu=L2.bind(null,e.eventManager),e}function nC(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z2.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return a2(this.persistence,new i2,e.initialUser,this.serializer)}Cu(e){return new UT(_p.mi,this.serializer)}Du(e){return new f2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class iC extends gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof mh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new UT((s=>mh.mi(s,n)),this.serializer)}}class Bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>C0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=eC.bind(null,this.syncEngine),await j2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new P2})()}createDatastore(e){const n=jh(e.databaseInfo.databaseId),s=(function(c){return new v2(c)})(e.databaseInfo);return(function(c,d,m,v){return new E2(c,d,m,v)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,m){return new w2(s,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>C0(this.syncEngine,n,0)),(function(){return S0.v()?new S0:new m2})())}createSyncEngine(e,n){return(function(o,c,d,m,v,y,T){const A=new H2(o,c,d,m,v,y);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=xe(n);he(Qs,"RemoteStore shutting down."),s.Ea.add(5),await cc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bm.provider={build:()=>new Bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class rC{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{he(Kr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(he(Kr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Rp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function fm(r,e){r.asyncQueue.verifyOperationInProgress(),he(Kr,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await LT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function D0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await sC(r);he(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>A0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>A0(e.remoteStore,o))),r._onlineComponents=e}async function sC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(Kr,"Using user provided OfflineComponentProvider");try{await fm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await fm(r,new gh)}}else he(Kr,"Using default OfflineComponentProvider"),await fm(r,new iC(void 0));return r._offlineComponents}async function oE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(Kr,"Using user provided OnlineComponentProvider"),await D0(r,r._uninitializedComponentsProvider._online)):(he(Kr,"Using default OnlineComponentProvider"),await D0(r,new Bm))),r._onlineComponents}function aC(r){return oE(r).then((e=>e.syncEngine))}async function lE(r){const e=await oE(r),n=e.eventManager;return n.onListen=F2.bind(null,e.syncEngine),n.onUnlisten=Y2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=G2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=K2.bind(null,e.syncEngine),n}function oC(r,e,n={}){const s=new Ji;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,v,y){const T=new aE({next:w=>{T.Nu(),d.enqueueAndForget((()=>XT(c,A)));const U=w.docs.has(m);!U&&w.fromCache?y.reject(new ue(W.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&w.fromCache&&v&&v.source==="server"?y.reject(new ue(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),A=new WT(dp(m.path),T,{includeMetadataChanges:!0,qa:!0});return $T(c,A)})(await lE(r),r.asyncQueue,e,n,s))),s.promise}function lC(r,e,n={}){const s=new Ji;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,v,y){const T=new aE({next:w=>{T.Nu(),d.enqueueAndForget((()=>XT(c,A))),w.fromCache&&v.source==="server"?y.reject(new ue(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),A=new WT(m,T,{includeMetadataChanges:!0,qa:!0});return $T(c,A)})(await lE(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="firestore.googleapis.com",M0=!0;class k0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uE,this.ssl=M0}else this.host=e.host,this.ssl=e.ssl??M0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zI)throw new ue(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ER("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new dR;switch(s.type){case"firstParty":return new gR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=O0.get(n);s&&(he("ComponentProvider","Removing Datastore"),O0.delete(n),s.terminate())})(this),Promise.resolve()}}function cC(r,e,n,s={}){r=Xn(r,Uh);const o=$s(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(Qm(`https://${m}`),Ym("Firestore",!0)),c.host!==uE&&c.host!==m&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...c,host:m,ssl:o,emulatorOptions:s};if(!qr(v,d)&&(r._setSettings(v),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=Xt.MOCK_USER;else{y=jw(s.mockUserToken,r._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ue(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xt(A)}r._authCredentials=new fR(new $b(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ac(n,pt._jsonSchema))return new pt(e,s||null,new ye(tt.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:St("string",pt._jsonSchemaVersion),referencePath:St("string")};class Br extends Zr{constructor(e,n,s){super(e,n,dp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new ye(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function Ls(r,e,...n){if(r=gt(r),Xb("collection","path",e),r instanceof Uh){const s=tt.fromString(e,...n);return Y_(s),new Br(r,null,s)}{if(!(r instanceof pt||r instanceof Br))throw new ue(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return Y_(s),new Br(r.firestore,null,s)}}function to(r,e,...n){if(r=gt(r),arguments.length===1&&(e=ap.newId()),Xb("doc","path",e),r instanceof Uh){const s=tt.fromString(e,...n);return Q_(s),new pt(r,null,new ye(s))}{if(!(r instanceof pt||r instanceof Br))throw new ue(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return Q_(s),new pt(r.firestore,r instanceof Br?r.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="AsyncQueue";class V0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BT(this,"async_queue_retry"),this._c=()=>{const s=dm();s&&he(j0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=dm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ji;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vo(e))throw e;he(j0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",P0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=xp.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:P0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function P0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Js extends Uh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new V0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V0(e),this._firestoreClient=void 0,await e}}}function uC(r,e){const n=typeof r=="object"?r:Eh(),s=typeof r=="string"?r:lh,o=$r(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=eb("firestore");c&&cC(o,...c)}return o}function Dp(r){if(r._terminated)throw new ue(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hC(r),r._firestoreClient}function hC(r){const e=r._freezeSettings(),n=(function(o,c,d,m){return new kR(o,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,cE(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new rC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Gt.fromBase64String(e))}catch(n){throw new ue(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ac(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:St("string",Pn._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(ac(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:St("string",bi._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ac(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ti(e.vectorValues);throw new ue(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:St("string",Ti._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=/^__.*__$/;class fC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new oc(e,this.data,n,this.fieldTransforms)}}class hE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class Op{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Op({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dE(this.Ac)&&dC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||jh(e)}Cc(e,n,s,o=!1){return new Op({Ac:e,methodName:n,Dc:s,path:Ft.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bh(r){const e=r._freezeSettings(),n=jh(r._databaseId);return new mC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function fE(r,e,n,s,o,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,o);kp("Data must be an object, but it was:",d,s);const m=mE(s,d);let v,y;if(c.merge)v=new bn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const A of c.mergeFields){const w=qm(e,A,n);if(!d.contains(w))throw new ue(W.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);gE(T,w)||T.push(w)}v=new bn(T),y=d.fieldTransforms.filter((A=>v.covers(A.field)))}else v=null,y=d.fieldTransforms;return new fC(new ln(m),v,y)}class qh extends zh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qh}}class Mp extends zh{_toFieldTransform(e){return new aI(e.path,new Jl)}isEqual(e){return e instanceof Mp}}function pC(r,e,n,s){const o=r.Cc(1,e,n);kp("Data must be an object, but it was:",o,s);const c=[],d=ln.empty();Xr(s,((v,y)=>{const T=jp(e,v,n);y=gt(y);const A=o.yc(T);if(y instanceof qh)c.push(T);else{const w=hc(y,A);w!=null&&(c.push(T),d.set(T,w))}}));const m=new bn(c);return new hE(d,m,o.fieldTransforms)}function gC(r,e,n,s,o,c){const d=r.Cc(1,e,n),m=[qm(e,s,n)],v=[o];if(c.length%2!=0)throw new ue(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)m.push(qm(e,c[w])),v.push(c[w+1]);const y=[],T=ln.empty();for(let w=m.length-1;w>=0;--w)if(!gE(y,m[w])){const U=m[w];let Y=v[w];Y=gt(Y);const re=d.yc(U);if(Y instanceof qh)y.push(U);else{const X=hc(Y,re);X!=null&&(y.push(U),T.set(U,X))}}const A=new bn(y);return new hE(T,A,d.fieldTransforms)}function yC(r,e,n,s=!1){return hc(n,r.Cc(s?4:3,e))}function hc(r,e){if(pE(r=gt(r)))return kp("Unsupported field value:",e,r),mE(r,e);if(r instanceof zh)return(function(s,o){if(!dE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const m of s){let v=hc(m,o.wc(d));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,o){if((s=gt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return iI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=nt.fromDate(s);return{timestampValue:fh(o.serializer,c)}}if(s instanceof nt){const c=new nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fh(o.serializer,c)}}if(s instanceof bi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:NT(o.serializer,s._byteString)};if(s instanceof pt){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:yp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ti)return(function(d,m){return{mapValue:{fields:{[sT]:{stringValue:aT},[ch]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return fp(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${xh(s)}`)})(r,e)}function mE(r,e){const n={};return Jb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xr(r,((s,o)=>{const c=hc(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function pE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof bi||r instanceof Pn||r instanceof pt||r instanceof zh||r instanceof Ti)}function kp(r,e,n){if(!pE(n)||!Wb(n)){const s=xh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function qm(r,e,n){if((e=gt(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return jp(r,e);throw yh("Field path arguments must be of type string or ",r,!1,void 0,n)}const vC=new RegExp("[~\\*/\\[\\]]");function jp(r,e,n){if(e.search(vC)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Lh(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function yh(r,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(c||d)&&(v+=" (found",c&&(v+=` in field ${s}`),d&&(v+=` in document ${o}`),v+=")"),new ue(W.INVALID_ARGUMENT,m+r+v)}function gE(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _C(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _C extends yE{data(){return super.data()}}function Hh(r,e){return typeof e=="string"?jp(r,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ue(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vp{}class Pp extends Vp{}function no(r,e,...n){let s=[];e instanceof Vp&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((v=>v instanceof Up)).length,m=c.filter((v=>v instanceof Fh)).length;if(d>1||d>0&&m>0)throw new ue(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Fh extends Pp{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Fh(e,n,s)}_apply(e){const n=this._parse(e);return vE(e._query,n),new Zr(e.firestore,e.converter,Om(e._query,n))}_parse(e){const n=Bh(e.firestore);return(function(c,d,m,v,y,T,A){let w;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ue(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){L0(A,T);const Y=[];for(const re of A)Y.push(U0(v,c,re));w={arrayValue:{values:Y}}}else w=U0(v,c,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||L0(A,T),w=yC(m,d,A,T==="in"||T==="not-in");return Et.create(y,T,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xa(r,e,n){const s=e,o=Hh("where",r);return Fh._create(o,s,n)}class Up extends Vp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Up(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const v of m)vE(d,v),d=Om(d,v)})(e._query,n),new Zr(e.firestore,e.converter,Om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lp extends Pp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lp(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ue(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zl(c,d)})(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new _o(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Hl(r,e="asc"){const n=e,s=Hh("orderBy",r);return Lp._create(s,n)}class zp extends Pp{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new zp(e,n,s)}_apply(e){return new Zr(e.firestore,e.converter,hh(e._query,this._limit,this._limitType))}}function Fl(r){return SR("limit",r),zp._create("limit",r,"F")}function U0(r,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new ue(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mT(e)&&n.indexOf("/")!==-1)throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(tt.fromString(n));if(!ye.isDocumentKey(s))throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return t0(r,new ye(s))}if(n instanceof pt)return t0(r,n._key);throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(n)}.`)}function L0(r,e){if(!Array.isArray(r)||r.length===0)throw new ue(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vE(r,e){const n=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TC{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Xr(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[ch].arrayValue?.values?.map((s=>mt(s.doubleValue)));return new Ti(n)}convertGeoPoint(e){return new bi(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ch(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=tt.fromString(e);Fe(VT(s),9688,{name:e});const o=new Xl(s.get(1),s.get(3)),c=new ye(s.popFirst(5));return o.isEqual(n)||nr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(r,e,n){let s;return s=r?r.toFirestore(e):e,s}class jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qs extends yE{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Hh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",qs._jsonSchema={type:St("string",qs._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class Zu extends qs{data(e={}){return super.data(e)}}class io{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new jl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Zu(this._firestore,this._userDataWriter,s.key,s,new jl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const v=new Zu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const v=new Zu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:EC(m.type),doc:v,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(r){r=Xn(r,pt);const e=Xn(r.firestore,Js);return oC(Dp(e),r._key).then((n=>RC(e,r,n)))}io._jsonSchemaVersion="firestore/querySnapshot/1.0",io._jsonSchema={type:St("string",io._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class bE extends TC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function ro(r){r=Xn(r,Zr);const e=Xn(r.firestore,Js),n=Dp(e),s=new bE(e);return bC(r._query),lC(n,r._query).then((o=>new io(e,s,r,o)))}function wC(r,e,n){r=Xn(r,pt);const s=Xn(r.firestore,Js),o=_E(r.converter,e);return Gh(s,[fE(Bh(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Un.none())])}function TE(r,e,n,...s){r=Xn(r,pt);const o=Xn(r.firestore,Js),c=Bh(o);let d;return d=typeof(e=gt(e))=="string"||e instanceof Lh?gC(c,"updateDoc",r._key,e,n,s):pC(c,"updateDoc",r._key,e),Gh(o,[d.toMutation(r._key,Un.exists(!0))])}function AC(r){return Gh(Xn(r.firestore,Js),[new mp(r._key,Un.none())])}function xC(r,e){const n=Xn(r.firestore,Js),s=to(r),o=_E(r.converter,e);return Gh(n,[fE(Bh(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Un.exists(!1))]).then((()=>s))}function Gh(r,e){return(function(s,o){const c=new Ji;return s.asyncQueue.enqueueAndForget((async()=>$2(await aC(s),o,c))),c.promise})(Dp(r),e)}function RC(r,e,n){const s=n.docs.get(e._key),o=new bE(r);return new qs(r,o,e._key,s,new jl(n.hasPendingWrites,n.fromCache),e.converter)}function so(){return new Mp("serverTimestamp")}(function(e,n=!0){(function(o){go=o})(mo),$n(new Ln("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new Js(new mR(s.getProvider("auth-internal")),new yR(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(y.options.projectId,T)})(d,o),d);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),cn(q_,H_,e),cn(q_,H_,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||s.get().then(c=>this.messaging=c,()=>{}),this.appCheck||o?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="us-central1";class CC{constructor(e,n,s,o,c=Hm,d=(...m)=>fetch(...m)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new IC(e,n,s,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(c);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=Hm}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function NC(r,e,n){const s=$s(e);r.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(Qm(r.emulatorOrigin+"/backends"),Ym("Functions",!0))}const z0="@firebase/functions",B0="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="auth-internal",OC="app-check-internal",MC="messaging-internal";function kC(r){const e=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),c=n.getProvider(DC),d=n.getProvider(MC),m=n.getProvider(OC);return new CC(o,c,d,m,s)};$n(new Ln(EE,e,"PUBLIC").setMultipleInstances(!0)),cn(z0,B0,r),cn(z0,B0,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(r=Eh(),e=Hm){const s=$r(gt(r),EE).getImmediate({identifier:e}),o=eb("functions");return o&&VC(s,...o),s}function VC(r,e,n){NC(gt(r),e,n)}kC();const SE="@firebase/installations",Bp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=1e4,AE=`w:${Bp}`,xE="FIS_v2",PC="https://firebaseinstallations.googleapis.com/v1",UC=3600*1e3,LC="installations",zC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ys=new Xs(LC,zC,BC);function RE(r){return r instanceof Zn&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE({projectId:r}){return`${PC}/projects/${r}/installations`}function CE(r){return{token:r.token,requestStatus:2,expiresIn:HC(r.expiresIn),creationTime:Date.now()}}async function NE(r,e){const s=(await e.json()).error;return Ys.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function DE({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function qC(r,{refreshToken:e}){const n=DE(r);return n.append("Authorization",FC(e)),n}async function OE(r){const e=await r();return e.status>=500&&e.status<600?r():e}function HC(r){return Number(r.replace("s","000"))}function FC(r){return`${xE} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC({appConfig:r,heartbeatServiceProvider:e},{fid:n}){const s=IE(r),o=DE(r),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const d={fid:n,authVersion:xE,appId:r.appId,sdkVersion:AE},m={method:"POST",headers:o,body:JSON.stringify(d)},v=await OE(()=>fetch(s,m));if(v.ok){const y=await v.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:CE(y.authToken)}}else throw await NE("Create Installation",v)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^[cdef][\w-]{21}$/,Fm="";function KC(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const n=$C(r);return YC.test(n)?n:Fm}catch{return Fm}}function $C(r){return QC(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=new Map;function jE(r,e){const n=Qh(r);VE(n,e),XC(n,e)}function VE(r,e){const n=kE.get(r);if(n)for(const s of n)s(e)}function XC(r,e){const n=WC();n&&n.postMessage({key:r,fid:e}),ZC()}let zs=null;function WC(){return!zs&&"BroadcastChannel"in self&&(zs=new BroadcastChannel("[Firebase] FID Change"),zs.onmessage=r=>{VE(r.data.key,r.data.fid)}),zs}function ZC(){kE.size===0&&zs&&(zs.close(),zs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="firebase-installations-database",eN=1,Ks="firebase-installations-store";let mm=null;function qp(){return mm||(mm=lb(JC,eN,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Ks)}}})),mm}async function vh(r,e){const n=Qh(r),o=(await qp()).transaction(Ks,"readwrite"),c=o.objectStore(Ks),d=await c.get(n);return await c.put(e,n),await o.done,(!d||d.fid!==e.fid)&&jE(r,e.fid),e}async function PE(r){const e=Qh(r),s=(await qp()).transaction(Ks,"readwrite");await s.objectStore(Ks).delete(e),await s.done}async function Yh(r,e){const n=Qh(r),o=(await qp()).transaction(Ks,"readwrite"),c=o.objectStore(Ks),d=await c.get(n),m=e(d);return m===void 0?await c.delete(n):await c.put(m,n),await o.done,m&&(!d||d.fid!==m.fid)&&jE(r,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hp(r){let e;const n=await Yh(r.appConfig,s=>{const o=tN(s),c=nN(r,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Fm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function tN(r){const e=r||{fid:KC(),registrationStatus:0};return UE(e)}function nN(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ys.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=iN(r,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:rN(r)}:{installationEntry:e}}async function iN(r,e){try{const n=await GC(r,e);return vh(r.appConfig,n)}catch(n){throw RE(n)&&n.customData.serverCode===409?await PE(r.appConfig):await vh(r.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function rN(r){let e=await q0(r.appConfig);for(;e.registrationStatus===1;)await ME(100),e=await q0(r.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Hp(r);return s||n}return e}function q0(r){return Yh(r,e=>{if(!e)throw Ys.create("installation-not-found");return UE(e)})}function UE(r){return sN(r)?{fid:r.fid,registrationStatus:0}:r}function sN(r){return r.registrationStatus===1&&r.registrationTime+wE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN({appConfig:r,heartbeatServiceProvider:e},n){const s=oN(r,n),o=qC(r,n),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const d={installation:{sdkVersion:AE,appId:r.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},v=await OE(()=>fetch(s,m));if(v.ok){const y=await v.json();return CE(y)}else throw await NE("Generate Auth Token",v)}function oN(r,{fid:e}){return`${IE(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fp(r,e=!1){let n;const s=await Yh(r.appConfig,c=>{if(!LE(c))throw Ys.create("not-registered");const d=c.authToken;if(!e&&uN(d))return c;if(d.requestStatus===1)return n=lN(r,e),c;{if(!navigator.onLine)throw Ys.create("app-offline");const m=dN(c);return n=cN(r,m),m}});return n?await n:s.authToken}async function lN(r,e){let n=await H0(r.appConfig);for(;n.authToken.requestStatus===1;)await ME(100),n=await H0(r.appConfig);const s=n.authToken;return s.requestStatus===0?Fp(r,e):s}function H0(r){return Yh(r,e=>{if(!LE(e))throw Ys.create("not-registered");const n=e.authToken;return fN(n)?{...e,authToken:{requestStatus:0}}:e})}async function cN(r,e){try{const n=await aN(r,e),s={...e,authToken:n};return await vh(r.appConfig,s),n}catch(n){if(RE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await PE(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await vh(r.appConfig,s)}throw n}}function LE(r){return r!==void 0&&r.registrationStatus===2}function uN(r){return r.requestStatus===2&&!hN(r)}function hN(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+UC}function dN(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function fN(r){return r.requestStatus===1&&r.requestTime+wE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(r){const e=r,{installationEntry:n,registrationPromise:s}=await Hp(e);return s?s.catch(console.error):Fp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(r,e=!1){const n=r;return await gN(n),(await Fp(n,e)).token}async function gN(r){const{registrationPromise:e}=await Hp(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(r){if(!r||!r.options)throw pm("App Configuration");if(!r.name)throw pm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!r.options[n])throw pm(n);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function pm(r){return Ys.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="installations",vN="installations-internal",_N=r=>{const e=r.getProvider("app").getImmediate(),n=yN(e),s=$r(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},bN=r=>{const e=r.getProvider("app").getImmediate(),n=$r(e,zE).getImmediate();return{getId:()=>mN(n),getToken:o=>pN(n,o)}};function TN(){$n(new Ln(zE,_N,"PUBLIC")),$n(new Ln(vN,bN,"PRIVATE"))}TN();cn(SE,Bp);cn(SE,Bp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="analytics",EN="firebase_id",SN="origin",wN=60*1e3,AN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un=new Th("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Tn=new Xs("analytics","Analytics",xN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(r){if(!r.startsWith(Gp)){const e=Tn.create("invalid-gtag-resource",{gtagURL:r});return un.warn(e.message),""}return r}function BE(r){return Promise.all(r.map(e=>e.catch(n=>n)))}function IN(r,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(r,e)),n}function CN(r,e){const n=IN("firebase-js-sdk-policy",{createScriptURL:RN}),s=document.createElement("script"),o=`${Gp}?l=${r}&id=${e}`;s.src=n?n?.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function NN(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function DN(r,e,n,s,o,c){const d=s[o];try{if(d)await e[d];else{const v=(await BE(n)).find(y=>y.measurementId===o);v&&await e[v.appId]}}catch(m){un.error(m)}r("config",o,c)}async function ON(r,e,n,s,o){try{let c=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await BE(n);for(const v of d){const y=m.find(A=>A.measurementId===v),T=y&&e[y.appId];if(T)c.push(T);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,o||{})}catch(c){un.error(c)}}function MN(r,e,n,s){async function o(c,...d){try{if(c==="event"){const[m,v]=d;await ON(r,e,n,m,v)}else if(c==="config"){const[m,v]=d;await DN(r,e,n,s,m,v)}else if(c==="consent"){const[m,v]=d;r("consent",m,v)}else if(c==="get"){const[m,v,y]=d;r("get",m,v,y)}else if(c==="set"){const[m]=d;r("set",m)}else r(c,...d)}catch(m){un.error(m)}}return o}function kN(r,e,n,s,o){let c=function(...d){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=MN(c,r,e,n),{gtagCore:c,wrappedGtag:window[o]}}function jN(r){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Gp)&&n.src.includes(r))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=30,PN=1e3;class UN{constructor(e={},n=PN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qE=new UN;function LN(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function zN(r){const{appId:e,apiKey:n}=r,s={method:"GET",headers:LN(n)},o=AN.replace("{app-id}",e),c=await fetch(o,s);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();m.error?.message&&(d=m.error.message)}catch{}throw Tn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function BN(r,e=qE,n){const{appId:s,apiKey:o,measurementId:c}=r.options;if(!s)throw Tn.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:s};throw Tn.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new FN;return setTimeout(async()=>{m.abort()},wN),HE({appId:s,apiKey:o,measurementId:c},d,m,e)}async function HE(r,{throttleEndTimeMillis:e,backoffCount:n},s,o=qE){const{appId:c,measurementId:d}=r;try{await qN(s,e)}catch(m){if(d)return un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw m}try{const m=await zN(r);return o.deleteThrottleMetadata(c),m}catch(m){const v=m;if(!HN(v)){if(o.deleteThrottleMetadata(c),d)return un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:c,measurementId:d};throw m}const y=Number(v?.customData?.httpStatus)===503?p_(n,o.intervalMillis,VN):p_(n,o.intervalMillis),T={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return o.setThrottleMetadata(c,T),un.debug(`Calling attemptFetch again in ${y} millis`),HE(r,T,s,o)}}function qN(r,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);r.addEventListener(()=>{clearTimeout(c),s(Tn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function HN(r){if(!(r instanceof Zn)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class FN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function GN(r,e,n,s,o){if(o&&o.global){r("event",n,s);return}else{const c=await e,d={...s,send_to:c};r("event",n,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(){if(rb())try{await sb()}catch(r){return un.warn(Tn.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return un.warn(Tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function YN(r,e,n,s,o,c,d){const m=BN(r);m.then(w=>{n[w.measurementId]=w.appId,r.options.measurementId&&w.measurementId!==r.options.measurementId&&un.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>un.error(w)),e.push(m);const v=QN().then(w=>{if(w)return s.getId()}),[y,T]=await Promise.all([m,v]);jN(c)||CN(c,y.measurementId),o("js",new Date);const A=d?.config??{};return A[SN]="firebase",A.update=!0,T!=null&&(A[EN]=T),o("config",y.measurementId,A),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.app=e}_delete(){return delete Gl[this.app.options.appId],Promise.resolve()}}let Gl={},F0=[];const G0={};let gm="dataLayer",$N="gtag",Q0,FE,Y0=!1;function XN(){const r=[];if(ib()&&r.push("This is a browser extension environment."),Fw()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=Tn.create("invalid-analytics-context",{errorInfo:e});un.warn(n.message)}}function WN(r,e,n){XN();const s=r.options.appId;if(!s)throw Tn.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Tn.create("no-api-key");if(Gl[s]!=null)throw Tn.create("already-exists",{id:s});if(!Y0){NN(gm);const{wrappedGtag:c,gtagCore:d}=kN(Gl,F0,G0,gm,$N);FE=c,Q0=d,Y0=!0}return Gl[s]=YN(r,F0,G0,e,Q0,gm,n),new KN(r)}function ZN(r=Eh()){r=gt(r);const e=$r(r,_h);return e.isInitialized()?e.getImmediate():JN(r)}function JN(r,e={}){const n=$r(r,_h);if(n.isInitialized()){const o=n.getImmediate();if(qr(e,n.getOptions()))return o;throw Tn.create("already-initialized")}return n.initialize({options:e})}function eD(r,e,n,s){r=gt(r),GN(FE,Gl[r.app.options.appId],e,n,s).catch(o=>un.error(o))}const K0="@firebase/analytics",$0="0.10.18";function tD(){$n(new Ln(_h,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return WN(s,o,n)},"PUBLIC")),$n(new Ln("analytics-internal",r,"PRIVATE")),cn(K0,$0),cn(K0,$0,"esm2020");function r(e){try{const n=e.getProvider(_h).getImmediate();return{logEvent:(s,o,c)=>eD(n,s,o,c)}}catch(n){throw Tn.create("interop-component-reg-failed",{reason:n})}}}tD();const nD={apiKey:"AIzaSyDQnrbvsx52ikiWELf6hc4YiXQTC1G5tpY",authDomain:"three-sided-flashcard-app.firebaseapp.com",projectId:"three-sided-flashcard-app",storageBucket:"three-sided-flashcard-app.firebasestorage.app",messagingSenderId:"47503676879",appId:"1:47503676879:web:27fb875159cc4459a12eba",measurementId:"G-PBP1G21Q29"},Kh=cb(nD),ym=lR(Kh),jn=uC(Kh);jC(Kh);ZN(Kh);const GE=de.createContext({}),dc=()=>de.useContext(GE),iD=({children:r})=>{const[e,n]=de.useState(null),[s,o]=de.useState(!0);de.useEffect(()=>X1(ym,y=>{n(y),o(!1)}),[]);const m={user:e,signInWithGoogle:async()=>{try{const v=new Xi;return(await yx(ym,v)).user}catch(v){throw console.error("Error signing in with Google:",v),v}},logout:async()=>{try{await W1(ym)}catch(v){throw console.error("Error signing out:",v),v}},loading:s};return p.jsx(GE.Provider,{value:m,children:!s&&r})};class Hs{static async getUserProfile(e){try{const n=to(jn,"users",e),s=await SC(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){throw console.error("Error fetching user profile:",n),n}}static async createUserProfile(e,n){try{const s=to(jn,"users",e);return await wC(s,{...n,createdAt:so(),updatedAt:so(),isPremium:!1,flashcardCount:0,upvotes:0,streak:0}),e}catch(s){throw console.error("Error creating user profile:",s),s}}static async updateUserProfile(e,n){try{const s=to(jn,"users",e);await TE(s,{...n,updatedAt:so()})}catch(s){throw console.error("Error updating user profile:",s),s}}static async getUserStats(e){try{const n=await this.getUserProfile(e);if(!n)return null;const s=no(Ls(jn,"flashcards"),Xa("authorId","==",e)),c=(await ro(s)).size,d=[];return c>0&&d.push("first_card"),c>=10&&d.push("ten_cards"),c>=100&&d.push("hundred_cards"),n.upvotes>50&&d.push("popular_creator"),{...n,flashcardCount:c,achievements:d,studySessions:Math.floor(Math.random()*20)+1,followers:Math.floor(Math.random()*100),rating:(Math.random()*2+3).toFixed(1)}}catch(n){throw console.error("Error fetching user stats:",n),n}}static async checkOnboardingStatus(e){try{const n=await this.getUserProfile(e);if(!n)return{hasProfile:!1,hasCards:!1};const s=no(Ls(jn,"flashcards"),Xa("authorId","==",e),Fl(1));return{hasProfile:!0,hasCards:!(await ro(s)).empty,profile:n}}catch(n){throw console.error("Error checking onboarding status:",n),n}}static async getTopUsers(e=20,n="allTime"){try{const s=no(Ls(jn,"users"),Hl("flashcardCount","desc"),Hl("upvotes","desc"),Fl(e));return(await ro(s)).docs.map(c=>({uid:c.id,...c.data()}))}catch(s){return console.error("Error fetching top users:",s),[]}}static async getStudyHistory(e){try{return[{date:"2024-01-15",duration:45,cardsStudied:12,accuracy:85},{date:"2024-01-14",duration:30,cardsStudied:8,accuracy:92},{date:"2024-01-13",duration:60,cardsStudied:20,accuracy:78},{date:"2024-01-12",duration:25,cardsStudied:6,accuracy:95},{date:"2024-01-11",duration:40,cardsStudied:15,accuracy:88}]}catch(n){return console.error("Error fetching study history:",n),[]}}}class Yn{static async getUserFlashcards(e,n=50){try{const s=no(Ls(jn,"flashcards"),Xa("authorId","==",e),Hl("createdAt","desc"),Fl(n));return(await ro(s)).docs.map(c=>({id:c.id,...c.data()}))}catch(s){throw console.error("Error fetching user flashcards:",s),s}}static async getPublicFlashcards(e=50){try{const n=no(Ls(jn,"flashcards"),Xa("isPublic","==",!0),Hl("createdAt","desc"),Fl(e));return(await ro(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){throw console.error("Error fetching public flashcards:",n),n}}static async createFlashcard(e,n){try{return(await xC(Ls(jn,"flashcards"),{...e,authorId:n,createdAt:so(),updatedAt:so(),upvotes:0,downvotes:0,isPublic:!0})).id}catch(s){throw console.error("Error creating flashcard:",s),s}}static async updateFlashcard(e,n){try{const s=to(jn,"flashcards",e);await TE(s,{...n,updatedAt:so()})}catch(s){throw console.error("Error updating flashcard:",s),s}}static async deleteFlashcard(e){try{const n=to(jn,"flashcards",e);await AC(n)}catch(n){throw console.error("Error deleting flashcard:",n),n}}static async searchFlashcards(e,n={},s=20){try{const o=[Xa("isPublic","==",!0)];n.subject&&o.push(Xa("subject","==",n.subject));let c="createdAt",d="desc";n.sortBy==="oldest"?(c="createdAt",d="asc"):n.sortBy==="popular"&&(c="upvotes",d="desc");const m=no(Ls(jn,"flashcards"),...o,Hl(c,d),Fl(s*3));let y=(await ro(m)).docs.map(T=>({id:T.id,...T.data()}));if(e&&e.trim()){const T=e.toLowerCase();y=y.filter(A=>A.question?.toLowerCase().includes(T)||A.answer?.toLowerCase().includes(T)||Array.isArray(A.hints)&&A.hints.some(w=>w.toLowerCase().includes(T))||Array.isArray(A.tags)&&A.tags.some(w=>w.toLowerCase().includes(T)))}return y.slice(0,s)}catch(o){return console.error("Error searching flashcards:",o),await this.getPublicFlashcards(s)}}static async getSubjects(){try{const e=await this.getPublicFlashcards(1e3),n=new Set;return e.forEach(s=>{s.subject&&n.add(s.subject)}),Array.from(n).sort()}catch(e){return console.error("Error fetching subjects:",e),["Mathematics","Physics","Chemistry","Biology","Computer Science"]}}static async getPopularTags(e=20){try{const n=await this.getPublicFlashcards(1e3),s={};return n.forEach(o=>{o.tags&&o.tags.forEach(c=>{s[c]=(s[c]||0)+1})}),Object.entries(s).sort(([,o],[,c])=>c-o).slice(0,e).map(([o])=>o)}catch(n){return console.error("Error fetching popular tags:",n),["calculus","algebra","geometry","trigonometry","statistics"]}}static async getUserFavorites(e){try{return(await this.getPublicFlashcards(20)).slice(0,10)}catch(n){return console.error("Error fetching user favorites:",n),[]}}static async removeFromFavorites(e,n){try{return!0}catch(s){throw console.error("Error removing from favorites:",s),s}}}var Dl={};class Vl{static async generateHint(e,n){try{const s=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Dl.REACT_APP_DEEPSEEK_API_KEY}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"You are a helpful math tutor. Generate a helpful hint for a flashcard that guides the student toward the answer without giving it away completely."},{role:"user",content:`Question: ${e}
Answer: ${n}

Generate a helpful hint:`}],max_tokens:150,temperature:.7})});if(!s.ok)throw new Error("API request failed");return(await s.json()).choices[0].message.content.trim()}catch(s){return console.error("Error generating hint:",s),"Try breaking down the problem into smaller steps."}}static async generateProof(e,n){try{const s=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Dl.REACT_APP_DEEPSEEK_API_KEY}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"You are a math tutor. Provide a clear, step-by-step proof or solution for the given problem."},{role:"user",content:`Question: ${e}
Answer: ${n}

Provide a step-by-step proof:`}],max_tokens:300,temperature:.5})});if(!s.ok)throw new Error("API request failed");return(await s.json()).choices[0].message.content.trim()}catch(s){return console.error("Error generating proof:",s),`1. Start with the given information
2. Apply relevant mathematical principles
3. Work through the steps systematically
4. Verify your answer`}}static async generateSuggestions(e,n){try{const s=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Dl.REACT_APP_DEEPSEEK_API_KEY}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"You are a math tutor. Suggest ways to improve this flashcard to make it more effective for learning."},{role:"user",content:`Question: ${e}
Answer: ${n}

Suggest improvements:`}],max_tokens:200,temperature:.7})});if(!s.ok)throw new Error("API request failed");return(await s.json()).choices[0].message.content.trim()}catch(s){return console.error("Error generating suggestions:",s),"Consider adding more context, breaking down complex steps, or including visual aids if applicable."}}static async generateRelatedQuestions(e,n){try{const s=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Dl.REACT_APP_DEEPSEEK_API_KEY}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"You are a math tutor. Generate 2-3 related questions that would help reinforce the concepts in this flashcard."},{role:"user",content:`Question: ${e}
Answer: ${n}

Generate related questions:`}],max_tokens:250,temperature:.7})});if(!s.ok)throw new Error("API request failed");return(await s.json()).choices[0].message.content.trim()}catch(s){return console.error("Error generating related questions:",s),`1. What if we change the parameters?
2. How would you solve a similar problem?
3. What are the key concepts here?`}}static async convertToLaTeX(e){try{const n=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Dl.REACT_APP_DEEPSEEK_API_KEY}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"You are a LaTeX expert. Convert natural language mathematical expressions to proper LaTeX code. Only return the LaTeX code, nothing else."},{role:"user",content:`Convert this to LaTeX: ${e}`}],max_tokens:100,temperature:.3})});if(!n.ok)throw new Error("API request failed");return(await n.json()).choices[0].message.content.trim()}catch(n){console.error("Error converting to LaTeX:",n);const s={"direct sum":"\\oplus",integral:"\\int",infinity:"\\infty",squared:"^2",cubed:"^3","square root":"\\sqrt{}",derivative:"\\frac{d}{dx}",limit:"\\lim_{x \\to }",sum:"\\sum_{n=1}^{\\infty}",product:"\\prod_{i=1}^{n}",matrix:"\\begin{pmatrix} \\end{pmatrix}",fraction:"\\frac{}{}","absolute value":"| |","greater than":">","less than":"<","greater than or equal":"\\geq","less than or equal":"\\leq"};let o=e;return Object.entries(s).forEach(([c,d])=>{o=o.replace(new RegExp(c,"gi"),d)}),o||"\\text{LaTeX conversion failed}"}}}const rD=({question:r,answer:e,subject:n,onEnhancementComplete:s})=>{const[o,c]=de.useState("hints"),[d,m]=de.useState(!1),[v,y]=de.useState({hints:"",proof:"",suggestions:"",relatedQuestions:""}),T=async w=>{if(!(!r||!e)){m(!0);try{let U="";switch(w){case"hints":U=await Vl.generateHint(r,e);break;case"proof":U=await Vl.generateProof(r,e);break;case"suggestions":U=await Vl.generateSuggestions(r,e);break;case"relatedQuestions":U=await Vl.generateRelatedQuestions(r,e);break;default:break}y(Y=>({...Y,[w]:U})),s&&s(w,U)}catch(U){console.error(`Error generating ${w}:`,U),y(Y=>({...Y,[w]:`Error generating ${w}. Please try again.`}))}finally{m(!1)}}},A=[{id:"hints",label:"Hints",icon:"💡"},{id:"proof",label:"Proof",icon:"📝"},{id:"suggestions",label:"Suggestions",icon:"💡"},{id:"relatedQuestions",label:"Related Questions",icon:"❓"}];return p.jsxs("div",{className:"card p-6",children:[p.jsx("h3",{className:"text-xl font-bold text-neutral-800 mb-4",children:"🤖 AI Enhancement"}),p.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:A.map(w=>p.jsxs("button",{onClick:()=>c(w.id),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${o===w.id?"bg-primary-100 text-primary-800 border-2 border-primary-300":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 border-2 border-transparent"}`,children:[w.icon," ",w.label]},w.id))}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("button",{onClick:()=>T(o),disabled:d||!r||!e,className:"btn btn-primary w-full",children:d?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Generating ",o,"..."]}):`Generate ${o.charAt(0).toUpperCase()+o.slice(1)}`}),v[o]&&p.jsxs("div",{className:"bg-neutral-50 p-4 rounded-lg border border-neutral-200",children:[p.jsx("h4",{className:"font-semibold text-neutral-800 mb-2",children:A.find(w=>w.id===o)?.label}),p.jsx("div",{className:"text-neutral-700 whitespace-pre-wrap",children:v[o]})]}),p.jsxs("div",{className:"text-sm text-neutral-600 bg-blue-50 p-3 rounded-lg",children:[p.jsx("strong",{children:"💡 Tip:"})," Use AI enhancement to improve your flashcards with better hints, proofs, and suggestions."]})]})]})},sD=({onCardCreated:r,onClose:e})=>{const{user:n}=dc(),[s,o]=de.useState({question:"",answer:"",hints:[""],tags:"",difficulty:"medium",subject:"",isPublic:!0}),[c,d]=de.useState(!1),[m,v]=de.useState(""),[y,T]=de.useState(!1),A=(F,ie)=>{o(te=>({...te,[F]:ie}))},w=(F,ie)=>{const te=[...s.hints];te[F]=ie,o(ce=>({...ce,hints:te}))},U=()=>{o(F=>({...F,hints:[...F.hints,""]}))},Y=F=>{if(s.hints.length>1){const ie=s.hints.filter((te,ce)=>ce!==F);o(te=>({...te,hints:ie}))}},re=(F,ie)=>{switch(F){case"hint":ie&&!s.hints.includes(ie)&&o(te=>({...te,hints:[...te.hints.filter(ce=>ce.trim()),ie]}));break}},X=async F=>{if(F.preventDefault(),!n){v("Please sign in to create flashcards");return}if(!s.question.trim()||!s.answer.trim()){v("Question and answer are required");return}d(!0),v("");try{const ie={question:s.question.trim(),answer:s.answer.trim(),hints:s.hints.filter(ce=>ce.trim()),tags:s.tags.split(",").map(ce=>ce.trim()).filter(ce=>ce),difficulty:s.difficulty,subject:s.subject.trim(),isPublic:s.isPublic},te=await Yn.createFlashcard(ie,n.uid);o({question:"",answer:"",hints:[""],tags:"",difficulty:"medium",subject:"",isPublic:!0}),r&&r(te)}catch(ie){v("Failed to create flashcard. Please try again."),console.error("Error creating flashcard:",ie)}finally{d(!1)}};return n?p.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",maxWidth:"800px",margin:"0 auto"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[p.jsx("h2",{style:{color:"#333",margin:0},children:"✏️ Create New Flashcard"}),e&&p.jsx("button",{onClick:e,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"×"})]}),p.jsxs("form",{onSubmit:X,children:[m&&p.jsx("div",{style:{background:"#f8d7da",color:"#721c24",padding:"1rem",borderRadius:"6px",marginBottom:"1rem"},children:m}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Question *"}),p.jsx("textarea",{value:s.question,onChange:F=>A("question",F.target.value),placeholder:"Enter your question here...",style:{width:"100%",minHeight:"100px",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",fontFamily:"inherit"},required:!0})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Answer *"}),p.jsx("textarea",{value:s.answer,onChange:F=>A("answer",F.target.value),placeholder:"Enter the answer here...",style:{width:"100%",minHeight:"100px",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",fontFamily:"inherit"},required:!0})]}),s.question.trim()&&s.answer.trim()&&p.jsx("div",{style:{marginBottom:"1.5rem"},children:p.jsx("button",{type:"button",onClick:()=>T(!y),style:{background:"#6f42c1",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:y?"🤖 Hide AI Enhancer":"🤖 Show AI Enhancer"})}),y&&s.question.trim()&&s.answer.trim()&&p.jsx("div",{style:{marginBottom:"2rem"},children:p.jsx(rD,{question:s.question,answer:s.answer,subject:s.subject,onEnhancementComplete:re})}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Hints"}),s.hints.map((F,ie)=>p.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[p.jsx("input",{type:"text",value:F,onChange:te=>w(ie,te.target.value),placeholder:`Hint ${ie+1}...`,style:{flex:1,padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}}),s.hints.length>1&&p.jsx("button",{type:"button",onClick:()=>Y(ie),style:{background:"#dc3545",color:"white",border:"none",padding:"0.75rem",borderRadius:"6px",cursor:"pointer",minWidth:"40px"},children:"×"})]},ie)),p.jsx("button",{type:"button",onClick:U,style:{background:"#28a745",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Add Hint"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Subject"}),p.jsx("input",{type:"text",value:s.subject,onChange:F=>A("subject",F.target.value),placeholder:"e.g., Mathematics, Physics...",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]}),p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Difficulty"}),p.jsxs("select",{value:s.difficulty,onChange:F=>A("difficulty",F.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"},children:[p.jsx("option",{value:"easy",children:"Easy"}),p.jsx("option",{value:"medium",children:"Medium"}),p.jsx("option",{value:"hard",children:"Hard"})]})]})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Tags"}),p.jsx("input",{type:"text",value:s.tags,onChange:F=>A("tags",F.target.value),placeholder:"Enter tags separated by commas (e.g., calculus, limits, analysis)",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]}),p.jsx("div",{style:{marginBottom:"2rem"},children:p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[p.jsx("input",{type:"checkbox",checked:s.isPublic,onChange:F=>A("isPublic",F.target.checked),style:{transform:"scale(1.2)"}}),p.jsx("span",{style:{color:"#333"},children:"Make this flashcard public"})]})}),p.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e&&p.jsx("button",{type:"button",onClick:e,style:{background:"#6c757d",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Cancel"}),p.jsx("button",{type:"submit",disabled:c,style:{background:c?"#6c757d":"#007bff",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"6px",cursor:c?"not-allowed":"pointer",fontSize:"1rem"},children:c?"Creating...":"Create Flashcard"})]})]})]}):p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"🔐 Sign in to Create Flashcards"}),p.jsx("p",{style:{color:"#666"},children:"You need to be signed in to create and share flashcards with the community."})]})},aD=()=>{const{user:r}=dc(),[e,n]=de.useState([]),[s,o]=de.useState(0),[c,d]=de.useState(!1),[m,v]=de.useState(!0),[y,T]=de.useState(""),A=de.useRef(null);de.useEffect(()=>{r&&w()},[r]);const w=async()=>{try{v(!0);let ce=[];try{ce=await Yn.getUserFlashcards(r.uid,50)}catch{}ce.length||(ce=await Yn.getPublicFlashcards(50)),n(ce)}catch(ce){T("Failed to load flashcards"),console.error("Error loading flashcards:",ce)}finally{v(!1)}},U=()=>{s<e.length-1&&(o(s+1),d(!1))},Y=()=>{s>0&&(o(s-1),d(!1))},re=()=>{o(0),d(!1)},X=()=>{d(!c)};de.useEffect(()=>{const ce=G=>{G.key==="ArrowRight"&&U(),G.key==="ArrowLeft"&&Y(),G.key===" "&&(G.preventDefault(),X())};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[s,e.length,c]);const F=ce=>{A.current=ce.changedTouches[0].clientX},ie=ce=>{if(A.current===null)return;const G=ce.changedTouches[0].clientX-A.current;G>40?Y():G<-40&&U(),A.current=null};if(!r)return p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"🔐 Sign in to Study"}),p.jsx("p",{style:{color:"#666"},children:"You need to be signed in to access the study mode."})]});if(m)return p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"📚 Loading Flashcards..."}),p.jsx("p",{style:{color:"#666"},children:"Please wait while we load the community flashcards."})]});if(y)return p.jsxs("div",{style:{background:"#f8d7da",color:"#721c24",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[p.jsx("h3",{style:{marginBottom:"1rem"},children:"❌ Error Loading Flashcards"}),p.jsx("p",{children:y}),p.jsx("button",{onClick:w,style:{background:"#007bff",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"6px",cursor:"pointer",marginTop:"1rem"},children:"Try Again"})]});if(e.length===0)return p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"📚 No Flashcards Available"}),p.jsx("p",{style:{color:"#666"},children:"There are no public flashcards available yet. Be the first to create one!"})]});const te=e[s];return p.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",maxWidth:"800px",margin:"0 auto"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[p.jsx("h2",{style:{color:"#333",margin:0},children:"📚 Study Mode"}),p.jsxs("div",{style:{background:"#f8f9fa",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",color:"#666"},children:[s+1," of ",e.length]})]}),p.jsx("div",{onClick:X,onTouchStart:F,onTouchEnd:ie,style:{background:"white",border:"2px solid #e9ecef",borderRadius:"12px",padding:"3rem 2rem",margin:"2rem 0",minHeight:"300px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"transform 0.35s ease, box-shadow 0.35s ease",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",transform:c?"rotateY(180deg)":"rotateY(0deg)"},children:c?p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx("h3",{style:{fontSize:"1.5rem",color:"#333",marginBottom:"1rem"},children:"Answer"}),p.jsx("p",{style:{fontSize:"1.2rem",color:"#666",lineHeight:"1.6"},children:te.answer}),te.hints&&te.hints.length>0&&p.jsxs("div",{style:{marginTop:"2rem"},children:[p.jsx("h4",{style:{fontSize:"1.1rem",color:"#333",marginBottom:"1rem"},children:"💡 Hints"}),te.hints.map((ce,G)=>p.jsx("p",{style:{fontSize:"1rem",color:"#666",marginBottom:"0.5rem",fontStyle:"italic"},children:ce},G))]}),te.tags&&te.tags.length>0&&p.jsx("div",{style:{marginTop:"1rem"},children:p.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",justifyContent:"center"},children:te.tags.map((ce,G)=>p.jsx("span",{style:{background:"#e9ecef",color:"#666",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem"},children:ce},G))})}),p.jsx("p",{style:{fontSize:"0.9rem",color:"#999",marginTop:"2rem"},children:"Click to see question again"})]}):p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx("h3",{style:{fontSize:"1.5rem",color:"#333",marginBottom:"1rem"},children:"Question"}),p.jsx("p",{style:{fontSize:"1.2rem",color:"#666",lineHeight:"1.6"},children:te.question}),p.jsx("p",{style:{fontSize:"0.9rem",color:"#999",marginTop:"2rem"},children:"Click to reveal answer"})]})}),p.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",fontSize:"0.9rem",color:"#666"},children:p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("span",{children:["Subject: ",te.subject||"Not specified"]}),p.jsxs("span",{children:["By: ",te.authorId||"Unknown"]})]})}),p.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[p.jsx("button",{onClick:Y,disabled:s===0,style:{background:s===0?"#e9ecef":"#007bff",color:s===0?"#999":"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:s===0?"not-allowed":"pointer",fontSize:"1rem"},children:"← Previous"}),p.jsx("button",{onClick:X,style:{background:"#28a745",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:c?"Show Question":"Show Answer"}),p.jsx("button",{onClick:U,disabled:s===e.length-1,style:{background:s===e.length-1?"#e9ecef":"#007bff",color:s===e.length-1?"#999":"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:s===e.length-1?"not-allowed":"pointer",fontSize:"1rem"},children:"Next →"}),p.jsx("button",{onClick:re,style:{background:"#6c757d",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"🔄 Restart"})]})]})},oD=()=>{const[r,e]=de.useState(""),[n,s]=de.useState([]),[o,c]=de.useState(!1),[d,m]=de.useState({subject:"",sortBy:"newest"}),[v,y]=de.useState([]);de.useEffect(()=>{(async()=>{const w=await Yn.getSubjects();y(w||[])})()},[]);const T=async()=>{if(r.trim()){c(!0);try{const w=await Yn.searchFlashcards(r,d);s(w)}catch(w){console.error("Search error",w),s([])}finally{c(!1)}}},A=()=>{e(""),m({subject:"",difficulty:"",sortBy:"newest"}),s([])};return p.jsxs("div",{className:"container section",children:[p.jsxs("div",{className:"card p-6 mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🔍 Search Flashcards"}),p.jsx("p",{className:"subtle mb-4",children:"Find flashcards by topic, question text, or tags."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[p.jsx("input",{type:"text",value:r,onChange:w=>e(w.target.value),className:"input flex-1",placeholder:"e.g. linear algebra, chain rule, eigenvalues",onKeyDown:w=>w.key==="Enter"&&T()}),p.jsx("button",{onClick:T,disabled:o||!r.trim(),className:"btn btn-primary whitespace-nowrap",children:o?"Searching…":"Search"}),p.jsx("button",{onClick:A,className:"btn btn-secondary whitespace-nowrap",children:"Clear"})]}),p.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.5rem"},children:[p.jsxs("select",{value:d.subject,onChange:w=>m({...d,subject:w.target.value}),className:"select",children:[p.jsx("option",{value:"",children:"All subjects"}),v.map(w=>p.jsx("option",{value:w,children:w},w))]}),p.jsxs("select",{value:d.sortBy,onChange:w=>m({...d,sortBy:w.target.value}),className:"select",children:[p.jsx("option",{value:"newest",children:"Newest"}),p.jsx("option",{value:"oldest",children:"Oldest"}),p.jsx("option",{value:"popular",children:"Most popular"}),p.jsx("option",{value:"difficulty",children:"By difficulty"})]})]})]}),p.jsxs("div",{className:"card p-6",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsxs("h3",{className:"text-xl font-bold",children:["Results ",n.length?`(${n.length})`:""]})}),o?p.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"1rem"},children:Array.from({length:6}).map((w,U)=>p.jsxs("div",{className:"card",style:{padding:"1rem",background:"rgba(255,255,255,0.04)"},children:[p.jsx("div",{style:{height:"16px",background:"rgba(255,255,255,0.08)",borderRadius:"6px",marginBottom:"8px"}}),p.jsx("div",{style:{height:"12px",background:"rgba(255,255,255,0.06)",borderRadius:"6px",marginBottom:"8px"}}),p.jsx("div",{style:{height:"12px",width:"60%",background:"rgba(255,255,255,0.06)",borderRadius:"6px"}})]},U))}):n.length===0?p.jsx("div",{className:"subtle",style:{textAlign:"center",padding:"2rem"},children:"Type a query and press Search to see results."}):p.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"1rem"},children:n.map(w=>p.jsxs("div",{className:"card p-4 hover-lift",children:[p.jsx("h4",{className:"font-semibold mb-2",style:{color:"#e5e7eb"},children:w.question?.length>110?w.question.slice(0,110)+"…":w.question}),p.jsx("p",{className:"subtle mb-3",style:{fontSize:"0.95rem"},children:w.answer?.length>140?w.answer.slice(0,140)+"…":w.answer}),p.jsx("div",{className:"subtle",style:{display:"flex",justifyContent:"flex-end",fontSize:"0.85rem"},children:p.jsx("span",{children:w.subject||"—"})})]},w.id))})]})]})},lD=()=>{const{user:r}=dc(),[e,n]=de.useState([]),[s,o]=de.useState(null),[c,d]=de.useState(!0),[m,v]=de.useState("leaderboard"),[y,T]=de.useState("allTime");de.useEffect(()=>{A(),r&&w()},[r,y]);const A=async()=>{try{d(!0);const F=await Hs.getTopUsers(20,y);n(F)}catch(F){console.error("Error loading leaderboard:",F),n([])}finally{d(!1)}},w=async()=>{if(r)try{const F=await Hs.getUserStats(r.uid);o(F)}catch(F){console.error("Error loading user stats:",F)}},U=F=>{switch(F){case"week":return"This Week";case"month":return"This Month";case"year":return"This Year";default:return"All Time"}},Y=F=>{switch(F){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return`#${F}`}},re=F=>{switch(F){case"first_card":return"🎯";case"ten_cards":return"📚";case"hundred_cards":return"🏆";case"popular_creator":return"⭐";case"study_master":return"🧠";case"community_contributor":return"👥";default:return"🏅"}},X=F=>{switch(F){case"first_card":return"First Steps";case"ten_cards":return"Dedicated Learner";case"hundred_cards":return"Knowledge Master";case"popular_creator":return"Popular Creator";case"study_master":return"Study Master";case"community_contributor":return"Community Hero";default:return"Achievement Unlocked"}};return r?p.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",maxWidth:"1200px",margin:"0 auto"},children:[p.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[p.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"🏆 Leaderboard & Statistics"}),p.jsx("p",{style:{color:"#666"},children:"See how you rank among the Three-Sided community and track your progress"})]}),p.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"2rem",flexWrap:"wrap"},children:["allTime","year","month","week"].map(F=>p.jsx("button",{onClick:()=>T(F),style:{background:y===F?"#007bff":"#e9ecef",color:y===F?"white":"#333",border:"none",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s"},children:U(F)},F))}),p.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #e9ecef",marginBottom:"2rem"},children:[p.jsx("button",{onClick:()=>v("leaderboard"),style:{background:"none",border:"none",padding:"1rem 2rem",cursor:"pointer",borderBottom:m==="leaderboard"?"2px solid #007bff":"none",color:m==="leaderboard"?"#007bff":"#666",fontWeight:m==="leaderboard"?"600":"400"},children:"🏆 Leaderboard"}),p.jsx("button",{onClick:()=>v("stats"),style:{background:"none",border:"none",padding:"1rem 2rem",cursor:"pointer",borderBottom:m==="stats"?"2px solid #007bff":"none",color:m==="stats"?"#007bff":"#666",fontWeight:m==="stats"?"600":"400"},children:"📊 My Statistics"})]}),p.jsxs("div",{style:{minHeight:"400px"},children:[m==="leaderboard"&&p.jsxs("div",{children:[p.jsxs("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:["🏆 Top Contributors - ",U(y)]}),c?p.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"⏳"}),p.jsx("p",{children:"Loading leaderboard..."})]}):e.length===0?p.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"📊"}),p.jsx("p",{children:"No data available for this timeframe."})]}):p.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.map((F,ie)=>p.jsxs("div",{style:{background:ie<3?"#fff3cd":"#f8f9fa",border:ie<3?"2px solid #ffc107":"1px solid #e9ecef",padding:"1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"1rem"},children:[p.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",minWidth:"50px",textAlign:"center"},children:Y(ie+1)}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1},children:[p.jsx("img",{src:F.photoURL||"https://via.placeholder.com/40x40",alt:F.displayName||"User",style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}),p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"600",color:"#333",fontSize:"1.1rem"},children:F.displayName||"Anonymous User"}),p.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:F.email})]})]}),p.jsxs("div",{style:{textAlign:"right",minWidth:"120px"},children:[p.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#007bff"},children:F.flashcardCount||0}),p.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:"flashcards"})]}),p.jsxs("div",{style:{textAlign:"right",minWidth:"100px"},children:[p.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#28a745"},children:F.studySessions||0}),p.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:"sessions"})]})]},F.uid))})]}),m==="stats"&&p.jsxs("div",{children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"📊 Your Statistics"}),s?p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📚"}),p.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff",marginBottom:"0.5rem"},children:s.flashcardCount||0}),p.jsx("div",{style:{color:"#666"},children:"Flashcards Created"})]}),p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"🧠"}),p.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#28a745",marginBottom:"0.5rem"},children:s.studySessions||0}),p.jsx("div",{style:{color:"#666"},children:"Study Sessions"})]}),p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"👥"}),p.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107",marginBottom:"0.5rem"},children:s.followers||0}),p.jsx("div",{style:{color:"#666"},children:"Followers"})]}),p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"⭐"}),p.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#6f42c1",marginBottom:"0.5rem"},children:s.rating||"N/A"}),p.jsx("div",{style:{color:"#666"},children:"Average Rating"})]})]}):p.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"📊"}),p.jsx("p",{children:"Loading your statistics..."})]}),s&&s.achievements&&s.achievements.length>0&&p.jsxs("div",{style:{marginTop:"2rem"},children:[p.jsx("h4",{style:{color:"#333",marginBottom:"1rem"},children:"🏅 Your Achievements"}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:s.achievements.map((F,ie)=>p.jsxs("div",{style:{background:"#fff3cd",border:"1px solid #ffc107",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:re(F)}),p.jsx("div",{style:{fontWeight:"600",color:"#333",marginBottom:"0.5rem"},children:X(F)}),p.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:"Achievement unlocked!"})]},ie))})]}),s&&p.jsxs("div",{style:{marginTop:"2rem"},children:[p.jsx("h4",{style:{color:"#333",marginBottom:"1rem"},children:"📈 Progress Towards Next Goals"}),p.jsxs("div",{style:{marginBottom:"1rem"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[p.jsx("span",{style:{color:"#333"},children:"Next Milestone: 10 Flashcards"}),p.jsxs("span",{style:{color:"#666"},children:[s.flashcardCount||0,"/10"]})]}),p.jsx("div",{style:{background:"#e9ecef",height:"8px",borderRadius:"4px",overflow:"hidden"},children:p.jsx("div",{style:{background:"#007bff",height:"100%",width:`${Math.min((s.flashcardCount||0)/10*100,100)}%`,transition:"width 0.3s ease"}})})]}),p.jsxs("div",{style:{marginBottom:"1rem"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[p.jsx("span",{style:{color:"#333"},children:"Study Goal: 5 Sessions"}),p.jsxs("span",{style:{color:"#666"},children:[s.studySessions||0,"/5"]})]}),p.jsx("div",{style:{background:"#e9ecef",height:"8px",borderRadius:"4px",overflow:"hidden"},children:p.jsx("div",{style:{background:"#28a745",height:"100%",width:`${Math.min((s.studySessions||0)/5*100,100)}%`,transition:"width 0.3s ease"}})})]})]})]})]})]}):p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"🔐 Sign in to View Leaderboard"}),p.jsx("p",{style:{color:"#666"},children:"You need to be signed in to see the leaderboard and your statistics."})]})},cD=()=>{const{user:r}=dc(),[e,n]=de.useState(null),[s,o]=de.useState([]),[c,d]=de.useState([]),[m,v]=de.useState([]),[y,T]=de.useState(!0),[A,w]=de.useState("overview"),[U,Y]=de.useState(!1),[re,X]=de.useState({displayName:"",bio:"",subjects:"",studyGoals:""});de.useEffect(()=>{r&&F()},[r]);const F=async()=>{try{T(!0);const[G,fe,O,R]=await Promise.all([Hs.getUserProfile(r.uid),Yn.getUserFlashcards(r.uid),Yn.getUserFavorites(r.uid),Hs.getStudyHistory(r.uid)]);n(G),o(fe),d(O),v(R),G&&X({displayName:G.displayName||"",bio:G.bio||"",subjects:G.subjects?G.subjects.join(", "):"",studyGoals:G.studyGoals||""})}catch(G){console.error("Error loading user data:",G)}finally{T(!1)}},ie=async()=>{try{const G={...e,displayName:re.displayName,bio:re.bio,subjects:re.subjects.split(",").map(fe=>fe.trim()).filter(fe=>fe),studyGoals:re.studyGoals};await Hs.updateUserProfile(r.uid,G),n(G),Y(!1)}catch(G){console.error("Error updating profile:",G)}},te=async G=>{if(window.confirm("Are you sure you want to delete this flashcard?"))try{await Yn.deleteFlashcard(G),o(fe=>fe.filter(O=>O.id!==G))}catch(fe){console.error("Error deleting flashcard:",fe)}},ce=async G=>{try{await Yn.removeFromFavorites(r.uid,G),d(fe=>fe.filter(O=>O.id!==G))}catch(fe){console.error("Error removing favorite:",fe)}};return r?y?p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"⏳ Loading Dashboard..."}),p.jsx("p",{style:{color:"#666"},children:"Please wait while we load your data."})]}):p.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 24px rgba(0,0,0,0.1)",maxWidth:"1200px",margin:"0 auto"},children:[p.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[p.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"🎯 Your Dashboard"}),p.jsx("p",{style:{color:"#666"},children:"Manage your flashcards, track your progress, and customize your profile"})]}),p.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[p.jsx("img",{src:r.photoURL||"https://via.placeholder.com/80x80",alt:r.displayName||"User",style:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:"3px solid rgba(255,255,255,0.3)"}}),p.jsxs("div",{style:{flex:1},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.5rem"},children:e?.displayName||r.displayName||"Anonymous User"}),p.jsx("p",{style:{margin:"0 0 1rem 0",opacity:.9},children:e?.bio||"No bio yet. Click edit to add one!"}),p.jsx("button",{onClick:()=>Y(!U),style:{background:"rgba(255,255,255,0.2)",color:"white",border:"2px solid rgba(255,255,255,0.3)",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"},children:U?"Cancel Edit":"✏️ Edit Profile"})]})]}),U&&p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",marginBottom:"2rem"},children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"Edit Profile"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Display Name"}),p.jsx("input",{type:"text",value:re.displayName,onChange:G=>X(fe=>({...fe,displayName:G.target.value})),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]}),p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Subjects (comma-separated)"}),p.jsx("input",{type:"text",value:re.subjects,onChange:G=>X(fe=>({...fe,subjects:G.target.value})),placeholder:"e.g., Mathematics, Physics, Chemistry",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]})]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Bio"}),p.jsx("textarea",{value:re.bio,onChange:G=>X(fe=>({...fe,bio:G.target.value})),placeholder:"Tell us about yourself and your study goals...",style:{width:"100%",minHeight:"100px",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",fontFamily:"inherit"}})]}),p.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>Y(!1),style:{background:"#6c757d",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Cancel"}),p.jsx("button",{onClick:ie,style:{background:"#007bff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Save Changes"})]})]}),p.jsx("div",{style:{display:"flex",borderBottom:"1px solid #e9ecef",marginBottom:"2rem",flexWrap:"wrap"},children:["overview","my-cards","favorites","study-history"].map(G=>p.jsxs("button",{onClick:()=>w(G),style:{background:"none",border:"none",padding:"1rem 1.5rem",cursor:"pointer",borderBottom:A===G?"2px solid #007bff":"none",color:A===G?"#007bff":"#666",fontWeight:A===G?"600":"400",fontSize:"0.9rem"},children:[G==="overview"&&"📊 Overview",G==="my-cards"&&"📚 My Cards",G==="favorites"&&"⭐ Favorites",G==="study-history"&&"📈 Study History"]},G))}),p.jsxs("div",{style:{minHeight:"400px"},children:[A==="overview"&&p.jsxs("div",{children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"📊 Dashboard Overview"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📚"}),p.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff",marginBottom:"0.5rem"},children:s.length}),p.jsx("div",{style:{color:"#666"},children:"My Flashcards"})]}),p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"⭐"}),p.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107",marginBottom:"0.5rem"},children:c.length}),p.jsx("div",{style:{color:"#666"},children:"Favorites"})]}),p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📈"}),p.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#28a745",marginBottom:"0.5rem"},children:m.length}),p.jsx("div",{style:{color:"#666"},children:"Study Sessions"})]}),p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"🎯"}),p.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#6f42c1",marginBottom:"0.5rem"},children:e?.subjects?.length||0}),p.jsx("div",{style:{color:"#666"},children:"Subjects"})]})]}),p.jsxs("div",{children:[p.jsx("h4",{style:{color:"#333",marginBottom:"1rem"},children:"🆕 Recent Activity"}),m.length>0?p.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[p.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:["Last studied: ",m[0]?.date||"Never"]}),p.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:["Total study time: ",m.reduce((G,fe)=>G+(fe.duration||0),0)," minutes"]})]}):p.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",textAlign:"center",color:"#666"},children:"No study sessions yet. Start studying to see your progress!"})]})]}),A==="my-cards"&&p.jsxs("div",{children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"📚 My Flashcards"}),s.length===0?p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",textAlign:"center",color:"#666"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"📚"}),p.jsx("p",{children:"You haven't created any flashcards yet."}),p.jsx("p",{children:"Start creating to build your knowledge collection!"})]}):p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:s.map((G,fe)=>p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef",position:"relative"},children:[p.jsx("h4",{style:{color:"#333",marginBottom:"0.5rem",fontSize:"1.1rem"},children:G.question.length>100?G.question.substring(0,100)+"...":G.question}),p.jsx("p",{style:{color:"#666",marginBottom:"1rem",fontSize:"0.9rem"},children:G.answer.length>150?G.answer.substring(0,150)+"...":G.answer}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.8rem",color:"#666"},children:[p.jsxs("span",{children:["Subject: ",G.subject||"Not specified"]}),p.jsxs("span",{children:["Difficulty: ",G.difficulty||"Not specified"]})]}),G.tags&&G.tags.length>0&&p.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",marginTop:"0.5rem"},children:G.tags.slice(0,3).map((O,R)=>p.jsxs("span",{style:{background:"#e9ecef",color:"#495057",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem"},children:["#",O]},R))}),p.jsx("button",{onClick:()=>te(G.id),style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#dc3545",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"🗑️"})]},G.id))})]}),A==="favorites"&&p.jsxs("div",{children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"⭐ My Favorites"}),c.length===0?p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",textAlign:"center",color:"#666"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"⭐"}),p.jsx("p",{children:"You haven't favorited any flashcards yet."}),p.jsx("p",{children:"Browse the community collection and save your favorites!"})]}):p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:c.map((G,fe)=>p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef",position:"relative"},children:[p.jsx("h4",{style:{color:"#333",marginBottom:"0.5rem",fontSize:"1.1rem"},children:G.question.length>100?G.question.substring(0,100)+"...":G.question}),p.jsx("p",{style:{color:"#666",marginBottom:"1rem",fontSize:"0.9rem"},children:G.answer.length>150?G.answer.substring(0,150)+"...":G.answer}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.8rem",color:"#666"},children:[p.jsxs("span",{children:["Subject: ",G.subject||"Not specified"]}),p.jsxs("span",{children:["Difficulty: ",G.difficulty||"Not specified"]})]}),p.jsx("button",{onClick:()=>ce(G.id),style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#ffc107",color:"#333",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"❌"})]},G.id))})]}),A==="study-history"&&p.jsxs("div",{children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1.5rem"},children:"📈 Study History"}),m.length===0?p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",textAlign:"center",color:"#666"},children:[p.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"📈"}),p.jsx("p",{children:"No study sessions recorded yet."}),p.jsx("p",{children:"Start studying to track your progress!"})]}):p.jsx("div",{style:{display:"grid",gap:"1rem"},children:m.map((G,fe)=>p.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[p.jsxs("div",{style:{fontWeight:"600",color:"#333"},children:["Study Session #",m.length-fe]}),p.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:G.date||"Unknown date"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",fontSize:"0.9rem",color:"#666"},children:[p.jsxs("div",{children:["Duration: ",G.duration||0," minutes"]}),p.jsxs("div",{children:["Cards Studied: ",G.cardsStudied||0]}),p.jsxs("div",{children:["Accuracy: ",G.accuracy||"N/A","%"]})]})]},fe))})]})]})]}):p.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"🔐 Sign in to Access Dashboard"}),p.jsx("p",{style:{color:"#666"},children:"You need to be signed in to view your personal dashboard."})]})},uD=({selectedTags:r=[],onTagsChange:e,onClose:n,isVisible:s=!1})=>{const[o,c]=de.useState([]),[d,m]=de.useState(""),[v,y]=de.useState(!0),[T,A]=de.useState("");de.useEffect(()=>{s&&w()},[s]);const w=async()=>{try{y(!0);const F=await Yn.getPopularTags(100);c(F)}catch(F){console.error("Error loading tags:",F),c(["calculus","algebra","geometry","trigonometry","statistics","physics","chemistry","biology","computer-science","mathematics","linear-algebra","differential-equations","real-analysis","abstract-algebra","topology","number-theory","combinatorics","probability","optimization"])}finally{y(!1)}},U=F=>{const ie=r.includes(F)?r.filter(te=>te!==F):[...r,F];e(ie)},Y=()=>{if(d.trim()&&!o.includes(d.trim().toLowerCase())){const F=d.trim().toLowerCase();c(ie=>[...ie,F]),r.includes(F)||e([...r,F]),m("")}},re=F=>{const ie=r.filter(te=>te!==F);e(ie)},X=o.filter(F=>F.toLowerCase().includes(T.toLowerCase()));return s?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 px-6 py-4 text-white",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-2xl font-bold",children:"🏷️ Tag Management"}),p.jsx("button",{onClick:n,className:"text-white/80 hover:text-white text-2xl transition-colors",children:"✕"})]}),p.jsx("p",{className:"text-white/90 mt-1",children:"Organize your flashcards with tags"})]}),p.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:[r.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-3",children:"Selected Tags"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(F=>p.jsxs("span",{className:"inline-flex items-center gap-2 bg-primary-100 text-primary-800 px-3 py-2 rounded-full text-sm font-medium",children:["#",F,p.jsx("button",{onClick:()=>re(F),className:"text-primary-600 hover:text-primary-800 transition-colors",children:"✕"})]},F))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-3",children:"Add Custom Tag"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:d,onChange:F=>m(F.target.value),placeholder:"Enter new tag...",className:"input flex-1",onKeyPress:F=>F.key==="Enter"&&Y()}),p.jsx("button",{onClick:Y,className:"btn btn-primary whitespace-nowrap",disabled:!d.trim(),children:"Add Tag"})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-3",children:"Browse Tags"}),p.jsx("input",{type:"text",value:T,onChange:F=>A(F.target.value),placeholder:"Search tags...",className:"input"})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-3",children:["Available Tags (",X.length,")"]}),v?p.jsxs("div",{className:"text-center py-8",children:[p.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),p.jsx("p",{className:"text-neutral-600",children:"Loading tags..."})]}):X.length===0?p.jsxs("div",{className:"text-center py-8 text-neutral-600",children:['No tags found matching "',T,'"']}):p.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-4",children:X.map(F=>p.jsxs("button",{onClick:()=>U(F),className:`p-3 rounded-lg text-sm font-medium transition-all duration-200 text-left ${r.includes(F)?"bg-primary-100 text-primary-800 border-2 border-primary-300":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 border-2 border-transparent"}`,children:["#",F]},F))})]})]}),p.jsx("div",{className:"bg-neutral-50 px-6 py-4 border-t border-neutral-200",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("span",{className:"text-sm text-neutral-600",children:[r.length," tag",r.length!==1?"s":""," selected"]}),p.jsx("button",{onClick:n,className:"btn btn-primary",children:"Done"})]})})]})}):null},hD=({onClose:r,isVisible:e=!1})=>{const[n,s]=de.useState([]),[o,c]=de.useState(0),[d,m]=de.useState(!1),[v,y]=de.useState(!0),[T,A]=de.useState({total:0,due:0,new:0,learning:0,reviewing:0});de.useEffect(()=>{e&&w()},[e]);const w=async()=>{try{y(!0);const ce=(await Yn.getPublicFlashcards(50)).map((G,fe)=>({...G,id:G.id||`card-${fe}`,interval:Math.floor(Math.random()*7)+1,easeFactor:2.5+Math.random()*.5,reviewCount:Math.floor(Math.random()*10),nextReview:new Date(Date.now()+Math.random()*7*24*60*60*1e3),difficulty:Math.floor(Math.random()*5)+1,lastReviewed:new Date(Date.now()-Math.random()*7*24*60*60*1e3)})).sort((G,fe)=>G.nextReview-fe.nextReview);s(ce),U(ce)}catch(ie){console.error("Error loading cards:",ie),s([])}finally{y(!1)}},U=ie=>{const te=new Date,ce={total:ie.length,due:ie.filter(G=>G.nextReview<=te).length,new:ie.filter(G=>G.reviewCount===0).length,learning:ie.filter(G=>G.reviewCount>0&&G.reviewCount<5).length,reviewing:ie.filter(G=>G.reviewCount>=5).length};A(ce)},Y=ie=>{if(o>=n.length)return;const te=n[o],ce=[...n];ie>=3?(te.interval=Math.floor(te.interval*te.easeFactor),te.easeFactor=Math.max(1.3,te.easeFactor+.1)):ie===2?te.interval=Math.max(1,Math.floor(te.interval*1.1)):(te.interval=1,te.easeFactor=Math.max(1.3,te.easeFactor-.2)),te.reviewCount++,te.lastReviewed=new Date,te.nextReview=new Date(Date.now()+te.interval*24*60*60*1e3),ce.sort((G,fe)=>G.nextReview-fe.nextReview),s(ce),U(ce),o<ce.length-1?(c(o+1),m(!1)):(c(0),m(!1))},re=()=>{c(0),m(!1)},X=()=>n[o]||null,F=()=>[{value:1,label:"Again",color:"bg-danger-500 hover:bg-danger-600"},{value:2,label:"Hard",color:"bg-warning-500 hover:bg-warning-600"},{value:3,label:"Good",color:"bg-success-500 hover:bg-success-600"},{value:4,label:"Easy",color:"bg-primary-500 hover:bg-primary-600"},{value:5,label:"Perfect",color:"bg-accent-500 hover:bg-accent-600"}];return e?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 px-6 py-4 text-white",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-2xl font-bold",children:"🎯 Spaced Repetition"}),p.jsx("button",{onClick:r,className:"text-white/80 hover:text-white text-2xl transition-colors",children:"✕"})]}),p.jsx("p",{className:"text-white/90 mt-1",children:"Intelligent study scheduling for optimal learning"})]}),p.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:v?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"w-12 h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),p.jsx("p",{className:"text-neutral-600 text-lg",children:"Loading your study session..."})]}):n.length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"text-6xl mb-4",children:"📚"}),p.jsx("h3",{className:"text-2xl font-bold text-neutral-800 mb-2",children:"No cards available"}),p.jsx("p",{className:"text-neutral-600",children:"Create some flashcards to start studying!"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[p.jsxs("div",{className:"card p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-primary-600",children:T.total}),p.jsx("div",{className:"text-sm text-neutral-600",children:"Total"})]}),p.jsxs("div",{className:"card p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-danger-600",children:T.due}),p.jsx("div",{className:"text-sm text-neutral-600",children:"Due"})]}),p.jsxs("div",{className:"card p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-accent-600",children:T.new}),p.jsx("div",{className:"text-sm text-neutral-600",children:"New"})]}),p.jsxs("div",{className:"card p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-warning-600",children:T.learning}),p.jsx("div",{className:"text-sm text-neutral-600",children:"Learning"})]}),p.jsxs("div",{className:"card p-4 text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-success-600",children:T.reviewing}),p.jsx("div",{className:"text-sm text-neutral-600",children:"Reviewing"})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("span",{className:"text-sm font-medium text-neutral-700",children:["Card ",o+1," of ",n.length]}),p.jsxs("span",{className:"text-sm text-neutral-500",children:[Math.round((o+1)/n.length*100),"% complete"]})]}),p.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:p.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 h-2 rounded-full transition-all duration-300",style:{width:`${(o+1)/n.length*100}%`}})})]}),p.jsx("div",{className:"card p-8 mb-8",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"flex justify-center gap-4 mb-6 text-sm text-neutral-600",children:[p.jsxs("span",{children:["Interval: ",X()?.interval||0," days"]}),p.jsxs("span",{children:["Reviews: ",X()?.reviewCount||0]}),p.jsxs("span",{children:["Ease: ",X()?.easeFactor?.toFixed(1)||"2.5"]})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Question"}),p.jsx("div",{className:"bg-neutral-50 p-6 rounded-xl text-lg text-neutral-700 min-h-[100px] flex items-center justify-center",children:X()?.question||"Loading..."})]}),d&&p.jsxs("div",{className:"mb-8 animate-fade-in",children:[p.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Answer"}),p.jsx("div",{className:"bg-neutral-50 p-6 rounded-xl text-lg text-neutral-700 min-h-[100px] flex items-center justify-center",children:X()?.answer||"No answer available"}),X()?.hints&&X().hints.length>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("h4",{className:"text-lg font-medium text-neutral-700 mb-2",children:"Hints"}),p.jsx("div",{className:"space-y-2",children:X().hints.map((ie,te)=>p.jsxs("div",{className:"bg-accent-50 p-3 rounded-lg text-neutral-700",children:["💡 ",ie]},te))})]})]}),d?p.jsxs("div",{className:"space-y-4",children:[p.jsx("h4",{className:"text-lg font-semibold text-neutral-800",children:"How well did you know this?"}),p.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:F().map(({value:ie,label:te,color:ce})=>p.jsx("button",{onClick:()=>Y(ie),className:`btn text-white px-6 py-3 ${ce}`,children:te},ie))})]}):p.jsx("button",{onClick:()=>m(!0),className:"btn btn-primary text-lg px-8 py-4",children:"Show Answer"})]})}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsx("button",{onClick:re,className:"btn btn-secondary",children:"🔄 Reset Session"}),p.jsx("button",{onClick:r,className:"btn btn-primary",children:"Finish Session"})]})]})})]})}):null},dD=({onClose:r,isVisible:e=!1})=>{const[n,s]=de.useState(""),[o,c]=de.useState(""),[d,m]=de.useState(!1),[v]=de.useState(["A direct sum B","The integral from 0 to infinity of x squared dx","The limit as x approaches 0 of sin x over x","The matrix with rows [1,2] and [3,4]","The set of all real numbers x such that x is greater than 0","The derivative of f with respect to x","The sum from n equals 1 to infinity of 1 over n squared","The product from i equals 1 to n of i","The square root of a squared plus b squared","The absolute value of x minus 3"]),y=async()=>{if(n.trim())try{m(!0);const U=await Vl.convertToLaTeX(n);c(U)}catch(U){console.error("Error converting to LaTeX:",U),c("Error: Could not convert to LaTeX. Please try again.")}finally{m(!1)}},T=U=>{s(U)},A=async()=>{if(o)try{await navigator.clipboard.writeText(o);const U=o;c("Copied to clipboard! ✓"),setTimeout(()=>c(U),2e3)}catch(U){console.error("Failed to copy:",U)}},w=()=>{s(""),c("")};return e?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-accent-600 to-primary-600 px-6 py-4 text-white",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-2xl font-bold",children:"🔄 LaTeX Converter"}),p.jsx("button",{onClick:r,className:"text-white/80 hover:text-white text-2xl transition-colors",children:"✕"})]}),p.jsx("p",{className:"text-white/90 mt-1",children:"Convert natural language to beautiful mathematical notation"})]}),p.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Input"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Natural Language Description"}),p.jsx("textarea",{value:n,onChange:U=>s(U.target.value),placeholder:"e.g., A direct sum B, The integral from 0 to infinity of x squared dx...",className:"textarea h-32",onKeyPress:U=>U.key==="Enter"&&U.ctrlKey&&y()}),p.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Press Ctrl+Enter to convert"})]}),p.jsx("button",{onClick:y,disabled:!n.trim()||d,className:"btn btn-primary w-full mb-4",children:d?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Converting..."]}):"🔄 Convert to LaTeX"}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-lg font-medium text-neutral-700 mb-3",children:"Quick Examples"}),p.jsx("div",{className:"space-y-2",children:v.map((U,Y)=>p.jsx("button",{onClick:()=>T(U),className:"block w-full text-left p-3 bg-neutral-50 hover:bg-neutral-100 rounded-lg text-sm text-neutral-700 transition-colors",children:U},Y))})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Output"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"LaTeX Code"}),p.jsxs("div",{className:"relative",children:[p.jsx("textarea",{value:o,readOnly:!0,placeholder:"LaTeX will appear here...",className:"textarea h-32 font-mono bg-neutral-50"}),o&&p.jsx("button",{onClick:A,className:"absolute top-2 right-2 p-2 bg-white border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",title:"Copy to clipboard",children:"📋"})]})]}),o&&p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Preview"}),p.jsx("div",{className:"bg-neutral-50 p-4 rounded-lg border-2 border-dashed border-neutral-300 min-h-[100px] flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-4xl mb-2",children:"📐"}),p.jsx("p",{className:"text-neutral-600 text-sm",children:"LaTeX preview would render here"}),p.jsx("p",{className:"text-neutral-500 text-xs mt-1",children:"(MathJax integration needed)"})]})})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:w,disabled:!n&&!o,className:"btn btn-secondary w-full",children:"🗑️ Clear All"}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-sm text-neutral-600",children:"💡 Tip: Use this tool to quickly convert mathematical expressions"}),p.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Perfect for creating flashcards with LaTeX support"})]})]})]})]}),p.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-r from-neutral-50 to-primary-50 rounded-xl",children:[p.jsx("h4",{className:"font-semibold text-neutral-800 mb-2",children:"How to use LaTeX in Three-Sided:"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-neutral-600",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Inline math:"})," Wrap with ",p.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"$ $"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Example: $x^2 + y^2 = z^2$"})]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Block math:"})," Wrap with ",p.jsx("code",{className:"bg-white px-2 py-1 rounded",children:"$$ $$"}),p.jsx("br",{}),p.jsxs("span",{className:"text-xs",children:["Example: $$\\int_0^\\infty e^",-x," dx = 1$$"]})]})]})]})]})]})}):null},fD=({onClose:r,isVisible:e=!1})=>{const[n,s]=de.useState("monthly"),[o,c]=de.useState(!1),d={monthly:{price:"£5",period:"month",savings:null,popular:!1},yearly:{price:"£50",period:"year",savings:"£10",popular:!0}},m=[{name:"Spaced Repetition Mode",description:"Advanced algorithm for optimal learning",free:"✅",premium:"✅",icon:"🎯"},{name:"AI Autofill (Hint, Proof, Tags)",description:"Generate content with AI assistance",free:"⚠️ Limited (1/day)",premium:"✅ Unlimited",icon:"🤖"},{name:"AI Auto-Tagging",description:"Automatic tag suggestions",free:"⚠️ Limited (1/day)",premium:"✅ Unlimited",icon:"🏷️"},{name:"AI LaTeX Conversion",description:"Convert text to mathematical notation",free:"✅ Unlimited",premium:"✅ Unlimited",icon:"📐"},{name:"Public Profile & Sharing",description:"Share your flashcards with the community",free:"✅",premium:"✅ + Custom Themes",icon:"👤"},{name:"Advanced Analytics",description:"Detailed learning progress tracking",free:"❌",premium:"✅",icon:"📊"},{name:"Priority Support",description:"Get help when you need it most",free:"❌",premium:"✅",icon:"🎧"},{name:"Export & Backup",description:"Download your data anytime",free:"❌",premium:"✅",icon:"💾"}],v=async T=>{c(!0);try{console.log(`Subscribing to ${T} plan`),await new Promise(A=>setTimeout(A,2e3)),alert(`Successfully subscribed to ${T} plan!`),r()}catch(A){console.error("Subscription error:",A),alert("Subscription failed. Please try again.")}finally{c(!1)}},y=()=>{alert("Billing portal would open here")};return e?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-accent-600 via-primary-600 to-secondary-600 px-6 py-4 text-white",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-2xl font-bold",children:"✨ Premium Features"}),p.jsx("button",{onClick:r,className:"text-white/80 hover:text-white text-2xl transition-colors",children:"✕"})]}),p.jsx("p",{className:"text-white/90 mt-1",children:"Unlock the full potential of Three-Sided"})]}),p.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx("h3",{className:"text-2xl font-bold text-center text-neutral-800 mb-6",children:"Choose Your Plan"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[p.jsx("div",{className:`card p-6 cursor-pointer transition-all duration-200 ${n==="monthly"?"ring-2 ring-primary-500 shadow-glow":"hover:shadow-medium"}`,onClick:()=>s("monthly"),children:p.jsxs("div",{className:"text-center",children:[p.jsx("h4",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Monthly"}),p.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-1",children:"£5"}),p.jsx("div",{className:"text-neutral-600 mb-4",children:"per month"}),p.jsx("div",{className:`w-4 h-4 rounded-full border-2 mx-auto ${n==="monthly"?"bg-primary-500 border-primary-500":"border-neutral-300"}`})]})}),p.jsxs("div",{className:`card p-6 cursor-pointer transition-all duration-200 relative ${n==="yearly"?"ring-2 ring-primary-500 shadow-glow":"hover:shadow-medium"}`,onClick:()=>s("yearly"),children:[p.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:p.jsx("span",{className:"bg-accent-500 text-white px-3 py-1 rounded-full text-xs font-bold",children:"MOST POPULAR"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("h4",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Yearly"}),p.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-1",children:"£50"}),p.jsx("div",{className:"text-neutral-600 mb-2",children:"per year"}),p.jsxs("div",{className:"text-success-600 font-bold mb-4",children:["Save £",d.yearly.savings,"!"]}),p.jsx("div",{className:`w-4 h-4 rounded-full border-2 mx-auto ${n==="yearly"?"bg-primary-500 border-primary-500":"border-neutral-300"}`})]})]})]})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("h3",{className:"text-2xl font-bold text-center text-neutral-800 mb-6",children:"Feature Comparison"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b-2 border-neutral-200",children:[p.jsx("th",{className:"text-left p-4 font-semibold text-neutral-800",children:"Feature"}),p.jsx("th",{className:"text-center p-4 font-semibold text-neutral-800",children:"Free"}),p.jsx("th",{className:"text-center p-4 font-semibold text-neutral-800 bg-gradient-to-r from-primary-50 to-accent-50",children:"Premium"})]})}),p.jsx("tbody",{children:m.map((T,A)=>p.jsxs("tr",{className:"border-b border-neutral-100 hover:bg-neutral-50",children:[p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-2xl",children:T.icon}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-neutral-800",children:T.name}),p.jsx("div",{className:"text-sm text-neutral-600",children:T.description})]})]})}),p.jsx("td",{className:"p-4 text-center",children:p.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T.free==="✅"?"bg-success-100 text-success-800":T.free==="⚠️ Limited (1/day)"?"bg-warning-100 text-warning-800":"bg-neutral-100 text-neutral-600"}`,children:T.free})}),p.jsx("td",{className:"p-4 text-center bg-gradient-to-r from-primary-50 to-accent-50",children:p.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800",children:T.premium})})]},A))})]})})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("h3",{className:"text-2xl font-bold text-center text-neutral-800 mb-6",children:"Why Go Premium?"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"card p-6 text-center",children:[p.jsx("div",{className:"text-4xl mb-4",children:"🚀"}),p.jsx("h4",{className:"text-lg font-bold text-neutral-800 mb-2",children:"Accelerate Learning"}),p.jsx("p",{className:"text-neutral-600",children:"Unlimited AI assistance helps you create better flashcards faster"})]}),p.jsxs("div",{className:"card p-6 text-center",children:[p.jsx("div",{className:"text-4xl mb-4",children:"📈"}),p.jsx("h4",{className:"text-lg font-bold text-neutral-800 mb-2",children:"Track Progress"}),p.jsx("p",{className:"text-neutral-600",children:"Advanced analytics show your learning journey and improvement"})]}),p.jsxs("div",{className:"card p-6 text-center",children:[p.jsx("div",{className:"text-4xl mb-4",children:"🎯"}),p.jsx("h4",{className:"text-lg font-bold text-neutral-800 mb-2",children:"Study Smarter"}),p.jsx("p",{className:"text-neutral-600",children:"Spaced repetition algorithm optimizes your study schedule"})]})]})]}),p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx("button",{onClick:()=>v(n),disabled:o,className:"btn btn-primary text-lg px-12 py-4 shadow-glow hover:shadow-glow/80",children:o?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):`Go Premium - ${d[n].price}/${d[n].period}`}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsx("button",{onClick:y,className:"btn btn-secondary",children:"Manage Subscription"}),p.jsx("button",{onClick:r,className:"btn btn-secondary",children:"Maybe Later"})]})]}),p.jsx("div",{className:"mt-8 p-4 bg-neutral-50 rounded-xl text-center",children:p.jsx("p",{className:"text-sm text-neutral-600",children:"💳 Secure payment powered by Stripe • Cancel anytime • 30-day money-back guarantee"})})]})]})}):null};function mD(){const[r,e]=de.useState("home"),[n,s]=de.useState({hasProfile:!1,hasCards:!1}),[o,c]=de.useState(!1),[d,m]=de.useState(!1),[v,y]=de.useState(!1),[T,A]=de.useState(!1),{user:w,signInWithGoogle:U,logout:Y}=dc();de.useEffect(()=>{w&&re()},[w]);const re=async()=>{try{const O=await Hs.checkOnboardingStatus(w.uid);s(O)}catch(O){console.error("Error checking onboarding status:",O)}},X=async()=>{try{await U()}catch(O){console.error("Error signing in:",O)}},F=async()=>{try{await Y()}catch(O){console.error("Error signing out:",O)}},ie=async O=>{if(!w){await X();return}if(O==="profile"&&!n.hasProfile)try{await Hs.createUserProfile(w.uid,{email:w.email,displayName:w.displayName,photoURL:w.photoURL}),await re()}catch(R){console.error("Error creating profile:",R)}},te=async()=>{await re(),e("home")},ce=()=>{switch(r){case"create":return p.jsx(sD,{onCardCreated:te,onClose:()=>e("home")});case"study":return p.jsx(aD,{});case"search":return p.jsx(oD,{});case"leaderboard":return p.jsx(lD,{});case"dashboard":return p.jsx(cD,{});default:return fe()}},G=()=>p.jsx("div",{className:"navbar",children:p.jsxs("div",{className:"container py-4 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:"/files/three-sided_logo.png",alt:"Three-Sided",width:"36",height:"36",style:{borderRadius:"8px"}}),p.jsx("span",{className:"text-gradient text-xl font-bold",children:"Three‑Sided"})]}),p.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[p.jsx("button",{className:"btn btn-secondary",onClick:()=>e("search"),children:"Search"}),p.jsx("button",{className:"btn btn-secondary",onClick:()=>e("leaderboard"),children:"Leaderboard"}),p.jsx("button",{className:"btn btn-secondary",onClick:()=>e("dashboard"),children:"Dashboard"}),w?p.jsx("button",{className:"btn btn-primary",onClick:F,children:"Sign out"}):p.jsx("button",{className:"btn btn-primary",onClick:X,children:"Sign in"})]})]})}),fe=()=>p.jsxs(p.Fragment,{children:[p.jsxs("section",{className:"hero-mesh",children:[p.jsx("div",{className:"hero-overlay"}),p.jsxs("div",{className:"container py-24 text-center",children:[p.jsx("div",{className:"badge mb-4 reveal-up",children:"React Preview"}),p.jsx("h1",{className:"text-5xl sm:text-6xl font-extrabold tracking-tight text-gradient reveal-up reveal-delay-1",children:"Master Any Subject with Three‑Sided"}),p.jsx("p",{className:"subtle max-w-2xl mx-auto mt-5 text-lg reveal-up reveal-delay-2",children:"Create, study, and share flashcards with AI assistance. Learn faster with spaced repetition and a community library."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-8 justify-center reveal-up reveal-delay-3",children:[p.jsx("button",{onClick:()=>e("search"),className:"btn btn-primary",children:"🔍 Search Flashcards"}),p.jsx("button",{onClick:()=>e("leaderboard"),className:"btn btn-secondary",children:"🏆 View Leaderboard"})]})]})]}),p.jsxs("div",{className:"container section",children:[w&&p.jsx("div",{className:"card hover-lift p-8 mb-12 gradient-border",children:p.jsxs("div",{className:"p-1 rounded-2xl",children:[p.jsx("h2",{className:"text-3xl font-bold text-gradient mb-6",children:"🚀 Quick Actions"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx("button",{onClick:()=>e("create"),className:"btn btn-success h-auto py-5 flex-col gap-2",children:"✏️ Create Flashcard"}),p.jsx("button",{onClick:()=>e("study"),className:"btn btn-primary h-auto py-5 flex-col gap-2",children:"📚 Study Mode"}),p.jsx("button",{onClick:()=>e("search"),className:"btn btn-accent h-auto py-5 flex-col gap-2",children:"🔍 Search & Discover"}),p.jsx("button",{onClick:()=>e("dashboard"),className:"btn btn-warning h-auto py-5 flex-col gap-2",children:"🎯 My Dashboard"})]})]})}),p.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-12 lg:grid-cols-3",children:[p.jsxs("div",{className:"card hover-lift p-8 text-center reveal-up",children:[p.jsx("div",{className:"text-6xl mb-4",children:"👥"}),p.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Community‑Driven"}),p.jsx("p",{className:"subtle",children:"Discover and share flashcards with students worldwide. Learn from the community's collective knowledge."})]}),p.jsxs("div",{className:"card hover-lift p-8 text-center reveal-up reveal-delay-1",children:[p.jsx("div",{className:"text-6xl mb-4",children:"🧠"}),p.jsx("h3",{className:"text-2xl font-bold mb-3",children:"AI‑Powered Assistance"}),p.jsx("p",{className:"subtle",children:"Get AI‑generated hints and proofs to help you create better flashcards faster."})]}),p.jsxs("div",{className:"card hover-lift p-8 text-center reveal-up reveal-delay-2",children:[p.jsx("div",{className:"text-6xl mb-4",children:"📐"}),p.jsx("h3",{className:"text-2xl font-bold mb-3",children:"LaTeX Support"}),p.jsx("p",{className:"subtle",children:"Beautiful mathematical notation with full LaTeX rendering. Use $...$ for inline and $$...$$ for blocks."})]})]}),p.jsxs("div",{className:"card hover-lift p-8 mb-12 reveal-up",children:[p.jsx("h2",{className:"text-3xl font-bold text-gradient mb-2",children:"🚀 Get Started"}),p.jsx("p",{className:"subtle mb-6",children:"Complete these quick steps to start sharing flashcards."}),p.jsxs("div",{className:"stepper",children:[p.jsxs("div",{className:`step ${w?"ok":""}`,onClick:()=>ie("login"),children:[p.jsx("div",{className:"step-icon",children:"1"}),p.jsxs("div",{className:"step-body",children:[p.jsx("div",{className:"step-title",children:w?"Signed in":"Sign in to your account"}),p.jsx("div",{className:"step-sub",children:w?`Welcome, ${w.displayName||w.email}!`:"Use Google sign-in to get started."})]})]}),p.jsxs("div",{className:`step ${n.hasProfile?"ok":""}`,onClick:w&&!n.hasProfile?()=>ie("profile"):void 0,children:[p.jsx("div",{className:"step-icon",children:"2"}),p.jsxs("div",{className:"step-body",children:[p.jsx("div",{className:"step-title",children:n.hasProfile?"Profile created":"Create your public profile"}),p.jsx("div",{className:"step-sub",children:n.hasProfile?"Your profile is ready.":"Set a display name and avatar."})]})]}),p.jsxs("div",{className:`step ${n.hasCards?"ok":""}`,children:[p.jsx("div",{className:"step-icon",children:"3"}),p.jsxs("div",{className:"step-body",children:[p.jsx("div",{className:"step-title",children:n.hasCards?"First card published":"Publish your first card"}),p.jsx("div",{className:"step-sub",children:n.hasCards?"Nice work!":"Create a flashcard and share it publicly."})]})]})]}),!n.hasCards&&p.jsx("div",{className:"text-center mt-4",children:p.jsx("button",{onClick:()=>e("create"),className:"btn btn-primary",children:"✏️ Create your first card"})})]}),p.jsxs("div",{className:"card hover-lift p-12 mb-12 text-center reveal-up",style:{background:"linear-gradient(135deg, rgba(37,99,235,0.18), rgba(124,58,237,0.18))"},children:[p.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),p.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Looking for a specific flashcard?"}),p.jsx("p",{className:"subtle mb-6",children:"Search our community flashcard database for exactly what you need. Find cards from thousands of STEM students worldwide."}),p.jsx("button",{onClick:()=>e("search"),className:"btn btn-secondary",children:"🔎 Search Community Flashcards"})]}),p.jsx("footer",{className:"reveal-up",style:{marginTop:"2rem"},children:p.jsx("div",{className:"container",style:{padding:"2rem 0",borderTop:"1px solid rgba(255,255,255,0.08)"},children:p.jsxs("div",{className:"subtle",style:{display:"flex",flexWrap:"wrap",gap:"1rem",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:["© ",new Date().getFullYear()," Three‑Sided"]}),p.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[p.jsx("a",{className:"subtle",href:"mailto:amirbattye@gmail.com",children:"Contact"}),p.jsx("a",{className:"subtle",href:"/latex_guide.html",target:"_blank",rel:"noreferrer",children:"LaTeX Guide"})]})]})})})]})]});return p.jsxs("div",{className:"min-h-screen",children:[r==="home"?p.jsx(G,{}):p.jsx("div",{className:"navbar",children:p.jsxs("div",{className:"container py-3 flex items-center justify-between",children:[p.jsx("button",{onClick:()=>e("home"),className:"btn btn-secondary",children:"← Back to Home"}),p.jsxs("h1",{className:"text-gradient text-xl font-bold",children:[r==="create"&&"✏️ Create Flashcard",r==="study"&&"📚 Study Mode",r==="search"&&"🔍 Search & Discovery",r==="leaderboard"&&"🏆 Leaderboard & Stats",r==="dashboard"&&"🎯 My Dashboard"]}),p.jsx("div",{style:{width:"90px"}})]})}),ce(),p.jsx(uD,{isVisible:o,onClose:()=>c(!1),selectedTags:[],onTagsChange:()=>{}}),p.jsx(hD,{isVisible:d,onClose:()=>m(!1)}),p.jsx(dD,{isVisible:v,onClose:()=>y(!1)}),p.jsx(fD,{isVisible:T,onClose:()=>A(!1)})]})}Aw.createRoot(document.getElementById("root")).render(p.jsx(de.StrictMode,{children:p.jsx(iD,{children:p.jsx(mD,{})})}));
